(window.webpackJsonpEasylogicStudio=window.webpackJsonpEasylogicStudio||[]).push([[9],{135:function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"DEFAULT_LABEL_TEXT",(function(){return Ve})),i.d(s,"labelStyle",(function(){return _e})),i.d(s,"strokeLabelStyle",(function(){return Ue})),i.d(s,"label",(function(){return qe})),i.d(s,"bubbleLabel",(function(){return Ze}));var n={};i.r(n),i.d(n,"clipRectArea",(function(){return dt})),i.d(n,"pathRect",(function(){return ht})),i.d(n,"circle",(function(){return ct})),i.d(n,"line",(function(){return ut})),i.d(n,"rect",(function(){return pt})),i.d(n,"arc",(function(){return mt}));var o={};i.r(o),i.d(o,"TICK_SIZE",(function(){return gt})),i.d(o,"tick",(function(){return vt}));var a={};i.r(a),i.d(a,"dataLabel",(function(){return Yi})),i.d(a,"drawBubbleLabel",(function(){return Ni})),i.d(a,"getBubbleArrowPoints",(function(){return Hi}));var r={};i.r(r),i.d(r,"SPECTRUM_LEGEND_LABEL_HEIGHT",(function(){return $i})),i.d(r,"spectrumLegendBar",(function(){return Fi})),i.d(r,"spectrumLegendTooltip",(function(){return Gi})),i.d(r,"spectrumLegend",(function(){return Vi})),i.d(r,"spectrumTooltip",(function(){return _i}));var l={};i.r(l),i.d(l,"polygon",(function(){return Ds}));var d={};i.r(d),i.d(d,"scatterSeries",(function(){return Rs}));var h={};i.r(h),i.d(h,"LEGEND_ITEM_MARGIN_X",(function(){return Bs})),i.d(h,"LEGEND_MARGIN_X",(function(){return Ps})),i.d(h,"LEGEND_CHECKBOX_SIZE",(function(){return Ls})),i.d(h,"LEGEND_ICON_SIZE",(function(){return Es})),i.d(h,"getLegendItemHeight",(function(){return Ws})),i.d(h,"legend",(function(){return Ys}));var c={};i.r(c),i.d(c,"linePoints",(function(){return oa})),i.d(c,"areaPoints",(function(){return aa}));var u={};i.r(u),i.d(u,"exportMenuButton",(function(){return ra}));var p={};i.r(p),i.d(p,"backButton",(function(){return la})),i.d(p,"resetButton",(function(){return da}));var m={};i.r(m),i.d(m,"sector",(function(){return pa}));var g={};i.r(g),i.d(g,"circleLegend",(function(){return Qa}));var v={};function f(e){return!b(e)&&!x(e)}function b(e){return void 0===e}function x(e){return null===e}function y(e){return"boolean"==typeof e}function S(e){return"number"==typeof e}function w(e){return"string"==typeof e}function O(e){return S(e)&&isFinite(e)&&Math.floor(e)===e}function M(e){return"object"==typeof e&&null!==e}function A(e){return"function"==typeof e}function k(e,t){for(const i in e)e.hasOwnProperty(i)&&t(e[i],i)}function C(e,t,i){b(t)&&(t=e||0,e=0),i=i||1;const s=[];if(t){const n=i<0?-1:1;for(t*=n;e*n<t;e+=i)s.push(e)}return s}function T(e,t,i){if("number"==typeof i&&e[i]!==t)return!1;for(const i of e)if(i===t)return!0;return!1}function D(e,...t){const i={};return Object.keys(e).forEach(s=>{T(t,s)&&(i[s]=e[s])}),i}function j(e,...t){const i={};return Object.keys(e).forEach(s=>{T(t,s)||(i[s]=e[s])}),i}function R(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1){if(b(e)||x(e))return null;e=e[t[s]]}return e}function B(e,t=0){let i;return function(...s){window.clearTimeout(i),i=window.setTimeout(()=>{e(...s)},t)}}function P(e,t){const i=Object.assign({},e);return Object.keys(t).forEach(e=>{M(i[e])?Array.isArray(t[e])?i[e]=L(t[e]):i.hasOwnProperty(e)?i[e]=P(i[e],t[e]):i[e]=E(t[e]):i[e]=t[e]}),i}function L(e){return e.map(e=>M(e)?Array.isArray(e)?L(e):E(e):e)}function E(e){const t={},i=Object.keys(e);return i.length?(i.forEach(i=>{M(e[i])?t[i]=Array.isArray(e[i])?L(e[i]):E(e[i]):t[i]=e[i]}),t):e}function W(e,t){return O(e)?Number(e)-Number(t):new Date(e).getTime()-new Date(t).getTime()}function z(e,t){return e-t}function I(e){return e.length?e[0]:void 0}function Y(e){return e.length?e[e.length-1]:void 0}function N(e=[]){return e.some(e=>Number(e)<0)}function H(e){return e.reduce((e,t)=>e+t,0)}function $(e){return e.every(e=>Number(e)<=0)}function F(e){var t;return null===(t=e)||void 0===t?void 0:t.find(e=>null!==e)}function G(e){return Number(e.substr(0,e.length-1))}function X(e,t){return S(t)?t:Number((e*G(t)/100).toFixed(2))}function V(e){return S(e)?e:0}function _(e){return"auto"===e}i.r(v),i.d(v,"boxPlot",(function(){return Lr}));const U="It works only when the selectable option is true.",q="The index value is invalid.",K="Source object is observable already",Z="circleLegend is only possible when bubble series is present",J=e=>`There's no ${e} data!`,Q=e=>`Brush don't exist in painter: ${e}`,ee="DashSegments option is available from IE11 and above.",te="The seriesIndex value is invalid",ie='To use auto layout, the width or height of the container must be specified as a value such as "%" or "vh", "vw".';let se=null,ne=null;const oe=[];let ae=!1;function re(e){const t=()=>{ne!==t&&(ae||!x(ne)?(oe.includes(t)&&oe.splice(oe.indexOf(t),1),oe.push(t)):x(ne)&&(ne=t,e(),ne=null,le()))};return t.deps=[],se=t,se(),se=null,()=>{t.deps.forEach(e=>{const i=e.findIndex(e=>e===t);e.splice(i,1)}),t.deps=[]}}function le(){if(oe.length){const e=oe.shift();e&&e()}}function de(e){return"object"==typeof e&&e.__toastUIChartOb__}function he(e,t=e){if(de(t))throw new Error(K);de(e)||Object.defineProperty(e,"__toastUIChartOb__",{enumerable:!1});for(const i in t){if(!t.hasOwnProperty(i))continue;const s=[];let n=t[i];const o=Object.getOwnPropertyDescriptor(t,i),a=o&&o.get,r=o&&o.set;Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return se===me?{target:e,key:i,value:n,obs:s}:(ae||!se||s.includes(se)||(s.push(se),se.deps.push(s)),n)},set:function(t){const o=n;r?(r.call(e,t),n=a?a.call(e):e[i]):n=t,o!==n&&pe(s)}}),"object"!=typeof e[i]||Array.isArray(e[i])||he(e[i])}return e}function ce(e,t){if(de(t))throw new Error(K);return he(e,t)}function ue(e,t){const i=me(e,t);i&&pe(i.obs)}function pe(e){e.forEach(e=>e())}function me(e,t){se=me;const i=e[t];return se=null,"object"==typeof i&&i.hasOwnProperty("target")&&i.hasOwnProperty("obs")?i:null}function ge(e){return JSON.parse(JSON.stringify(e))}class ve{constructor(e){this.computed={},this.actions={},this.initStoreState=E(e),this.setRootState({})}setRootState(e){he(e),this.state=e}setComputed(e,t,i=this.computed){const s=e.split("."),n=s.splice(s.length-1,1)[0];!function(e,t,i){let s;const n={};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:()=>s}),ce(e,n),re(()=>{const n=s;s=i(),n!==s&&(e[t]=s)})}(function(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1)b(e[t[s]])&&(e[t[s]]={}),e=e[t[s]];return e}(i,s),n,t.bind(null,this.state,this.computed))}setWatch(e,t){return function(e,t,i){const s=t.split("."),n=s.splice(s.length-1,1)[0],o=R(e,s);if(!o)return null;const a=me(o,n);if(!a)return null;const r=()=>{i(o[n])};return a.obs.push(r),()=>{const e=a.obs.findIndex(e=>e===r);e>-1&&a.obs.splice(e,1)}}(this,e,t)}setAction(e,t){this.actions[e]=t}dispatch(e,t,i){i?(ae=!0,(()=>{this.actions[e].call(this,this,t)})(),ae=!1,le()):this.actions[e].call(this,this,t)}observe(e){return re(e.bind(this,this.state,this.computed))}observable(e){return he(e)}notifyByPath(e){!function(e,t){const i=t.split("."),s=i.splice(i.length-1,1)[0],n=R(e,i);n&&ue(n,s)}(this,e)}notify(e,t){ue(e,t)}setModule(e,t){if(t||(e=(t=e).name),t.state){const e="function"==typeof t.state?t.state(this.initStoreState):t.state;fe(this.state,e)}t.computed&&k(t.computed,(e,t)=>{this.setComputed(t,e)}),t.watch&&k(t.watch,(e,t)=>{this.setWatch(t,e)}),t.action&&k(t.action,(e,t)=>{this.setAction(t,e)}),t.observe&&k(t.observe,e=>{this.observe(e)})}setValue(e,t,i){fe(e,{[t]:i})}}function fe(e,t){const i={};for(const s in t)t.hasOwnProperty(s)&&(b(e[s])?i[s]=t[s]:"object"!=typeof t[s]||Array.isArray(t[s])?e[s]=t[s]:fe(e[s],t[s]));Object.keys(i).length&&ce(e,i)}function be(e,{width:t,height:i}){return{width:0===t?e.offsetWidth:t,height:0===i?e.offsetHeight:i}}var xe={name:"root",state:({options:e})=>{var t,i,s,n,o,a,r,l;return{chart:Object.assign(Object.assign({},e.chart),{width:V(null===(i=null===(t=e)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width),height:V(null===(n=null===(s=e)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height)}),usingContainerSize:{width:_(null===(a=null===(o=e)||void 0===o?void 0:o.chart)||void 0===a?void 0:a.width),height:_(null===(l=null===(r=e)||void 0===r?void 0:r.chart)||void 0===l?void 0:l.height)},container:{}}},action:{setChartSize({state:e},t){e.chart.width=t.width,e.chart.height=t.height,this.notify(e,"chart")},initChartSize({state:e},t){const{width:i,height:s}=e.chart;0!==i&&0!==s||(t.parentNode?this.dispatch("setChartSize",be(t,{width:i,height:s})):setTimeout(()=>{this.dispatch("setChartSize",be(t,{width:i,height:s}))},0))},setUsingContainerSize({state:e},{width:t,height:i}){e.usingContainerSize.width=t,e.usingContainerSize.height=i}}};function ye(e){if(e)return M(e)?e.format:"YY-MM-DD hh:mm:ss"}const Se=/[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*mm|[\\]*m|[\\]*ss|[\\]*s|[\\]*A/gi,we=["Invalid month","January","February","March","April","May","Jun","Jul","August","September","October","November","December"],Oe=[0,31,28,31,30,31,30,31,31,30,31,30,31],Me={M:e=>Number(e.month),MM:e=>{const t=e.month;return Number(t)<10?`0${t}`:t},MMM:e=>we[Number(e.month)].substr(0,3),MMMM:e=>we[Number(e.month)],D:e=>Number(e.date),d:e=>Me.D(e),DD:e=>{const t=e.date;return Number(t)<10?`0${t}`:t},dd:e=>Me.DD(e),YY:e=>Number(e.year)%100,yy:e=>Me.YY(e),YYYY:e=>{let t="20";const i=e.year;return i>69&&i<100&&(t="19"),Number(i)<100?t+String(i):i},yyyy:e=>Me.YYYY(e),A:e=>e.meridiem,a:e=>e.meridiem,hh:e=>{const t=e.hour;return Number(t)<10?"0"+t:t},HH:e=>Me.hh(e),h:e=>String(Number(e.hour)),H:e=>Me.h(e),m:e=>String(Number(e.minute)),mm:e=>{const t=e.minute;return Number(t)<10?`0${t}`:t},s:e=>String(Number(e.second)),ss:e=>{const t=e.second;return Number(t)<10?`0${t}`:t}};function Ae(e,t,i){var s,n,o;const a=null!=(n=null===(s=i)||void 0===s?void 0:s.meridiemSet.AM)?n:"AM",r=(null===(o=i)||void 0===o?void 0:o.meridiemSet.PM)||"PM";let l;if(t instanceof Date)l={year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()};else{const{year:e,month:i,hour:s,minute:n,second:o}=t;l={year:e,month:i,date:t.date,hour:s,minute:n,second:o}}return function(e,t,i){const s=Number(e),n=Number(t),o=Number(i);if(!(s>-1&&s<100||s>1969&&s<2070)||!(n>0&&n<13))return!1;const a=function(e,t){return 2===e&&t%4==0&&(t%100!=0||t%400==0)}(n,s)?29:Oe[n];return o>0&&o<=a}(l.year,l.month,l.date)?(l.meridiem="",/([^\\]|^)[aA]\b/.test(e)&&(l.hour>12&&(l.hour%=12),0===l.hour&&(l.hour=12),l.meridiem=l.hour>11?r:a),e.replace(Se,e=>e.indexOf("\\")>-1?e.replace(/\\/,""):Me[e](l)||"")):""}function ke(e,t){return e.reduce((e,i)=>w(i)?Object.assign(Object.assign({},e),t[i]):Object.assign(Object.assign({},e),i),{})}function Ce(e,t){return`translate(${e}px,${t}px)`}function Te(e){const{fontFamily:t,fontSize:i,fontWeight:s}=e;return`${s} ${i}px ${t}`}function De(e){const{color:t,fontSize:i,fontFamily:s,fontWeight:n}=e;return`font-weight: ${n}; font-family: ${s}; font-size: ${i}px; color: ${t};`}function je(e){return Te(D(e,"fontFamily","fontWeight","fontSize"))}function Re(e,t){e.setLineDash&&e.setLineDash(t)}function Be(e){return Math.floor(.15*e)}function Pe(e,t){e.fillStyle=t,e.fill()}function Le(e,t){const{lineWidth:i,strokeStyle:s}=t;s&&(e.strokeStyle=s),i&&(e.lineWidth=i),e.stroke()}const Ee=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,We=/rgb\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)/,ze=/rgba\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}), ?(1|0?\.?\d+)\)/,Ie={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ye(e,t){if(e.length>t)return e;let i=e;return C(0,t-1).forEach(e=>{i="0"+i}),i.slice(-1*t)}function Ne(e){return Ee.test(e)}function He(e){return Ie[e.toLowerCase()]||e}
// @license RGB <-> HSV conversion utilities based off of http://www.cs.rit.edu/~ncs/color/t_convert.html
function $e(e){const t=He(e);return!!Ne(t)&&t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,s)=>"#"+t+t+i+i+s+s).substring(1).match(/.{2}/g).map(e=>parseInt(e,16))}function Fe(e,t){const i=He(e);if(Ne(i)){const[e,s,n]=$e(i);return`rgba(${e}, ${s}, ${n}, ${t})`}if(We.test(e)){const i=We.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}if(ze.test(e)){const i=ze.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}return e}function Ge(e){if(ze.test(e)){const t=ze.exec(e);return Number(t[4])}return 1}function Xe(e,t=1){return Fe(e,Ge(e)*t)}const Ve="normal 11px Arial",_e={default:{font:Ve,fillStyle:"#333333",textAlign:"left",textBaseline:"middle"},title:{textBaseline:"top"},axisTitle:{textBaseline:"top"},rectLabel:{font:Ve,fillStyle:"rgba(0, 0, 0, 0.3)",textAlign:"center",textBaseline:"middle"}},Ue={none:{lineWidth:1,strokeStyle:"rgba(255, 255, 255, 0)"},stroke:{lineWidth:4,strokeStyle:"rgba(255, 255, 255, 0.5)"}};function qe(e,t){var i,s,n,o,a,r,l,d;const{x:h,y:c,text:u,style:p,stroke:m,opacity:g,radian:v,rotationPosition:f}=t;if(p){const t=ke(p,_e);Object.keys(t).forEach(i=>{e[i]="fillStyle"===i&&S(g)?Xe(t[i],g):t[i]})}if(e.save(),v&&(e.translate(null!=(s=null===(i=f)||void 0===i?void 0:i.x)?s:h,null!=(o=null===(n=f)||void 0===n?void 0:n.y)?o:c),e.rotate(v),e.translate(-(null!=(r=null===(a=f)||void 0===a?void 0:a.x)?r:h),-(null!=(d=null===(l=f)||void 0===l?void 0:l.y)?d:c))),m){const t=ke(m,Ue),i=Object.keys(t);i.forEach(i=>{e[i]="strokeStyle"===i&&S(g)?Xe(t[i],g):t[i]}),i.length&&e.strokeText(u,h,c)}e.fillText(u,h,c),e.restore()}const Ke={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}};function Ze(e,t){var i,s,n,o;const{radian:a=0,rotationPosition:r,bubble:{x:l,y:d,width:h,height:c,radius:u=0,lineWidth:p=1,direction:m,points:g=[],fill:v="#fff",strokeStyle:f="rgba(0, 0, 0, 0)",style:b=null}}=t;if(h>0&&c>0&&function(e,t){const{x:i,y:s,width:n,height:o,style:a,radius:r=0,strokeStyle:l,fill:d,lineWidth:h=1,points:c=[],direction:u="",radian:p,rotationPosition:m}=t,g=i+n,v=s+o;e.beginPath(),e.save(),p&&m&&(e.translate(m.x,m.y),e.rotate(p),e.translate(-m.x,-m.y));e.moveTo(i+r,s),"top"===u&&Je(e,c);e.lineTo(g-r,s),e.quadraticCurveTo(g,s,g,s+r),"right"===u&&Je(e,c);e.lineTo(g,s+o-r),e.quadraticCurveTo(g,v,g-r,v),"bottom"===u&&Je(e,c);e.lineTo(i+r,v),e.quadraticCurveTo(i,v,i,v-r),"left"===u&&Je(e,c);if(e.lineTo(i,s+r),e.quadraticCurveTo(i,s,i+r,s),a){const t=ke(a,Ke);Object.keys(t).forEach(i=>{e[i]=t[i]})}d&&Pe(e,d);l&&Le(e,{strokeStyle:l,lineWidth:h});e.restore()}(e,{x:l,y:d,radius:u,width:h,height:c,style:b,fill:v,strokeStyle:f,lineWidth:p,direction:m,points:g,radian:a,rotationPosition:{x:(s=null===(i=r)||void 0===i?void 0:i.x,null!=s?s:l),y:(o=null===(n=r)||void 0===n?void 0:n.y,null!=o?o:d)}}),t.label.text){const{x:i,y:s,text:n,strokeStyle:o="rgba(0, 0, 0, 0)",style:l}=t.label;e.shadowColor="rgba(0, 0, 0, 0)",qe(e,{type:"label",x:i,y:s,text:n,style:l,stroke:[{strokeStyle:o}],radian:a,rotationPosition:r})}}function Je(e,t){t.length&&(e.lineTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y))}function Qe(e,t){return Object.assign({anchor:e},D(t,"x","y","radius","degree","drawingStartAngle"))}function et(e,t=-90){let i=0;return e%360==0?i=Math.PI/180*t:e>=0&&e<360&&(i=Math.PI/180*(e+t)),i}function tt(e){const{anchor:t,x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},drawingStartAngle:l}=e;return it(i,s,"outer"===t?o:(o+n)/2,et(a+(r-a)/2,l))}function it(e,t,i,s){return{x:Math.round(e+i*Math.cos(s)),y:Math.round(t+i*Math.sin(s))}}function st(e,t,i,s){return e?t<=s&&i>=s:t>=s&&i<=s}function nt({width:e,height:t},i=!1,s=0,n=0){let o;return o=i?Math.min(e/2,t)-n:e>t?t/2-n:e/2-s,Math.max(o,10)}function ot(e,t,i=!0){const{totalAngle:s,degree:{start:n,end:o},drawingStartAngle:a}=e;let r="center";if("outer"!==t)return r;const l=et(0,a),d=et(s/2,a),h=function(e,t,i,s){return et(s?(t+e)/2:e,i)}(n,o,a,i);return a>=-90&&a<90?l<h&&d>h?r="left":d<h&&(r="right"):l<h&&d>h?r="right":d<h&&(r="left"),r}function at(e,t){return e.reduce((i,s,n)=>(n&&i.push({inner:s+t,outer:e[n-1]-t}),n===e.length-1&&i.push({inner:t,outer:s-t}),i),[])}const rt={default:{strokeStyle:"#ffffff",lineWidth:2},plot:{lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.05)"}},lt={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6}};function dt(e,t){const{x:i,y:s,width:n,height:o}=t;e.beginPath(),e.rect(i,s,n,o),e.clip()}function ht(e,t){const{x:i,y:s,width:n,height:o,radius:a=0,stroke:r="black",fill:l="",lineWidth:d=1}=t;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+n-a,s),e.quadraticCurveTo(i+n,s,i+n,s+a),e.lineTo(i+n,s+o-a),e.quadraticCurveTo(i+n,s+o,i+n-a,s+o),e.lineTo(i+a,s+o),e.quadraticCurveTo(i,s+o,i,s+o-a),e.lineTo(i,s+a),e.quadraticCurveTo(i,s,i+a,s),e.closePath(),l&&Pe(e,l),Le(e,{lineWidth:d,strokeStyle:r})}function ct(e,t){const{x:i,y:s,style:n,radius:o,color:a,angle:r={start:0,end:2*Math.PI},borderWidth:l,borderColor:d}=t;if(e.beginPath(),n){const t=ke(n,rt);Object.keys(t).forEach(i=>{e[i]=t[i]})}e.arc(i,s,o,r.start,r.end,!0),Pe(e,a),Le(e,{lineWidth:l,strokeStyle:d}),e.closePath()}function ut(e,t){const{x:i,y:s,x2:n,y2:o,strokeStyle:a,lineWidth:r,dashSegments:l}=t;e.beginPath(),l&&Re(e,l),e.moveTo(i,s),e.lineTo(n,o),Le(e,{strokeStyle:a,lineWidth:r}),e.closePath()}function pt(e,t){const{x:i,y:s,width:n,height:o,style:a,thickness:r=0,color:l,borderColor:d="#ffffff"}=t;if(e.beginPath(),a){const t=ke(a,lt);Object.keys(t).forEach(i=>{e[i]=t[i]})}r&&(e.fillStyle=d,e.fillRect(i-r,s-r,n+2*r,o+2*r),e.shadowColor="rgba(0, 0, 0, 0)"),e.rect(i,s,n,o),Pe(e,l)}function mt(e,t){const{x:i,y:s,angle:{start:n,end:o},borderWidth:a,borderColor:r,drawingStartAngle:l,radius:d,clockwise:h=!0}=t;e.beginPath();const c=et(n,l),u=et(o,l);e.arc(i,s,d,c,u,!h),Le(e,{lineWidth:a,strokeStyle:r}),e.closePath()}const gt=5;function vt(e,t){const{x:i,y:s,isYAxis:n,tickSize:o=gt,strokeStyle:a,lineWidth:r}=t,l={type:"line",x:i,y:s,x2:i,y2:s,strokeStyle:a,lineWidth:r};n?l.x2+=o:l.y2+=o,ut(e,l)}const ft=document.createElement("canvas").getContext("2d");function bt(e,t=Ve){return ft.font=t,Math.ceil(ft.measureText(e).width)}function xt(e,t=Ve){ft.font=t;const{actualBoundingBoxAscent:i,actualBoundingBoxDescent:s}=ft.measureText(e);return S(i)&&S(s)?Math.ceil(Math.abs(i)+Math.abs(s))+1:function(e=Ve){const t=e.match(/\d+(?=px)/);return parseInt(String(1.2*Number(t)),10)}(t)}function yt(e){return Tt(2*gt+e/2)}function St(...e){const t=e.map(e=>function(e){var t,i;return null!=(i=null===(t=String(e).split(".")[1])||void 0===t?void 0:t.length)?i:0}(e)),i=Math.max(...t);return Math.pow(10,i)}function wt(e,t){const i=St(e,t);return(e*i+t*i)/i}function Ot(e,t){const i=St(e,t);return e*i*(t*i)/(i*i)}function Mt(e,t){const i=St(e,t);return e*i/(t*i)}function At(e){const t=e.slice();return t.unshift(0),t.reduce((e,t)=>wt(parseFloat(String(e)),parseFloat(String(t))))}function kt(e,t,i){var s,n;const o=St(t),a=C(Math.round(e.min*o),Math.round(e.max*o)+1,t*o),r=ye(null===(n=null===(s=i)||void 0===s?void 0:s.xAxis)||void 0===n?void 0:n.date);return a.map(e=>r?Ae(r,new Date(e)):String(e/o))}function Ct(e,t,i=0,s=0){let n=[];return t>0&&(n=C(0,t).map(s=>(0===s?0:s/(t-1))*e+i)),s&&n.push(s),n}function Tt(e,t=1){const i=t/2;return t%2?(O(e)?e:Math.round(e-i))+i:Math.round(e)}function Dt(e,t,i){const{x:s,y:n}=e,{x:o,y:a}=t,{x:r,y:l}=i,d=Bt(i,t),h=Bt(t,e),c=.333*h/(h+d)||0,u=.333*d/(h+d)||0;return{prev:{x:o-c*(r-s),y:a-c*(l-n)},next:{x:o+u*(r-s),y:a+u*(l-n)}}}function jt(e){for(let t=0,i=e.length,s=e[0];t<i;t+=1){const n=e[t];if(x(n)){s=e[t+1];continue}const o=e[Math.min(t+1,i-1)%i];s&&o&&(n.controlPoint=Dt(s,n,o)),s=n}}function Rt(e,{min:t,max:i}){return(e-t)/(i-t)}function Bt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Pt(e){return bt(e.reduce((e,t)=>e.length>t.length?e:t,""))}function Lt(e,t,i,s,n){const{pointOnColumn:o,tickDistance:a,labelDistance:r}=e;let l;if(n){l=Rt(w(i)?Number(new Date(i)):Number(i),n)*(t-(o?r:0))+(o?r/2:0)}else l=a*s+(o?a/2:0);return l}function Et(e,t){return e.reduce((e,i)=>[...e,i[t]],[])}class Wt{constructor({store:e,eventBus:t}){this.name="Component",this.type="component",this.rect={x:0,y:0,height:0,width:0},this.isShow=!0,this.store=e,this.eventBus=t}update(e){this.drawModels&&(Array.isArray(this.models)?this.updateModels(this.drawModels,this.models,e):Object.keys(this.models).forEach(t=>{const i=this.drawModels[t],s=this.models[t];this.updateModels(i,s,e)}))}initUpdate(e){this.update(e)}updateModels(e,t,i){e.forEach((e,s)=>{const n=t[s];Object.keys(e).forEach(t=>{var s;if(e&&n&&"_"!==t[0])if(S(e[t]))e[t]=e[t]+(n[t]-e[t])*i;else if("points"===t){const o=this.getCurrentModelToMatchTargetModel(e[t],e[t],n[t]).map((e,s)=>{const o=n[t][s];if(e&&o){const{x:t,y:s}=e,{x:n,y:a}=o;return Object.assign(Object.assign({},o),{x:t+(n-t)*i,y:s+(a-s)*i})}return o});(null===(s=this.store.state.options.series)||void 0===s?void 0:s.spline)&&jt(o),e[t]=o}else e[t]=n[t]})})}sync(){this.drawModels&&(Array.isArray(this.models)?this.syncModels(this.drawModels,this.models):Object.keys(this.models).forEach(e=>{const t=this.drawModels[e],i=this.models[e];this.syncModels(t,i,e)}))}getCurrentModelToMatchTargetModel(e,t,i){var s;if(null===(s=F(i))||void 0===s?void 0:s.name){const s=[...new Set(e.map(({name:e})=>e))],n=[...new Set(i.map(({name:e})=>e))];if(!function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]!==t[i])return!1;return!0}(s,n))return this.getCurrentModelWithDifferentModel(e,t,i,s,n)}const n=t.length,o=i.length;return n<o?[...t,...i.slice(n,o)]:n>o?t.slice(0,o):e}getCurrentModelWithDifferentModel(e,t,i,s,n){const o=t.length,a=i.length;if(o>a){const t=e.filter(({name:e})=>T(n,e));return t.length!==i.length?i:t}if(o<a){const t=i.reduce((e,t,i)=>!T(s,t.name)?{models:[...e.models,t],modelIdx:[...e.modelIdx,i]}:e,{models:[],modelIdx:[]});if(e.length+t.models.length===a){const i=[...e];return t.models.forEach((e,s)=>{i.splice(t.modelIdx[s],0,e)}),i}return i}return e}syncModels(e,t,i){const s=i?this.drawModels[i]:this.drawModels,n=this.getCurrentModelToMatchTargetModel(s,e,t);i?this.drawModels[i]=n:this.drawModels=n}getSelectableOption(e){var t,i,s;return null!=(s=null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.selectable)&&s}renderDataLabels(e,t){setTimeout(()=>{this.eventBus.emit("renderDataLabels",{data:e,name:null!=t?t:this.name})},0)}draw(e){const t=this.drawModels?this.drawModels:this.models;Array.isArray(t)?e.paintForEach(t):t&&Object.keys(t).forEach(i=>{e.paintForEach(t[i])})}}var zt;!function(e){e.X="xAxis",e.Y="yAxis",e.SECONDARY_Y="secondaryYAxis"}(zt||(zt={}));class It extends Wt{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]},this.axisSize=0}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=T([zt.Y,zt.SECONDARY_Y],e)}render({layout:e,axes:t,theme:i}){if(t.centerYAxis||!t[this.name])return;this.theme=ti(i,this.name),this.rect=e[this.name],this.axisSize=this.yAxisComponent?this.rect.height:this.rect.width;const{viewLabels:s}=t[this.name],{offsetKey:n,anchorKey:o}={offsetKey:(a=this.yAxisComponent)?"y":"x",anchorKey:a?"x":"y"};var a;const r=this.makeRenderOptions(t[this.name]);this.hasOnlyAxisLine()||(this.models.label=this.renderLabelModels(s,n,o,r),this.models.tick=this.renderTickModels(n,o,r)),this.models.axisLine=[this.renderAxisLineModel()],this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach(e=>{this.drawModels[e]=this.models[e].map(e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t})}))}renderAxisLineModel(){const e=Tt(0);let t;const{color:i,width:s}=this.theme;if(this.yAxisComponent){const n=this.getYAxisXPoint();t={type:"line",x:n,y:e,x2:n,y2:Tt(this.axisSize),strokeStyle:i,lineWidth:s}}else t={type:"line",x:e,y:e,x2:Tt(this.axisSize),y2:e,strokeStyle:i,lineWidth:s};return t}renderTickModels(e,t,i){const s=this.yAxisComponent?this.getYAxisXPoint():Tt(0),{tickInterval:n,relativePositions:o}=i,a=T([zt.SECONDARY_Y,zt.X],this.name)?gt:-gt;return o.reduce((i,o,r)=>r%n?i:[...i,{type:"tick",isYAxis:this.yAxisComponent,tickSize:a,[e]:Tt(o),[t]:s,strokeStyle:this.theme.color,lineWidth:this.theme.width}],[])}renderLabelModels(e,t,i,s){const{needRotateLabel:n,radian:o,offsetY:a}=s,r=this.theme.label,l=Te(r),d=["default",{textAlign:this.getLabelTextAlign(n),font:l,fillStyle:r.color}],h=this.yAxisComponent?this.getYAxisAnchorPoint():a;return e.map(({text:e,offsetPos:s})=>({type:"label",text:e,style:d,radian:o,[t]:Tt(s),[i]:h}))}makeRenderOptions(e){const{tickCount:t,tickInterval:i}=e,s=Ct(this.axisSize,t);if(this.yAxisComponent)return{relativePositions:s,tickInterval:i};const{needRotateLabel:n,radian:o,offsetY:a}=e;return{relativePositions:s,tickInterval:i,needRotateLabel:n,radian:o,offsetY:a}}getYAxisAnchorPoint(){return this.isRightSide()?Tt(this.rect.width):Tt(0)}getLabelTextAlign(e){const t=this.isRightSide()?"right":"left",i=e?"left":"center";return this.yAxisComponent?t:i}isRightSide(){return this.name===zt.SECONDARY_Y}getYAxisXPoint(){return this.isRightSide()?Tt(0):Tt(this.rect.width)}hasOnlyAxisLine(){return this.yAxisComponent&&!this.rect.width||this.name===zt.X&&!this.rect.height}}const Yt=Math.PI/180,Nt=[0,25,45,65,85,90];function Ht(e,t){return Math.cos(e*Yt)*t}function $t(e,t){return Math.sin(e*Yt)*t}function Ft(e,t,i){return 2*($t(e,t/2)+$t(90-e,i/2))}function Gt(e,t,i){var s;const n=90,o=121,a=5;if(null===(s=i)||void 0===s?void 0:s[0]){if(bt(i[0])<t/e-5)return 1}let r=[];if(function(e){const t=[];for(let i,s=2;s*s<=e;s+=1)e%s==0&&(i=e/s,t.push(s),i!==s&&t.push(i));return t.sort((e,t)=>e-t)}(e).forEach(i=>{const s=i/e*t;s>=n&&s<=o&&r.push({interval:i,blockCount:Math.floor(e/i),remainBlockCount:0})}),!r.length){const i=C(n,o,a);r=i.reduce((i,s)=>{const n=function(e,t,i){let s,n=Math.floor(t/i),o=null;const a=n?Math.floor(e/n):e;return a>1&&(s=e-a*n,s>=a&&(n+=Math.floor(s/a),s%=a),o={blockCount:n,remainBlockCount:s,interval:a}),o}(e,t,s);return n?[...i,n]:i},[])}let l=1;if(r.length){l=r.reduce((e,t)=>t.blockCount>e.blockCount?t:e,{blockCount:0,interval:1}).interval}return l}function Xt(e,t){var i,s;return!!e.bar||!!e.radialBar||!!e.bullet&&!(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.vertical)}function Vt(e){return!!(e.column||e.bar||e.boxPlot||e.bullet)}function _t(e){return!!e.radar||!!e.radialBar}function Ut(e,t){return _t(t)?function(e){return{valueAxisName:e?"circularAxis":"verticalAxis",labelAxisName:e?"verticalAxis":"circularAxis"}}(e):{valueAxisName:e?"xAxis":"yAxis",labelAxisName:e?"yAxis":"xAxis"}}function qt(e){return{valueSizeKey:e?"width":"height",labelSizeKey:e?"height":"width"}}function Kt(e){const t=e.map(e=>Number(e));return{min:Math.min(...t),max:Math.max(...t)}}function Zt(e){var t;return Array.isArray(null===(t=e)||void 0===t?void 0:t.yAxis)&&2===e.yAxis.length}function Jt(e){var t;const i=Zt(e);return{yAxis:i?e.yAxis[0]:null===(t=e)||void 0===t?void 0:t.yAxis,secondaryYAxis:i?e.yAxis[1]:null}}function Qt(e,t,i){var s;const{secondaryYAxis:n}=Jt(e);return(null===(s=n)||void 0===s?void 0:s.chartType)===t?"secondaryYAxis":i}function ei(e,t){const{yAxis:i,secondaryYAxis:s}=Jt(e);return"xAxis"!==t&&s?[i.chartType,s.chartType].map((i,s)=>i?Qt(e,i,t):["yAxis","secondaryYAxis"][s]):[t]}function ti(e,t){const{xAxis:i,yAxis:s}=e;let n;return n=t===zt.X?i:Array.isArray(s)?t===zt.Y?s[0]:s[1]:s,n}function ii(e,t,i){let s=0;return Nt.every(n=>{const o=function(e,t,i){return 2*(Ht(e,t/2)+Ht(90-e,i/2))}(n,t,i);return s=n,o>e}),e<t?s:0}function si(e,t,i){var s,n;const o=e[i],a=t[i];return!(!o&&!a)&&(null===(s=o)||void 0===s?void 0:s.maxLabelWidth)!==(null===(n=a)||void 0===n?void 0:n.maxLabelWidth)}function ni(e,t){return function(e,t){return si(e,t,"yAxis")||si(e,t,"secondaryYAxis")}(e,t)||function(e,t){const{maxHeight:i}=e.xAxis,{maxHeight:s}=t.xAxis;return i!==s}(e,t)}function oi(e){var t,i,s,n;return null==(n=null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.rotatable)||n}function ai(e,t){const{labels:i,pointOnColumn:s,labelDistance:n,tickDistance:o,labelInterval:a,tickInterval:r,tickCount:l}=e,d=Ct(t,l),h=s?(null!=n?n:o*(a===r?a:1))/2:0;return i.reduce((e,i,s)=>{const n=d[s]+h;return!(s%a)&&n<=t?[...e,{offsetPos:n,text:i}]:e},[])}function ri(e){if(b(e))return e;const t={text:"",offsetX:0,offsetY:0};return w(e)?Object.assign(Object.assign({},t),{text:e}):Object.assign(Object.assign({},t),e)}function li(e,t){const i=ye(t);return e.map(e=>i?Ae(i,new Date(e)):e)}function di(e,t,i,s){const n=ii(i,e,t);return s&&0!==n?{needRotateLabel:n>0,radian:et(n,0),rotationHeight:Ft(n,e,t)}:{needRotateLabel:!1,radian:0,rotationHeight:t}}function hi(e,t,i=Ve){const s=e.reduce((e,t)=>e.length>t.length?e:t,"");return{maxLabelWidth:bt(s,i)+t,maxLabelHeight:xt(s,i)}}function ci(e,t){var i,s,n,o;if("xAxis"===e)return 0;const a=Jt(t);return Math.abs(null!=(o=null===(n=null===(s=null===(i=a)||void 0===i?void 0:i[e])||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin)?o:0)}function ui(e,t){var i,s,n,o,a,r;const{axis:l,categories:d,layout:h,isCoordinateTypeChart:c}=t,u=null===(s=null===(i=l)||void 0===i?void 0:i.tick)||void 0===s?void 0:s.interval,p=null===(o=null===(n=l)||void 0===n?void 0:n.label)||void 0===o?void 0:o.interval,m=S(u)||S(p),g=e&&!S(null===(r=null===(a=l)||void 0===a?void 0:a.scale)||void 0===r?void 0:r.stepSize)&&!t.shift&&!m&&!c,v=g?function(e,t){if(!e||!t)return 1;const{width:i}=t.xAxis;return Gt(e.length,i,e)}(d,h):1;return{tickInterval:null!=u?u:v,labelInterval:null!=p?p:g?v:1}}function pi(e){return Array.isArray(e)&&2===e.length}function mi(e){return Array.isArray(e)&&pi(F(e))}function gi(e,t){return!(!t||0===t[0]&&t[1]===e.length-1)}function vi(e,t){return t?e.slice(t[0],t[1]+1):e}function fi(e){return S(e)?e:Array.isArray(e)?e[1]:e.y}function bi(e){return Array.isArray(e)?e[0]:e.x}function xi(e,t,i,s){if(S(e))return i-s;const n=bi(e);let o=t.findIndex(e=>e===String(n));return-1===o&&function(e,t){const i=Y(t);return!!i&&(S(e)?e>=Number(i):new Date(e)>=new Date(i))}(n,t)&&(o=t.length),o}function yi(e){return function(e){var t;if(!e.line)return!1;const i=F(null===(t=e.line[0])||void 0===t?void 0:t.data);return i&&(Array.isArray(i)||M(i))}(e)||!!e.scatter||!!e.bubble}function Si(e,t){var i;const s=!!R(e,["series","diverging"]),n="center"===(null===(i=e.yAxis)||void 0===i?void 0:i.align);return t&&s&&n}function wi(e,t){var i,s,n;return null!=(n=null===(s=null===(i=Object.assign(Object.assign({},Jt(e)),{xAxis:e.xAxis})[t])||void 0===i?void 0:i.label)||void 0===s?void 0:s.formatter)?n:e=>e}function Oi(e){var t,i;const{axisSize:s,categories:n,series:o,options:a,theme:r,scale:l,zoomRange:d,rawCategories:h,initialAxisData:c,isCoordinateTypeChart:u,axisName:p}=e,m=function(e,t){var i;return!!Vt(e)||!(!e.line&&!e.area)&&Boolean(null===(i=t.xAxis)||void 0===i?void 0:i.pointOnColumn)}(o,a),g=!gi(h,d)&&u?kt(l.limit,l.stepSize,a):li(n,null===(i=null===(t=a)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.date),v=wi(a,p),f=g.map((e,t)=>v(e,{index:t,labels:g,axisName:p})),b=n.length-(m?0:1),x=b?s/b:s,y=s/(f.length-(m?0:1)),S=f.length+(m?1:0),w=ai(Object.assign({labels:f,pointOnColumn:m,tickDistance:x,tickCount:S},c),s),O=ci(p,a);return Object.assign(Object.assign({labels:f,viewLabels:w,pointOnColumn:m,labelDistance:y,tickDistance:x,tickCount:S,isLabelAxis:!0},c),hi(f,O,Te(r.label)))}function Mi(e){var t;const{scale:i,axisSize:s,series:n,options:o,centerYAxis:a,initialAxisData:r,theme:l,labelOnYAxis:d,axisName:h}=e,{limit:c,stepSize:u}=i,p=a?null===(t=a)||void 0===t?void 0:t.xAxisHalfSize:s,m=function(e,t){var i;return Vt(e)&&!!(null===(i=t.series)||void 0===i?void 0:i.diverging)}(n,o),g=wi(o,h),v=function(e,t,i,s){const{min:n,max:o}=e;if(!(n<=0&&o>=0)||s)return null;const a=(0-n)/(o-n)*t;return i?a:t-a}(c,s,Xt(n,o),m);let f=kt(c,u);!a&&m&&(f=function(e){return $(e)?e.reverse().slice(1).concat(e):e.slice(1).reverse().concat(e)}(f));const b=f.map((e,t)=>g(e,{index:t,labels:f,axisName:h})),x=p/Math.max(f.length,1),y=f.length,w=ai(Object.assign({labels:d?b:[...b].reverse(),pointOnColumn:!1,tickDistance:x,tickCount:y},r),p),O=ci(h,o),M=Object.assign(Object.assign({labels:b,viewLabels:w,pointOnColumn:!1,isLabelAxis:!1,tickCount:y,tickDistance:x},r),hi(b,O,Te(l.label)));return S(v)&&(M.zeroPosition=v),M}function Ai(e,t){var i,s;const n=ui(e,t),o=ri(null===(s=null===(i=t)||void 0===i?void 0:i.axis)||void 0===s?void 0:s.title);return o&&(n.title=o),n}function ki({axisData:e,axisSize:t,centerYAxis:i,rotatable:s,labelMargin:n=0}){const{viewLabels:o,pointOnColumn:a,maxLabelWidth:r,maxLabelHeight:l}=e,d=yt(l)+n,h=di(r,l,(i?i.xAxisHalfSize:t)/(o.length-(a?0:1)),s),{needRotateLabel:c,rotationHeight:u}=h,p=(c?u:l)+d;return Object.assign(Object.assign(Object.assign({},e),h),{maxHeight:p,offsetY:d})}var Ci={name:"axes",state:({series:e,options:t})=>{const{secondaryYAxis:i}=Jt(t),s={xAxis:{},yAxis:{}};return Si(t,!!e.bar)&&(s.centerYAxis={}),i&&(s.secondaryYAxis={}),{axes:s}},action:{setAxesData({state:e,initStoreState:t}){var i,s;const{scale:n,options:o,series:a,layout:r,zoomRange:l,theme:d}=e,{xAxis:h,yAxis:c,plot:u}=r,p=yi(t.series),m=Xt(a,o),{categories:g,rawCategories:v}=function(e,t){var i,s;return{categories:(i=e,null!=i?i:[]),rawCategories:(s=t,null!=s?s:[])}}(e.categories,e.rawCategories),{valueAxisName:f,valueAxisSize:b,labelAxisName:x,labelAxisSize:y}=function(e,t,i){const{valueAxisName:s,labelAxisName:n}=Ut(e,i),{valueSizeKey:o,labelSizeKey:a}=qt(e);return{valueAxisName:s,valueAxisSize:t[o],labelAxisName:n,labelAxisSize:t[a]}}(m,u,a),S=e.axes.centerYAxis,w=function(e,t,i,s,n){var o,a,r;const{yAxis:l,secondaryYAxis:d}=Jt(e),h=null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.shift;return{xAxis:Ai(!t,{categories:i,axis:null===(r=e)||void 0===r?void 0:r.xAxis,layout:s,shift:h,isCoordinateTypeChart:n}),yAxis:Ai(t,{axis:l}),secondaryYAxis:d?Ai(t,{axis:d}):null}}(o,m,g,r,p),O=Mi({scale:n[f],axisSize:b,options:o,series:a,theme:ti(d,f),centerYAxis:S?{xAxisHalfSize:(h.width-c.width)/2}:null,initialAxisData:w[f],labelOnYAxis:m,axisName:f}),M=Oi({scale:n[x],axisSize:y,categories:g,rawCategories:v,options:o,series:a,theme:ti(d,x),zoomRange:l,initialAxisData:w[x],isCoordinateTypeChart:p,labelOnYAxis:m,axisName:x});let A,k;if(e.axes.secondaryYAxis&&(A=function({state:e,labelOnYAxis:t,valueAxisSize:i,labelAxisSize:s,initialAxisData:n,isCoordinateTypeChart:o}){var a,r;const{scale:l,options:d,series:h,zoomRange:c,theme:u}=e,p=e.categories,m=e.rawCategories;return t?Oi({scale:l.secondaryYAxis,axisSize:s,categories:(r=null===(a=Jt(d).secondaryYAxis)||void 0===a?void 0:a.categories,null!=r?r:p),rawCategories:m,options:d,series:h,theme:ti(u,zt.SECONDARY_Y),zoomRange:c,initialAxisData:n,isCoordinateTypeChart:o,axisName:zt.SECONDARY_Y}):Mi({scale:l.secondaryYAxis,axisSize:i,options:d,series:h,theme:ti(u,zt.SECONDARY_Y),centerYAxis:null,initialAxisData:n,axisName:zt.SECONDARY_Y})}({state:e,labelOnYAxis:m,valueAxisSize:b,labelAxisSize:y,labelAxisName:x,valueAxisName:f,initialAxisData:w.secondaryYAxis,isCoordinateTypeChart:p})),S){const e=(h.width-c.width)/2;k=P(O,{x:h.x+e,xAxisHalfSize:e,secondStartX:(h.width+c.width)/2,yAxisLabelAnchorPoint:c.width/2,yAxisHeight:c.height})}const C={xAxis:ki({axisData:m?O:M,axisSize:m?b:y,centerYAxis:k,rotatable:oi(o),labelMargin:null===(s=null===(i=o.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.margin}),yAxis:m?M:O,secondaryYAxis:A,centerYAxis:k};ni(e.axes,C)&&this.notify(e,"layout"),e.axes=C}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}};const Ti={xls:"data:application/vnd.ms-excel;base64,",csv:"data:text/csv;charset=utf-8,%EF%BB%BF"};function Di(e,t,i,s){const n=function(e){return"jpeg"===e||"png"===e}(t)?function(e){const t=e.substr(0,e.indexOf(";base64,")).substr(e.indexOf(":")+1),i=atob(e.substr(e.indexOf(",")+1)),s=[];for(let e=0;e<i.length;e+=1024){const t=i.slice(e,e+1024),n=new Array(t.length);for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);s.push(new window.Uint8Array(n))}try{return new Blob(s,{type:t})}catch(e){return new Blob(s.map(e=>e.buffer),{type:t})}}(i):new Blob([i],{type:s});window.navigator.msSaveOrOpenBlob(n,`${e}.${t}`)}function ji(e,t,i){if(i){const s=document.createElement("a");s.href=i,s.target="_blank",s.download=`${e}.${t}`,document.body.appendChild(s),s.click(),s.remove()}}function Ri(...e){return((e,...t)=>e.reduce((e,i,s)=>e+t[s-1]+i))(...e).replace(/\n\s*/g,"")}function Bi(e,t){return e.reduce((e,i,s)=>{var n,o;return!s||e<(null===(o=null===(n=i)||void 0===n?void 0:n[t])||void 0===o?void 0:o.length)?i[t].length:e},0)}function Pi(e){const{series:t}=e,i=[["Label","Data"]];return t.treemap.data.forEach(e=>{!function e({label:t,data:i,children:s=[]},n){return i&&n.push([t,i]),s.forEach(t=>e(t,n)),n}(e,i)}),i}function Li(e){const{series:t}=e,i=e.categories;return Object.keys(t).reduce((e,s)=>[...e,...t[s].map(({name:e,data:t})=>[e,...!S(t[0])&&T(["line","area","scatter"],s)?function(e,t,i){return t.map((t,s)=>{if("area"===e&&Array.isArray(i[s]))return i[s].join();const n=i.find(e=>t===String(bi(e)));return n?fi(n):""})}(s,i,t):t.map(e=>Array.isArray(e)?e.join():e)])],[["",...i]])}function Ei(e){let t;const{series:i}=e;return t=i.bullet?function({series:e}){const t=e.bullet.data,i=Bi(t,"markers"),s=C(0,Bi(t,"ranges")).map(e=>`Range ${e+1}`),n=C(0,i).map(e=>`Marker ${e+1}`);return t.reduce((e,{data:t,markers:i,name:o,ranges:a})=>[...e,[o,null!=t?t:"",...s.map((e,t)=>{var i;const s=null===(i=a)||void 0===i?void 0:i[t];return s?`${s[0]} ~ ${s[1]}`:""}),...n.map((e,t)=>{var s,n;return null!=(n=null===(s=i)||void 0===s?void 0:s[t])?n:""})]],[["","Actual",...s,...n]])}(e):i.heatmap?function({categories:e,series:t}){const i=e.x;return t.heatmap.data.reduce((e,{data:t,yCategory:i})=>[...e,[i,...t.map(e=>x(e)?"":e)]],[["",...i]])}(e):i.bubble?function(e){const{series:t}=e;return t.bubble.data.reduce((e,{name:t,data:i})=>[...e,...i.map(e=>x(e)?[]:[t,e.label,String(e.x),e.y,e.r])],[["Name","Label","X","Y","Radius"]])}(e):i.boxPlot?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.boxPlot.data.reduce((e,{name:t,data:i,outliers:s})=>[...e,[t,...(null!=i?i:[]).map((e,t)=>{var i;const n=null===(i=(null!=s?s:[]).find(e=>e[0]===t))||void 0===i?void 0:i[1];return(n?[...e,n]:[...e]).join()})]],[["",...s]])}(e):i.pie?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.pie.data.reduce((e,{name:t,data:i})=>[...e,...Array.isArray(i)?(null!=i?i:[]).reduce((e,t)=>{var i;return[...e,[t.name,(i=t.data,null!=i?i:"")]]},[]):[[t,null!=i?i:""]]],s.length?[["",...s]]:[])}(e):i.treemap?Pi(e):Li(e),t}function Wi(e,t,i,s){const n=function(){let e;const t=!b(document.createElement("a").download);return!b(window.Blob&&window.navigator.msSaveOrOpenBlob)?e=Di:t&&(e=ji),e}();w(i)&&n&&n(e,t,i,s)}function zi(e,t,i){const s=Ei(i),n=Ti[t].replace(/(data:|;base64,|,%EF%BB%BF)/g,"");let o="";o="csv"===t?function(e,t={}){const{lineDelimiter:i="\n",itemDelimiter:s=","}=t,n=e.length-1;let o="";return e.forEach((e,t)=>{const a=e.length-1;e.forEach((e,t)=>{const i=S(e)?e:`"${e}"`;o+=i,t<a&&(o+=s)}),t<n&&(o+=i)}),o}(s):function(e){return Ri`<html xmlns:o="urn:schemas-microsoft-com:office:office"
        xmlns:x="urn:schemas-microsoft-com:office:excel"
        xmlns="http://www.w3.org/TR/REC-html40">
        <head>
            <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>Ark1</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                        </x:ExcelWorkbook>
                </xml>
            <![endif]-->
            <meta name=ProgId content=Excel.Sheet>
            <meta charset=UTF-8>
        </head>
        <body>
            ${function(e){let t="<table>";return e.forEach((e,i)=>{const s=0===i?"th":"td";t+="<tr>",e.forEach((e,n)=>{t+=`<${s}${0!==i||0===n?' class="number"':""}>${e}</${s}>`}),t+="</tr>"}),t+="</table>",t}(e)}
        </body>
        </html>`}(s),function(){const e=!b(document.createElement("a").download);return!!b(window.Blob&&window.navigator.msSaveOrOpenBlob)&&e}()&&("csv"!==t&&(o=window.btoa(unescape(encodeURIComponent(o)))),o=Ti[t]+o),Wi(e,t,o,n)}class Ii extends Wt{constructor(){super(...arguments),this.models={exportMenuButton:[]},this.opened=!1,this.chartWidth=0,this.toggleExportMenu=()=>{this.opened=!this.opened,this.models.exportMenuButton[0].opened=this.opened,this.eventBus.emit("needDraw"),this.opened?(this.applyPanelWrapperStyle(),this.chartEl.appendChild(this.exportMenuEl)):this.chartEl.removeChild(this.exportMenuEl)},this.getCanvasExportBtnRemoved=()=>{const e=this.chartEl.getElementsByTagName("canvas")[0],t=e.getContext("2d"),{x:i,y:s,height:n,width:o}=this.rect;return["#fff",this.chartBackgroundColor].forEach(e=>{t.fillStyle=e,t.fillRect(i,s,o,n)}),e},this.onClickExportButton=e=>{const{id:t}=e.target;if("png"===t||"jpeg"===t){const e=this.getCanvasExportBtnRemoved();Wi(this.fileName,t,e.toDataURL(`image/${t}`,1))}else zi(this.fileName,t,this.data);this.toggleExportMenu()}}applyExportButtonPanelStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu-title"),t=this.exportMenuEl.querySelector(".toastui-chart-export-menu-btn-wrapper");e.setAttribute("style",this.makePanelStyle("header")),t.setAttribute("style",this.makePanelStyle("body"))}makeExportMenuButton(){const e=document.createElement("div");return e.onclick=this.onClickExportButton,e.innerHTML='\n        <div class="toastui-chart-export-menu">\n          <p class="toastui-chart-export-menu-title">Export to</p>\n          <div class="toastui-chart-export-menu-btn-wrapper">\n            <button class="toastui-chart-export-menu-btn" id="xls">xls</button>\n            <button class="toastui-chart-export-menu-btn" id="csv">csv</button>\n            <button class="toastui-chart-export-menu-btn" id="png">png</button>\n            <button class="toastui-chart-export-menu-btn" id="jpeg">jpeg</button>\n          </div>\n        </div>\n      ',e}initialize({chartEl:e}){this.chartEl=e,this.type="exportMenu",this.name="exportMenu",this.exportMenuEl=this.makeExportMenuButton()}onClick({responders:e}){e.length&&this.toggleExportMenu()}getFileName(e){var t,i;return w(e)?e:null!=(i=null===(t=e)||void 0===t?void 0:t.text)?i:"toast-ui-chart"}render({options:e,layout:t,chart:i,series:s,rawCategories:n,theme:o}){var a,r;this.isShow=ss(e),this.chartWidth=i.width,this.isShow&&(this.chartBackgroundColor=o.chart.backgroundColor,this.theme=o.exportMenu,this.data={series:s,categories:n},this.fileName=this.getFileName((null===(r=null===(a=e)||void 0===a?void 0:a.exportMenu)||void 0===r?void 0:r.filename)||i.title),this.applyExportButtonPanelStyle(),this.rect=t.exportMenu,this.models.exportMenuButton=[{type:"exportMenuButton",x:0,y:0,opened:this.opened,theme:this.theme.button}],this.responders=[{type:"rect",width:24,height:24,x:0,y:0}])}applyPanelWrapperStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu"),t=this.chartWidth-140-Ui.X,i=Ui.Y+24+5,{borderRadius:s,borderWidth:n,borderColor:o}=this.theme.panel,a=`\n      transform: ${Ce(t,i)};\n      border: ${n}px solid ${o};\n      border-radius: ${s}px;`;e.setAttribute("style",a)}makePanelStyle(e){const t=this.theme.panel[e],i="header"===e?"top":"bottom",{borderRadius:s,borderWidth:n}=this.theme.panel,o=`${s-n}px`;return[`${De(t)}`,`border-${i}-left-radius: ${o};`,`border-${i}-right-radius: ${o};`,`background-color: ${t.backgroundColor};`].join("")}}function Yi(e,t){var i;const{x:s,y:n,text:o,textAlign:a,textBaseline:r,opacity:l,callout:d,theme:h,radian:c}=t,{color:u,textBubble:p}=h,m={textAlign:a,textBaseline:r,font:je(h),fillStyle:u},g=function(e){const{textStrokeColor:t}=e,i=D(e,"lineWidth","shadowColor","shadowBlur");t&&(i.strokeStyle=t);return i}(h);if(d){const{theme:{lineWidth:t,lineColor:i}}=d;ut(e,Object.assign(Object.assign({type:"line"},D(d,"x","y","x2","y2")),{strokeStyle:i,lineWidth:t}))}null!==(i=p)&&void 0!==i&&i.visible?Ni(e,t):qe(e,{type:"label",x:s,y:n,text:o,style:[m],stroke:[g],opacity:l,radian:c})}function Ni(e,t){const{text:i,theme:s,radian:n=0}=t,{color:o,textStrokeColor:a}=s,r=je(s),l=function(e){const{text:t,theme:i,textAlign:s,textBaseline:n}=e,o=je(i),{arrow:a,paddingX:r,paddingY:l,borderRadius:d,borderColor:h,borderWidth:c,backgroundColor:u,shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}=i.textBubble,f=bt(t,o)+2*r,b=xt(t,o)+2*l;let{x:x,y:y}=e;"center"===s?x-=f/2:T(["right","end"],s)&&(x-=f);"middle"===n?y-=b/2:"bottom"===n&&(y-=b);const S={x:x,y:y,width:f,height:b};return Object.assign(Object.assign(Object.assign({},S),{radius:d,lineWidth:c,fill:u,strokeStyle:h,style:[{shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}]}),function(e,t,i,s){var n,o;if(!(null===(n=s)||void 0===n?void 0:n.visible))return null;const a=s.height,{width:r,height:l}=e,d=null!==(o=s.direction)&&void 0!==o?o:function(e,t){let i="top";"center"===e&&"top"===t?i="top":"center"===e&&"bottom"===t?i="bottom":"middle"===t&&"right"===e?i="right":"middle"===t&&"left"===e&&(i="left");return i}(t,i);let{x:h,y:c}=e,{x:u,y:p}=e;"top"===d?c+=a:"bottom"===d?(c-=a,p+=l):"right"===d?(h-=a,u+=r):"left"===d&&(h+=a);"center"===t?u=e.x+r/2:"middle"===i&&(p=e.y+l/2);return{direction:d,points:Hi(d,{x:u,y:p},s),x:h,y:c}}(S,s,n,a))}(t),{x:d,y:h,width:c,height:u}=l;Ze(e,{type:"bubbleLabel",radian:n,rotationPosition:{x:t.x,y:t.y},bubble:l,label:{x:d+c/2,y:h+u/2,text:i,style:[{font:r,fillStyle:o,textAlign:"center",textBaseline:"middle"}],strokeStyle:a}})}function Hi(e,{x:t,y:i},s){const n=s.width,o=s.height;let a=[];return"top"===e?a=[{x:t-n/2,y:i+o},{x:t,y:i},{x:t+n/2,y:i+o}]:"bottom"===e?a=[{x:t+n/2,y:i-o},{x:t,y:i},{x:t-n/2,y:i-o}]:"right"===e?a=[{x:t-o,y:i-n/2},{x:t,y:i},{x:t-o,y:i+n/2}]:"left"===e&&(a=[{x:t+o,y:i+n/2},{x:t,y:i},{x:t+o,y:i-n/2}]),a}const $i=12,Fi={HEIGHT:6,PADDING:5},Gi={HEIGHT:28,POINT_WIDTH:8,POINT_HEIGHT:6,PADDING:6};function Xi(e,t,i){const{HEIGHT:s}=Fi;return{barWidth:i?e:s,barHeight:i?s:t-$i}}function Vi(e,t){const i=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e;let a,r;return"top"===t?(a=i,r=s):"bottom"===t?(a=i,r=s+Gi.HEIGHT+Fi.HEIGHT+Fi.PADDING):"left"===t?(a=i+Pt(n),r=s):(a=i+o-Pt(n)-Ui.X,r=s),{x:a,y:r}}(t),s=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e,{PADDING:a}=Fi;let r,l;return"top"===t?(r=i,l=s+$i+a):"bottom"===t?(r=i,l=s+Gi.HEIGHT):"left"===t?(r=i+Pt(n)+a,l=s+$i/2):(r=i+o-(Pt(n)+Ui.X+2*a+Fi.HEIGHT),l=s+$i/2),{x:r,y:l}}(t);!function(e,t){const{labels:i,align:s,x:n,y:o,width:a,height:r,verticalAlign:l}=t,{barWidth:d,barHeight:h}=Xi(a,r,l),c=i.length-1,u={left:{textAlign:"right",textBaseline:"top"},right:{textAlign:"left",textBaseline:"top"},top:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"}};i.forEach((t,i)=>{qe(e,{type:"label",x:l?n+d/c*i:n,y:l?o:o+h/c*i,text:t,style:["default",u[s]]})})}(e,Object.assign(Object.assign({},t),i)),function(e,t){const{width:i,height:s,startColor:n,endColor:o,x:a,y:r,verticalAlign:l}=t,{barWidth:d,barHeight:h}=Xi(i,s,l),c=l?e.createLinearGradient(a,r,a+d,r):e.createLinearGradient(a,r,a,r+h);c.addColorStop(0,n),c.addColorStop(1,o),e.fillStyle=c,e.fillRect(a,r,d,h)}(e,Object.assign(Object.assign({},t),s))}function _i(e,t){const{x:i,y:s}=function(e){const{align:t,colorRatio:i,width:s,height:n,x:o,y:a,labels:r,verticalAlign:l}=e,{barWidth:d,barHeight:h}=Xi(s,n,l),{PADDING:c,HEIGHT:u}=Fi;return"top"===t?{x:o+d*i,y:a+$i+u+2*c}:"bottom"===t?{x:o+d*i,y:a+$i+2*c}:"left"===t?{x:o+Pt(r)+u+2*c,y:a+h*i+c}:"right"===t?{x:o+s-(Pt(r)+Ui.X+3*c+u),y:a+h*i+c}:void 0}(t),{PADDING:n,POINT_HEIGHT:o,POINT_WIDTH:a}=Gi,{align:r,text:l,color:d}=t,h=bt(l)+2*n,c=$i+2*n,u=r;let p=i,m=s;"top"===r?m+=o:"right"===r?(p-=h/2+o,m-=c/2):"left"===r?(p+=h/2+o,m-=c/2):"bottom"===r&&(m-=c+o),Ze(e,{type:"bubbleLabel",bubble:{x:p-h/2,y:m,width:h,height:c,points:Hi(r,{x:i,y:s},{visible:!0,width:a,height:o}),direction:u,fill:d},label:{text:l,x:p,y:m+c/2,style:[{font:"normal 11px Arial",fillStyle:"#333333",textAlign:"center",textBaseline:"middle"}]}})}const Ui={X:10,Y:15};function qi(e){return"top"===e||"bottom"===e}function Ki(e,t,i){var s,n,o,a;return{height:(n=null===(s=e)||void 0===s?void 0:s.height,null!=n?n:i),width:(a=null===(o=e)||void 0===o?void 0:o.width,null!=a?a:t)}}function Zi(e){const{yAxisTitle:t,isRightSide:i,visibleSecondaryYAxis:s}=e,n=Ji(e);return i&&s?Math.max(t.x+t.width-n,0):t.x}function Ji({maxLabelWidth:e,size:t,isRightSide:i}){var s,n,o;return null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s[i?"secondaryYAxis":"yAxis"])||void 0===n?void 0:n.width)?o:e}function Qi(e){var t,i;const{size:s,isRightSide:n=!1}=e,o=function(e){const{chartSize:t,legend:i,circleLegend:s,hasCenterYAxis:n,maxLabelWidth:o}=e,{width:a}=t,{align:r}=i;let l=Ji(e),d=Zi(e);return n&&(l=o+2*(gt+Ui.X),d=(a-i.width-l+2*Ui.X)/2),i.visible&&"left"===r&&(d=Zi(e)),s.visible&&"left"===r&&(d=Math.max(s.width+Ui.X,d)),d}(e),a=function({yAxisTitle:e}){return e.y+e.height}(e),r=function(e){const{hasCenterYAxis:t,hasAxis:i,maxLabelWidth:s,visibleSecondaryYAxis:n=!1,isRightSide:o=!1}=e;let a=Ji(e);return t&&!o?a=s+2*(gt+Ui.X):(!i||o&&!n)&&(a=0),a}(e),l=function({chartSize:e,legend:t,yAxisTitle:i,hasAxis:s,size:n,xAxisTitleHeight:o}){var a,r,l,d;const{height:h}=e,{align:c,height:u}=t,p=function(e){var t;return(null===(t=e.xAxis)||void 0===t?void 0:t.height)&&!e.yAxis?e.xAxis.height:20}(n),m=i.y+i.height;let g=h-m-p-o;if(s||(g=h-m),t.visible){const e=Math.max(m,u);"top"===c?g=h-e-(s?20+o:0):"bottom"===c&&(g=h-m-20-o-u)}return!(null===(r=null===(a=n)||void 0===a?void 0:a.yAxis)||void 0===r?void 0:r.height)&&(null===(d=null===(l=n)||void 0===l?void 0:l.plot)||void 0===d?void 0:d.height)&&(g=n.plot.height),g}(e);return Object.assign({x:o,y:a},Ki(n?null===(t=s)||void 0===t?void 0:t.secondaryYAxis:null===(i=s)||void 0===i?void 0:i.yAxis,r,l))}function es(e){var t;const{hasAxis:i,hasCenterYAxis:s,yAxis:n,size:o,xAxisData:a}=e,r=s?2*Ui.X:n.x+n.width,l=n.y+n.height,d=function({chartSize:e,yAxis:t,hasCenterYAxis:i,legend:s,circleLegend:n,secondaryYAxis:o,xAxisData:a}){var r;const{width:l}=e,{align:d,width:h}=s,c=qi(d);let u;return c?(u=l-(t.x+t.width+Ui.X),n.visible&&(u-=n.width)):u=l-(t.width+Math.max(h,n.visible?n.width:0)),i&&(u=l-(c?0:h)-2*Ui.X),o.width&&(u-=o.width),(null===(r=a)||void 0===r?void 0:r.maxLabelWidth)&&(u-=.5*a.maxLabelWidth),u}(e),h=function(e,t=!1){var i,s;return t?null!=(s=null===(i=e)||void 0===i?void 0:i.maxHeight)?s:20:0}(a,i);return Object.assign({x:r,y:l},Ki(null===(t=o)||void 0===t?void 0:t.xAxis,d,h))}function ts({chartSize:e,visible:t,title:i,legend:{align:s,width:n,height:o,visible:a,useSpectrumLegend:r},hasCenterYAxis:l,visibleSecondaryYAxis:d,isRightSide:h=!1,yAxisTitleHeight:c}){const u=t?c+5:0,p=qi(s),m=(e.width-(p?2*Ui.X:n))/(d?2:1),g={x:h?i.x+m:i.x,y:i.y+i.height};return a&&("left"===s?g.x+=n:"top"===s&&(g.y+=function(e,t){return e?$i+2*Fi.PADDING+Gi.POINT_HEIGHT+Gi.HEIGHT+Ui.Y:t+Ui.Y}(r,o))),l&&(g.x=(m+2*Ui.X)/2),Object.assign({height:u,width:m},g)}function is(e){var t;return!!(null===(t=e.series)||void 0===t?void 0:t.zoomable)}function ss(e){var t;const i=null===(t=e.exportMenu)||void 0===t?void 0:t.visible;return!!b(i)||i}function ns(e){return e?e+Ui.X:40}function os(e){return!e||b(e.width)&&b(e.height)?null:D(e,"width","height")}function as(e,t,i){const s=e[i],n=t[i];if(S(s)&&S(n))return Math.max(s,n)}function rs(e,t=0){return(Array.isArray(e)?Math.max(e[0].title.fontSize,e[1].title.fontSize):e.title.fontSize)+t}var ls={name:"layout",state:()=>({layout:{}}),action:{setLayout({state:e}){var t,i,s,n,o,a,r,l,d,h,c,u,p,m,g,v,f,b;const{legend:x,theme:y,circleLegend:S,series:w,options:O,chart:M,axes:A}=e,{width:k,height:C}=M,T={height:C-2*Ui.Y,width:k-2*Ui.X},D=Si(O,!!w.bar),j=!(w.pie||w.radar||w.treemap||w.radialBar),R=function(e){const t=os(e.xAxis),i=Jt(e),s=os(i.yAxis),n=os(i.secondaryYAxis),o=os(e.plot);return o&&(t&&(t.width=o.width=as(t,o,"width")),s&&(s.height=o.height=as(s,o,"height")),n&&(n.height=o.height=as(n,o,"height"))),{xAxis:t,yAxis:s,plot:o,secondaryYAxis:n}}(O),{yAxis:B,secondaryYAxis:P}=Jt(O),L=!!P,E=y.title.fontSize,W=null!=(n=rs(y.yAxis,null===(s=null===(i=null===(t=A)||void 0===t?void 0:t.yAxis)||void 0===i?void 0:i.title)||void 0===s?void 0:s.offsetY))?n:0,z=null!=(l=rs(y.xAxis,null===(r=null===(a=null===(o=A)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.title)||void 0===r?void 0:r.offsetY))?l:0,I=function(e,t){return{x:t?Ui.X+e.width-24:Ui.X+e.width,y:Ui.Y,height:t?29:0,width:t?24:0}}(T,ss(O)),Y=function(e,t){return{x:t?e.x-24-Ui.X:0,y:t?e.y:0,height:t?29:0,width:t?24:0}}(I,is(O)),N=function(e,t,i,s){const n={x:Ui.X,y:Ui.Y},o=i?e.width-t.width:0,a=i?Math.max(s+5,t.height):t.height;return Object.assign({width:o,height:a},n)}(T,I.height?I:Y,!!(null===(d=O.chart)||void 0===d?void 0:d.title),E),H=ts({chartSize:T,visible:!!(null===(h=B)||void 0===h?void 0:h.title)||!!(null===(c=P)||void 0===c?void 0:c.title),title:N,legend:x,hasCenterYAxis:D,visibleSecondaryYAxis:L,yAxisTitleHeight:W}),$=Qi({chartSize:T,legend:x,circleLegend:S,yAxisTitle:H,hasCenterYAxis:D,hasAxis:j,maxLabelWidth:ns(null===(u=A)||void 0===u?void 0:u.yAxis.maxLabelWidth),size:R,xAxisTitleHeight:z}),F=ts({chartSize:T,visible:!!(null===(p=B)||void 0===p?void 0:p.title)||!!(null===(m=P)||void 0===m?void 0:m.title),title:N,legend:x,hasCenterYAxis:D,isRightSide:!0,visibleSecondaryYAxis:L,yAxisTitleHeight:W}),G=Qi({chartSize:T,legend:x,circleLegend:S,yAxisTitle:F,hasCenterYAxis:D,hasAxis:j,maxLabelWidth:ns(null===(v=null===(g=A)||void 0===g?void 0:g.secondaryYAxis)||void 0===v?void 0:v.maxLabelWidth),size:R,isRightSide:!0,visibleSecondaryYAxis:L,xAxisTitleHeight:z}),X=es({chartSize:T,yAxis:$,secondaryYAxis:G,legend:x,circleLegend:S,hasCenterYAxis:D,hasAxis:j,size:R,xAxisData:null===(f=A)||void 0===f?void 0:f.xAxis}),V=function(e,t,i){const s={x:t.x,y:t.y+t.height},n=e?i:0,o=e?t.width:0;return Object.assign({height:n,width:o},s)}(!!(null===(b=O.xAxis)||void 0===b?void 0:b.title),X,z),_=function(e){const{legend:t,xAxis:i,yAxis:s,chartSize:n,title:o,hasAxis:a,secondaryYAxis:r,xAxisTitleHeight:l}=e;if(!t.visible)return{x:0,y:0,width:0,height:0};const{align:d,width:h,height:c}=t,{width:u}=n,p=qi(d);let m=i.x+i.width+r.width+Ui.X,g=Math.max(s.y,24);return p?(m=(u-h)/2,g="top"===d?o.y+o.height:s.y+s.height+(a?i.height+l:Ui.Y)):"left"===d&&(m=Ui.X),{width:h,height:c,x:m,y:g}}({chartSize:T,xAxis:X,yAxis:$,secondaryYAxis:G,title:N,legend:x,hasAxis:j,xAxisTitleHeight:z});!function({width:e,height:t},i,s){if(e<0||t<0)return;const{title:n,yAxisTitle:o,yAxis:a,xAxis:r,xAxisTitle:l,legend:d,secondaryYAxis:h}=i,{align:c}=s,u=qi(c),p=u?d.height:0,m=r.height+l.height+a.height+o.height+n.height+p-t;m>0&&(a.height-=m,r.y-=m,l.y-=m,u&&(d.y-=m)),h.x=r.x+r.width,h.height=a.height}(T,{title:N,yAxisTitle:H,yAxis:$,xAxis:X,xAxisTitle:V,legend:_,secondaryYAxis:G},x);const U=function(e,t,i,s){return{width:s,height:t.height,x:"left"===i?Ui.X:e.x+e.width+Ui.X,y:t.y}}(X,$,x.align,S.width),q=function(e,t,i){return Object.assign({x:e.x,y:t.y},Ki(i,e.width,t.height))}(X,$,R.plot);fe(e.layout,{chart:{x:0,y:0,width:k,height:C},title:N,plot:q,legend:_,circleLegend:U,xAxis:X,xAxisTitle:V,yAxis:$,yAxisTitle:H,exportMenu:I,resetButton:Y,secondaryYAxisTitle:F,secondaryYAxis:G})}},observe:{updateLayoutObserve(){this.dispatch("setLayout")}}};function ds(e,t){if(t)return t;const i=new Set;return Object.keys(e).forEach(t=>{var s;"pie"!==t&&(s=e[t].data,null!=s?s:e[t]).forEach(({data:e,name:s,visible:n})=>{Array.isArray(e)?e.forEach(e=>{if(!x(e)){const t=bi(e);i.add(S(t)?t:t.toString())}}):("bullet"===t&&b(n)||n)&&i.add(s)})}),Array.from(i).sort(W).map(e=>String(e))}var hs={name:"category",state:({categories:e,series:t})=>({categories:ds(t,e)}),action:{setCategory({state:e,computed:t}){const{viewRange:i}=t;let s=e.rawCategories;i&&(s=Array.isArray(s)?vi(s,i):Object.assign(Object.assign({},s),{x:vi(s.x,i)})),e.categories=s,this.notify(e,"categories")},initCategory({initStoreState:e,state:t}){const{zoomRange:i}=t;let s=ds(e.series);i&&Array.isArray(s)&&(s=vi(s,i)),t.categories=s,this.notify(t,"categories")},removeCategoryByName({state:e},t){const i=e.categories.findIndex(e=>e===t);e.categories.splice(i,1),this.notify(e,"axes")}},observe:{updateCategory(){this.dispatch("setCategory")}}};const cs=.1,us=1;function ps(e,t,i){const s=i-t,n=Math.abs(s);return s>0&&360!==n&&!e||s<0&&360!==n&&e?360-n:n}function ms(e,t,i){return ps(e,t,i)<=180&&(function(e,t,i){return e&&(t>=-90&&i<=90||t>=90&&i<=180)}(e,t,i)||function(e,t,i){return!e&&(t>=-180&&i<=90||t<=90&&i>=-90)}(e,t,i))}function gs(e,t){return t?e*us:e*cs}function vs(e,t=""){return e.filter(({data:e})=>!x(e)).map(({data:e,name:i,color:s,rootParentName:n})=>({label:i,color:s,value:e,category:t,rootParentName:n,templateType:"pie"}))}function fs(e){var t;return!(!e.pie||!Array.isArray(null===(t=e.pie[0])||void 0===t?void 0:t.data))}function bs(e){return e.pie.map(({name:e})=>e)}function xs(e){const t=e.toFixed(2),i=parseFloat(t);return`${t.length>5?parseFloat(t.substr(0,4)):String(i)}%`}function ys(e,t){var i,s,n;return!!t.pie&&"outer"===(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.anchor)}function Ss(e,t){var i,s,n,o;return!!t.pie&&"outer"===(null===(o=null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.pieSeriesName)||void 0===o?void 0:o.anchor)}function ws(e,t){let i;return i=t?Array.isArray(t)?t.length:t.x.length:Object.keys(ds(e,t)).length,[0,i-1]}function Os(e,t,i){var s;if((e.line||e.area)&&(null===(s=t.series)||void 0===s?void 0:s.zoomable))return ws(e,i)}function Ms(e,t,i){var s;if((e.line||e.area||e.column||e.heatmap)&&(null===(s=t.series)||void 0===s?void 0:s.shift))return ws(e,i)}function As(e,t,i,s){if(!s)return e;let[n,o]=s;return"area"!==i&&!S(F(e))?[n,o]=function(e,t,i){const[s,n]=i;let o,a;return C(s,n+1).forEach(i=>{const s=e.findIndex(e=>bi(e).toString()===t[i]);-1!==s&&(b(o)&&(o=s),b(o)||(a=Math.max(s,null!=a?a:0)))}),[o,a]}(e,t,s):(n=n>1?n-1:n,o=o<t.length-1?o+1:o),e.slice(n,o+1)}function ks(e,t){return yi(e)&&(b(t)||"line"===t||"scatter"===t)}function Cs(e){const t=fs(e),i=[];return t?e.pie.forEach(({data:e})=>{e.forEach(e=>{y(e.visible)&&!e.visible&&i.push(e.name)})}):Object.keys(e).forEach(t=>{e[t].forEach(({name:e,visible:t})=>{y(t)&&!t&&i.push(e)})}),i}var Ts={name:"seriesData",state:({series:e,categories:t,options:i})=>({rawCategories:ds(e,t),series:Object.assign({},e),zoomRange:Os(e,i,t),shiftRange:Ms(e,i,t),disabledSeries:Cs(e)}),action:{setSeriesData({state:e,initStoreState:t}){const i=E(t.series),{disabledSeries:s,theme:n,zoomRange:o,rawCategories:a}=e,r={};Object.keys(i).forEach(e=>{var t,l,d;const{colors:h,iconTypes:c}=n.series[e];let u=i[e].map((t,i)=>Object.assign(Object.assign({},t),{rawData:t.data,data:As(t.data,a,e,o),color:h?h[i%h.length]:""}));"scatter"===e&&(u=u.map((e,t)=>Object.assign(Object.assign({},e),{iconType:c?c[t]:"circle"})));const p=u.length,m=null!=(d=null===(l=null===(t=u[0])||void 0===t?void 0:t.data)||void 0===l?void 0:l.length)?d:0,g=u.filter(({name:e})=>!s.includes(e));r[e]={seriesCount:p,seriesGroupCount:m,data:g,colors:h}}),fe(e.series,r)},disableSeries({state:e},t){e.disabledSeries.push(t),this.notify(e,"disabledSeries"),e.series.bullet&&this.dispatch("removeCategoryByName",t)},enableSeries({state:e},t){const i=e.disabledSeries.findIndex(e=>e===t);e.disabledSeries.splice(i,1),this.notify(e,"disabledSeries"),e.series.bullet&&(e.categories=e.series.bullet.data.map(({name:e})=>e),this.notify(e,"axes"))},zoom({state:e},t){const i=e.rawCategories;e.zoomRange=t.map(e=>i.findIndex(t=>t===e)),this.notify(e,"zoomRange")},resetZoom({state:e,initStoreState:t}){const{series:i,options:s}=t,n=e.rawCategories;e.zoomRange=Os(i,s,n),this.notify(e,"zoomRange")},addData({state:e,initStoreState:t},{data:i,category:s,chartType:n}){const{series:o}=t,a=ks(e.series,n);let{categories:r}=t;if(r=o.heatmap?r.x:r,s&&Array.isArray(r)){if(!r.some(e=>e===s)&&(r.push(s),Array.isArray(e.shiftRange))){const[t,i]=e.shiftRange;e.shiftRange=[t+1,i+1]}}if(n)o[n].forEach((e,t)=>{e.data.push(i[t])});else{const[e]=Object.keys(t.series);o[e].forEach((e,t)=>{e.data.push(i[t])})}this.notify(e,"series"),this.notify(e,"rawCategories"),Array.isArray(e.zoomRange)&&this.dispatch("resetZoom"),a&&this.dispatch("initCategory")},addSeries({state:e,initStoreState:t},{data:i,chartType:s,category:n}){const{series:o,categories:a}=t,r=ks(e.series,s),l=s||Object.keys(o)[0];(function(e,t,i){return e[t].some(({label:e})=>e===i.name)})(o,l,i)||(o[l].push(i),Array.isArray(a)&&n&&a.push(n)),this.dispatch("initThemeState"),this.dispatch("initLegendState"),this.notify(e,"series"),(r||"bullet"===l)&&this.dispatch("initCategory")},addHeatmapSeries({state:e,initStoreState:t},{data:i,category:s}){const{series:n,categories:o}=t,a=function(e,t){return T(e.y,t)}(o,s);a||n.heatmap.push({data:i,yCategory:s}),!a&&s&&(o.y.push(s),this.notify(e,"rawCategories")),this.notify(e,"series"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addTreemapSeries({state:e,initStoreState:t},{data:i}){const{series:s}=t;(function(e,t){return e.treemap.some(({label:e})=>e===t.label)})(s,i)||s.treemap.push(i),this.notify(e,"series"),this.notify(e,"treemapSeries"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},setData({state:e,initStoreState:t},{series:i,categories:s}){t.series=i,e.rawCategories=ds(i,s),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addOutlier({state:e,initStoreState:t},{seriesIndex:i,outliers:s}){var n;const{series:o}=t,a=o.boxPlot[i];if(!a)throw new Error(te);a.outliers=[...(n=a.outliers,null!=n?n:[]),...s],this.notify(e,"series")}},observe:{updateSeriesData(){this.dispatch("setSeriesData")}},computed:{isLineTypeSeriesZooming:({zoomRange:e,rawCategories:t})=>gi(t,e),viewRange:({zoomRange:e,shiftRange:t})=>e||t}};function Ds(e,t){const{color:i,points:s,lineWidth:n,fillColor:o,dashSegments:a=[]}=t;s.length&&(e.beginPath(),a&&Re(e,a),s.forEach(({x:t,y:i},s)=>{0!==s?e.lineTo(t,i):e.moveTo(t,i)}),e.lineTo(s[0].x,s[0].y),o&&Pe(e,o),Le(e,{lineWidth:n,strokeStyle:i}),e.closePath())}function js(e){switch(e){case"triangle":return 3;case"diamond":return 4;case"pentagon":return 5;case"hexagon":return 6}}function Rs(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,fillColor:a,iconType:r,size:l}=t,d={x:i,y:s,fillColor:a,borderColor:n,borderWidth:o,size:l};switch(e.beginPath(),r){case"rect":ht(e,{type:"pathRect",x:i-l/2,y:s-l/2,width:l,height:l,stroke:n,lineWidth:o,fill:a});break;case"triangle":case"pentagon":case"diamond":case"hexagon":!function(e,t){const{numberOfSides:i,size:s,x:n,y:o,borderColor:a,borderWidth:r,fillColor:l}=t,d=s/2,h=i%2?Math.PI/180*(10+(i-3)/2)*i:0,c=2*Math.PI/i;e.beginPath();for(let t=0;t<=i;t+=1){const i=t*c+h;e.lineTo(n+d*Math.cos(i),o+d*Math.sin(i))}e.strokeStyle=a,e.lineWidth=r,Pe(e,l),e.stroke(),e.closePath()}(e,Object.assign({type:"regularPolygon",numberOfSides:js(r)},d));break;case"star":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t;e.lineWidth=o,e.strokeStyle=n,e.fillStyle=r,e.save(),e.beginPath(),e.translate(i,s),e.moveTo(0,-a);for(let t=0;t<5;t+=1)e.rotate(Math.PI/5),e.lineTo(0,-a/2),e.rotate(Math.PI/5),e.lineTo(0,-a);e.fill(),e.stroke(),e.restore(),e.closePath()}(e,Object.assign(Object.assign({type:"star"},d),{size:l/2}));break;case"cross":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t,l=a/4,d=a/2,h=[-d,-d,-l,-l,l,l,d,d,l,l,-l,-l],c=[];for(let e=0,t=h.length;e<t;e+=1){const i=9;c.push(h[(i+e)%t])}Ds(e,{type:"polygon",lineWidth:o,color:n,points:h.map((e,t)=>({x:i+e,y:s+c[t]})),fillColor:r})}(e,Object.assign({type:"cross"},d));break;default:ct(e,{type:"circle",x:i,y:s,radius:l/2,style:[{strokeStyle:n,lineWidth:o}],color:a})}e.stroke(),e.closePath()}const Bs=40,Ps=5,Ls=12,Es=12;function Ws(e){return e+Ui.Y}function zs(e,t,i,s){const{active:n,checked:o}=s,a=n?"#bbb":Fe("#bbbbbb",.3);pt(e,{type:"rect",x:t,y:i,width:Ls,height:Ls,color:"#fff",borderColor:a,thickness:1}),o&&function(e,t,i,s){const n=s?"#555555":Fe("#555555",.3);ut(e,{type:"line",x:t+2,y:i+5,x2:t+5,y2:i+8,strokeStyle:n,lineWidth:2}),ut(e,{type:"line",x:t+5,y:i+9,x2:t+10,y2:i+3,strokeStyle:n,lineWidth:2})}(e,t,i,n)}function Is(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s,l=t+(r?Ls+Ps:0),d=o?a:Fe(a,.3);"rect"===n?pt(e,{type:"rect",x:l,y:i+(Ls-10)/2,width:10,height:10,color:d}):"line"===n?function(e,t,i,s){const n=[2,2,6,6,10,10],o=[8,0,0,8,8,0];n.forEach((a,r)=>{5!==r&&ut(e,{type:"line",x:t+a,y:i+o[r],x2:t+n[r+1],y2:i+o[r+1],lineWidth:2,strokeStyle:s})})}(e,l,i+2,d):"circle"===n&&ct(e,{type:"circle",x:l+6,y:i+6,radius:6,color:d,style:["default"]})}function Ys(e,t){const{data:i,showCheckbox:s,align:n,fontSize:o,fontFamily:a,fontWeight:r}=t,l=Te({fontSize:o,fontFamily:a,fontWeight:r}),d=t.color;i.forEach(t=>{const{x:i,y:o,checked:a,active:r,color:h,iconType:c,useScatterChartIcon:u,viewLabel:p}=t,m=o-1+(xt(p,l)-11)/4,g={iconType:c,checked:a,active:r,color:h,showCheckbox:s,align:n,font:l,fontColor:d};s&&zs(e,i,m,g),u&&"line"!==c?function(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s;Rs(e,{type:"scatterSeries",iconType:n,x:t+(r?Ls+Ps:0)+6,y:i+6,borderColor:o?a:Fe(a,.3),size:12,fillColor:"rgba(255, 255, 255, 0)",borderWidth:1.5})}(e,i,m,g):Is(e,i,m,g),function(e,t,i,s,n){const{active:o,showCheckbox:a,font:r,fontColor:l}=n,d=o?l:Fe(l,.3);qe(e,{type:"label",x:t+Es+Ps+(a?Ls+Ps:0),y:i,text:s,style:["default",{font:r,textBaseline:"top",fillStyle:d}]})}(e,i,o,p,g)})}const Ns=2,Hs=3,$s=4,Fs=.3,Gs=.05,Xs=4,Vs={shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6},_s=4,Us=2,qs={whisker:{lineWidth:1},maximum:{lineWidth:1},minimum:{lineWidth:1},median:{lineWidth:1,color:"#ffffff"}},Ks=[.5,.3,.1];const Zs={width:8,height:6},Js={colors:["#00a9ff","#ffb840","#ff5a46","#00bd9f","#785fff","#f28b8c","#989486","#516f7d","#28e6eb","#28695f","#96c85a","#45ba3f","#295ba0","#2a4175","#289399","#66c8d3","#617178","#8a9a9a","#bebebe","#374b5a","#64eba0","#ffe155","#ff9141","#af4beb","#ff73fa","#ff55b2","#2869f5","#3296ff","#8cc3ff","#2828b9","#fa8787","#e13782","#7d5aaa","#643c91","#d25f5f","#fabe6e","#c3a9eb","#b9c8f5","#73a0cd","#0f5a8c"],startColor:"#ffe98a",endColor:"#d74177",lineWidth:2,dashSegments:[],borderWidth:0,borderColor:"#ffffff",select:{dot:{radius:3,borderWidth:5},areaOpacity:.3,restSeries:{areaOpacity:.06}},hover:{dot:{radius:3,borderWidth:5}},dot:{radius:3},areaOpacity:.3};function Qs(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:700,color:"#bbbbbb"}}function en(e="Arial",t=!1){const i=Qs(e),s=function(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:"normal",color:"#333333"}}(e);return{chart:{fontFamily:e,backgroundColor:"#ffffff"},noData:{fontSize:18,fontFamily:e,fontWeight:"normal",color:"#333333"},title:{fontSize:18,fontFamily:e,fontWeight:100,color:"#333333"},yAxis:{title:Object.assign({},i),label:Object.assign({},s),width:1,color:"#333333"},xAxis:{title:Object.assign({},i),label:Object.assign({},s),width:1,color:"#333333"},verticalAxis:{label:Object.assign(Object.assign({},s),{textBubble:{visible:t,backgroundColor:t?"#f3f3f3":"rgba(0, 0, 0, 0)",borderRadius:7,paddingX:7,paddingY:2,borderColor:"rgba(0, 0, 0, 0)",borderWidth:1}})},circularAxis:{label:Object.assign({},s),lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.05)",dotColor:"rgba(0, 0, 0, 0.5)"},legend:{label:{color:"#333333",fontSize:11,fontWeight:"normal",fontFamily:e}},tooltip:{background:"rgba(85, 85, 85, 0.95)",borderColor:"rgba(255, 255, 255, 0)",borderWidth:0,borderRadius:3,borderStyle:"solid",body:{fontSize:12,fontFamily:`${e}, sans-serif`,fontWeight:"normal",color:"#ffffff"},header:{fontSize:13,fontFamily:`${e}, sans-serif`,fontWeight:"bold",color:"#ffffff"}},plot:{lineColor:"rgba(0, 0, 0, 0.05)",backgroundColor:"rgba(255, 255, 255, 0)"},exportMenu:{button:Object.assign(Object.assign({},tn(5,"#f4f4f4")),{backgroundColor:"#f4f4f4",xIcon:{color:"#555555",lineWidth:2},dotIcon:{color:"#555555",width:2,height:2,gap:2}}),panel:Object.assign(Object.assign({},tn(0,"#bab9ba")),{header:Object.assign(Object.assign({},s),{backgroundColor:"#f4f4f4"}),body:Object.assign(Object.assign({},s),{backgroundColor:"#ffffff"})})}}}function tn(e,t,i=1){return{borderWidth:i,borderRadius:e,borderColor:t}}function sn(e=!1,t=7,i=5,s=1,n="#ffffff"){return{visible:e,paddingX:i,paddingY:s,borderRadius:t,backgroundColor:n,shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}}function nn(e,t,{hasOuterAnchor:i=!1,hasOuterAnchorPieSeriesName:s=!1},n=!1){const o=function(e="Arial"){return{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1}}(e),a={lineWidth:Js.lineWidth,dashSegments:Js.dashSegments,select:{dot:Js.select.dot},hover:{dot:Js.hover.dot},dot:Js.dot,dataLabels:Object.assign(Object.assign({},o),{textBubble:Object.assign(Object.assign({},sn()),{arrow:Object.assign({visible:!1,direction:"bottom"},Zs)})})};switch(t){case"line":return Object.assign({},a);case"area":return Object.assign(Object.assign({},a),{select:Object.assign(Object.assign({},a.select),{areaOpacity:.3,restSeries:Js.select.restSeries}),areaOpacity:.3});case"treemap":case"heatmap":return{startColor:Js.startColor,endColor:Js.endColor,borderWidth:0,borderColor:"#ffffff",hover:{borderWidth:Xs,borderColor:"#ffffff"},select:{borderWidth:Xs,borderColor:"#ffffff"},dataLabels:Object.assign(Object.assign({},o),{color:"#ffffff",textBubble:Object.assign({},sn(!1,1,5,1,"rgba(255, 255, 255, 0.5)"))})};case"scatter":return{size:12,borderWidth:1.5,fillColor:"rgba(255, 255, 255, 0)",select:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12},hover:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12}};case"bubble":return{borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",select:{},hover:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:2,shadowOffsetY:2,lineWidth:2}};case"radar":return{areaOpacity:Fs,hover:{dot:{radius:$s,borderWidth:$s+1}},select:{dot:{radius:$s,borderWidth:$s+1},restSeries:{areaOpacity:Gs},areaOpacity:Fs},dot:{radius:Hs}};case"bar":case"column":return{colorByPoint:!1,areaOpacity:1,hover:Object.assign(Object.assign({},Vs),{borderWidth:Xs,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},Vs),{borderWidth:Xs,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),connector:{color:"rgba(51, 85, 139, 0.3)",lineWidth:1,dashSegments:[]},dataLabels:Object.assign(Object.assign({},o),{textBubble:Object.assign(Object.assign({},sn(!1,1,4,3)),{arrow:Object.assign({visible:!1},Zs)}),stackTotal:Object.assign(Object.assign({},o),{textBubble:Object.assign(Object.assign({},sn(!0,1,4,3)),{arrow:Object.assign({visible:!0},Zs)})})})};case"bullet":return{areaOpacity:1,barWidthRatios:{rangeRatio:1,bulletRatio:.5,markerRatio:.8},markerLineWidth:1,borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",hover:Object.assign(Object.assign({},Vs),{borderWidth:Xs,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},Vs),{borderWidth:Xs,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),dataLabels:Object.assign(Object.assign({},o),{textBubble:Object.assign(Object.assign({},sn()),{arrow:Object.assign({visible:!1},Zs)}),marker:Object.assign(Object.assign({},o),{fontSize:9,useSeriesColor:!0,textBubble:Object.assign(Object.assign({},sn(!0)),{backgroundColor:"rgba(255, 255, 255, 0.8)",shadowColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,arrow:Object.assign({visible:!1},Zs)})})})};case"boxPlot":return{areaOpacity:1,barWidthRatios:{barRatio:1,minMaxBarRatio:.5},markerLineWidth:1,dot:{color:"#ffffff",radius:_s,borderWidth:Us,useSeriesColor:!1},rect:{borderWidth:0},line:Object.assign({},qs),hover:Object.assign(Object.assign({},Vs),{rect:{borderWidth:Xs,borderColor:"#ffffff"},dot:{radius:_s,borderWidth:0,useSeriesColor:!0},line:Object.assign({},qs)}),select:Object.assign(Object.assign({},Vs),{rect:{borderWidth:Xs,borderColor:"#ffffff"},dot:{radius:_s,borderWidth:0,useSeriesColor:!0},line:Object.assign({},qs),restSeries:{areaOpacity:.2},areaOpacity:1})};case"pie":return{areaOpacity:1,strokeStyle:n?"#ffffff":"rgba(255, 255, 255, 0)",lineWidth:n?1:0,hover:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},select:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1},dataLabels:{fontFamily:"Arial",fontSize:16,fontWeight:600,color:i?"#333333":"#ffffff",useSeriesColor:i,textBubble:Object.assign({},sn(!1,0)),callout:{lineWidth:1,useSeriesColor:!0,lineColor:"#e9e9e9"},pieSeriesName:Object.assign(Object.assign({},o),{useSeriesColor:s,color:s?"#333333":"#ffffff",textBubble:Object.assign({},sn(!1,0))})}};case"radialBar":return{areaOpacity:1,strokeStyle:n?"#fff":"rgba(255, 255, 255, 0)",lineWidth:0,hover:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,groupedSector:{color:"#000000",opacity:.05}},select:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1,groupedSector:{color:"#000000",opacity:.2}},dataLabels:{fontFamily:"Arial",fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1,textBubble:Object.assign({},sn(!1,0))}};default:return{}}}function on(e,t,i){const{index:s,seriesIndex:n,chartType:o}=e;return S(s)&&("grouped"===t||S(n))&&(b(o)||o===i)}function an(e,t){const{index:i,seriesIndex:s,chartType:n}=e;return S(i)&&S(s)&&(b(n)||n===t)}function rn(e){return Object.keys(e).reduce((t,i)=>!e[i].data.length&&t,!0)}function ln(e){return e.data.reduce((e,{active:t,label:i})=>Object.assign(Object.assign({},e),{[i]:t}),{})}function dn(e,t){var i,s,n;return!(t.treemap&&(null===(i=e.series)||void 0===i||!i.useColorValue))&&(!!b(null===(s=e.legend)||void 0===s?void 0:s.visible)||!!(null===(n=e.legend)||void 0===n?void 0:n.visible))}function hn(e){var t,i;return!!b(null===(t=e.legend)||void 0===t?void 0:t.showCheckbox)||!!(null===(i=e.legend)||void 0===i?void 0:i.showCheckbox)}function cn(e){let t="spectrum";return!function(e){return T(["bubble","scatter"],e)}(e)?!function(e){return T(["bar","column","area","pie","boxPlot","bullet","radialBar"],e)}(e)?function(e){return T(["line","radar"],e)}(e)&&(t="line"):t="rect":t="circle",t}function un(e){var t,i;return null!=(i=null===(t=e.legend)||void 0===t?void 0:t.align)?i:"right"}function pn(e){if(!e.visible)return{legendWidth:0,legendHeight:0,rowCount:0,columnCount:0};const{chart:t,verticalAlign:i,legendWidths:s}=e,{legendWidth:n,isOverflow:o}=function(e){var t,i;const{options:s,visible:n}=e,o=null===(t=s)||void 0===t?void 0:t.legend;if(!n)return{legendWidth:0,isOverflow:!1};if(null===(i=o)||void 0===i?void 0:i.width)return{legendWidth:o.width,isOverflow:!1};return function(e){const{initialWidth:t,legendWidths:i,checkbox:s,verticalAlign:n}=e;let o,a=!1;if(n){const{width:t}=mn(e),s=H(i)+Bs*(i.length-1);a=s>t,o=s}else{const e=Math.max(...i);o=(s?Ls+Ps:0)+Es+Ps+Math.max(e,t)}return{legendWidth:o,isOverflow:a}}(e)}(e),{legendHeight:a,isOverflow:r}=function(e){const{verticalAlign:t,itemHeight:i,legendWidths:s}=e,{height:n}=mn(e);let o,a=!1;if(t)o=n;else{const e=s.length*i;a=n<e,o=a?n:e}return{legendHeight:o,isOverflow:a}}(e),l=i?s.length:1,d=i?Math.ceil(n/t.width):s.length;return o?function(e,t){const{legendWidths:i,itemHeight:s}=e;let n=0,o=0;const{rowCount:a}=i.reduce((e,i)=>{const s=Bs+i;return e.totalWidth+i>t?(e.totalWidth=s,e.rowCount+=1,e.columnCount=1,n=Math.max(n,e.columnCount)):(e.totalWidth+=s,e.columnCount+=1),o=Math.max(o,e.totalWidth),e},{totalWidth:0,rowCount:1,columnCount:0});return{legendHeight:s*a,rowCount:a,columnCount:n,legendWidth:o}}(e,n/d):r?function(e,t){const{legendWidths:i,itemHeight:s}=e,n=i.length*s,o=Math.ceil(n/t),a=i.length/o;let r=0;return C(0,o).forEach(e=>{r+=Math.max(...i.slice(e*a,(e+1)*a))}),r+=Bs*(o-1),{legendWidth:r,legendHeight:a*s+Ui.Y,columnCount:o,rowCount:a}}(e,a):{legendWidth:n,legendHeight:a,columnCount:l,rowCount:d}}function mn(e){const{verticalAlign:t,chart:i,itemHeight:s,initialWidth:n,circleLegendVisible:o}=e,a=100+(o?150:0);return t?{width:i.width-2*Ui.X,height:s}:{width:n,height:i.height-a}}function gn(e){var t,i;const{legendOptions:s,font:n,checkboxVisible:o}=e,a=null===(i=null===(t=s)||void 0===t?void 0:t.item)||void 0===i?void 0:i.width;if(b(a))return;const r=o?Ls+Ps:0,l=Es+Ps,d=bt("...",n),h=bt("W",n),c=Math.floor((a-d-r-l)/h);return c>0?c:0}function vn(e,t,i){var s,n;const{checkboxVisible:o,useSpectrumLegend:a,font:r,legendOptions:l}=e;let d=t;const h=null===(n=null===(s=l)||void 0===s?void 0:s.item)||void 0===n?void 0:n.width,c=function(e,t,i,s){return(i?0:(t?Ls+Ps:0)+Es+Ps)+bt(e,s)}(d,o,a,r);return S(h)&&S(i)&&h<c&&(d=`${t.slice(0,i)}...`),{viewLabel:d,width:null!=h?h:c}}function fn(e,t){const i=Object.values(t).reduce((e,t)=>t&&t.colors?[...e,...t.colors]:e,[]);return e.map((e,t)=>Object.assign(Object.assign({},e),{color:i[t]}))}function bn(e,t){var i,s,n,o,a,r,l,d,h;const c=null!=(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.useColorValue)?n:!!t.heatmap,u=!!(null===(o=t)||void 0===o?void 0:o.scatter),p={checkboxVisible:!c&&hn(e),font:Te(P(en(null===(l=null===(r=null===(a=e)||void 0===a?void 0:a.theme)||void 0===r?void 0:r.chart)||void 0===l?void 0:l.fontFamily).legend.label,Object.assign({},null===(h=null===(d=e.theme)||void 0===d?void 0:d.legend)||void 0===h?void 0:h.label))),useSpectrumLegend:c,legendOptions:e.legend};return{useSpectrumLegend:c,useScatterChartIcon:u,data:(fs(t)?function(e,t){const i=[],s=gn(t);return e.pie.forEach(({data:e})=>{e.forEach(({name:e,parentName:n,visible:o})=>{if(!n){const{width:n,viewLabel:a}=vn(t,e,s);i.push({label:e,type:"pie",checked:null==o||o,viewLabel:a,width:n})}})}),i}(t,p):function(e,t){const i=gn(t);return Object.keys(e).flatMap(s=>e[s].map(({name:e,colorValue:n,visible:o})=>{const a=n||e,{width:r,viewLabel:l}=vn(t,a,i);return{label:a,type:s,checked:null==o||o,viewLabel:l,width:r}}))}(t,p)).map(({label:e,type:t,checked:i,width:s,viewLabel:n})=>({label:e,active:!0,checked:i,width:s,iconType:cn(t),chartType:t,rowIndex:0,columnIndex:0,viewLabel:n}))}}var xn={name:"legend",state:({options:e,series:t})=>({legend:bn(e,t),circleLegend:{}}),action:{initLegendState({state:e,initStoreState:t}){fe(e.legend,bn(t.options,t.series))},setLegendLayout({state:e}){e.legend.useSpectrumLegend?this.dispatch("setSpectrumLegendLayout"):this.dispatch("setNormalLegendLayout")},setSpectrumLegendLayout({state:e}){const{legend:{data:t},series:i,options:s,chart:n,theme:o}=e,a=un(s),r=dn(s,i),l=qi(a),d=t.map(({width:e})=>e),h=(Ws(o.legend.label.fontSize),function(e,t,i){if(i){const i=H(e);return Math.max(t/4,i)}const s=2*(Gi.PADDING+Fi.PADDING+Ui.X)+Gi.POINT_HEIGHT+Fi.HEIGHT;return Math.max(...e)+s}(d,n.width,l)),c=function(e,t,i){return i?$i+2*Fi.PADDING+Gi.POINT_HEIGHT+Gi.HEIGHT+Ui.Y:3*t/4}(0,n.height,l);fe(e.legend,{visible:r,align:a,width:h,height:c})},setNormalLegendLayout({state:e,initStoreState:t}){const{legend:{data:i},series:s,options:n,chart:o,theme:a}=e,r=un(n),l=dn(n,s),d=hn(n),h=Math.min(o.width/5,100),c=qi(r),u=fs(t.series),p=!!s.scatter,m=!!s.bubble,g=!!m&&function(e){var t,i,s;return null==(s=null===(i=null===(t=e)||void 0===t?void 0:t.circleLegend)||void 0===i?void 0:i.visible)||s}(n),v=i.map(({width:e})=>e),f=Ws(a.legend.label.fontSize),{legendWidth:b,legendHeight:x,rowCount:y,columnCount:S}=pn({initialWidth:h,legendWidths:v,options:n,verticalAlign:c,visible:l,checkbox:d,chart:o,itemHeight:f,circleLegendVisible:g});!function(e,t,i,s,n){let o=0,a=0;e.forEach(e=>{e.rowIndex=a,e.columnIndex=o,[a,o]=function(e){const{verticalAlign:t,columnCount:i,rowCount:s,legendCount:n}=e;let{rowIndex:o,columnIndex:a}=e;if(t){n/s-1>a?a+=1:(o+=1,a=0)}else{n/i-1>o?o+=1:(a+=1,o=0)}return[o,a]}({rowCount:t,columnCount:i,verticalAlign:n,legendCount:s,rowIndex:a,columnIndex:o})})}(i,y,S,v.length,c),fe(e.legend,{visible:l,align:r,showCheckbox:d,width:b,height:x}),m&&g&&this.dispatch("updateCircleLegendLayout",{legendWidth:b}),u||rn(s)||this.dispatch("updateLegendColor"),p&&this.dispatch("updateLegendIcon")},updateCircleLegendLayout({state:e},{legendWidth:t}){const i=0===t?150:Math.min(t,150),s=Math.max((i-Ps)/2,0);fe(e.circleLegend,{visible:!0,width:i,radius:s})},setLegendActiveState({state:e},{name:t,active:i}){const{data:s}=e.legend;s.find(({label:e})=>e===t).active=i,this.notify(e,"legend")},setAllLegendActiveState({state:e},t){e.legend.data.forEach(e=>{e.active=t}),this.notify(e,"legend")},setLegendCheckedState({state:e},{name:t,checked:i}){e.legend.data.find(({label:e})=>e===t).checked=i,this.notify(e,"legend")},updateLegendColor({state:e}){const{legend:t,series:i}=e,s=fn(t.data,i);fe(e.legend,{data:s})},updateLegendIcon({state:e}){const{legend:t,series:i}=e,s=t.data.reduce((e,t)=>{var s;if("scatter"===t.chartType&&(null===(s=i.scatter)||void 0===s?void 0:s.data)){const s=i.scatter.data.find(({name:e})=>e===t.label),n=s?s.iconType:t.iconType;return[...e,Object.assign(Object.assign({},t),{iconType:n})]}return[...e,t]},[]);fe(e.legend,{data:s})},updateNestedPieChartLegend({state:e}){const{legend:t,nestedPieSeries:i}=e;fe(e.legend,{data:fn(t.data,i)})}},observe:{updateLegendLayout(){this.dispatch("setLegendLayout")}}};function yn(e,t,i){var s,n;const{width:o,height:a}=e;return{width:o?t.width:null===(s=i)||void 0===s?void 0:s.width,height:a?t.height:null===(n=i)||void 0===n?void 0:n.height}}var Sn={name:"options",state:({options:e})=>({originalOptions:E(e),options:e}),action:{setOptions({state:e}){const{width:t,height:i}=e.chart;t<0||i<0||(e.options=function(e,t){var i;const s=null===(i=t.responsive)||void 0===i?void 0:i.rules;return Array.isArray(s)?s.reduce((t,i)=>i.condition(e)?P(t,i.options):t,t):t}({width:t,height:i},e.originalOptions))},initOptions({initStoreState:e,state:t},{options:i,containerSize:s}){e.options=i,t.originalOptions=E(i);const{usingContainerSize:n,originalOptions:o}=t,a=yn(n,s,{width:o.chart.width,height:o.chart.height});this.dispatch("setChartSize",a)},updateOptions({state:e,initStoreState:t},{options:i,containerSize:s}){var n,o;t.options=P(t.options,i),e.originalOptions=P(e.originalOptions,i);const{usingContainerSize:a,originalOptions:r}=e,l=yn(a,s,{width:null===(n=r.chart)||void 0===n?void 0:n.width,height:null===(o=r.chart)||void 0===o?void 0:o.height});this.dispatch("setChartSize",l),this.dispatch("initThemeState")}},observe:{updateOptions(){this.dispatch("setOptions")}}};function wn(e,t,i,s){var n;const o=function(e){var t,i,s;const n=Object.assign({},e.theme);if(!Array.isArray(n.yAxis))return n;const o=Qs(null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.theme)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.fontFamily),a=n.yAxis.map(e=>P({title:Object.assign({},o)},Object.assign({},e)));return Object.assign(Object.assign({},n),{yAxis:a})}(e);if(!(null===(n=o)||void 0===n?void 0:n.series))return Object.assign({},o);const a=Object.assign(Object.assign({},o),{series:{}}),r=Object.keys(t),l=r.length>1;if(s){const e=bs(t);a.series={pie:e.reduce((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:P(null===(s=o.series)||void 0===s?void 0:s[t],j(i,"colors"))})},{})}}else a.series=l?Object.assign({},r.reduce((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:P(null===(s=o.series)||void 0===s?void 0:s[t],j(i,"colors"))})},{})):{[r[0]]:o.series};return a}function On(e,t,i){var s,n,o,a,r,l,d,h,c;return{hasOuterAnchor:!!t.pie&&"outer"===(null===(a=null===(o=null===(n=null===(s=e)||void 0===s?void 0:s.series)||void 0===n?void 0:n[i])||void 0===o?void 0:o.dataLabels)||void 0===a?void 0:a.anchor),hasOuterAnchorPieSeriesName:!!t.pie&&"outer"===(null===(c=null===(h=null===(d=null===(l=null===(r=e)||void 0===r?void 0:r.series)||void 0===l?void 0:l[i])||void 0===d?void 0:d.dataLabels)||void 0===h?void 0:h.pieSeriesName)||void 0===c?void 0:c.anchor)}}function Mn(e,t){var i,s,n;const o=fs(t),a=function(e,t,i){var s,n;const o=null===(s=e)||void 0===s?void 0:s.theme;return(null===(n=o)||void 0===n?void 0:n.series)?(i?bs(t):Object.keys(t)).reduce((e,t)=>(delete e[t],e),Object.assign({},o.series)):{}}(e,t,o);let r={hasOuterAnchor:ys(e,t),hasOuterAnchorPieSeriesName:Ss(e,t)};if(o){r=bs(t).reduce((i,s)=>Object.assign(Object.assign({},i),{[s]:On(e,t,s)}),{})}const l=P(function(e,t,i,s=!1){const n=Object.keys(t).reduce((t,s)=>Object.assign(Object.assign({},t),{series:Object.assign(Object.assign({},t.series),{[s]:nn(e,s,i)})}),en(e,!!t.radar));if(s){const o=bs(t);n.series.pie=o.reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:nn(e,"pie",i[n],s)}),{})}return n}(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.theme)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.fontFamily,t,r,o),wn(e,t,a,o));return t.heatmap||function(e,t,i,s){var n,o;let a=0;const r=[...(o=null===(n=i)||void 0===n?void 0:n.colors,null!=o?o:[]),...Js.colors];(s?bs(t):Object.keys(t)).forEach((i,n)=>{var o;const l=s?t.pie[n].data.length:t[i].length,d=s?e.series.pie:e.series;(null===(o=d[i])||void 0===o?void 0:o.colors)||(d[i]=Object.assign(Object.assign({},d[i]),{colors:r.slice(a,a+l)}),a+=l)})}(l,t,a,o),function(e){["vertical","horizontal"].reduce((e,t)=>(e[t]||(e[t]={lineColor:e.lineColor}),e),e.plot)}(l),l}var An={name:"theme",state:({options:e,series:t})=>({theme:Mn(e,t)}),action:{initThemeState({state:e,initStoreState:t}){e.theme=Mn(e.options,t.series)}},observe:{updateTheme(){this.dispatch("initThemeState")}}};class kn{constructor(){this.handlers=[]}on(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)}emit(e,...t){this.handlers[e]&&this.handlers[e].forEach(e=>e(...t))}}class Cn{constructor({store:e,eventBus:t}){this.components=[],this.store=e,this.eventBus=t}add(e,t){const i=new e({store:this.store,eventBus:this.eventBus});i.initialize&&i.initialize(t);let s=(...e)=>{i.render(e[0],e[1]),i.sync(),this.eventBus.emit("needLoop")};this.store.observe((...e)=>{s(...e)}),s=B(s),this.components.push(i)}remove(e){this.components=this.components.filter(t=>!(t instanceof e))}clear(){this.components=[],this.eventBus.emit("needDraw")}invoke(e,t){this.components.forEach(i=>{const s=i[e];s&&s.call(i,t)})}forEach(e){this.components.forEach(e)}}class Tn{constructor(e){this.width=0,this.height=0,this.brushes={},this.chart=e}showUnsupportedCanvasFeatureError(){this.ctx.setLineDash||console.warn(ee)}setup(){const{height:e,width:t}=this.chart.store.state.chart;if(!this.canvas){const e=document.createElement("canvas");this.canvas=e,e.style.backgroundColor="#fff",this.chart.el.appendChild(e),e.addEventListener("click",this.chart),e.addEventListener("mousemove",this.chart),e.addEventListener("mousedown",this.chart),e.addEventListener("mouseup",this.chart);const t=e.getContext("2d");t&&(this.ctx=t)}this.setSize(t,e),this.showUnsupportedCanvasFeatureError()}setSize(e,t){this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`;let i=1;"deviceXDPI"in window.screen?i=window.screen.deviceXDPI/window.screen.logicalXDPI:window.hasOwnProperty("devicePixelRatio")&&(i=window.devicePixelRatio),this.width=e*i||0,this.height=t*i||0,this.scaleCanvasRatio(i)}scaleCanvasRatio(e){this.canvas.width=this.width,this.canvas.height=this.height,this.ctx.scale(e,e)}add(e,t){this.brushes[e]=t}addGroups(e){e.forEach(e=>{Object.keys(e).forEach(t=>{this.add(t,e[t])})})}paint(e,t){if(!this.brushes[e])throw new Error(Q(e));this.brushes[e](this.ctx,t)}paintForEach(e){e.forEach(e=>this.paint(e.type,e))}beforeFrame(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height)}beforeDraw(e,t){this.ctx.save(),this.ctx.translate(e,t)}afterDraw(){this.ctx.restore()}}class Dn{constructor(){this.anims=[],this.state="IDLE",this.requestId=null,this.firstRendering=!0}add({chart:e,duration:t,requester:i,onCompleted:s=(()=>{}),onFrame:n=(t=>{this.firstRendering||e.update(t),this.firstRendering&&(e.initUpdate(t),1===t&&(this.firstRendering=!1))})}){this.anims.length&&this.reset(),"IDLE"===this.state&&(this.anims.push({chart:e,requester:i,duration:t,onFrame:n,onCompleted:s,start:null,current:null,completed:!1}),this.start())}reset(){this.anims.forEach(e=>{e.current=1,e.onFrame(e.current),e.completed=!0}),this.anims=[],this.cancelAnimFrame(),this.state="IDLE",this.requestId=null}start(){this.anims.length&&(this.state="RUNNING",this.runFrame())}runFrame(){this.requestId=window.requestAnimationFrame(e=>{this.runAnims(e)})}runAnims(e){this.next(e),this.anims.length?this.runFrame():(this.state="IDLE",this.requestId=null)}next(e){this.anims.forEach(t=>{x(t.start)&&(t.start=e),Object.defineProperty(t.chart,"___animId___",{value:e,enumerable:!1,writable:!1,configurable:!0}),t.current=t.duration?Math.min((e-t.start)/t.duration,1):1,t.onFrame(t.current),t.completed=1===t.current}),this.anims.forEach(t=>{t.chart.___animId___===e&&(t.chart.draw(),delete t.chart.___animId___),t.completed&&(this.cancelAnimFrame(),t.onCompleted(),t.chart.eventBus.emit("animationCompleted",t.requester))}),this.anims=this.anims.filter(e=>!e.completed)}cancelAnimFrame(){this.requestId&&window.cancelAnimationFrame(this.requestId)}}const jn={circle:(e,t,i)=>{const{x:s,y:n}=e,{x:o,y:a,radius:r,detectionSize:l}=t,{x:d,y:h}=i,c=b(l)?10:l;return Math.pow(s-(o+d),2)+Math.pow(n-(a+h),2)<Math.pow(r+c,2)},rect:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,width:r,height:l}=t,{x:d,y:h}=i;return s>=o+d&&s<=o+d+r&&n>=a+h&&n<=a+h+l},sector:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,radius:{outer:r,inner:l},degree:{start:d,end:h},drawingStartAngle:c,clockwise:u}=t,{x:p,y:m}=i,g=s-(o+p),v=n-(a+m),f=Math.pow(g,2)+Math.pow(v,2)<Math.pow(r,2),b=Math.pow(g,2)+Math.pow(v,2)>Math.pow(l,2),x=f&&b,y=function(e,t=-90){return(180*e/Math.PI-t+360)%360}(Math.atan2(v,g),c);return x&&st(u,d,h,y)},line:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a}=i,{x:r,y:l,x2:d,y2:h,detectionSize:c=3}=t,u=h-l,p=d-r;let m=!1;if(0===u){const e=Math.min(r,d),t=Math.max(r,d);m=s-o>=e&&s-o<=t&&n>=l+a-c&&n<=l+a+c}else if(0===p){const e=Math.min(l,h),t=Math.max(l,h);m=n-a>=e&&n-a<=t&&s>=r+o-c&&s<=r+o+c}else{m=u/p*(s-(r+o))===n-(l+a)}return m},boxPlot:(e,t,i={x:0,y:0,width:0,height:0})=>["rect","median","minimum","maximum","upperWhisker","lowerWhisker"].some(s=>!!t[s]&&("rect"===s?jn.rect(e,t[s],i):jn.line(e,t[s],i)))};function Rn(){const e=location.hostname,t=`TOAST UI chart for ${e}: Statistics`,i=window.localStorage.getItem(t);i&&!function(e){return(new Date).getTime()-e>6048e5}(Number(i))||(window.localStorage.setItem(t,String((new Date).getTime())),setTimeout(()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||function(e,t){const i=Object.keys(t).map((e,i)=>`${i?"&":""}${e}=${t[e]}`).join(""),s=document.createElement("img");s.src=`${e}?${i}`,s.style.display="none",document.body.appendChild(s),document.body.removeChild(s)}("https://www.google-analytics.com/collect",{v:1,t:"event",tid:"UA-129983528-2",cid:e,dp:e,dh:"chart",el:"chart",ec:"use"})},1e3))}class Bn{constructor(e){var t,i,s,n;this.___animId___=null,this.painter=new Tn(this),this.eventBus=new kn,this.enteredComponents=[],this.animationControlFlag={resizing:!1,updating:!1},this.resizeObserver=null,this.debounceResizeEvent=B(()=>{const{offsetWidth:e,offsetHeight:t}=this.containerEl;this.resizeChartSize(e,t)},100),this.getCheckedLegend=()=>{const{data:e}=this.store.state.legend;return e.filter(e=>e.checked).map(e=>D(e,"chartType","label","checked"))},this.getOptions=()=>ge(this.store.initStoreState.options),this.on=(e,t)=>{this.eventBus.on(e,t)},this.destroy=()=>{this.componentManager.clear(),this.clearResizeEvent(),this.containerEl.innerHTML=""},this.selectSeries=e=>{if(!this.isSelectableSeries())throw new Error(U);this.eventBus.emit("selectSeries",Object.assign(Object.assign({},e),{state:this.store.state}))},this.unselectSeries=()=>{if(!this.isSelectableSeries())throw new Error(U);this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("resetSelectedSeries")},this.resize=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",{chart:Object.assign({},e)})},this.resetSeries=()=>{this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("resetSelectedSeries")},this.setResizeEventListeners=(e,t)=>{var i,s,n,o;const{usingContainerSize:a}=this.store.state,{width:r,height:l}=a,d=null===(s=null===(i=t)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.width,h=null===(o=null===(n=t)||void 0===n?void 0:n.chart)||void 0===o?void 0:o.height,c=_(d),u=_(h);this.store.dispatch("setUsingContainerSize",function(e,t,i,s){const{width:n,height:o}=t,a=_(i),r=_(s);return"updateOptions"===e?{width:b(i)||n===a?n:a,height:b(s)||o===r?o:r}:{width:a,height:r}}(e,a,d,h)),(r||l)&&S(d)&&S(h)?this.clearResizeEvent():r||l||!c&&!u||this.setResizeEvent()};const{el:o,options:a,series:r,categories:l,modules:d}=e;this.modules=null!=d?d:[],(b(a.usageStatistics)||a.usageStatistics)&&Rn(),this.containerEl=o,this.el=this.createChartWrapper(),this.containerEl.appendChild(this.el),this.animator=new Dn,this.store=new ve({series:r,categories:l,options:a}),this.componentManager=new Cn({store:this.store,eventBus:this.eventBus}),this.eventBus.on("needLoop",B(()=>{var e,t;let i=this.getAnimationDuration(null===(e=a.chart)||void 0===e?void 0:e.animation);this.animationControlFlag.resizing&&(i=b(a.responsive)?this.getAnimationDuration():this.getAnimationDuration(null===(t=a.responsive)||void 0===t?void 0:t.animation),this.animationControlFlag.resizing=!1),this.eventBus.emit("loopStart"),this.animator.add({onCompleted:()=>{this.eventBus.emit("loopComplete")},chart:this,duration:i,requester:this})},10)),this.eventBus.on("needSubLoop",e=>{this.animator.add(Object.assign(Object.assign({},e),{chart:this}))}),this.eventBus.on("needDraw",B(()=>{this.draw()},10)),this.initialize(),this.store.observe(()=>{this.painter.setup()}),(_(null===(i=null===(t=a)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width)||_(null===(n=null===(s=a)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height))&&this.setResizeEvent()}getAnimationDuration(e){const{firstRendering:t}=this.animator,{resizing:i,updating:s}=this.animationControlFlag;let n;return!t&&!i||b(e)?n=500:y(e)?n=e?500:0:S(e.duration)&&(n=e.duration),s&&(n=0),this.animationControlFlag.updating=!1,n}createChartWrapper(){const e=document.createElement("div");return e.classList.add("toastui-chart-wrapper"),e}resizeChartSize(e,t){this.animationControlFlag.resizing=!0;const{usingContainerSize:{width:i,height:s},chart:{width:n,height:o}}=this.store.state;!i&&!s||!e&&!t||e===n&&t===o?this.animationControlFlag.resizing=!1:(this.resetSeries(),this.store.dispatch("setChartSize",{width:i?e:n,height:s?t:o}),this.draw())}setResizeEvent(){const{usingContainerSize:e}=this.store.state;if(e.height&&!this.containerEl.style.height.length||e.width&&!this.containerEl.style.width.length)throw new Error(ie);"undefined"==typeof ResizeObserver?window.addEventListener("resize",this.debounceResizeEvent):(this.resizeObserver=new ResizeObserver(e=>{e.forEach(()=>{this.debounceResizeEvent()})}),this.resizeObserver.observe(this.containerEl))}clearResizeEvent(){this.resizeObserver?(this.resizeObserver.unobserve(this.containerEl),this.resizeObserver.disconnect(),this.resizeObserver=null):window.removeEventListener("resize",this.debounceResizeEvent)}handleEvent(e){const{clientX:t,clientY:i,type:s}=e,n=`on${s[0].toUpperCase()+s.substring(1)}`,o=this.painter.ctx.canvas,a=o.getBoundingClientRect(),r=a.width/o.offsetWidth,l=a.height/o.offsetHeight,d={x:(t-a.left)/r,y:(i-a.top)/l},h=[];"mousemove"===s&&(this.componentManager.forEach(e=>{const{x:t,y:i,height:s,width:n}=e.rect,o=this.enteredComponents.some(t=>t===e);d.x>=t&&d.x<=t+n&&d.y>=i&&d.y<=i+s?(h.push(e),!o&&e.onMouseenterComponent&&e.onMouseenterComponent()):o&&e.onMouseoutComponent&&e.onMouseoutComponent()}),this.enteredComponents=h);const c=[];this.componentManager.forEach(t=>{if(!t[n])return;if(!jn.rect(d,t.rect))return;const i=(t.responders||[]).filter(e=>jn[e.type](d,e,t.rect));i.length&&c.push({component:t,detected:i}),t[n]({mousePosition:d,responders:i},e)}),this.handleEventForAllResponders&&this.handleEventForAllResponders(e,c,n,d)}initStore(){[xe,Sn,An,Ts,xn,ls,hs,...this.modules].forEach(e=>this.store.setModule(e))}initialize(){this.initStore(),this.store.dispatch("initChartSize",this.containerEl)}draw(){this.painter.beforeFrame(),this.componentManager.forEach(e=>{e.isShow&&(this.painter.beforeDraw(e.rect.x,e.rect.y),e.beforeDraw&&e.beforeDraw(this.painter),e.draw(this.painter),this.painter.afterDraw())})}update(e){this.componentManager.invoke("update",e)}initUpdate(e){this.componentManager.invoke("initUpdate",e)}isSelectableSeries(){var e;return null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.selectable}setTooltipOffset(e){const{x:t,y:i}=e;this.store.dispatch("updateOptions",{options:{tooltip:{offsetX:t,offsetY:i}}})}dispatchOptionsEvent(e,t){this.setResizeEventListeners(e,t);const{offsetWidth:i,offsetHeight:s}=this.containerEl;this.store.dispatch(e,{options:t,containerSize:{width:i,height:s}})}}function Pn(e){const t={min:Math.min(...e),max:Math.max(...e)};if(1===e.length){const[i]=e;i>0?t.min=0:t.max=0===i?10:0}else 0===t.min&&0===t.max?t.max=10:t.min===t.max&&(t.min-=t.min/10,t.max+=t.max/10);return t}function Ln(e,t,i){var s,n,o,a;const r={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER};return{min:Math.min(t[i].min,(n=null===(s=e[i])||void 0===s?void 0:s.min,null!=n?n:r.min)),max:Math.max(t[i].max,(a=null===(o=e[i])||void 0===o?void 0:o.max,null!=a?a:r.max))}}var En={name:"dataRange",state:()=>({dataRange:{}}),action:{setDataRange({state:e,initStoreState:t}){const{series:i,disabledSeries:s,stackSeries:n,categories:o,options:a}=e,r={},l=Xt(i,a),{labelAxisName:d,valueAxisName:h}=Ut(l,i);Object.keys(i).forEach(e=>{var l,c;r[e]={};let u=i[e].data.flatMap(({data:e,name:t})=>s.includes(t)?[]:e);const p=F(u);if(yi(t.series)){const t=!!(null===(l=a.xAxis)||void 0===l?void 0:l.date),{yAxisValues:i,xAxisValues:s}=function(e,t,i){const s=e.filter(e=>!x(e)).map(e=>fi(e));return{xAxisValues:t.map(e=>Number(i?new Date(e):e)),yAxisValues:s}}(u,o,t);u=i,r[e][d]=Pn([...s])}else i[e].data.length?pi(p)?u=u.reduce((e,t)=>x(t)?e:Array.isArray(t)?[...e,...t]:[...t],[]):n&&(null===(c=n[e])||void 0===c?void 0:c.stack)?u=n[e].dataRangeValues:T(["bar","column","radar"],e)?u.push(0):"boxPlot"===e?u=function(e,t){return e[t].data.flatMap(({data:e,outliers:t=[]})=>[...(null!=e?e:[]).flatMap(e=>e),...(null!=t?t:[]).flatMap(e=>e)])}(i,e):"bullet"===e&&(u=function(e,t){return e[t].data.flatMap(({data:e,markers:t,ranges:i})=>[e,...(null!=t?t:[]).flatMap(e=>e),...(null!=i?i:[]).flatMap(e=>e)])}(i,e)):u=[];!function(e,t,i,s,n){var o;const{secondaryYAxis:a}=Jt(e);(Zt(e)&&(null===(o=a)||void 0===o?void 0:o.chartType)?[a.chartType===t?"secondaryYAxis":"yAxis"]:ei(e,s)).forEach(e=>{n[t][e]=Pn([...new Set(i)])})}(a,e,u,h,r)});const c=function(e){return Object.values(e).reduce((e,t)=>(t.xAxis&&(e.xAxis=Ln(e,t,"xAxis")),t.yAxis&&(e.yAxis=Ln(e,t,"yAxis")),t.secondaryYAxis&&(e.secondaryYAxis=Ln(e,t,"secondaryYAxis")),t.circularAxis&&(e.circularAxis=Ln(e,t,"circularAxis")),t.verticalAxis&&(e.verticalAxis=Ln(e,t,"verticalAxis")),e),{})}(r);fe(e.dataRange,c)}},observe:{updateDataRange(){this.dispatch("setDataRange")}}};const Wn=[1,2,5,10];function zn(e){const t=0===e?1:Math.log(Math.abs(e))/Math.LN10;return Math.pow(10,Math.floor(t))}function In(e){const t=zn(e);return function(e){let t=0;for(let i=0,s=Wn.length;i<s;i+=1){if(t=Wn[i],e<=(t+(Wn[i+1]||t))/2)break}return t}(e/t)*t}function Yn(e,t){const i=1/Math.min(zn(e),zn(t));return Math.ceil(e*i/(t*i))}function Nn(e){return S(e)}function Hn(e,t){const i=Nn(t.stepSize)?e.stepSize:In(e.stepSize),s=function(e,t){let{min:i,max:s}=e;const n=Math.min(zn(s),zn(t)),o=n>1?1:1/n,a=t*o;return s=Math.ceil(s*o/a)*a/o,i=i>t?Math.floor(i*o/a)*a/o:i<0?-Math.ceil(Math.abs(i)*o/a)*a/o:0,{min:i,max:s}}(e.limit,i),n=Yn(Math.abs(s.max-s.min),i);return{limit:{min:s.min,max:s.max},stepSize:i,stepCount:n}}function $n(e,t){var i,s,n,o,a,r;return{max:(s=null===(i=t)||void 0===i?void 0:i.max,null!=s?s:e.max),min:(o=null===(n=t)||void 0===n?void 0:n.min,null!=o?o:e.min),stepSize:(r=null===(a=t)||void 0===a?void 0:a.stepSize,null!=r?r:"auto")}}function Fn(e){const{dataRange:t,scaleOption:i,offsetSize:s,minStepSize:n,useSpectrumLegend:o}=e,a=$n(t,i),r=Hn(function(e,t,i=1){const{min:s,max:n}=e,o=Math.abs(n-s),a=o/t;let r=Math.ceil(t/88),l=a*(t/r);return Nn(e.stepSize)?(l=e.stepSize,r=o/l):S(i)&&l<i&&(l=i,r=o/l),{limit:{min:s,max:n},stepSize:l,stepCount:r}}(a,s,n),a),l=o?null:function(e,{min:t,max:i},s){var n,o;const a=e.limit,r=S(null===(n=s)||void 0===n?void 0:n.min),l=S(null===(o=s)||void 0===o?void 0:o.max),d=!r&&a.min===t&&0!==a.min,h=!l&&a.max===i&&0!==a.max;return d||h?{min:d,max:h}:null}(r,a,i);if(l){const{stepSize:e,limit:t}=r;r.limit=function({min:e,max:t},i,s){return{min:s.min?e-i:e,max:s.max?t+i:t}}(t,e,l)}return r}const Gn={year:31536e6,month:26784e5,week:6048e5,date:864e5,hour:36e5,minute:6e4,second:1e3};function Xn(e){const{dataRange:t,rawCategoriesSize:i,scaleOption:s}=e,n=function(e,t,i){var s,n;const o=function({max:e,min:t},i){const s=e-t,n=Vn.length-1;let o;s?Vn.every((e,t)=>{const a=Gn[e],r=Math.floor(s/a);let l;return r&&(l=t<n&&r<2&&r<i?t+1:t,o=Vn[l]),!f(l)}):o="second";return o}(e,t),a=null!==(n=null===(s=i)||void 0===s?void 0:s.stepSize)&&void 0!==n?n:Gn[o],r=$n(e,i),l=Mt(Number(new Date(r.min)),a),d=Mt(Number(new Date(r.max)),a);return{divisionNumber:a,minDate:l,limit:{min:0,max:d-l}}}(t,i,s),{minDate:o,divisionNumber:a,limit:r}=n;return function(e,t,i){const{limit:s,stepSize:n}=e,{min:o,max:a}=s;return Object.assign(Object.assign({},e),{stepSize:Ot(n,i),limit:{min:Ot(wt(o,t),i),max:Ot(wt(a,t),i)}})}(Fn(Object.assign(Object.assign({},j(e,"scaleOption")),{dataRange:r,minStepSize:1})),o,a)}const Vn=["year","month","week","date","hour","minute","second"];function _n(e){var t;return!("percent"!==(null===(t=e)||void 0===t?void 0:t.type))}function Un(e){return!Array.isArray(e)}function qn(e){return R(e,["series","stack"])||R(e,["series","column","stack"])||R(e,["series","area","stack"])}function Kn(e){const t=e.length,i=e.map(({rawData:e})=>e.length),s=Math.max(...i),n=[];for(let i=0;i<s;i+=1){const s=[];for(let n=0;n<t;n+=1)s.push(e[n].rawData[i]);n[i]={values:s,sum:H(s),total:{positive:H(s.filter(e=>e>=0)),negative:H(s.filter(e=>e<0))}}}return n}function Zn(e){if(!e)return;const t={type:"normal",connector:!1};return function(e){return M(e)}(e)?Object.assign(Object.assign({},t),e):t}function Jn(e){const t=e.map(({total:e})=>e.positive);return[...e.map(({total:e})=>e.negative),...t]}function Qn(e){if(!Un(e))return e;let t=[];return Un(e)&&Object.keys(e).forEach(i=>{t=[...t,...e[i]]}),t}function eo(e,t,i){const{hasPositive:s,hasNegative:n}=function(e){return{hasNegative:e.map(({total:e})=>e.negative).some(e=>e<0),hasPositive:e.map(({total:e})=>e.positive).some(e=>e>=0)}}(e);if("percent"===t){if(i)return"divergingPercentStack";if(n&&s)return"dualPercentStack";if(!n&&s)return"percentStack";if(n&&!s)return"minusPercentStack"}}function to(e,t){const i={};return Object.keys(e).forEach(e=>{const s=e,n=qn(t);n?(i[s]||(i[s]={}),i[s].stack=Zn(n)):"radialBar"===e&&(i[e]={stack:!0})}),i}var io={name:"stackSeriesData",state:({series:e,options:t})=>({stackSeries:to(e,t)}),action:{setStackSeriesData({state:e}){const{series:t,stackSeries:i,options:s}=e,n=qn(s),o={};Object.keys(t).forEach(a=>{var r,l;const d=t[a],{data:h,seriesCount:c,seriesGroupCount:u}=d,p="radialBar"===a;n?(i[a]||(i[a]={}),i[a].stack=Zn(n)):p||(i[a]=null,delete i[a]);const{stack:m}=i[a]||{},g=!!(null===(r=s.series)||void 0===r?void 0:r.diverging);if(m){const t=h.some(e=>e.hasOwnProperty("stackGroup"))?function(e){const t={};return[...new Set(e.map(({stackGroup:e})=>e))].forEach(i=>{const s=e.filter(({stackGroup:e})=>i===e);t[i]=Kn(s)}),t}(h):Kn(h),i=null!=(l=m.type)?l:"normal",s=function(e){let t=[];if(Array.isArray(e))t=[0,...Jn(e)];else for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t=[0,...t,...Jn(e[i])]);return t}(t);o[a]={data:h,seriesCount:c,seriesGroupCount:u,stackData:t,dataRangeValues:s,scaleType:eo(Qn(t),i,g)},e.stackSeries[a].stackData=t}fe(e.stackSeries,o)})}},observe:{updateStackSeriesData(){this.dispatch("setStackSeriesData")}}};function so(e,t,i,s){var n;const{dataRange:o,layout:a,series:r,options:l}=e,d=e.categories,h=e.rawCategories,{labelSizeKey:c}=qt(t),u=f(null===(n=l.xAxis)||void 0===n?void 0:n.date),p={dataRange:o[s],offsetSize:Math.max(a.plot[c],1),scaleOption:i[s],rawCategoriesSize:h.length};let m;return o[s]&&(m=u?Xn(p):Fn(p)),r.line&&(m=function(e,t,i){var s,n;if(!i)return e;const o=!!(null===(n=null===(s=t)||void 0===s?void 0:s.xAxis)||void 0===n?void 0:n.date),a=i.map(e=>Number(o?new Date(e):e)),{limit:r,stepSize:l}=e,d=Math.min(...a),h=Math.max(...a),c=Object.assign({},r);return h-d&&(r.min<d&&r.min+l<=d&&(c.min+=l),r.max>h&&r.max-l>=h&&(c.max-=l)),{limit:c,stepCount:Yn(Math.abs(c.max-c.min),l),stepSize:l}}(m,l,d)),m}function no(e,t,i,s,n){const{dataRange:o,layout:a,series:r,stackSeries:l}=e,{valueSizeKey:d}=qt(t);let h;if(function(e){return!!e&&Object.keys(e).some(t=>_n(e[t].stack))}(l))Object.keys(r).forEach(e=>{var t;t=l[e].scaleType,h="minusPercentStack"===t?{limit:{min:-100,max:0},stepSize:25,stepCount:5}:"dualPercentStack"===t?{limit:{min:-100,max:100},stepSize:25,stepCount:9}:"divergingPercentStack"===t?{limit:{min:-100,max:100},stepSize:25,stepCount:9}:{limit:{min:0,max:100},stepSize:25,stepCount:5}});else if(n){const e={dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]};h=Fn(e)}else h=Fn({dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]});return h}var oo={name:"scale",state:()=>({scale:{}}),action:{setScale({state:e,initStoreState:t}){var i,s,n,o,a,r;const{series:l,options:d}=e,h=Xt(l,d),{labelAxisName:c,valueAxisName:u}=Ut(h,l),{yAxis:p,secondaryYAxis:m}=Jt(d),g=_t(l)?{[u]:null===(s=null===(i=d)||void 0===i?void 0:i[u])||void 0===s?void 0:s.scale}:{xAxis:null===(o=null===(n=d)||void 0===n?void 0:n.xAxis)||void 0===o?void 0:o.scale,yAxis:null===(a=p)||void 0===a?void 0:a.scale},v={};m&&(g.secondaryYAxis=null===(r=m)||void 0===r?void 0:r.scale);const f=yi(t.series);ei(d,u).forEach(t=>{v[t]=no(e,h,g,t,f)}),f&&(v[c]=so(e,h,g,c)),e.scale=v}},observe:{updateScale(){this.dispatch("setScale")}}};function ao(e){return e.reduce((e,t)=>{const[i,s]=e,[n,o]=t;return[Math.min(i,n),Math.max(s,o)]},[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])}function ro(e,t,i=!1){return i?Number(new Date(e)):w(e)?function(e,t){return t.findIndex(t=>t===String(e))}(e,t):e}function lo(e,t){return e.some(({id:e})=>!b(e)&&!b(t.id)&&e===t.id)}var ho={name:"plot",state:({options:e})=>{var t,i,s;return{plot:{visible:(s=null===(i=null===(t=e)||void 0===t?void 0:t.plot)||void 0===i?void 0:i.visible,null==s||s),lines:[],bands:[]}}},action:{setPlot({state:e}){var t,i,s,n,o,a,r,l;const{series:d,options:h}=e;if(!d.area&&!d.line)return;const c=e.rawCategories,u=h,p=function(e,t,i=[]){return i.map(({value:i,color:s,opacity:n})=>({value:ro(i,e,t),color:Xe(s,n)}))}(c,!!(null===(i=null===(t=h)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.date),null===(n=null===(s=u)||void 0===s?void 0:s.plot)||void 0===n?void 0:n.lines),m=function(e,t,i=[]){return i.flatMap(({range:i,mergeOverlappingRanges:s=!1,color:n,opacity:o})=>{const a=Xe(n,o);if(pi(i[0])){const n=i.map(i=>i.map(i=>ro(i,e,t)));return s?{color:a,range:ao(n)}:n.map(e=>({range:e,color:a}))}return{color:a,range:i}})}(c,!!(null===(a=null===(o=h)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.date),null===(l=null===(r=u)||void 0===r?void 0:r.plot)||void 0===l?void 0:l.bands);fe(e.plot,{lines:p,bands:m})},addPlotLine({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines)?n:[];lo(o,t)||this.dispatch("updateOptions",{options:{plot:{lines:[...o,t]}}})},addPlotBand({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[];lo(o,t)||this.dispatch("updateOptions",{options:{plot:{bands:[...o,t]}}})},removePlotLine({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines,null!=n?n:[]).filter(({id:e})=>e!==t);this.dispatch("updateOptions",{options:{plot:{lines:o}}})},removePlotBand({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands,null!=n?n:[]).filter(({id:e})=>e!==t);this.dispatch("updateOptions",{options:{plot:{bands:o}}})}},observe:{updatePlot(){this.dispatch("setPlot")}}};function co(e,t){return`<span class="toastui-chart-series-name">\n    <i class="toastui-chart-icon" style="background: ${t}"></i>\n    <span class="toastui-chart-name">${e}</span>\n  </span>`}function uo(e,t){return`<div class="toastui-chart-tooltip-series">\n    <span class="toastui-chart-series-name">${e}</span>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}const po={default:function(e,{header:t,body:i},s){const{borderColor:n,borderWidth:o,background:a,borderRadius:r,borderStyle:l}=s;return`<div class="toastui-chart-tooltip" style="${`border: ${o}px ${l} ${n};border-radius: ${r}px;background: ${a};`}">${t}${i}</div>`},defaultHeader:function({category:e},t){return e?`<div class="toastui-chart-tooltip-category" style="${De(t.header)}">\n        ${e}\n      </div>`:""},defaultBody:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n      ${e.map(({label:e,color:t,formattedValue:i})=>`<div class="toastui-chart-tooltip-series">\n                ${co(e,t)}\n                <span class="toastui-chart-series-value">${i}</span>\n              </div>`).join("")}\n    </div>`},boxPlot:function({data:e},t){const i=e.reduce((e,t,i)=>i?(e.category===t.category&&e.label===t.label&&(e.value=[...e.value,...t.value]),e):t,{});return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n      ${[i].map(({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">\n              ${co(e,t)}\n            </div>\n            <div>\n          ${i.map(({title:e,formattedValue:t})=>uo(e,t)).join("")}\n            </div>`).join("")}\n    </div>`},bullet:function({data:e},t){return e.length>1?function(e,t){const i=e.map(({value:e})=>e[0]),[s,n,o]=["Actual","Range","Marker"].map(e=>function(e,t){return e.filter(({title:e})=>e===t).sort((e,t)=>pi(e.value)&&pi(t.value)?e.value[0]-t.value[0]:S(e.value)&&S(t.value)?e.value-t.value:0).map(({formattedValue:e,color:t})=>function(e,t){return`<div class="toastui-chart-tooltip-series">\n    <i class="toastui-chart-icon" style="background: ${e}"></i>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}(t,e)).join("")}(i,e));return`<div class="toastui-chart-tooltip-category" style="${De(t.header)}">\n      ${e[0].label}\n    </div>\n    <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n      ${s?'<div class="toastui-chart-tooltip-title">Actual</div>':""} ${s}\n      ${n?'<div class="toastui-chart-tooltip-title">Ranges</div>':""} ${n}\n      ${o?'<div class="toastui-chart-tooltip-title">Markers</div>':""} ${o}\n    </div>`}(e,t):function(e,t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n      ${e.map(({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">${co(e,t)}</div>\n            ${i.map(({title:e,formattedValue:t})=>uo(e,t)).join("")}`).join("")}\n    </div>`}(e,t)},pie:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n      ${e.map(({label:e,color:t,formattedValue:i,percentValue:s})=>`<div class="toastui-chart-tooltip-series">\n          ${co(e,t)}\n          <span class="toastui-chart-series-value">${xs(s)}&nbsp;&nbsp;(${i})</span>\n        </div>`).join("")}\n    </div>`},heatmap:function({data:e},t){return`${e.map(({label:e,color:i,formattedValue:s})=>`<div class="toastui-chart-tooltip-category" style="${De(t.header)}">\n          ${e}\n        </div>\n        <div class="toastui-chart-tooltip-series-wrapper" style="${De(t.body)}">\n          <div class="toastui-chart-tooltip-series">\n            ${co(s,i)}\n          </div>\n        </div>`).join("")}`}};function mo(e,t){return e.querySelectorAll(t)}const go=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),vo=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),fo=["script","iframe","textarea","form","button","select","input","meta","style","link","title","embed","object"],bo=/href|src|background/gi,xo=/((java|vb|live)script|x):/gi,yo=/^on\S+/;function So(e){const t=document.createElement("div");return w(e)?(e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e):t.appendChild(e),function(e){mo(e,fo.join(",")).forEach(e=>{!function(e){e.parentNode&&e.parentNode.removeChild(e)}(e)})}(t),function(e){mo(e,"*").forEach(e=>{const{attributes:t}=e;!function(e,t){t.forEach(({name:t})=>{yo.test(t)&&(e[t]=null),e.getAttribute(t)&&e.removeAttribute(t)})}(e,function(e){let t=[];try{t=Array.prototype.slice.call(e)}catch(i){!function(e,t,i=null){for(let s=0,n=e.length;s<n&&!1!==t.call(i,e[s],s,e);s+=1);}(e,(function(e){t.push(e)}))}return t}(t).filter(e=>{const{name:t,value:i}=e,s=t.match(go),n=t.match(vo),o=s&&(a=i,t.match(bo)&&a.match(xo));var a;return!s&&!n||o}))})}(t),t.innerHTML}class wo extends Wt{constructor(){super(...arguments),this.tooltipInfoModels={},this.onSeriesPointHovered=({models:e,name:t})=>{var i;this.tooltipInfoModels[t]=(null===(i=e)||void 0===i?void 0:i.length)?[...e]:[],!!this.getTooltipInfoModels().length?this.renderTooltip():this.removeTooltip()}}isTooltipContainerOverflow(e,t){const{width:i,height:s}=this.tooltipContainerEl.getBoundingClientRect(),{x:n,y:o,width:a,height:r}=this.rect;return{overflowX:e>n+a||e+i>n+a,overflowY:t>o+r||t+s>o+r}}getPositionInRect(e){const{target:t}=e,i=this.rect.x+e.x,s=this.rect.y+e.y;let n=i+t.radius+t.width+this.offsetX,o=s+this.offsetY;const{overflowX:a,overflowY:r}=this.isTooltipContainerOverflow(n,o),{width:l,height:d}=this.tooltipContainerEl.getBoundingClientRect();return a&&(n=i-(l+t.radius+this.offsetX)>0?i-(l+t.radius+this.offsetX):i+this.offsetX),r&&(o=s+t.height-(d+this.offsetY)>0?s+t.height-(d+this.offsetY):o),{x:n,y:o}}setTooltipPosition(e){const{x:t,y:i}=this.getPositionInRect(e);this.tooltipContainerEl.style.transform=Ce(t,i)}getTooltipInfoModels(){return Object.values(this.tooltipInfoModels).flatMap(e=>e)}renderTooltip(){const e=this.getTooltipInfoModels().reduce((e,t)=>{const{data:i,x:s,y:n,radius:o,width:a,height:r}=t;return e.x=e.x?(e.x+s)/2:s,e.y=e.y?(e.y+n)/2:n,S(o)&&(e.target.radius=o),a&&(e.target.width=a),r&&(e.target.height=r),e.data.push(Object.assign(Object.assign({},i),{value:Array.isArray(i.value)?i.value.map(e=>Object.assign(Object.assign({},e),{formattedValue:this.getFormattedValue(e.value,i)})):i.value,formattedValue:this.getFormattedValue(i.value,i)})),!e.category&&i.category&&(e.category=i.category),i.templateType&&(e.templateType=i.templateType),e},{type:"tooltip",x:0,y:0,data:[],target:{radius:0,width:0,height:0}});var t;this.tooltipContainerEl.innerHTML=So(this.templateFunc(e,{header:po.defaultHeader(e,this.theme),body:(t=e.templateType,po[t||"defaultBody"])(e,this.theme)},this.theme)),this.setTooltipPosition(e)}initialize({chartEl:e}){this.type="tooltip",this.name="tooltip",this.chartEl=e,this.tooltipContainerEl=document.createElement("div"),this.tooltipContainerEl.classList.add("toastui-chart-tooltip-container");const{width:t,height:i,top:s,left:n}=this.chartEl.getBoundingClientRect();this.tooltipContainerEl.style.transform=Ce(n+t/2,s+i/2),this.chartEl.appendChild(this.tooltipContainerEl),this.eventBus.on("seriesPointHovered",this.onSeriesPointHovered)}removeTooltip(){this.tooltipContainerEl.innerHTML=""}setTooltipTransition(e){var t;const i=null===(t=e.tooltip)||void 0===t?void 0:t.transition;y(i)&&i?this.tooltipContainerEl.style.transition="transform 0.2s ease":w(i)&&(this.tooltipContainerEl.style.transition=i)}render({layout:e,options:t,theme:i}){var s,n,o,a,r,l,d,h,c,u,p;this.setTooltipTransition(t),this.rect=e.plot,this.theme=i.tooltip,this.templateFunc=null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s.tooltip)||void 0===n?void 0:n.template)?o:po.default,this.offsetX=null!=(l=null===(r=null===(a=t)||void 0===a?void 0:a.tooltip)||void 0===r?void 0:r.offsetX)?l:10,this.offsetY=null!=(c=null===(h=null===(d=t)||void 0===d?void 0:d.tooltip)||void 0===h?void 0:h.offsetY)?c:0,this.formatter=null===(p=null===(u=t)||void 0===u?void 0:u.tooltip)||void 0===p?void 0:p.formatter}getFormattedValue(e,t){return this.formatter?this.formatter(e,t):function(e){let t="";return t=pi(e)?`${e[0]} ~ ${e[1]}`:M(e)&&!Array.isArray(e)?`(${e.x}, ${e.y})`+(function(e){return e.hasOwnProperty("r")}(e)?`, r: ${e.r}`:""):String(e),t}(e)}}function Oo({axisData:e,offsetSize:t,value:i,xAxisLimit:s,startIndex:n=0}){const o=Lt(e,t,i,function(e,t=0){return~~e?e-t:e}(i,n),s);return o>0?Math.min(t,o):0}function Mo(e,t){return e?t.xAxis:t.yAxis}class Ao extends Wt{constructor(){super(...arguments),this.models={plot:[],line:[],band:[]},this.startIndex=0}initialize(){this.type="plot"}getPlotAxisSize(e){return{offsetSize:e?this.rect.width:this.rect.height,anchorSize:e?this.rect.height:this.rect.width}}renderLines(e,t,i=[],s){return i.map(({value:i,color:n})=>{const{offsetSize:o}=this.getPlotAxisSize(!0),a=Oo({axisData:Mo(!0,e),offsetSize:o,value:i,xAxisLimit:s,categories:t,startIndex:this.startIndex});return this.makeLineModel(!0,a,{color:n})})}renderBands(e,t,i=[],s){const{offsetSize:n,anchorSize:o}=this.getPlotAxisSize(!0);return i.map(({range:i,color:a})=>{const[r,l]=i.map(i=>Oo({axisData:Mo(!0,e),offsetSize:n,value:i,xAxisLimit:s,categories:t,startIndex:this.startIndex}));return{type:"rect",x:Tt(r),y:Tt(0),width:l-r,height:o,color:a}})}renderPlotLineModels(e,t,i={}){var s,n,o;const{size:a,startPosition:r,axes:l}=i,{lineColor:d,lineWidth:h,dashSegments:c}=this.theme[t?"vertical":"horizontal"],u=(null===(o=t?null===(s=l)||void 0===s?void 0:s.xAxis:null===(n=l)||void 0===n?void 0:n.yAxis)||void 0===o?void 0:o.tickInterval)||1;return e.filter((e,t)=>!(t%u)).map(e=>this.makeLineModel(t,e,{color:d,lineWidth:h,dashSegments:c},null!=a?a:this.rect.width,null!=r?r:0))}renderPlotsForCenterYAxis(e){const{xAxisHalfSize:t,secondStartX:i,yAxisHeight:s}=e.centerYAxis,n=e.xAxis.tickCount,o=[...this.renderPlotLineModels(Ct(t,n),!0),...this.renderPlotLineModels(Ct(t,n,i),!0)],a=Ct(s,e.yAxis.tickCount);return[...o,...[...this.renderPlotLineModels(a,!1,{size:t}),...this.renderPlotLineModels(a,!1,{size:t,startPosition:i})]]}renderPlots(e){return e.centerYAxis?this.renderPlotsForCenterYAxis(e):[...this.renderPlotLineModels(this.getTickPixelPositions(!1,e),!1,{axes:e}),...this.renderPlotLineModels(this.getTickPixelPositions(!0,e),!0,{axes:e})]}getTickPixelPositions(e,t){const{offsetSize:i}=this.getPlotAxisSize(e);return Ct(i,Mo(e,t).tickCount)}renderPlotBackgroundRect(){return Object.assign(Object.assign({type:"rect",x:0,y:0},D(this.rect,"width","height")),{color:this.theme.backgroundColor})}render(e){var t,i,s;const{layout:n,axes:o,plot:a,scale:r,zoomRange:l,theme:d}=e;if(!a)return;this.rect=n.plot,this.startIndex=l?l[0]:0,this.theme=d.plot;const h=null!=(t=e.categories)?t:[],{lines:c,bands:u,visible:p}=a,m=null===(s=null===(i=r)||void 0===i?void 0:i.xAxis)||void 0===s?void 0:s.limit;this.models.line=this.renderLines(o,h,c,m),this.models.band=this.renderBands(o,h,u,m),p&&(this.models.plot=[this.renderPlotBackgroundRect(),...this.renderPlots(o)])}makeLineModel(e,t,{color:i,dashSegments:s=[],lineWidth:n=1},o,a=0){const r=Tt(e?t:a),l=Tt(e?0:t);return{type:"line",x:r,y:l,x2:r+(e?0:null!=o?o:this.rect.width),y2:l+(e?this.rect.height:0),strokeStyle:i,lineWidth:n,dashSegments:s}}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.05)",e.ctx.lineWidth=1}}function ko({models:e,comparisonModel:t,name:i,eventDetectType:s}){switch(i){case"heatmap":return Ro(e,t);case"bullet":return"grouped"===s?Po(e,t):Ro(e,t);case"radar":case"bubble":case"scatter":case"area":case"line":return function(e,t){var i;let s=!1;e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce((e,i,s)=>e&&i.seriesIndex===t[s].seriesIndex&&i.index===t[s].index,!0));return s}(e,t);case"pie":return Bo(e,t);case"column":case"bar":return"grouped"===s?Po(e,t):Bo(e,t);case"boxPlot":return"grouped"===s?Bo(e,t):function(e,t){var i,s,n,o,a;let r=!1;if(e.length&&(null===(i=t)||void 0===i?void 0:i.length)){const{type:i,data:l}=e[0];r=i===t[0].type&&(null===(s=l)||void 0===s?void 0:s.label)===(null===(n=t[0].data)||void 0===n?void 0:n.label)&&(null===(o=l)||void 0===o?void 0:o.category)===(null===(a=t[0].data)||void 0===a?void 0:a.category)}return r}(e,t);case"treemap":return o=t,(n=e).length&&(null===(a=o)||void 0===a?void 0:a.length)&&n[0].label===o[0].label;default:return!1}var n,o,a}function Co(e,t,i){let s=1/0,n=[];return e.forEach(e=>{const{x:o,y:a,radius:r}=e,l=Bt({x:o+i.x,y:a+i.y},t);s>l?(s=l,n=[e]):s===l&&(n.length&&n[0].radius>r?n=[e]:n.push(e))}),n}function To(e,t,i,s=!0){const{pointOnColumn:n,tickCount:o,tickDistance:a}=t,{width:r,height:l}=e,d=n?[]:[0,o-1],h=a/2;return C(0,o).map(e=>{const t=d.includes(e)?h:a;let o=0;return 0!==e&&(o+=n?a*e:h+a*(e-1)),{type:"rect",y:s?0:o,height:s?l:t,x:s?o:0,width:s?t:r,index:e,label:i[e]}})}function Do(e,t){const i=t.reduce((e,t)=>{const{index:i,seriesIndex:s}=t;return e[s]||(e[s]=[]),e[s][i]=t,e},[]);return e.reduce((e,t)=>{const{seriesIndex:s,index:n}=t,o=i[s][n],{category:a}=o;return a?(e[a]||(e[a]=[]),e[a].push(Object.assign(Object.assign({},t),{data:o})),e):e},{})}function jo(e){return e.reduce((e,t)=>!e.length||t.depth>e[0].depth?[t]:e,[])}function Ro(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].name===t[0].name}function Bo(e,t){var i;let s=!1;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce((e,i,s)=>{var n,o,a,r;return e&&(null===(n=i.data)||void 0===n?void 0:n.label)===(null===(o=t[s].data)||void 0===o?void 0:o.label)&&(null===(a=i.data)||void 0===a?void 0:a.category)===(null===(r=t[s].data)||void 0===r?void 0:r.category)},!0)),s}function Po(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].index===t[0].index}function Lo(e,t,i=!1){var s,n,o;const a=function(e,t,i=!1){return"stackTotal"!==t&&T(["center","start","end","auto","outer"],e.anchor)?e.anchor:function(e,t=!1){let i="auto";switch(e){case"point":i="center";break;case"rect":i=t?"center":"auto";break;case"sector":case"treemapSeriesName":i="center";break;case"stackTotal":i="auto"}return i}(t,i)}(e,t,i),{offsetX:r=0,offsetY:l=0}=e,d=A(e.formatter)?e.formatter:e=>String(e)||"",h={anchor:a,offsetX:r,offsetY:l,formatter:d};if(i){const t=e.stackTotal;h.stackTotal={visible:!y(null===(s=t)||void 0===s?void 0:s.visible)||t.visible,formatter:A(null===(n=t)||void 0===n?void 0:n.formatter)?t.formatter:d}}return"sector"===t&&(null===(o=e.pieSeriesName)||void 0===o?void 0:o.visible)&&(h.pieSeriesName=Object.assign({anchor:"center"},e.pieSeriesName)),h}function Eo(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=s+o/2;let l,d="center";if("right"===a)switch(t){case"start":d="left",l=i;break;case"end":d="right",l=i+n;break;case"center":d="center",l=i+n/2;break;default:d="left",l=i+n}else switch(t){case"start":d="right",l=i+n;break;case"end":d="left",l=i;break;case"center":d="center",l=i+n/2;break;default:d="right",l=i}return{x:l,y:r,textAlign:d,textBaseline:"middle"}}(e,i);let{x:d,y:h,textAlign:c}=l;if("auto"===i){const i=function(e,t,i){const{width:s,value:n,direction:o,plot:a,theme:r}=e,{formatter:l}=t,d=je(r),h=bt(w(n)?n:l(n),d);let{x:c,textAlign:u}=i;return("left"===o&&c-h<0||c+h>a.size)&&(c=e.x+s,u="right","left"===o&&s>=h&&(c=e.x,u="left")),{x:c,textAlign:u}}(e,t,{x:d,textAlign:c});d=i.x,c=i.textAlign}h+=n,"left"===o?d-=s:d+=s;return"right"===c?d-=10:"left"===c&&(d+=10),d-=a,h-=r,{x:d,y:h,textAlign:c,textBaseline:l.textBaseline}}function Wo(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=i+n/2;let l="middle",d=0;if("top"===a)switch(t){case"end":l="top",d=s;break;case"start":l="bottom",d=s+o;break;case"center":l="middle",d=s+o/2;break;default:l="bottom",d=s}else switch(t){case"end":l="bottom",d=s+o;break;case"start":l="top",d=s;break;case"center":l="middle",d=s+o/2;break;default:l="top",d=s+o}return{x:r,y:d,textAlign:"center",textBaseline:l}}(e,i);let{x:d,y:h,textBaseline:c}=l;if("auto"===i){const t=function(e,t,i){const{height:s,direction:n,plot:o,theme:a,value:r}=e,l=je(a),d=o.size,h=xt(`${r}`,l);let{y:c,textBaseline:u}=i;return(!("bottom"===n)&&c-h<0||c+h>d)&&(c=e.y,u="top",c+h>d&&(c=e.y,u="bottom"),"bottom"===n&&(c=e.y+s,u="bottom")),{y:c,textBaseline:u}}(e,0,l);h=t.y,c=t.textBaseline}d+=s,"top"===o?h+=n:"bottom"===o&&(h-=n);return"bottom"===c?h-=5:"top"===c&&(h+=5),d-=a,h-=r,{x:d,y:h,textAlign:l.textAlign,textBaseline:c}}function zo(e,t){const{type:i,value:s,direction:n,name:o,theme:a}=e,r=function(e){return T(["left","right"],e)}(n)?Eo(e,t):Wo(e,t),l="stackTotal"===i?t.stackTotal.formatter:t.formatter;return Object.assign(Object.assign({type:i},r),{text:w(s)?s:l(s),name:o,seriesColor:e.color,theme:a})}function Io(e,t){const{formatter:i}=t,s=function(e,t){const{anchor:i}=t,{clockwise:s,degree:{start:n,end:o},radius:{inner:a,outer:r}}=e;let l=n,d=o,h="center",c=(n+o)/2;"start"===i?(h=s?"left":"right",d=l,c=n):"end"===i&&(h=s?"right":"left",l=d,c=o);const{x:u,y:p}=tt(Qe(i,Object.assign(Object.assign({},e),{degree:{start:l,end:d},radius:{inner:a,outer:r}})));return{x:u,y:p,textAlign:h,textBaseline:"middle",radian:et(c,0)}}(e,t),{value:n,name:o,theme:a}=e,r=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,theme:r})}function Yo(e,t){const{formatter:i}=t,s=function(e,t){const i=t.anchor,s=tt(Qe(i,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:"outer"===i?e.radius.outer+30:e.radius.outer})}))),n=ot(e,i);return Object.assign(Object.assign({},s),{textAlign:n,textBaseline:Ho(t)?"bottom":"middle"})}(e,t),{value:n,name:o,theme:a}=e,r=t.anchor,l=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,callout:$o(t)?Go(e,r):null,theme:l})}function No(e,t){var i,s,n,o,a;return(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s[t])||void 0===n?void 0:n.dataLabels)||(null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.dataLabels)||{}}function Ho(e){var t;return e.anchor===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function $o(e){var t;return"outer"===e.anchor||"outer"!==(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function Fo(e){var t;return"outer"!==e.anchor||"outer"===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function Go(e,t){if("outer"!==t)return null;const{x:i,y:s}=tt(Qe("outer",Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:e.radius.outer+20})}))),{x:n,y:o}=tt(Qe("outer",Object.assign({},e))),{callout:a}=e.theme;return{x:i,y:s,x2:n,y2:o,theme:Object.assign(Object.assign({},a),{lineColor:a.useSeriesColor?e.color:a.lineColor})}}class Xo extends Wt{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.yAxisName="yAxis",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!an(e,"line"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(q);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:[n],name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{var t;const{index:i,seriesIndex:s}=e;if(!on(e,this.eventDetectType,"line"))return;const n=this.getResponderCategoryByIndex(i);if(!n)return;const o="grouped"===this.eventDetectType?this.tooltipCircleMap[n]:[this.tooltipCircleMap[n][s]];(null===(t=o)||void 0===t?void 0:t.length)&&(this.onMousemoveNearType(o),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="line",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.rect[0].width=this.models.rect[0].width*e}setEventDetectType(e,t){var i,s;(e.area||e.column)&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),e.scatter&&(this.eventDetectType="near")}render(e,t){var i,s;const{viewRange:n}=t,{layout:o,series:a,scale:r,axes:l,legend:d,theme:h}=e;if(!a.line)throw new Error(J(this.name));const c=null!=(i=e.categories)?i:[],u=Object.assign({},e.options);(null===(s=u)||void 0===s?void 0:s.series)&&"line"in u.series&&(u.series=Object.assign(Object.assign({},u.series),u.series.line)),this.setEventDetectType(a,u);const p=l.xAxis,{tickDistance:m,pointOnColumn:g,labelDistance:v}=p,f=a.line.data,b={pointOnColumn:g,options:u.series||{},tickDistance:m,labelDistance:v};this.theme=h.series.line,this.rect=o.plot,this.activeSeriesMap=ln(d),this.startIndex=n?n[0]:0,this.selectable=this.getSelectableOption(u),this.yAxisName=Qt(u,this.name,"yAxis");const x=this.renderLinePointsModel(f,r,b,c),{dotSeriesModel:y,responderModel:S}=this.renderCircleModel(x,b),w=this.makeTooltipData(f,c);this.tooltipCircleMap=Do(S,w),this.models={rect:[this.renderClipRectAreaModel()],series:x,dot:y},this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),No(u,this.name).visible&&this.renderDataLabels(this.getDataLabels(x)),this.responders=this.getResponders(p,S,w,c)}getResponders(e,t,i,s){let n;return n="near"===this.eventDetectType?this.makeNearTypeResponderModel(t,i):"point"===this.eventDetectType?this.makeNearTypeResponderModel(t,i,0):To(this.rect,e,s),n}makeNearTypeResponderModel(e,t,i){return e.map((e,s)=>Object.assign(Object.assign({},e),{data:t[s],detectionSize:i}))}makeTooltipData(e,t){return e.flatMap(({rawData:e,name:i,color:s},n)=>e.map((e,o)=>x(e)?{}:{label:i,color:s,value:fi(e),category:t[xi(e,t,o,this.startIndex)],seriesIndex:n,index:o}))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}renderLinePointsModel(e,t,i,s){var n,o;const{spline:a}=i.options,r=t[this.yAxisName].limit,l=null===(o=null===(n=t)||void 0===n?void 0:n.xAxis)||void 0===o?void 0:o.limit,{lineWidth:d,dashSegments:h}=this.theme;return e.map(({rawData:e,name:t,color:n},o)=>{const c=[],u=this.activeSeriesMap[t];return e.forEach((e,t)=>{if(x(e))return c.push(null);const n=fi(e),o=(1-Rt(n,r))*this.rect.height,a=Lt(D(i,"pointOnColumn","tickDistance","labelDistance"),this.rect.width,bi(e),xi(e,s,t,this.startIndex),l);c.push({x:a,y:o,value:n})}),a&&jt(c),{type:"linePoints",points:c,seriesIndex:o,name:t,color:Fe(n,u?1:.3),lineWidth:d,dashSegments:h}})}renderCircleModel(e,{options:t}){const i=[],s=[],n=!!t.showDot,{hover:o,dot:a}=this.theme,r=o.dot;return e.forEach(({color:e,name:t,points:o},l)=>{const d=this.activeSeriesMap[t];o.forEach((o,h)=>{var c,u;if(x(o))return;const{x:p,y:m}=o,g={type:"circle",x:p,y:m,seriesIndex:l,name:t,index:h};n&&i.push(Object.assign(Object.assign({},g),{radius:a.radius,color:Fe(e,d?1:.3),style:[{lineWidth:a.borderWidth,strokeStyle:(c=a.borderColor,null!=c?c:e)}]})),s.push(Object.assign(Object.assign({},g),{radius:r.radius,color:(u=r.color,null!=u?u:Fe(e,1)),style:["default"]}))})}),{dotSeriesModel:i,responderModel:s}}getCircleModelsFromRectResponders(e,t){var i,s;if(!e.length||!e[0].label)return[];const n=null!=(s=this.tooltipCircleMap[null===(i=e[0])||void 0===i?void 0:i.label])?s:[];return"grouped"===this.eventDetectType?n:Co(n,t,this.rect)}onMousemoveNearType(e){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderSeriesWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.onMousemoveNearType(t)}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):T(["near","point"],this.eventDetectType)?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap(({points:e,name:i,color:s})=>e.map(e=>x(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?s:t.color})})))}getResponderSeriesWithTheme(e,t){const{radius:i,color:s,borderWidth:n,borderColor:o}=this.theme[t].dot;return e.map(e=>{const t=null!=s?s:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,style:[{lineWidth:n,strokeStyle:null!=o?o:Fe(t,.5)}]})})}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getResponderSeriesWithTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap(e=>e).find(t=>t.index===e))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class Vo extends Wt{constructor(){super(...arguments),this.activatedResponders=[],this.seriesColorMap={},this.seriesIconTypeMap={},this.onClickCheckbox=e=>{const{label:t,checked:i}=e[0];this.store.dispatch("setAllLegendActiveState",!0),this.store.dispatch("setLegendCheckedState",{name:t,checked:!i}),i?this.store.dispatch("disableSeries",t):this.store.dispatch("enableSeries",t),this.eventBus.emit("needDraw")},this.onClickLabel=e=>{const{label:t}=e[0];this.eventBus.emit("resetSelectedSeries"),this.activatedResponders.length&&this.activatedResponders[0].label===t?(this.store.dispatch("setAllLegendActiveState",!0),this.activatedResponders=[]):(this.store.dispatch("setAllLegendActiveState",!1),this.store.dispatch("setLegendActiveState",{name:t,active:!0}),this.activatedResponders=e),this.eventBus.emit("needDraw")}}onClick({responders:e}){var t;if(e.length){const{data:i}=e[0];"checkbox"===(null===(t=i)||void 0===t?void 0:t.name)?this.eventBus.emit("clickLegendCheckbox",ge(e)):this.eventBus.emit("clickLegendLabel",ge(e))}}initialize(){this.type="legend",this.name="legend",this.eventBus.on("clickLegendCheckbox",this.onClickCheckbox),this.eventBus.on("clickLegendLabel",this.onClickLabel)}initColorAndIconTypeMap(e){this.seriesColorMap={},this.seriesIconTypeMap={},e.forEach(({label:e,color:t,iconType:i})=>{this.seriesColorMap[e]=t,this.seriesIconTypeMap[e]=i})}getXPositionWhenVerticalAlign(e){const{offset:t,rowWidths:i}=e.reduce((e,t)=>{const{rowIndex:i,columnIndex:s,width:n}=t;return b(e.rowWidths[i])&&(e.rowWidths[i]=0,e.offset[i]=[0]),e.rowWidths[i]+=n+(s?Bs:0),e.offset[i][s+1]=e.offset[i][s]+Bs+n,e},{offset:[],rowWidths:[]}),{width:s}=this.rect;return i.forEach((e,i)=>{const n=(s-e)/2;t[i]=t[i].map(e=>e+n)}),t}getXPositionWhenHorizontalAlign(e){const t=e.reduce((e,t)=>{const{columnIndex:i,width:s}=t;return b(e[i])&&(e[i]=0),e[i]=Math.max(e[i],s),e},[]);return e.reduce((e,i)=>{const{rowIndex:s,columnIndex:n}=i;return b(e[s])&&(e[s]=[0]),e[s][n+1]=e[s][n]+Bs+t[n],e},[])}renderLegendModel(e){const{data:t,showCheckbox:i,align:s,useScatterChartIcon:n}=e,o=qi(s),a=Ws(this.theme.label.fontSize),r=o?this.getXPositionWhenVerticalAlign(t):this.getXPositionWhenHorizontalAlign(t);return[Object.assign({type:"legend",align:s,showCheckbox:i,data:t.map(e=>{var t;const{label:i,iconType:s,rowIndex:o,columnIndex:l}=e;return Object.assign(Object.assign({},e),{iconType:(t=this.seriesIconTypeMap[i],null!=t?t:s),color:this.seriesColorMap[i],x:r[o][l],y:Ui.Y+a*o,useScatterChartIcon:n})})},this.theme.label)]}makeCheckboxResponder(e,t){return t?e.map(e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x,y:e.y,width:Ls,height:Ls,data:{name:"checkbox"}})):[]}makeLabelResponder(e,t){const i=Te(this.theme.label);return e.map(e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x+(t?Ls+Ps:0)+Es+Ps,y:e.y,width:bt(e.label,i),data:{name:"label"},height:Ls}))}render({layout:e,legend:t,theme:i}){if(this.isShow=t.visible&&!!t.data.length,!this.isShow)return;const{showCheckbox:s,data:n}=t;this.rect=e.legend,this.theme=i.legend,this.initColorAndIconTypeMap(n),this.models=this.renderLegendModel(t);const{data:o}=this.models[0],a=this.makeCheckboxResponder(o,s),r=this.makeLabelResponder(o,s);this.responders=[...a,...r]}}function _o(e,t,i,s){var n;const{type:o}=e,a=[];if("point"===o)a.push(function(e,t,i){const{width:s,height:n}=i,{anchor:o,offsetX:a=0,offsetY:r=0,formatter:l}=t,{name:d,theme:h}=e;let c="middle";"end"===o?c="bottom":"start"===o&&(c="top");const u=e.x+a,p=e.y+r;return{type:"point",x:u<0||u>s?e.x:u,y:p<0||p>n?e.y:p,text:l(e.value),textAlign:"center",textBaseline:c,name:d,theme:h}}(e,t,i));else if("sector"===o){if("radialBar"===s)a.push(Io(e,t));else if(a.push(Yo(e,t)),null===(n=t.pieSeriesName)||void 0===n?void 0:n.visible){const i=function(e,t){var i;const s=null===(i=t.pieSeriesName)||void 0===i?void 0:i.anchor,n="outer"===s,o=tt(Qe(s,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:n?e.radius.outer+30:e.radius.outer})}))),a=ot(e,s),r=e.theme.pieSeriesName,l=Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.color:r.color});return Object.assign(Object.assign({type:"pieSeriesName"},o),{text:e.name,callout:Fo(t)?Go(e,s):null,textAlign:a,textBaseline:Ho(t)?"top":"middle",theme:l})}(e,t);a.push(i)}}else"line"===o?a.push(function(e,t){const{value:i,textAlign:s,textBaseline:n}=e,{formatter:o}=t;return Object.assign(Object.assign({},e),{x:e.x,y:(e.y+e.y2)/2,textAlign:null!=s?s:"center",textBaseline:null!=n?n:"middle",text:w(i)?i:o(i)})}(e,t)):a.push(zo(e,t));return a}class Uo extends Wt{constructor(){super(...arguments),this.dataLabelsMap={},this.renderSeriesDataLabels=e=>{this.appendDataLabels(e),this.models=this.renderLabelModel(),this.drawModels?this.sync():this.drawModels=this.getDrawModelsAppliedOpacity(0)}}initialize(){this.type="dataLabels",this.name="dataLabels",this.eventBus.on("renderDataLabels",this.renderSeriesDataLabels)}initUpdate(e){this.drawModels&&(this.drawModels=this.getDrawModelsAppliedOpacity(e))}render({layout:e,options:t,series:i,nestedPieSeries:s}){this.rect=e.plot,this.options=t,this.isShow=this.visibleDataLabels(i,s)}visibleDataLabels(e,t){var i,s;const n=!!(null===(s=null===(i=this.options.series)||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible),o=Object.keys(e).some(e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)}),a=!(!t||!Object.keys(t).some(e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)}));return n||o||a}appendDataLabels({name:e,data:t}){const i=No(this.options,e),s=!!qn(this.options),n=[];t.forEach(t=>{var o;const{type:a,value:r}=t,l=Lo(i,a,s);"stackTotal"===a&&!(null===(o=l.stackTotal)||void 0===o?void 0:o.visible)||b(r)||n.splice(n.length,0,..._o(t,l,this.rect,e))}),this.dataLabelsMap[e]={data:n,options:i}}getDrawModelsAppliedOpacity(e){return Object.keys(this.models).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:this.models[i].map(t=>Object.assign(Object.assign({},t),{opacity:e}))}),{series:[],total:[]})}renderLabelModel(){return Object.keys(this.dataLabelsMap).map(e=>{const{data:t}=this.dataLabelsMap[e];return this.makeLabelModel(t)}).reduce((e,t)=>({series:[...e.series,...t.series],total:[...e.total,...t.total]}),{series:[],total:[]})}makeLabelModel(e){return e.reduce((e,t)=>{var i;const{type:s,x:n,y:o,text:a,textAlign:r,textBaseline:l,name:d,callout:h,theme:c,radian:u}=t;if(!function(e,t){const{height:i,width:s}=e,{x:n,y:o}=t;return n>=0&&n<=s&&o>=0&&o<=i}(this.rect,{x:n,y:o}))return e;const p="stackTotal"===s?"total":"series";return Object.assign(Object.assign({},e),{[p]:[...(i=e[p],null!=i?i:[]),{type:"dataLabel",dataLabelType:s,text:a,x:n,y:o,textAlign:r,textBaseline:l,opacity:1,name:d,callout:h,theme:c,radian:u}]})},{series:[],total:[]})}}class qo extends Wt{initialize({name:e}){this.type="axisTitle",this.name=e,this.isYAxis=T([zt.Y,zt.SECONDARY_Y],e)}renderAxisTitle(e,t){const{text:i,offsetX:s,offsetY:n}=e,[o,a]=this.isYAxis?[this.name===zt.Y?s:this.rect.width+s,n]:[this.rect.width+s,n],r=Te(this.theme);return[{type:"label",text:i,x:o,y:a,style:["axisTitle",{textAlign:t,fillStyle:this.theme.color,font:r}]}]}getTextAlign(e=!1){let t="right";return this.name===zt.Y&&(t=e?"center":"left"),t}render({axes:e,layout:t,theme:i}){var s;const n=null===(s=e[this.name])||void 0===s?void 0:s.title;this.isShow=!!n,this.isShow&&(this.rect=t[`${this.name}Title`],this.theme=ti(i,this.name).title,this.models=this.renderAxisTitle(n,this.getTextAlign(!!e.centerYAxis)))}}class Ko extends Wt{initialize(){this.type="title",this.name="title"}renderTitle(e){var t,i,s;let n="",o=0,a=0,r="left";w(e)?n=e:(n=e.text,r=null!=(t=e.align)?t:"left",o+=null!=(i=e.offsetX)?i:0,a+=null!=(s=e.offsetY)?s:0);const l=Te(this.theme),d=bt(n,l);return"center"===r?o+=(this.rect.width-d)/2:"right"===r&&(o+=this.rect.width-d),[{type:"label",x:o,y:a,text:n,style:["title",{font:l,fillStyle:this.theme.color}]}]}render({options:e,layout:t,theme:i}){var s;this.isShow=!!(null===(s=e.chart)||void 0===s?void 0:s.title),this.isShow&&(this.theme=i.title,this.rect=t.title,this.models=this.renderTitle(e.chart.title))}}var Zo=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i};const Jo={line:"circle",area:"circle",boxPlot:"boxPlot"};class Qo extends Wt{constructor(){super(...arguments),this.models={guideLine:[]},this.isShow=!1,this.renderHoveredSeries=({models:e,name:t,eventDetectType:i})=>{var s,n;const o=this.getSeriesModels(t);this.models[t]=[...e],this.isShow=!!this.getSeriesModels().length;const a=!!(null===(s=o)||void 0===s?void 0:s.length)&&!!e.length&&ko({models:e,comparisonModel:o,eventDetectType:i,name:t});(null===(n=o)||void 0===n?void 0:n.length)&&!e.length?this.eventBus.emit("unhoverSeries",ge(o)):e.length&&!a&&this.eventBus.emit("hoverSeries",ge(e)),this.modelForGuideLine=this.getModelForGuideLine(t),"grouped"===i&&this.renderGroupedModels(t)},this.resetHoveredSeries=()=>{this.models={guideLine:[]}}}getSeriesModels(e){var t;const i=this.models,{guideLine:s}=i,n=Zo(i,["guideLine"]);return null===(t=e?n[e]:Object.values(n))||void 0===t?void 0:t.flatMap(e=>e)}hasGuideLine(){const[e]=this.getSeriesModels().filter(({type:e})=>"rect"===e);return!b(this.modelForGuideLine)&&b(e)}getModelForGuideLine(e){return this.getSeriesModels().filter(({type:t})=>t===Jo[e])[0]}renderGroupedModels(e){T(Object.keys(Jo),e)&&(this.isShow&&this.hasGuideLine()?this.models.guideLine=[this.renderGuideLineModel(this.modelForGuideLine)]:this.models.guideLine=[])}renderGuideLineModel(e){const t=Tt("boxPlot"===e.type&&e.boxPlotDetection?e.boxPlotDetection.x+e.boxPlotDetection.width/2:e.x);return{type:"line",x:t,y:0,x2:t,y2:this.rect.height,strokeStyle:"#ddd",lineWidth:1}}initialize(){this.type="hoveredSeries",this.name="hoveredSeries",this.eventBus.on("renderHoveredSeries",this.renderHoveredSeries),this.eventBus.on("resetHoveredSeries",this.resetHoveredSeries)}render({layout:e}){this.rect=e.plot}}class ea extends Wt{constructor(){super(...arguments),this.models={selectionArea:[]},this.dragStartPosition=null,this.dragStartPoint=null,this.isDragging=!1}initialize(){this.type="zoom"}render(e){if(!e.zoomRange)return;this.resetSelectionArea();const{layout:t,axes:i,categories:s}=e;this.rect=t.plot;const{tickDistance:n,pointOnColumn:o,tickCount:a}=i.xAxis;this.responders=this.makeRectResponderModel(s,{pointOnColumn:o,tickDistance:n,tickCount:a})}resetSelectionArea(){this.dragStartPosition=null,this.dragStartPoint=null,this.models.selectionArea=[],this.isDragging=!1}onMousedown({responders:e,mousePosition:t}){e.length&&(this.dragStartPoint=e.find(e=>"selectionArea"===e.data.name),this.dragStartPosition=t)}onMouseup({responders:e}){if(this.isDragging&&this.dragStartPoint&&e.length){const t=[this.dragStartPoint,e[0]].sort((e,t)=>e.index-t.index).map(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.value});this.store.dispatch("zoom",t),this.eventBus.emit("zoom",ge(t)),this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("hideTooltip"),setTimeout(()=>{this.eventBus.emit("resetSelectedSeries")})}this.resetSelectionArea()}makeRectResponderModel(e,t){const i=e.length,{pointOnColumn:s,tickDistance:n}=t,{height:o}=this.rect,a=s?[]:[0,i-1],r=n/2;return C(0,i).map(t=>{const i=a.includes(t);let l=0;return 0!==t&&(l+=s?n*t:r+n*(t-1)),{type:"rect",x:l,y:0,height:o,width:i?r:n,index:t,data:{name:"selectionArea",value:e[t]}}})}onMousemove({responders:e,mousePosition:t}){if(e.length){if(this.dragStartPosition&&!this.isDragging){const{x:e}=t,{x:i}=this.dragStartPosition;this.isDragging=Math.abs(i-e)>15}if(this.isDragging){const t=this.dragStartPoint.index,i=e[0].index,[s,n]=[t,i].sort(z),o=this.responders.slice(s,n+1);this.models.selectionArea=[...o.map(e=>Object.assign(Object.assign({},e),{x:e.x,y:0,type:"rect",color:"rgba(0, 0, 0, 0.2)"}))],this.eventBus.emit("needDraw")}}}onMouseoutComponent(){this.resetSelectionArea()}}class ta extends Wt{initialize(){this.type="resetButton",this.name="resetButton"}onClick({responders:e}){e.length&&(this.eventBus.emit("resetZoom"),this.store.dispatch("resetZoom"))}render({options:e,layout:t},i){is(e)&&(this.rect=t.resetButton,this.isShow=i.isLineTypeSeriesZooming,this.models=this.isShow?[{type:"resetButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:24,height:24}]:[])}}class ia extends Wt{constructor(){super(...arguments),this.models={},this.seriesModels={},this.activeSeriesNames={},this.isShow=!1,this.renderSelectedSeries=e=>{const{name:t,alias:i}=e,s=this.getSelectedSeriesModelsForRendering(e);this.models[i||t]=ko(Object.assign(Object.assign({},e),{models:s,comparisonModel:this.models[i||t]}))?[]:s,this.seriesModels[i||t]=this.getSelectedSeriesModels(e),this.isShow=!!Object.values(this.models).flatMap(e=>e).length,this.eventBus.emit(this.isShow?"selectSeries":"unselectSeries",ge(this.seriesModels)),this.activeSeriesNames[t]=this.getSeriesNames(e.models,t),this.setActiveState()},this.resetSelectedSeries=()=>{this.models={},this.store.dispatch("setAllLegendActiveState",!0)}}getSeriesNames(e,t){const i=[];return T(["line","area","radar","bubble","scatter","bullet","boxPlot"],t)?e.forEach(e=>{const t=e.name;t&&i.push(t)}):T(["bar","column","radialBar"],t)?e.forEach(e=>{var t;const s=null===(t=e.data)||void 0===t?void 0:t.label;s&&i.push(s)}):"pie"===t&&Object.keys(this.models).flatMap(e=>this.models[e]).forEach(e=>{var t,s;const n=(null===(t=e.data)||void 0===t?void 0:t.rootParentName)||(null===(s=e.data)||void 0===s?void 0:s.label);n&&i.push(n)}),i}getSelectedSeriesModelsForRendering(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter(e=>!e.data)):n=t.filter(e=>!e.data),n}getSelectedSeriesModels(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter(e=>e.data)):n=t.filter(e=>e.data),n}setActiveState(){this.isShow?(this.store.dispatch("setAllLegendActiveState",!1),Object.values(this.activeSeriesNames).forEach(e=>{e.forEach(e=>{this.store.dispatch("setLegendActiveState",{name:e,active:!0})})})):this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("needDraw")}initialize(){this.type="selectedSeries",this.name="selectedSeries",this.eventBus.on("renderSelectedSeries",this.renderSelectedSeries),this.eventBus.on("resetSelectedSeries",this.resetSelectedSeries)}render({layout:e}){this.rect=e.plot}}class sa extends Wt{initialize(){this.type="background",this.name="background"}render({layout:e,theme:t}){const{width:i,height:s}=e.chart;this.theme=t.chart,this.rect={x:0,y:0,width:i,height:s},this.models=[Object.assign(Object.assign({type:"rect"},this.rect),{color:this.theme.backgroundColor})]}}class na extends Wt{initialize(){this.type="noDataText",this.name="noDataText"}getCenterPosition(e,t){const i=bt(e,t),s=xt(e,t);return{x:(this.rect.width-i)/2,y:(this.rect.height-s)/2}}render({layout:e,series:t,options:i,theme:s}){var n,o,a;const r=null!=(a=null===(o=null===(n=i)||void 0===n?void 0:n.lang)||void 0===o?void 0:o.noData)?a:"No data to display",l=s.noData,d=Te(l),h=l.color;this.isShow=rn(t),this.rect=e.plot,this.models=[Object.assign(Object.assign({type:"label"},this.getCenterPosition(r,d)),{text:r,style:[{font:d,fillStyle:h}]})]}}function oa(e,t){const{color:i,lineWidth:s,points:n,dashSegments:o=[]}=t;e.lineCap="round",e.beginPath(),o&&Re(e,o);let a=!1;n.forEach((t,i)=>{var s,o;if(x(t))a=!1;else{if(!a)return e.moveTo(t.x,t.y),void(a=!0);if(t.controlPoint&&(null===(o=null===(s=n[i-1])||void 0===s?void 0:s.controlPoint)||void 0===o?void 0:o.next)){const{x:s,y:o}=n[i-1].controlPoint.next,{controlPoint:a,x:r,y:l}=t;e.bezierCurveTo(s,o,a.prev.x,a.prev.y,r,l)}else e.lineTo(t.x,t.y)}}),Le(e,{lineWidth:s,strokeStyle:i}),e.closePath(),Re(e,[])}function aa(e,t){const{fillColor:i}=t;e.beginPath(),oa(e,t),Pe(e,i),e.closePath()}function ra(e,t){const{opened:i,x:s,y:n,theme:o}=t,{borderColor:a,backgroundColor:r,borderWidth:l,borderRadius:d,xIcon:h,dotIcon:c}=o,u=s+l,p=n+l,m=24-2*l;ht(e,{type:"pathRect",x:u,y:p,fill:r,stroke:a,width:m,height:m,radius:d,lineWidth:l}),i?function(e,t,i){const{x:s,y:n,theme:{color:o,lineWidth:a}}=t,r=i/3,l=s+r,d=n+r,h=s+2*r,c=n+2*r;[{x:l,y:d,x2:h,y2:c},{x:l,y:c,x2:h,y2:d}].forEach(t=>{ut(e,Object.assign(Object.assign({type:"line"},t),{strokeStyle:o,lineWidth:a}))})}(e,{x:u,y:p,theme:h},m):function(e,t,i){const{x:s,y:n,theme:{color:o,width:a,height:r,gap:l}}=t,d=(i-(3*r+2*l))/2,h=s+(i-a)/2;[{x:h,y:n+d},{x:h,y:n+d+r+l},{x:h,y:n+d+2*(r+l)}].forEach(t=>{pt(e,Object.assign(Object.assign({type:"rect"},t),{color:o,width:a,height:r}))})}(e,{x:u,y:p,theme:c},m)}function la(e,t){const{x:i,y:s}=t;ht(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:24,height:24,radius:5}),function(e,t){const{x:i,y:s}=t,n=i+12,o=s+12,a="#545454";ut(e,{type:"line",lineWidth:2,x:n-2,y:o+24/7,x2:n+2,y2:o+24/7,strokeStyle:a}),ut(e,{type:"line",lineWidth:2,x:n-2,y:o-24/7,x2:n+2,y2:o-24/7,strokeStyle:a}),ct(e,{type:"circle",x:n+2,y:o,radius:24/7,angle:{start:Math.PI/2,end:3*Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:a}]});const r=n-2,l=o-24/7;aa(e,{type:"areaPoints",points:[{x:r-3,y:l},{x:r,y:l-3},{x:r,y:l+3}],lineWidth:1,color:a,fillColor:a})}(e,{x:i,y:s})}function da(e,t){const{x:i,y:s}=t;ht(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:24,height:24,radius:5}),function(e,t){const{x:i,y:s}=t,n=i+12,o=s+12;ct(e,{type:"circle",x:n,y:o,radius:4.8,angle:{start:0,end:Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:"#545454"}]});const a=n+4.8;aa(e,{type:"areaPoints",points:[{x:a-3,y:o},{x:a+3,y:o},{x:a,y:o+3}],lineWidth:1,color:"#545454",fillColor:"#545454"})}(e,{x:i,y:s})}class ha extends Bn{constructor(e){var t;super({el:e.el,options:e.options,series:{line:e.data.series},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[En,oo,Ci,ho]}),this.addData=(e,t)=>{var i;(null===(i=this.store.state.options.series)||void 0===i?void 0:i.showDot)&&(this.animationControlFlag.updating=!0),this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Xo),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(Uo),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(ea),this.componentManager.add(ta),this.componentManager.add(na),this.painter.addGroups([n,o,c,h,s,u,a,p])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{line:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}}function ca(e,t,i){var s,n;return[{hasOuterLabel:t.visible&&"outer"===t.anchor,labels:["00.00%"],theme:i},{hasOuterLabel:(null===(s=t.pieSeriesName)||void 0===s?void 0:s.visible)&&"outer"===(null===(n=t.pieSeriesName)||void 0===n?void 0:n.anchor),labels:e,theme:i.pieSeriesName}].reduce((e,t)=>{const{width:i,height:s}=e,{hasOuterLabel:n,labels:o,theme:a}=t;if(n){const{maxLabelWidth:e,maxLabelHeight:t}=hi(o,0,je(a));return{width:Math.max(e+30,i),height:Math.max(t+30,s)}}return e},{width:0,height:0})}class ua extends Wt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.alias||this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.alias||this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,name:t})=>{if(!S(e)||!b(t)&&t!==this.alias)return;const i=this.responders[e];if(!i)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme([i],"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,name:t})=>{if(!S(e)||!b(t)&&t!==this.alias)return;const i=[this.responders[e]];i.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(i,"hover"),name:this.name,alias:this.alias}),this.activatedResponders=this.makeTooltipResponder(i),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;let t;const i=this.models.series.findIndex(({clockwise:i,degree:{start:s,end:n},totalAngle:o})=>(t=i?o*e:360-o*e,st(i,s,n,t)));this.syncEndAngle(i<0?this.models.series.length:i),~i&&(this.drawModels.series[i].degree.end=t)}syncEndAngle(e){if(!(e<1))for(let t=0;t<e;t+=1){const e=this.models.series[t].degree.end;this.drawModels.series[t].degree.end!==e&&(this.drawModels.series[t].degree.end=e)}}initialize(e){var t,i;this.type="series",this.name="pie",this.alias=null!=(i=null===(t=e)||void 0===t?void 0:t.alias)?i:"",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n;const{layout:o,series:a,legend:r,options:l,nestedPieSeries:d,theme:h}=e,c=null!=(t=e.categories)?t:[];if(!a.pie)throw new Error(J(this.name));const u=h.series.pie;let p,m;this.theme=this.alias?u[this.alias]:u,this.rect=o.plot,this.activeSeriesMap=ln(r),this.selectable=this.getSelectableOption(l);const g=No(l,this.alias);if(d){const{data:e}=d[this.alias],t=Object.keys(d),s=t.findIndex(e=>e===this.alias),n=Y(t),o=ca(d[n].data.map(({name:e})=>e),No(l,n),this.theme.dataLabels),a=this.getRenderOptionsMap(l,t,o);p=this.renderPieModel(e,a[this.alias],s),m=vs(e,null===(i=c)||void 0===i?void 0:i[s])}else{const e=null===(s=a.pie)||void 0===s?void 0:s.data,{width:t,height:i}=ca(e.map(({name:e})=>e),g,this.theme.dataLabels),o=this.makeRenderOptions(l,t,i);p=this.renderPieModel(e,o),m=vs(e,null===(n=c)||void 0===n?void 0:n[0])}if(this.models.series=p,this.drawModels||(this.drawModels={series:this.models.series.map(e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})}))}),g.visible){const e=p.map(e=>Object.assign(Object.assign({},e),{value:`${xs(e.percentValue)}`,theme:this.theme.dataLabels}));this.renderDataLabels(e,this.alias)}this.responders=p.map((e,t)=>Object.assign(Object.assign({},e),{type:"sector",radius:e.radius,seriesIndex:t,data:Object.assign(Object.assign({},m[t]),{percentValue:e.percentValue}),color:Fe(e.color,1)}))}getRadiusRangeMap(e,t){return t.reduce((t,i)=>{var s,n;const o=this.getOptions(e,i).series;return(null===(s=o)||void 0===s?void 0:s.radiusRange)&&(t[i]=null===(n=o)||void 0===n?void 0:n.radiusRange),t},{})}getRenderOptionsMap(e,t,i){const s=this.initRenderOptionsMap(e,t,i),n=this.getRadiusRangeMap(e,t);return t.forEach((e,i)=>{const o=Object.values(s).map(({radiusRange:e})=>e);s[e].radiusRange=function({alias:e,renderOptions:t,radiusRangeMap:i,pieIndex:s,radiusRanges:n,totalPieAliasCount:o}){var a,r,l,d,h;const c=Object.keys(i).length,{defaultRadius:u=0}=t;let{inner:p,outer:m}=t.radiusRange;if(!i[e])if(c)if(s&&n[s-1].outer&&(p=n[s-1].outer),null===(a=n[s+1])||void 0===a?void 0:a.inner)m=n[s+1].inner;else if(s===o-1)m=u;else{m=p+(u-(null!=(l=null===(r=n[s-1])||void 0===r?void 0:r.outer)?l:0)-(null!=(h=null===(d=n[s+1])||void 0===d?void 0:d.inner)?h:0))/(o-c)}else{const e=u/o;p=s*e,m=(s+1)*e}return{inner:p,outer:m}}({alias:e,renderOptions:s[e],radiusRangeMap:n,pieIndex:i,radiusRanges:o,totalPieAliasCount:t.length})}),s}initRenderOptionsMap(e,t,{width:i,height:s}){return t.reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:this.makeRenderOptions(this.getOptions(e,n),i,s)}),{})}getOptions(e,t){var i;const s=Object.assign({},e);return(null===(i=s)||void 0===i?void 0:i.series)&&t&&(s.series=Object.assign(Object.assign({},s.series),s.series[t])),s}makeRenderOptions(e,t=0,i=0){var s,n,o,a,r,l,d,h,c,u,p,m,g,v;const f=e.series,b=null==(n=null===(s=f)||void 0===s?void 0:s.clockwise)||n,x=null!=(r=null===(a=null===(o=f)||void 0===o?void 0:o.angleRange)||void 0===a?void 0:a.start)?r:0,y=null!=(h=null===(d=null===(l=f)||void 0===l?void 0:l.angleRange)||void 0===d?void 0:d.end)?h:360,S=ps(b,x,y),w=ms(b,x,y),{width:O,height:M}=this.rect,A=nt(this.rect,w,t,i),k=X(A,null!=(p=null===(u=null===(c=f)||void 0===c?void 0:c.radiusRange)||void 0===u?void 0:u.inner)?p:0),C=X(A,null!=(v=null===(g=null===(m=f)||void 0===m?void 0:m.radiusRange)||void 0===g?void 0:g.outer)?v:this.alias?0:A);return{clockwise:b,cx:O/2,cy:w?gs(this.rect.height,b):M/2,drawingStartAngle:x-90,radiusRange:{inner:k,outer:C},angleRange:{start:x,end:y},totalAngle:S,defaultRadius:A}}renderPieModel(e,t,i){const s=[],n=e.reduce((e,{data:t})=>e+(null!=t?t:0),0),{clockwise:o,cx:a,cy:r,drawingStartAngle:l,radiusRange:{inner:d,outer:h},totalAngle:c}=t,u=o?0:360,{lineWidth:p,strokeStyle:m}=this.theme;return e.forEach((t,g)=>{const v=this.alias?this.getAliasSeriesColor(t,e,i):this.getSeriesColor(t),{data:f,name:b}=t;if(!x(f)){const e=Math.max(f/n*c,1)*(o?1:-1),t=f/n*100,i=s[s.length-1],x=g&&i?i.degree.end:u,y=o?Math.min(x+e,360):Math.max(x+e,0);s.push({type:"sector",name:b,color:v,x:a,y:r,degree:{start:x,end:y},radius:{inner:d,outer:h},value:f,style:[{strokeStyle:m}],lineWidth:p,clockwise:o,drawingStartAngle:l,totalAngle:c,percentValue:t})}}),s}makeTooltipResponder(e){return e.map(e=>Object.assign(Object.assign({},e),tt(Qe("center",this.models.series[e.seriesIndex]))))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.alias||this.name}),this.activatedResponders=this.makeTooltipResponder(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme(e,"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw"))}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map(e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[D(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})})}getOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,{areaOpacity:n,restSeries:{areaOpacity:o}}=i;return t?e?n:o:s}getIndexOfGroup(e,t,i){return e.filter(e=>t===e.parentName).findIndex(e=>i===e.name)}getSeriesColor(e){const{color:t,name:i}=e,s=this.activeSeriesMap[i];return Fe(t,this.getOpacity(s,this.hasActiveSeries()))}getAliasSeriesColor(e,t,i){const{color:s,name:n}=e,{select:{color:o}}=this.theme,{rootParentName:a,parentName:r}=e,l=this.getIndexOfGroup(t,r,n),d=this.getAliasSeriesOpacity(a,r,i,l,n);return Fe(this.activeSeriesMap[null!=a?a:n]&&null!=o?o:s,d)}getAliasSeriesOpacity(e,t,i,s,n){const o=this.activeSeriesMap[null!=e?e:n],a=this.getOpacity(o,this.hasActiveSeries());return i&&t?function(e,t,i,s=.85){const n=Number((e*Math.pow(s,t)).toFixed(2));return Number(Math.pow(n,i+1).toFixed(2))}(a,i,s):a}hasActiveSeries(){return Object.values(this.activeSeriesMap).some(e=>!e)}}function pa(e,t){const{degree:{start:i,end:s},color:n,style:o,lineWidth:a}=t;if(i===s)return;const r=360===Math.abs(i-s);if(e.beginPath(),o){const t=ke(o,{});Object.keys(t).forEach(i=>{e[i]=t[i]})}r?function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},clockwise:a}=t;if(e.arc(i,s,o,0,2*Math.PI,!a),n){const{x:t,y:o}=it(i,s,n,0),r=n?t:i,l=n?o:s;e.moveTo(r,l),e.arc(i,s,n,0,2*Math.PI,a)}}(e,t):function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},clockwise:l,drawingStartAngle:d}=t;if(n<0||o<0)return;const h=et(a,d),c=et(r,d);n||e.moveTo(i,s);e.arc(i,s,o,h,c,!l),n&&e.arc(i,s,n,c,h,l)}(e,t),e.closePath(),Pe(e,n),a&&(e.lineWidth=a,e.stroke())}class ma extends Bn{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{pie:i.series},categories:i.categories}),this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Vo),this.componentManager.add(ua),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,h,s,u,m,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{pie:i},categories:t})}}function ga(e,t){var i,s,n,o,a,r,l,d,h,c,u,p,m,g;const{categories:v,axisSize:f,options:b,theme:x}=e,y=t===zt.X,S=y?"x":"y",w=null!=(n=null===(s=null===(i=b[t])||void 0===i?void 0:i.label)||void 0===s?void 0:s.formatter)?n:e=>e,O=li(v[S],null===(o=b[t])||void 0===o?void 0:o.date),M=O.map((e,i)=>w(e,{index:i,labels:O,axisName:t})),A=M.length,k=A?f/A:f,C=f/A,T=A+1,D=null!=(l=null===(r=null===(a=b[t])||void 0===a?void 0:a.tick)||void 0===r?void 0:r.interval)?l:1,j=null!=(c=null===(h=null===(d=b[t])||void 0===d?void 0:d.label)||void 0===h?void 0:h.interval)?c:1,R=ai({labels:M,pointOnColumn:!0,tickDistance:k,tickCount:T,tickInterval:D,labelInterval:j},f),B=ci(t,b),{maxLabelWidth:P,maxLabelHeight:L}=hi(M,B,Te(x.label)),E={labels:M,viewLabels:R,pointOnColumn:!0,isLabelAxis:y,tickCount:T,tickDistance:k,labelDistance:C,tickInterval:D,labelInterval:j,title:ri(null===(u=b.xAxis)||void 0===u?void 0:u.title),maxLabelWidth:P,maxLabelHeight:L};if(t===zt.X){const e=null!=(g=null===(m=null===(p=b.xAxis)||void 0===p?void 0:p.label)||void 0===m?void 0:m.margin)?g:0,t=yt(L)+e,i=di(P,L,f/R.length,oi(b)),{needRotateLabel:s,rotationHeight:n}=i,o=(s?n:L)+t;return Object.assign(Object.assign(Object.assign({},E),i),{maxHeight:o,offsetY:t})}return E}var va={name:"axes",state:()=>({axes:{xAxis:{},yAxis:{}}}),action:{setAxesData({state:e}){const{layout:t,theme:i}=e,{width:s,height:n}=t.plot,o=e.categories,a=e.options,r={xAxis:ga({axisSize:s,categories:o,options:a,theme:ti(i,zt.X)},zt.X),yAxis:ga({axisSize:n,categories:o,options:a,theme:ti(i,zt.X)},zt.Y)};ni(e.axes,r)&&this.notify(e,"layout"),e.axes=r}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}};var fa={name:"heatmapSeriesData",state:()=>({heatmapSeries:[]}),action:{setHeatmapSeriesData({state:e,computed:t}){var i,s,n;e.heatmapSeries=(i=e.series,s=e.categories,n=t.viewRange,i.heatmap?i.heatmap.data.map((e,t)=>{const{yCategory:i,data:o}=e;return vi(o,n).map((e,n)=>({colorValue:e,category:{x:s.x[n],y:i},indexes:[n,t]}))}):[])}},observe:{updateTreemapSeriesData(){this.dispatch("setHeatmapSeriesData")}}};const ba="__TOAST_UI_TREEMAP_ROOT";function xa(e,t){var i;if(!e.treemap)return[];const s=e.treemap.data.filter(e=>!x(e.data)).map((e,t)=>function e(t,i,s,n){var o;const a=Y(i),r=n?`${n}_${a}`:`__TOAST_UI_TREEMAP_${a}`,{colorValue:l}=t,d=[{label:t.label,hasChild:!!t.children,id:r,indexes:i,parentId:n||ba,depth:s,data:(o=t.data,null!=o?o:0),colorValue:l}];return t.children&&t.children.forEach((t,n)=>{x(t.data)||d.push(...e(t,[...i,n],s+1,r))}),d}(e,[t],0)).flatMap(e=>e).sort((e,t)=>t.depth-e.depth);return function(e){e.forEach(({parentId:t,data:i})=>{t!==ba&&(e.find(({id:e})=>e===t).data+=i)})}(s),function(e){const t=e.filter(({parentId:e})=>e===ba).reduce((e,{data:t})=>e+t,0);e.forEach(i=>{const s=i.parentId===ba?t:e.find(({id:e})=>e===i.parentId).data;i.ratio=i.data/s})}(s),(null===(i=t.series)||void 0===i?void 0:i.useColorValue)&&function(e){e.forEach(t=>{const{id:i,colorValue:s}=t;if(b(s)){const s=e.filter(({parentId:e})=>e===i),n=s.reduce((e,t)=>e+(b(t.colorValue)?0:t.colorValue),0);t.colorValue=n/s.length}})}(s),s}var ya={name:"treemapSeriesData",state:()=>({treemapSeries:[]}),action:{setTreemapSeriesData({state:e}){e.treemapSeries=xa(e.series,e.options)}},observe:{updateTreemapSeriesData(){this.dispatch("setTreemapSeriesData")}}};var Sa={name:"colorValueScale",state:()=>({treemapZoomId:{prev:ba,cur:ba},colorValueScale:{}}),action:{setColorValueScale({state:e}){const{layout:t,treemapSeries:i,legend:s,heatmapSeries:n}=e;if(!s.useSpectrumLegend)return;const o=(null!=i?i:n.flatMap(e=>e)).reduce((e,{colorValue:t})=>t?[...e,t]:e,[]),a=Pn([...new Set(o)]),r=qi(s.align)?t.plot.width/2:t.plot.height;fe(e.colorValueScale,Fn({dataRange:a,offsetSize:r,useSpectrumLegend:!0,scaleOption:{}}))},setTreemapZoomId({state:e},t){e.treemapZoomId.prev=e.treemapZoomId.cur,e.treemapZoomId.cur=t},zoomBack({state:e}){var t,i;const{treemapSeries:s,treemapZoomId:n}=e,{prev:o}=n,a=s.find(({id:e})=>e===o);e.treemapZoomId.prev=null!=(i=null===(t=a)||void 0===t?void 0:t.parentId)?i:ba,e.treemapZoomId.cur=o}},observe:{updateColorValueScale(){this.dispatch("setColorValueScale")}},computed:{isTreemapSeriesZooming:({treemapZoomId:e})=>e&&e.cur!==e.prev}};class wa extends Wt{constructor(){super(...arguments),this.labels=[],this.renderSpectrumTooltip=([e])=>{if(e){const{labels:t,align:i}=this,{colorValue:s,color:n}=e,{width:o,height:a}=this.rect;this.models.tooltip=[{type:"spectrumTooltip",width:o,height:a,x:0,y:0,labels:t,align:i,colorRatio:e.colorRatio,color:n,text:String(s),verticalAlign:qi(i)}]}else this.models.tooltip=[]}}initialize(){this.type="spectrumLegend",this.name="spectrumLegend"}makeLabels(e){const{stepCount:t,limit:i,stepSize:s}=e,n=i.min;return C(0,t+1).reduce((e,t)=>[...e,String(n+s*t)],[])}renderSpectrumLegendModel(e,t){const{labels:i,align:s}=this,{width:n,height:o}=this.rect;return[{type:"spectrumLegend",width:n,height:o,x:0,y:0,labels:i,align:s,startColor:e,endColor:t,verticalAlign:qi(this.align)}]}render({layout:e,legend:t,colorValueScale:i,theme:s}){var n,o;if(this.rect=e.legend,this.align=t.align,this.isShow=t.visible&&!!t.data.length,!this.isShow)return;this.labels=this.makeLabels(i);const{startColor:a,endColor:r}=(null===(n=s.series)||void 0===n?void 0:n.heatmap)||(null===(o=s.series)||void 0===o?void 0:o.treemap);this.models={legend:this.renderSpectrumLegendModel(a,r),tooltip:[]},this.eventBus.on("renderSpectrumTooltip",this.renderSpectrumTooltip)}}function Oa(e,t){return e.map((e,i)=>t[i]-e)}function Ma(e,t){if(b(t))return;const i=Math.abs(e.max-e.min);return i&&!x(t)?(t-e.min)/i:0}function Aa(e,t,i){const s=function(e,t,i){const s="#"+Ye(e.toString(16),2)+Ye(t.toString(16),2)+Ye(i.toString(16),2);return!!Ne(s)&&s}(...i.map((i,s)=>i+parseInt(String(t[s]*e),10)));return w(s)?s:""}class ka extends Wt{constructor(){super(...arguments),this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{var s;if(!S(e)||!S(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];if(!o)throw new Error(q);this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme([o],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{var s;if(!S(e)||!S(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];o&&this.emitMouseEvent([o])}}initialize(){this.type="series",this.name="heatmap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){const{layout:t,heatmapSeries:i,axes:s,theme:n,colorValueScale:o,options:a}=e;if(!i)throw new Error(J(this.name));this.theme=n.series.heatmap,this.selectable=this.getSelectableOption(a),this.rect=t.plot;const r={height:s.yAxis.tickDistance,width:s.xAxis.tickDistance};this.models={series:this.renderHeatmapSeries(i,r,o)},No(a,this.name).visible&&this.renderDataLabels(this.makeDataLabels()),this.responders=this.makeHeatmapSeriesResponder()}makeDataLabels(){const e=this.theme.dataLabels;return this.models.series.reduce((t,i)=>x(i.colorValue)?t:[...t,Object.assign(Object.assign({},i),{type:"treemapSeriesName",value:i.colorValue,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},e),{color:e.useSeriesColor?i.color:e.color})})],[])}makeHeatmapSeriesResponder(){return this.models.series.reduce((e,t)=>x(t.colorValue)?e:[...e,Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t),{label:t.name,value:t.colorValue,templateType:"heatmap"}),thickness:Xs,style:["shadow"]})],[])}renderHeatmapSeries(e,t,i){const{startColor:s,endColor:n,borderColor:o,borderWidth:a}=this.theme,r=$e(s),l=Oa(r,$e(n)),{height:d,width:h}=t;return e.flatMap(e=>e.flatMap(e=>{const{indexes:t,colorValue:s,category:n}=e,c=`${n.x}, ${n.y}`,[u,p]=t,m=Ma(i.limit,s),g=x(s)?"rgba(0, 0, 0, 0)":Aa(m,l,r);return{type:"rect",name:c,width:h-2*a,height:d-2*a,x:h*u+a,y:d*p+a,colorValue:s,colorRatio:m,color:g,thickness:a,borderColor:o}}))}getRespondersWithTheme(e,t){return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]})))}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.activatedResponders=e,this.emitMouseEvent(e)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}function Ca(e,t){return e.map((e,i)=>({data:e,yCategory:t.y[i]}))}class Ta extends Bn{constructor(e){super({el:e.el,categories:e.data.categories,options:e.options,series:{heatmap:Ca(e.data.series,e.data.categories)},modules:[fa,Sa,va]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.addSeries=(e,t)=>{this.resetSeries(),this.store.dispatch("addHeatmapSeries",Object.assign({data:e},t))},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(wa),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(ka),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,a,r])}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{heatmap:Ca(i,t)},categories:t})}}const Da=.06,ja=1;class Ra extends Wt{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.isStackChart=!1,this.isRangeChart=!1,this.isSplineChart=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!an(e,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(q);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:[n],name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!on(e,this.eventDetectType,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)return;const n="grouped"===this.eventDetectType?this.tooltipCircleMap[s]:[this.tooltipCircleMap[s][i]];n.length&&(this.onMousemoveNearType(n),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="area",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels&&(this.drawModels.rect[0].width=this.models.rect[0].width*e)}getBaseYPosition(e){const t=e.min>=0?e.min:Math.min(e.max,0),i=this.rect.height/(e.max-e.min);return(e.max-t)*i}getStackValue(e,t,i){const{type:s}=e.stack,{values:n,sum:o}=e.stackData[i],a=H(n.slice(0,t+1));return"percent"===s?100*a/o:a}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),(e.line||this.isStackChart)&&(this.eventDetectType="grouped")}getAreaOptions(e){var t;const i=Object.assign({},e);return(null===(t=i.series)||void 0===t?void 0:t.area)&&(i.series=Object.assign(Object.assign({},i.series),i.series.area)),i}render(e,t){var i,s,n,o,a;const{viewRange:r}=t,{layout:l,series:d,scale:h,axes:c,legend:u,stackSeries:p,theme:m,rawCategories:g}=e;if(!d.area)throw new Error(J(this.name));let v;const f=this.getAreaOptions(e.options),b=e.categories;this.theme=m.series.area,this.rect=l.plot,this.activeSeriesMap=ln(u),this.startIndex=r?r[0]:0,this.selectable=this.getSelectableOption(f),this.isSplineChart=null!=(s=null===(i=f.series)||void 0===i?void 0:i.spline)&&s;const{limit:x}=h[Qt(f,this.name,"yAxis")],{tickDistance:y,pointOnColumn:S,tickCount:w}=c.xAxis,O=d.area.data;this.baseYPosition=this.getBaseYPosition(x),(null===(n=p)||void 0===n?void 0:n.area)?(this.isStackChart=!0,v=p.area):mi(null===(o=F(O))||void 0===o?void 0:o.data)&&(this.isRangeChart=!0),this.setEventDetectType(d,f);const M={pointOnColumn:S,options:f.series||{},tickDistance:y,tickCount:w,areaStackSeries:v};this.linePointsModel=this.renderLinePointsModel(O,x,M);const A=this.renderAreaPointsModel(),k=!!(null===(a=f.series)||void 0===a?void 0:a.showDot),{dotSeriesModel:C,responderModel:T}=this.renderCircleModel(k),D=this.makeTooltipData(O,g);this.models=E({rect:[this.renderClipRectAreaModel()],series:[...this.linePointsModel,...A],dot:C}),this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),No(f,this.name).visible&&this.renderDataLabels(this.getDataLabels(A)),this.tooltipCircleMap=Do(T,D),this.responders="near"===this.eventDetectType?this.makeNearTypeResponderModel(T,D):To(this.rect,c.xAxis,b)}makeNearTypeResponderModel(e,t){const i=t.length;return e.map((e,s)=>Object.assign(Object.assign({},e),{data:t[s%i]}))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}makeTooltipData(e,t){return e.flatMap(({rawData:e,name:i,color:s},n)=>{const o=[];return e.forEach((e,a)=>{if(!x(e)){const r=this.isRangeChart?`${e[0]} ~ ${e[1]}`:e;o.push({label:i,color:s,value:r,category:t[a],seriesIndex:n,index:a})}}),o})}getLinePointModelValue(e,t){return this.isRangeChart?t?e[0]:e[1]:e}getLinePointModel(e,t,i,s){const{pointOnColumn:n,tickDistance:o,pairModel:a,areaStackSeries:r}=s,{rawData:l,name:d,color:h}=e,c=this.activeSeriesMap[d],u=[],p=Fe(h,c?ja:Da),{lineWidth:m,dashSegments:g}=this.theme;return l.forEach((e,s)=>{if(x(e))return void u.push(null);const l=this.getLinePointModelValue(e,a),d=Rt(this.isStackChart?this.getStackValue(r,t,s):l,i),h=o*(s-this.startIndex)+(n?o/2:0),c=(1-d)*this.rect.height;u.push({x:h,y:c,value:l})}),a&&u.reverse(),this.isSplineChart&&jt(u),{type:"linePoints",lineWidth:m,dashSegments:g,color:p,points:u,seriesIndex:t,name:d}}renderLinePointsModel(e,t,i){const s=e.map((e,s)=>this.getLinePointModel(e,s,t,i));if(this.isRangeChart){const n=P(i,{pairModel:!0}),o=e.map((e,i)=>this.getLinePointModel(e,i,t,n));s.push(...o)}return s}getCombinedPoints(e,t){return[...e>=0?this.linePointsModel[e].points:[],...[...this.linePointsModel[t].points].reverse()]}renderRangeAreaSeries(e){const t=[];return e.forEach(e=>{let i=[];const{points:s}=e;s.slice(0,s.length/2+1).forEach((n,o)=>{const a=o===s.length/2-1,r=x(n);if(r||i.push(n),i.length&&(a||r)){const n=i.map((e,t)=>{const n=s.length/2+o-i.length+t+(!r&&a?1:0);return s[n]}).reverse();t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...i,...n]})),i=[]}})}),t}renderAreaSeries(e){const t=[],i=[];return e.forEach(e=>{let s=[];const n=[...i],{points:o}=e;o.forEach((a,r)=>{const l=r===o.length-1,d=x(a);if(x(a)||s.push(a),s.length&&(d||l)){const o=s.map((e,t)=>{const o=r-s.length+t+(!d&&l?1:0),a=b(n[o])?this.baseYPosition:n[o];return this.isStackChart&&(i[o]=e.y),{x:e.x,y:a}}).reverse();this.isStackChart&&this.isSplineChart&&jt(o),t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...s,...o]})),s=[]}})}),t}getCombinedLinePointsModel(){if(!this.isRangeChart)return this.linePointsModel;const e=this.linePointsModel.length/2;return C(0,e).reduce((t,i)=>{const s=i,n=e+i,o=this.getCombinedPoints(s,n);return[...t,Object.assign(Object.assign({},this.linePointsModel[i]),{points:o})]},[])}getAreaOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Fe(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}renderAreaPointsModel(){const e=this.getCombinedLinePointsModel();return this.isRangeChart?this.renderRangeAreaSeries(e):this.renderAreaSeries(e)}renderCircleModel(e){const t=[],i=[],{hover:s,dot:n}=this.theme,o=s.dot;return this.linePointsModel.forEach(({points:s,color:a,seriesIndex:r,name:l},d)=>{const h=this.isRangeChart&&d>=this.linePointsModel.length/2,c=this.activeSeriesMap[l];s.forEach((d,u)=>{var p,m,g;if(x(d))return;const v=Object.assign(Object.assign({type:"circle"},d),{seriesIndex:r,name:l,index:h?s.length-u-1:u});e&&t.push(Object.assign(Object.assign({},v),{radius:n.radius,color:Fe(a,c?1:.3),style:[{lineWidth:n.borderWidth,strokeStyle:(p=n.borderColor,null!=p?p:a)}]}));const f=null!=(m=o.color)?m:Fe(a,1);i.push(Object.assign(Object.assign({},v),{radius:o.radius,color:f,style:[{lineWidth:o.borderWidth,strokeStyle:(g=o.borderColor,null!=g?g:Fe(f,.5))}]}))})}),{dotSeriesModel:t,responderModel:i}}getPairCircleModel(e){const t=[];return e.forEach(e=>{const{seriesIndex:i,y:s,data:n}=e,{category:o}=n,a=this.tooltipCircleMap[o].find(e=>e.seriesIndex===i&&e.y!==s);t.push(a)}),t}getCircleModelsFromRectResponders(e,t){var i;if(!e.length||!e[0].label)return[];const s=null!=(i=this.tooltipCircleMap[e[0].label])?i:[];return"grouped"===this.eventDetectType?s:Co(s,t,this.rect)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=this.isRangeChart?t.slice(0,t.length/2):t}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveNearType(e){let t=[];this.isRangeChart&&(t=this.getPairCircleModel(e));const i=[...e,...t];this.eventBus.emit("renderHoveredSeries",{models:i,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):"near"===this.eventDetectType?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap(({points:e,name:i,fillColor:s})=>e.map(e=>x(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?Fe(s,1):t.color})})))}getSelectedSeriesWithTheme(e){const{radius:t,color:i,borderWidth:s,borderColor:n}=this.theme.select.dot;return e.map(e=>{const o=null!=i?i:e.color;return Object.assign(Object.assign({},e),{radius:t,color:o,style:[{lineWidth:s,strokeStyle:null!=n?n:Fe(o,.5)}]})})}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getSelectedSeriesWithTheme(i),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap(e=>e).find(t=>t.index===e))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class Ba extends Bn{constructor(e){super({el:e.el,options:e.options,series:{area:e.data.series},categories:e.data.categories,modules:[io,En,oo,Ci,ho]}),this.addData=(e,t)=>{this.resetSeries(),this.animationControlFlag.updating=!0,this.store.dispatch("addData",{data:e,category:t})},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Ra),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(Uo),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(ea),this.componentManager.add(ta),this.componentManager.add(na),this.painter.addGroups([n,o,c,h,s,u,a,p])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{area:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}}class Pa extends Wt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.getModelsForSelectInfo=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!an(e,"scatter"))return[];const{name:n}=s.series.scatter.data[i];return[this.responders.filter(({name:e})=>e===n)[t]]},this.selectSeries=e=>{const t=this.getModelsForSelectInfo(e);if(!t.length)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const t=this.getModelsForSelectInfo(e);t.length&&(this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name}),this.activatedResponders=t,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="scatter",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach((t,i)=>{t.size=this.models.series[i].size*e})}render(e){const{layout:t,series:i,scale:s,legend:n,options:o,theme:a}=e;if(!i.scatter)throw new Error(J(this.name));const r=i.scatter.data;this.theme=a.series.scatter,this.rect=t.plot,this.activeSeriesMap=ln(n),this.selectable=this.getSelectableOption(o);const l=this.renderScatterPointsModel(r,s.xAxis.limit,s[Qt(o,this.name,"yAxis")].limit),d=this.makeTooltipModel(r);this.models.series=l,this.drawModels||(this.drawModels=E(this.models)),this.responders=l.map((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:this.theme.size/2,color:e.fillColor,style:[{strokeStyle:e.borderColor,lineWidth:e.borderWidth}],data:d[t]}))}renderScatterPointsModel(e,t,i){return e.flatMap(({data:e,name:s,color:n,iconType:o},a)=>{const r=[],l=Fe(n,this.activeSeriesMap[s]?1:.3);return e.forEach((e,n)=>{const d=bi(e),h=w(d)?Number(new Date(d)):Number(d),c=fi(e),u=Rt(h,t),p=Rt(c,i),m=u*this.rect.width,g=(1-p)*this.rect.height;r.push(Object.assign({x:m,y:g,type:"scatterSeries",iconType:o,seriesIndex:a,name:s,borderColor:l,index:n},D(this.theme,"borderWidth","size","fillColor")))}),r})}makeTooltipModel(e){return[...e].flatMap(({data:e,name:t,color:i})=>{const s=[];return e.forEach(e=>{const n={x:bi(e),y:fi(e)};s.push({label:t,color:i,value:n})}),s})}getClosestModel(e){if(!e.length)return[];const t=this.models.series.find(({index:t,seriesIndex:i})=>S(t)&&S(i)&&t===e[0].index&&i===e[0].seriesIndex);return t?[t]:[]}getResponderAppliedTheme(e,t){const{fillColor:i,size:s}=this.theme[t];return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{color:i,radius:s/2})))}onMousemove({responders:e,mousePosition:t}){const i=Co(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"hover"),this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Co(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"select"),this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class La extends Bn{constructor(e){super({el:e.el,options:e.options,series:e.data.series,modules:[En,oo,Ci,ho]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,chartType:t})},this.addSeries=(e,t)=>{this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Xo),this.componentManager.add(Pa),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(Uo),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(ea),this.componentManager.add(na),this.painter.addGroups([n,o,c,h,s,u,a,p,d])}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}}class Ea extends Bn{constructor(e){super({el:e.el,options:e.options,series:e.data.series,categories:e.data.categories,modules:[io,En,oo,Ci,ho]}),this.addData=(e,t,i)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})},this.addSeries=(e,t)=>{this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Ra),this.componentManager.add(Xo),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(Uo),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(ea),this.componentManager.add(ta),this.componentManager.add(na),this.painter.addGroups([n,o,c,h,s,u,a,p])}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}}function Wa(e,t,i){return e<0?function(e,t,i){let s=e;return s>=i?0:(i<0&&(s=Math.min(e-i,0)),e<t&&(s-=e-t),s)}(e,t,i):function(e,t,i){let s=e;return t>0&&(s=Math.max(e-t,0)),e>i&&(s-=e-i),s}(e,t,i)}function za(e,t,i=!1){const s=e[t];return e.reduce((e,n,o)=>(i?o<=t:o<t)&&n*s>=0?e+n:e,0)}function Ia(e,t,i,s){const n=za(e,t,!1),o=za(e,t,!0);if(function(e,t,i,s){const n=e[t],o=za(e,t,!1),a=n>=0,r=n<0;return a&&o>=s||r&&o<=i||0===t&&a&&n<i||0===t&&r&&n>s}(e,t,i,s))return null;if(0===t)return Wa(e[t],i,s);if(n<i&&o>s)return s-i;let a=e[t];return o>s?a=s-n:o<i?a=i-n:n<i?a=o-i:n>s&&(a=o-s),a}var Ya;!function(e){e[e.POSITIVE=0]="POSITIVE",e[e.NEGATIVE=1]="NEGATIVE",e[e.BOTH=2]="BOTH"}(Ya||(Ya={}));const Na={BAR:"bar",COLUMN:"column"};function Ha(e){return!!(e%2)}class $a extends Wt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.isBar=!0,this.valueAxis="xAxis",this.labelAxis="yAxis",this.anchorSizeKey="height",this.offsetSizeKey="width",this.basePosition=0,this.leftBasePosition=0,this.rightBasePosition=0,this.isRangeData=!1,this.offsetKey="x",this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!an(e,"column"))return;const s=this.tooltipRectMap[i][t];if(!s)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([s],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!on(e,this.eventDetectType,"column"))return;const s="grouped"===this.eventDetectType?this.getGroupedRect([this.responders[t]],"hover"):this.getRespondersWithTheme([this.tooltipRectMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipRectMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize({name:e,stackChart:t}){this.initializeFields(e),t||(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}initializeFields(e){this.type="series",this.name=e,this.isBar=e===Na.BAR,this.offsetKey=this.isBar?"x":"y",this.valueAxis=this.isBar?"xAxis":"yAxis",this.labelAxis=this.isBar?"yAxis":"xAxis",this.anchorSizeKey=this.isBar?"height":"width",this.offsetSizeKey=this.isBar?"width":"height"}initUpdate(e){this.drawModels&&(this.isRangeData?this.initUpdateRangeData(e):(this.initUpdateClipRect(e),this.initUpdateConnector(e)))}initUpdateRangeData(e){const{series:t}=this.drawModels;this.drawModels.clipRect=this.models.clipRect;const i=this.models.series;t.forEach((t,s)=>{const n=i[s];0===e&&(t[this.offsetSizeKey]=0);const o=t[this.offsetSizeKey]+(n[this.offsetSizeKey]-t[this.offsetSizeKey])*e;t[this.offsetSizeKey]=o,this.isBar||(t[this.offsetKey]=n[this.offsetKey]+n[this.offsetSizeKey]-o)})}initUpdateClipRect(e){const{clipRect:t}=this.drawModels;if(!t)return;const i=t[0],s=this.offsetSizeKey,n=this.models.clipRect[0],o=i[s]+(n[s]-i[s])*e;i[s]=o,i[this.offsetKey]=Math.max(this.basePosition-o*this.basePosition/n[s],0)}initUpdateConnector(e){const{connector:t}=this.drawModels;if(!t)return;const i=this.models.connector;t.forEach((t,s)=>{const n=Ge(i[s].strokeStyle)*e;t.strokeStyle=Fe(t.strokeStyle,n)})}setEventDetectType(e,t){var i,s;e.line&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getOptions(e){var t;const i=Object.assign({},e);return(null===(t=i)||void 0===t?void 0:t.series)&&i.series.column&&(i.series=Object.assign(Object.assign({},i.series),i.series.column)),i}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:h}=e;if(this.isShow=!(r&&r[this.name]),!this.isShow)return;const c=null!=(i=e.categories)?i:[],u=this.getOptions(e.options);this.setEventDetectType(o,u),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=ln(l),this.selectable=this.getSelectableOption(u),this.valueAxis=Qt(u,this.name,this.isBar?"xAxis":"yAxis");const p=o[this.name].data.map(e=>Object.assign(Object.assign({},e),{data:vi(e.data,t.viewRange)}));a.centerYAxis&&(this.valueAxis="centerYAxis");const{tickDistance:m}=a[this.labelAxis],g=!!(null===(s=u.series)||void 0===s?void 0:s.diverging),{limit:v,stepSize:f}=this.getScaleData(h),b=kt(v,f),{min:x,max:y}=Kt(b);this.basePosition=this.getBasePosition(a[this.valueAxis]);let S=this.getOffsetSize();const{centerYAxis:w}=a;if(g){const[e,t]=this.getDivergingBasePosition(w);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,S=this.getOffsetSizeWithDiverging(w)}const O={min:x,max:y,tickDistance:m,diverging:g,ratio:this.getValueRatio(x,y,S),hasNegativeValue:N(b),seriesDirection:this.getSeriesDirection(b),defaultPadding:Be(m)},M=this.renderSeriesModel(p,O),A=this.makeTooltipData(p,O,c),k=this.renderClipRectAreaModel();if(this.models={clipRect:[k],series:M},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(k)],series:L(M)}),No(u,this.name).visible){const e=M.reduce((e,t)=>pi(t.value)?[...e,...this.makeDataLabelRangeData(t)]:[...e,this.makeDataLabel(t,w)],[]);this.renderDataLabels(e)}this.tooltipRectMap=this.makeTooltipRectMap(M,A),this.responders=this.getBoxSeriesResponders(M,A,a,c)}getScaleData(e){return e["centerYAxis"===this.valueAxis?"xAxis":this.valueAxis]}getBoxSeriesResponders(e,t,i,s){const n=this.renderHoveredSeriesModel(e);return"grouped"===this.eventDetectType?To(this.rect,this.isBar?i.yAxis:i.xAxis,s,!this.isBar):n.map((e,i)=>Object.assign(Object.assign({},e),{data:t[i]}))}makeTooltipRectMap(e,t){return e.reduce((e,i,s)=>{const n=i.index,o=Object.assign(Object.assign({},i),{data:t[s]});return e[n]||(e[n]=[]),e[n].push(o),e},[])}renderClipRectAreaModel(){return{type:"clipRectArea",x:0,y:0,width:this.rect.width,height:this.rect.height}}initClipRect(e){return{type:"clipRectArea",width:this.isBar?0:e.width,height:this.isBar?e.height:0,x:this.isBar?0:e.x,y:this.isBar?e.y:0}}renderSeriesModel(e,t){const{tickDistance:i,diverging:s}=t,n=e.length,o=s&&2===e.length,a=this.getColumnWidth(t,n,o),r=[],l=(i-a*(o?1:n))/2;return e.forEach(({data:e,color:n,name:o},d)=>{const h=(s?0:d)*a+l,c=s&&Ha(d);this.isRangeData=mi(e),e.forEach((e,s)=>{const l=h+s*i,d=this.makeBarLength(e,t),u=this.getSeriesColor(o,n);if(S(d)){const i=this.getStartPosition(d,e,t,c);r.push(Object.assign(Object.assign({type:"rect",color:u,value:e},this.getAdjustedRect(l,i,d,a)),{name:o,index:s}))}})}),r}renderHoveredSeriesModel(e){return e.map(e=>this.makeHoveredSeriesModel(e))}makeHoveredSeriesModel(e){const{x:t,y:i,width:s,height:n,color:o,index:a}=e;return{type:"rect",color:Fe(o,1),x:t,y:i,width:s,height:n,index:a}}getRectModelsFromRectResponders(e){var t;return e.length?null!=(t=this.tooltipRectMap[e[0].index])?t:[]:[]}getGroupedRect(e,t){const i=this.getRectModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:Fe(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedRect(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeTooltipData(e,t,i){const s=[];return e.forEach(({data:e,name:n,color:o})=>{e.forEach((e,a)=>{if(!x(e)){S(this.makeBarLength(e,t))&&s.push({label:n,color:o,value:this.getTooltipValue(e),category:i.length?i[a]:""})}})}),s}getTooltipValue(e){return pi(e)?`${e[0]} ~ ${e[1]}`:e}getBasePosition({labels:e,tickCount:t,zeroPosition:i}){const s=this.isBar?e:[...e].reverse(),n=Ct(this.getOffsetSize(),t),o=this.getSeriesDirection(s);return i||this.getTickPositionIfNotZero(n,o)}getDivergingBasePosition(e){let t,i;if(e)t=e.xAxisHalfSize,i=e.secondStartX;else{t=i=this.getOffsetSize()/2}return[t,i]}getOffsetSize(){return this.rect[this.offsetSizeKey]}getValueRatio(e,t,i){return i/(t-e)}makeBarLength(e,t){if(x(e))return null;const{min:i,max:s,ratio:n}=t,o=function(e,t,i){if(pi(e)){let[s,n]=e;return s<t&&(s=t),n>i&&(n=i),n-s}return Wa(e,t,i)}(e,i,s);return Math.max(this.getBarLength(o,n),2)}getBarLength(e,t){return e<0?Math.abs(e)*t:e*t}getStartPositionWithRangeValue(e,t,i){const{min:s,ratio:n}=i;let[o]=e;o<s&&(o=s);const a=(o-s)*n;return this.isBar?a:this.getOffsetSize()-a-t}getStartPosition(e,t,i,s){const{diverging:n,seriesDirection:o}=i;let a;return a=pi(t)?this.getStartPositionWithRangeValue(t,e,i):n?s?this.getStartPosOnLeftBottomSide(e,n):this.getStartPosOnRightTopSide(e,n):o===Ya.POSITIVE?this.getStartPosOnRightTopSide(e):o===Ya.NEGATIVE?this.getStartPosOnLeftBottomSide(e):t<0?this.getStartPosOnLeftBottomSide(e):this.getStartPosOnRightTopSide(e),a}getStartPosOnRightTopSide(e,t=!1){let i;return i=t?this.isBar?this.rightBasePosition:this.rightBasePosition-e:this.isBar?this.basePosition:this.basePosition-e,i}getStartPosOnLeftBottomSide(e,t=!1){let i;return i=t?this.isBar?this.leftBasePosition-e:this.leftBasePosition:this.isBar?this.basePosition-e:this.basePosition,i}getAdjustedRect(e,t,i,s){return{x:this.isBar?t:e,y:this.isBar?e:t,width:this.isBar?i:s,height:this.isBar?s:i}}getColumnWidth(e,t,i=!1){const{tickDistance:s,defaultPadding:n}=e;t=i?1:t;const o=this.theme.barWidth;return o?X(s,o):(s-2*n)/t}getSeriesDirection(e){let t=Ya.BOTH;return e.every(e=>Number(e)>=0)?t=Ya.POSITIVE:$(e)&&(t=Ya.NEGATIVE),t}getTickPositionIfNotZero(e,t){const i=Number(I(e)),s=Number(Y(e));let n=0;return t===Ya.POSITIVE?n=this.isBar?i:s:t===Ya.NEGATIVE&&(n=this.isBar?s:i),n}makeDataLabel(e,t){return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()},theme:j(this.theme.dataLabels,"stackTotal")})}makeDataLabelRangeData(e){return e.value.reduce((t,i,s)=>[...t,Object.assign(Object.assign({},e),{value:i,direction:this.getDataLabelRangeDataDirection(s%2==0),plot:{x:0,y:0,size:this.getOffsetSize()},theme:j(this.theme.dataLabels,"stackTotal")})],[])}getDataLabelRangeDataDirection(e){let t;return t=this.isBar?e?"left":"right":e?"bottom":"top",t}getDataLabelDirection(e,t){let i;if(this.isBar){const s=t?this.leftBasePosition:this.basePosition;i=e.x<s?"left":"right"}else i=e.y>=this.basePosition?"bottom":"top";return i}getOffsetSizeWithDiverging(e){return e?e.xAxisHalfSize:this.getOffsetSize()/2}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRectModelsFromRectResponders(e)]:this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n,shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}=this.theme[t];return e.map(e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.color,thickness:n,borderColor:s,style:[{shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}]}))}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Fe(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}}class Fa extends $a{constructor(){super(...arguments),this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{stackSeries:s}=i,n=s[this.name],{name:o}=n.data[t],a=this.tooltipRectMap[e].find(({name:e})=>e===o);if(!a)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([a],"select"),name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}initialize({name:e,stackChart:t}){this.initializeFields(e),t&&(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:h}=e,{viewRange:c}=t;if(this.isShow=!!r[this.name],!this.isShow)return;const u=null!=(i=e.categories)?i:[],p=this.getOptions(e.options);this.setEventDetectType(o,p),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=ln(l),this.selectable=this.getSelectableOption(p);const m=function(e,t){if(!t)return e;const i=Array.isArray(e.stackData)?vi(e.stackData,t):Object.assign({},Object.keys(e.stackData).reduce((i,s)=>Object.assign(Object.assign({},i),{[s]:vi(e.stackData[s],t)}),{})),s=e.data.map(e=>Object.assign(Object.assign({},e),{data:vi(e.data,t)}));return Object.assign(Object.assign({},e),{data:s,stackData:i})}(r[this.name],c),{tickDistance:g}=a[this.labelAxis],v=!!(null===(s=p.series)||void 0===s?void 0:s.diverging),{limit:f,stepSize:b}=this.getScaleData(h),x=kt(f,b),{min:y,max:S}=Kt(x),{stack:w,scaleType:O}=m;this.basePosition=this.getBasePosition(a[this.valueAxis]);let M=this.getOffsetSize();const{centerYAxis:A}=a;if(v){const[e,t]=this.getDivergingBasePosition(A);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,M=this.getOffsetSizeWithDiverging(A)}const k={stack:w,scaleType:O,tickDistance:g,min:y,max:S,diverging:v,hasNegativeValue:N(x),seriesDirection:this.getSeriesDirection(x),defaultPadding:Be(g),offsetSize:M,centerYAxis:A},{series:C,connector:T}=this.renderStackSeriesModel(m,k),D=this.renderClipRectAreaModel(),j=this.getTooltipData(m,u);if(this.models={clipRect:[D],series:C,connector:T},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(D)],series:L(C),connector:L(T)}),No(p,this.name).visible){const e=this.getDataLabels(C,k),t=this.getTotalDataLabels(m,k);this.renderDataLabels([...e,...t])}this.tooltipRectMap=this.makeTooltipRectMap(C,j),this.responders=this.getBoxSeriesResponders(C,j,a,u)}renderStackSeriesModel(e,t){const{stackData:i}=e;return Un(i)?this.makeStackGroupSeriesModel(e,t):this.makeStackSeriesModel(i,t,e.data)}makeStackSeriesModel(e,t,i,s=1,n=0){const o=[],a=this.getStackColumnWidth(t,s),{diverging:r}=t,l=r&&Ha(n);return e.forEach(({values:e,total:r},d)=>{const h=this.getSeriesPosition(t,a,d,n,s),c=this.getStackValueRatio(r,t);e.forEach((s,n)=>{const{barLength:r,dataPosition:u}=this.getStackRectInfo(e,n,c,t,l),{name:p}=i[n],m=this.activeSeriesMap[p],g=Fe(i[n].color,m?1:.2);o.push(Object.assign(Object.assign({type:"rect",color:g,name:p,value:s},this.getAdjustedRect(h,u,null!=r?r:0,a)),{index:d}))})}),{series:o,connector:this.makeConnectorSeriesModel(e,t,s,n)}}makeStackGroupSeriesModel(e,t){const{stack:i}=t,s=e.stackData,n=e.data,o=Object.keys(s);let a=[],r=[];return o.forEach((e,l)=>{const d=n.filter(({stackGroup:t})=>t===e),{series:h,connector:c}=this.makeStackSeriesModel(s[e],t,d,o.length,l);a=[...a,...h],i.connector&&(r=[...r,...c])}),{series:a,connector:r}}makeConnectorSeriesModel(e,t,i=1,s=0){const{diverging:n,stack:{connector:o}}=t;if(!o)return[];const a=this.getStackColumnWidth(t,i),r=n&&Ha(s),l=[];return e.forEach(({values:e,total:n},o)=>{const d=this.getSeriesPosition(t,a,o,s,i),h=[],c=this.getStackValueRatio(n,t);e.forEach((i,s)=>{const{barLength:n,dataPosition:o}=this.getStackRectInfo(e,s,c,t,r),{x:l,y:u}=this.getAdjustedRect(d,o,n,a),p=!r&&this.isBar?l+n:l,m=r&&!this.isBar?u+n:u;h.push({x:p,y:m})}),l.push(h)}),this.makeConnectorModel(l,o,a)}getTooltipData(e,t){const i=e.data,{stackData:s}=e,n=i.map(({color:e})=>e);return Un(s)?this.makeGroupStackTooltipData(i,s,t):this.makeStackTooltipData(i,s,n,t)}makeGroupStackTooltipData(e,t,i){return Object.keys(t).flatMap(s=>{const n=e.filter(({stackGroup:e})=>e===s),o=n.map(({color:e})=>e);return this.makeStackTooltipData(n,t[s],o,i)})}makeStackTooltipData(e,t,i,s){const n=[];return t.forEach(({values:t},o)=>{t.forEach((t,a)=>{n.push({label:e[a].name,color:i[a],value:t,category:s.length?s[o]:""})})}),n}makeConnectorModel(e,t,i){if(!t||!e.length)return[];const{color:s,lineWidth:n,dashSegments:o}=this.theme.connector,a=[],r=e.length,l=e[0].length;for(let t=0;t<l;t+=1){const l=[];for(let i=0;i<r;i+=1)l.push(e[i][t]);l.forEach((e,t)=>{const{x:r,y:d}=e;if(t<l.length-1){const{x:e,y:h}=l[t+1];a.push({type:"line",x:this.isBar?r:r+i,y:this.isBar?d+i:d,x2:e,y2:h,dashSegments:o,strokeStyle:s,lineWidth:n})}})}return a}getStackValueRatio(e,t){const{stack:{type:i},scaleType:s,min:n,max:o,offsetSize:a}=t;return"percent"===i?a/function(e,t){const{positive:i,negative:s}=e;let n=i+Math.abs(s);return T(["dualPercentStack","divergingPercentStack"],t)&&(n*=2),n}(e,s):this.getValueRatio(n,o,a)}getStackBarLength(e,t,i,s){const n=function(e,t,i){const{stack:s,min:n,max:o}=i;return _n(s)?e[t]:Ia(e,t,n,o)}(e,t,s);return S(n)?this.getBarLength(n,i):null}getStackColumnWidth(e,t){const{tickDistance:i,diverging:s,defaultPadding:n}=e,o=s?1:t,a=this.theme.barWidth;return a?X(i,a):(i-2*n)/o}getSeriesPosition(e,t,i,s,n){const{tickDistance:o,diverging:a}=e;return i*o+(o-t*(a?1:n))/2+t*(a?0:s)}getStackStartPosition(e,t,i,s,n){const{stack:o,diverging:a,seriesDirection:r}=s;let l;return l=a?n?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPosOnRightTopSide(e,t,s,i):_n(o)?this.calcStartPositionWithPercent(e,t,i):r===Ya.POSITIVE?this.calcStartPosOnRightTopSide(e,t,s,i):r===Ya.NEGATIVE?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPositionWithStack(e,t,s,i),l}calcStartPosOnLeftBottomSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.leftBasePosition:this.basePosition,l=za(e,t,!1),d=za(e,t,!0),h=d<n,c=this.isBar?d:l,u=o<0?Math.min(c-o,0):c;let p;return p=this.isBar?h?0:r-Math.abs(u)*s:r+Math.abs(u)*s,p}calcStartPosOnRightTopSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.rightBasePosition:this.basePosition,l=za(e,t,!1),d=za(e,t,!0),h=d>o,c=this.isBar?l:d,u=(n>0?Math.max(c-n,0):c)*s;let p;return p=this.isBar?r+u:h?0:r-u,p}calcStartPositionWithStack(e,t,i,s){return e[t]<0?this.calcStartPosOnLeftBottomSide(e,t,i,s):this.calcStartPosOnRightTopSide(e,t,i,s)}calcStartPositionWithPercent(e,t,i){const s=this.basePosition,n=za(e,t,this.isBar?e[t]<0:e[t]>0);return this.isBar?n*i+s:s-n*i}getStackRectInfo(e,t,i,s,n){return{barLength:this.getStackBarLength(e,t,i,s),dataPosition:this.getStackStartPosition(e,t,i,s,n)}}getDataLabels(e,t){return e.map(e=>this.makeDataLabel(e,t.centerYAxis))}getTotalDataLabels(e,t){const{stackData:i,stack:s}=e;return _n(s)?[]:Un(i)?this.makeGroupTotalDataLabels(e,t):this.makeTotalDataLabels(i,t)}makeGroupTotalDataLabels(e,t){let i=[];const s=e.stackData,n=Object.keys(s);return n.forEach((e,o)=>{const a=this.makeTotalDataLabels(s[e],t,n.length,o);i=[...i,...a]}),i}makeTotalDataLabels(e,t,i=1,s=0){const n=[],{min:o,max:a,seriesDirection:r,diverging:l,centerYAxis:d}=t,h=this.getStackColumnWidth(t,i);return e.forEach((e,c)=>{const{total:u}=e,p=this.getSeriesPosition(t,h,c,s,i),m=this.getStackValueRatio(u,t);(function(e){let t=["positive","negative"];return e===Ya.POSITIVE?t=["positive"]:e===Ya.NEGATIVE&&(t=["negative"]),t})(r).forEach(e=>{const i=u[e];if(!i)return;const r=this.makeBarLength(i,{min:o,max:a,ratio:m}),c=this.getStartPosition(r,i,t,l&&Ha(s)),g=Object.assign({type:"stackTotal",value:i,name:`totalLabel-${e}`,theme:this.theme.dataLabels.stackTotal},this.getAdjustedRect(p,c,r,h));n.push(this.makeTotalDataLabel(g,d))})}),n}makeTotalDataLabel(e,t){return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()}})}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...t,...this.getGroupedRect(e,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}}class Ga extends Wt{constructor(){super(...arguments),this.models=[]}initialize(){this.type="zeroAxis",this.name="zeroAxis"}render({layout:e,axes:t,series:i,options:s}){this.rect=e.plot;const n=Xt(i,s),o=n?"xAxis":"yAxis",{zeroPosition:a}=t[o];S(a)&&(this.models=this.renderZeroModel(a,n))}renderZeroModel(e,t){const i=Tt(0),s=Tt(e);let n;return n=t?{type:"line",x:s,y:i,x2:s,y2:Tt(this.rect.height),strokeStyle:"rgba(0, 0, 0, 0.5)"}:{type:"line",x:i,y:s,x2:Tt(this.rect.width),y2:s,strokeStyle:"rgba(0, 0, 0, 0.5)"},[n]}}class Xa extends Wt{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]}}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=e===zt.Y}render({layout:e,axes:t,theme:i}){const{centerYAxis:s}=t;if(!s)return;this.theme=ti(i,this.name),this.rect=e[this.name],"yAxis"===this.name&&(this.rect=Object.assign(Object.assign({},this.rect),{x:s.x}));const{viewLabels:n,tickCount:o,tickInterval:a,needRotateLabel:r,radian:l,offsetY:d}=t[this.name],h={tickInterval:a,centerYAxis:s,needRotateLabel:r,radian:l,offsetY:d,relativePositions:Ct(this.axisSize(s),o)},c=this.yAxisComponent?"y":"x",u=this.yAxisComponent?"x":"y";this.models.label=this.renderLabelModels(n,c,u,h),this.models.tick=this.renderTickModels(c,u,h),this.models.axisLine=this.renderAxisLineModel(s),this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach(e=>{this.drawModels[e]=this.models[e].map(e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t})}))}renderAxisLineModel({xAxisHalfSize:e,secondStartX:t}){const i=Tt(0),s=Tt(this.rect.width);let n;if(this.yAxisComponent){const e=Tt(this.rect.height);n=[{type:"line",x:s,y:i,x2:s,y2:e},{type:"line",x:i,y:i,x2:i,y2:e}]}else n=[{type:"line",x:i,y:i,x2:Tt(e),y2:i},{type:"line",x:Tt(t),y:i,x2:s,y2:i}];return n}renderTickModels(e,t,i){const s=this.yAxisComponent?Tt(this.rect.width):Tt(0),{tickInterval:n,centerYAxis:{secondStartX:o},relativePositions:a}=i;return a.reduce((i,a,r)=>{if(r%n)return i;const l={type:"tick",isYAxis:this.yAxisComponent,tickSize:this.yAxisComponent?-5:5,[e]:Tt(a),[t]:s},d=Object.assign({},l);return this.yAxisComponent?(d[t]=Tt(0),d.tickSize=5):d[e]=Tt(a+o),[...i,l,d]},[])}renderLabelModels(e,t,i,s){const{centerYAxis:{secondStartX:n,yAxisLabelAnchorPoint:o},offsetY:a,needRotateLabel:r,radian:l}=s,d=this.theme.label,h=Te(d);let c,u,p;this.yAxisComponent?(c=Tt(o),u="center",p=e):(c=a,p=[...e].reverse(),u=r?"left":"center");const m=["default",{textAlign:u,font:h,fillStyle:d.color}];return p.reduce((s,{text:o,offsetPos:a},r)=>{const d={type:"label",text:o,style:m,[t]:Tt(a)+(this.yAxisComponent?0:n),[i]:c,radian:l},h=[d];if(!this.yAxisComponent){const i=Object.assign(Object.assign({},d),{text:e[r].text,[t]:Tt(d[t]-n)});h.push(i)}return[...s,...h]},[])}axisSize(e){let t;return t=this.yAxisComponent?this.rect.height:e.xAxisHalfSize,t}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.5)",e.ctx.lineWidth=1}}class Va extends Bn{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{bar:i.series},categories:i.categories,modules:[io,En,oo,Ci,ho]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){var e;super.initialize();const t=!!(null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.stack);this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add($a,{name:"bar",stackChart:t}),this.componentManager.add(Fa,{name:"bar",stackChart:t}),this.componentManager.add(Ga),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(Xa,{name:"yAxis"}),this.componentManager.add(Xa,{name:"xAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{bar:i},categories:t})}}class _a extends Bn{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{column:i.series},categories:i.categories,modules:[io,En,oo,Ci,ho]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){var e;super.initialize();const t=!!(null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.stack);this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Fa,{name:"column",stackChart:t}),this.componentManager.add($a,{name:"column",stackChart:t}),this.componentManager.add(Ga),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{column:i},categories:t})}}function Ua(e,t){return e.find(({component:e})=>e.name===t&&"point"===e.eventDetectType)}class qa extends Bn{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:i,categories:s,modules:[io,En,oo,Ci,ho]}),this.addData=(e,t,i)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})},this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Fa,{name:"column"}),this.componentManager.add($a,{name:"column"}),this.componentManager.add(Xo),this.componentManager.add(Ga),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"secondaryYAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(qo,{name:"secondaryYAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,a,c])}handleEventForAllResponders(e,t,i,s){if(f(Ua(n=t,"column"))&&f(Ua(n,"line"))){t.find(({component:e})=>"column"===e.name).component[i]({mousePosition:s,responders:[]},e)}var n}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}}function Ka(e){return e.reduce((e,t)=>{const i=t.data.filter(e=>!x(e));return Math.max(e,...i.map(({r:e})=>e))},0)}class Za extends Wt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.maxRadius=-1,this.maxValue=-1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.bubble.data[e],n=this.responders.filter(({name:e})=>e===s)[t];if(!n)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:[n],name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!S(t)||!S(i))return;const{name:n}=s.series.bubble.data[i],o=[this.responders.filter(({name:e})=>e===n)[t]];o.length&&(this.eventBus.emit("renderHoveredSeries",{models:o,name:this.name}),this.activatedResponders=o,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="bubble",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach((t,i)=>{t.radius=this.models.series[i].radius*e})}render(e){const{layout:t,series:i,scale:s,axes:n,circleLegend:o,legend:a,options:r,theme:l}=e,{plot:d}=t;if(!i.bubble)throw new Error(J(this.name));const{xAxis:h,yAxis:c}=n,u=i.bubble.data;this.theme=l.series.bubble,this.rect=d,this.activeSeriesMap=ln(a),this.selectable=this.getSelectableOption(r);const p=this.rect.width/h.tickCount,m=this.rect.height/c.tickCount;this.maxRadius=o.radius?o.radius:Math.min(p,m),this.maxValue=Ka(u);const g=this.renderBubblePointsModel(u,s),v=this.makeTooltipModel(u);this.models.series=g,this.drawModels||(this.drawModels=E(this.models)),this.responders=g.map((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:e.radius+1,color:Fe(e.color,.85),data:v[t],index:t}))}renderBubblePointsModel(e,t){const i=t.xAxis.limit,s=t.yAxis.limit,{borderWidth:n,borderColor:o}=this.theme;return e.flatMap(({data:e,name:t,color:a},r)=>{const l=[],d=Fe(a,this.activeSeriesMap[t]?.8:.1);return e.filter(e=>!x(e)).forEach(e=>{const a=bi(e),h=w(a)?Number(new Date(a)):Number(a),c=fi(e),u=Rt(h,i),p=Rt(c,s),m=u*this.rect.width,g=(1-p)*this.rect.height,v=Math.max(.5,e.r/this.maxValue*this.maxRadius);l.push({x:m,y:g,type:"circle",radius:v,color:d,style:["default"],seriesIndex:r,name:t,borderWidth:n,borderColor:o})}),l})}makeTooltipModel(e){return[...e].flatMap(({data:e,name:t,color:i})=>{const s=[];return e.filter(e=>!x(e)).forEach(e=>{const{r:n,label:o}=e;s.push({label:`${t}/${o}`,color:i,value:{x:bi(e),y:fi(e),r:n}})}),s})}getResponderAppliedTheme(e,t){return e.map(e=>P(e,this.theme[t]))}onMousemove({responders:e,mousePosition:t}){const i=Co(e,t,this.rect),s=this.getResponderAppliedTheme(i,"hover");this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Co(e,t,this.rect),s=this.getResponderAppliedTheme(i,"select");this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class Ja extends Wt{constructor(){super(...arguments),this.models={circleLegend:[]}}initialize(){this.type="circleLegend"}render({layout:e,series:t,circleLegend:i}){if(!t.bubble)throw new Error(Z);if(this.isShow=i.visible,!this.isShow)return;const s=t.bubble.data;this.rect=e.circleLegend,this.renderCircleLegend(s,i)}renderCircleLegend(e,t){const i=Ka(e),{radius:s}=t;this.models.circleLegend=[{type:"circleLegend",radius:s,value:i,x:s,y:this.rect.height-s}]}}function Qa(e,t){const{x:i,y:s,radius:n,value:o}=t;[1,.5,.25].forEach((t,a)=>{const r=t*n,l=s+(a?(1-t)*n:0);ct(e,{type:"circle",x:i,y:l,radius:r,color:"#fff",seriesIndex:0,style:["default",{strokeStyle:"#888",lineWidth:1}]}),qe(e,{type:"label",x:i,y:l-r,text:String(o*t),style:["default",{textAlign:"center",textBaseline:"bottom"}]})})}class er extends Bn{constructor(e){super({el:e.el,options:e.options,series:{bubble:e.data.series},modules:[En,oo,Ci,ho]}),this.addData=e=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Za),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(Ja),this.componentManager.add(na),this.painter.addGroups([n,o,g,h,s,u])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bubble:e.series}})}}class tr extends Bn{constructor(e){var t,i;super({el:e.el,options:e.options,series:{scatter:(i=e.data.series,i.map(e=>{const t={};return Object.assign(Object.assign({},e),{data:e.data.filter(e=>!x(e)).reduce((e,i)=>{const s=`${bi(i)}-${fi(i)}`;return t[s]?e:(t[s]=!0,[...e,i])},[])})}))},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[En,oo,Ci,ho]}),this.addData=e=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Pa),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,d])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{scatter:i},categories:t})}}function ir(e,t,i){return{width:e?t:i,height:e?i:t}}function sr(e,t,i){return e*t+(t-i)/2}class nr extends Wt{constructor(){super(...arguments),this.models={range:[],bullet:[],marker:[]},this.activatedResponders=[],this.eventDetectType="point",this.vertical=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,state:t})=>{var i;if(!S(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter(({name:e})=>e===s);if(!n)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(n,"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,state:t})=>{var i;if(!S(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter(({name:e})=>e===s);n.length&&this.onMousemove({responders:n})}}initialize(){this.type="series",this.name="bullet",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d,categories:h}=e;if(!o.bullet)throw new Error(J(this.name));this.setEventDetectType(o,l),this.theme=d.series.bullet,this.rect=s.plot,this.activeSeriesMap=ln(r),this.selectable=this.getSelectableOption(l),this.vertical=!!(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.vertical);const c=Xt(o,l),{labelAxisName:u,valueAxisName:p}=Ut(c,o),{valueSizeKey:m}=qt(c),{tickDistance:g}=n[u],{zeroPosition:v}=n[p],{min:f,max:b}=a[p].limit,x=o.bullet.data,y=Object.assign({ratio:this.rect[m]/(b-f),tickDistance:g,zeroPosition:v},this.getBulletBarWidths(g)),S=this.renderRanges(x,y),w=this.renderBullet(x,y),O=this.renderMarkers(x,y);this.models.range=S,this.models.bullet=w,this.models.marker=O,this.drawModels||(this.drawModels={range:S.map(e=>Object.assign({},e)),bullet:w.map(e=>Object.assign(Object.assign({},e),{height:this.vertical?0:e.height,width:this.vertical?e.width:0,y:this.vertical?e.y+e.height:e.y})),marker:O.map(e=>Object.assign({},e))});const M={range:S,bullet:w,marker:O},A=this.makeTooltipModel(M);this.tooltipRectMap=this.makeTooltipRectMap(M,A),this.responders=this.getBulletSeriesResponders(M,A,n,h),No(l,this.name).visible&&this.renderDataLabels(this.getDataLabels([...S,...w,...O],this.vertical,this.rect[m]))}getDataLabels(e,t,i){const{dataLabels:s}=this.theme,n=j(s,"marker"),{useSeriesColor:o,color:a}=n,{marker:r}=s;return e.filter(e=>"line"===e.type||"range"!==e.modelType).map(e=>"line"===e.type?Object.assign(Object.assign({},e),{x:t?(e.x+e.x2)/2:e.x,theme:Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.strokeStyle:r.color})}):Object.assign(Object.assign({},e),{direction:t?"top":"right",plot:{x:0,y:0,size:i},theme:Object.assign(Object.assign({},n),{color:o?e.color:a})}))}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getBulletSeriesResponders(e,t,i,s){return"grouped"===this.eventDetectType?To(this.rect,this.vertical?i.xAxis:i.yAxis,s,this.vertical):function(e,t){const{range:i,marker:s,bullet:n}=e,{range:o,marker:a,bullet:r}=t;return[...i.map((e,t)=>Object.assign(Object.assign({},e),{data:o[t]})),...n.map((e,t)=>Object.assign(Object.assign({},e),{data:r[t]})),...s.map((e,t)=>Object.assign(Object.assign({},e),{detectionSize:5,data:a[t]}))]}(e,t)}makeTooltipRectMap(e,t){const i={};return Object.keys(e).forEach(s=>{e[s].forEach((e,n)=>{const o=e.name;i[o]||(i[o]=[]);const a=Object.assign(Object.assign({},e),{data:t[s][n]});i[o].push(a)})}),i}getBulletSeriesModelsFromRectResponders(e){var t;return e.length?null!=(t=this.tooltipRectMap[e[0].label])?t:[]:[]}getGroupedRect(e,t){const i=this.getBulletSeriesModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:Fe(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getBulletSeriesModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...this.getGroupedRect(e,"hover"),...this.getRespondersWithTheme(t,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e.length?[e[e.length-1]]:[]),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){const t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRespondersWithTheme(this.getBulletSeriesModelsFromRectResponders(e),"select")]:this.getRespondersWithTheme(e,"select");this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}filterBulletResponder(e){return e.filter(e=>{var t;return"bullet"===(null===(t=e)||void 0===t?void 0:t.modelType)})}renderRanges(e,{tickDistance:t,ratio:i,zeroPosition:s,rangeWidth:n}){const o=[];return e.forEach(({ranges:e,color:a,name:r},l)=>{(null!=e?e:[]).forEach((e,d)=>{if(!x(e)){const[h,c]=e,u=(c-h)*i,p=sr(l,t,n);o.push(Object.assign(Object.assign({type:"rect",name:r,color:this.getRangeColor(Fe(a,this.getSeriesOpacity(r)),d,r),x:this.vertical?p:h*i+s,y:this.vertical?s-c*i:p},ir(this.vertical,n,u)),{modelType:"range",seriesColor:a,tooltipColor:this.getRangeColor(a,d,r,!0),value:e}))}})}),o}renderBullet(e,{tickDistance:t,ratio:i,zeroPosition:s,bulletWidth:n}){const{borderColor:o,borderWidth:a}=this.theme;return e.reduce((e,{data:r,color:l,name:d},h)=>{if(x(r))return[...e];const c=Math.max(r*i,2),u=sr(h,t,n),p=Object.assign({type:"rect",name:d,color:Fe(l,this.getSeriesOpacity(d)),x:this.vertical?u:s,y:this.vertical?s-c:u,thickness:a,borderColor:o,modelType:"bullet",seriesColor:l,tooltipColor:l,value:r},ir(this.vertical,n,c));return[...e,p]},[])}renderMarkers(e,{tickDistance:t,ratio:i,zeroPosition:s,markerWidth:n}){const{markerLineWidth:o}=this.theme,a=[];return e.forEach(({markers:e,color:r,name:l},d)=>{const h=sr(d,t,n);(null!=e?e:[]).forEach(e=>{if(!x(e)){const t=e*i,d=this.vertical?h:t+s,c=this.vertical?s-t:h;a.push({type:"line",name:l,x:d,y:c,x2:this.vertical?d+n:d,y2:this.vertical?c:c+n,strokeStyle:Fe(r,this.getSeriesOpacity(l)),lineWidth:o,seriesColor:r,tooltipColor:r,value:e})}})}),a}makeTooltipModel(e){const{range:t,bullet:i,marker:s}=e;return{range:this.makeTooltipData(t,"Range"),bullet:this.makeTooltipData(i,"Actual"),marker:this.makeTooltipData(s,"Marker")}}makeTooltipData(e,t){return e.map(e=>{const{name:i,seriesColor:s,tooltipColor:n,value:o}=e;return{label:i,color:Fe(s,1),value:[{title:t,value:o,color:n}],templateType:"bullet"}})}getBulletBarWidths(e){const{barWidth:t,barWidthRatios:i}=this.theme,{rangeRatio:s,bulletRatio:n,markerRatio:o}=i,a=t?X(e,t):.6*e;return{rangeWidth:a*s,bulletWidth:a*n,markerWidth:a*o}}getRangeColor(e,t,i,s=!1){const{rangeColors:n}=this.theme,o=Array.isArray(n)&&n[t];return Fe(o?n[t]:e,(o?Ge(n[t]):Ks[t])*this.getSeriesOpacity(i,s))}getSeriesOpacity(e,t=!1){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some(e=>!e),a=t?s:i.restSeries.areaOpacity,r=n?i.areaOpacity:a;return o?r:s}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n}=this.theme[t];return this.filterBulletResponder(e).map(e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.tooltipColor,thickness:n,borderColor:s,style:[Object.assign({},D(this.theme[t],"shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY"))]}))}}class or extends Bn{constructor({el:e,options:t,data:{series:i}}){super({el:e,options:t,series:{bullet:i},modules:[En,oo,Ci,ho]}),this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(nr),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,h,s,u,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bullet:e.series}})}}var ar={name:"seriesData",state:()=>({nestedPieSeries:{}}),action:{setNestedPieSeriesData({state:e,initStoreState:t}){const{theme:i,disabledSeries:s}=e,n=t.series,o={},a={};n.pie.forEach(({name:e,data:t},r)=>{const{colors:l}=i.series.pie[e],d=[],h=t.map((e,t)=>{var i;const{parentName:s,name:o}=e,h=s&&r?a[s]:null===(i=l)||void 0===i?void 0:i[t];d.push(h),a[o]=h;const c=s&&r?function e(t,i,s){var n,o;const a=null===(n=t.pie)||void 0===n?void 0:n[i].data.find(({name:e})=>e===s);return(null===(o=a)||void 0===o?void 0:o.parentName)?e(t,i-1,a.parentName):s}(n,r-1,s):o;return Object.assign(Object.assign({},e),{data:e.data,rootParentName:c,color:h})});o[e]={data:h.filter(({rootParentName:e})=>!s.includes(e)),colors:d}}),e.nestedPieSeries=o,this.dispatch("updateNestedPieChartLegend")}},observe:{updateNestedPieSeriesData(){this.dispatch("setNestedPieSeriesData")}}};class rr extends Bn{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{pie:i},categories:s,modules:[ar]}),this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign({},e))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){var e;super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Vo),(e=this.store.initStoreState.series.pie,null!=e?e:[]).forEach(({name:e})=>{this.componentManager.add(ua,{alias:e})}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,h,s,u,m,a])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t)),this.componentManager.add(ua,{alias:e.name})}setData(e){var t;this.componentManager.remove(ua),this.resetSeries(),this.store.dispatch("setData",{series:{pie:e.series}}),(t=this.store.initStoreState.series.pie,null!=t?t:[]).forEach(({name:e})=>{this.componentManager.add(ua,{alias:e})})}}var lr;function dr(e=!0,t=!1){let i="center";return t&&(i=e?"right":"left"),i}function hr({options:e,labels:t,pointOnColumn:i,intervalData:s,isLabelOnVerticalAxis:n,verticalAxisLabelMargin:o,verticalAxisLabelFont:a,defaultAxisData:r}){var l;const{axisSize:d,clockwise:h}=r,{radiusRanges:c,innerRadius:u,outerRadius:p}=n?function(e,t,i){var s,n,o,a,r,l;const d=X(e,null!=(o=null===(n=null===(s=i)||void 0===s?void 0:s.radiusRange)||void 0===n?void 0:n.inner)?o:0),h=X(e,null!=(l=null===(r=null===(a=i)||void 0===a?void 0:a.radiusRange)||void 0===r?void 0:r.outer)?l:e);return{radiusRanges:Ct(h-d,t,d).splice(0===d?1:0,t).reverse(),innerRadius:d,outerRadius:h}}(d,t.length+1,null===(l=e)||void 0===l?void 0:l.series):{radiusRanges:Ct(d,t.length),innerRadius:0,outerRadius:d},{labelInterval:m}=s;return Object.assign(Object.assign(Object.assign({labels:t,tickDistance:(p-u)/t.length},D(r,"axisSize","centerX","centerY","startAngle","endAngle")),{pointOnColumn:i,radiusRanges:c,innerRadius:u,outerRadius:p,labelInterval:m,labelMargin:o,labelAlign:dr(h,n)}),hi(t,o,a))}function cr({labels:e,intervalData:t,circularAxisLabelMargin:i,circularAxisLabelFont:s,defaultAxisData:n,outerRadius:o}){const{maxLabelWidth:a,maxLabelHeight:r}=hi(e,i,s),{totalAngle:l}=n,{tickInterval:d,labelInterval:h}=t;return Object.assign(Object.assign({labels:e},n),{degree:l/(e.length+(l<360?-1:0)),tickInterval:d,labelInterval:h,labelMargin:i,maxLabelWidth:a,maxLabelHeight:r,outerRadius:o})}function ur(e,t,i){var s,n,o;const a=null!=(o=null===(n=null===(s=e[i])||void 0===s?void 0:s.label)||void 0===n?void 0:n.formatter)?o:e=>e;return t.map((e,s)=>a(e,{index:s,labels:t,axisName:i}))}!function(e){e.CIRCULAR="circularAxis",e.VERTICAL="verticalAxis"}(lr||(lr={}));var pr={name:"axes",state:()=>({radialAxes:{}}),action:{setRadialAxesData({state:e}){const{series:t,layout:i,scale:s}=e,{plot:n}=i,o=!!t.radialBar,a=e.options,r=e.theme,l=e.categories,d=Te(r.circularAxis.label),h=Te(r.verticalAxis.label),{verticalAxisLabelMargin:c,circularAxisLabelMargin:u}=function(e,t){var i,s,n,o,a,r,l,d;return{verticalAxisLabelMargin:(o=null===(n=null===(s=null===(i=t)||void 0===i?void 0:i.verticalAxis)||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin,null!=o?o:e?5:0),circularAxisLabelMargin:(d=null===(l=null===(r=null===(a=t)||void 0===a?void 0:a.circularAxis)||void 0===r?void 0:r.label)||void 0===l?void 0:l.margin,null!=d?d:25)}}(o,a),{radialAxisLabels:p,yAxisLabels:m}=function(e,t,i,s){const n=e?lr.CIRCULAR:lr.VERTICAL,{limit:o,stepSize:a}=s[n],r=ur(t,kt(o,a),n),l=ur(t,i,e?lr.VERTICAL:lr.CIRCULAR);return{radialAxisLabels:e?r:l,yAxisLabels:e?l:r}}(o,a,l,s),{maxLabelWidth:g,maxLabelHeight:v}=hi(p,u,d),f=function(e,t,i=0,s=0,n=!1){var o;let a=!1,r=t.height/2,l=360,d=0,h=!0,c=0,u=360;if(n){const{startAngle:i,endAngle:s,clockwise:n}=function(e){var t,i,s,n,o,a,r,l;const d=null==(i=null===(t=e)||void 0===t?void 0:t.clockwise)||i;return{clockwise:d,startAngle:(o=null===(n=null===(s=e)||void 0===s?void 0:s.angleRange)||void 0===n?void 0:n.start,null!=o?o:d?0:360),endAngle:(l=null===(r=null===(a=e)||void 0===a?void 0:a.angleRange)||void 0===r?void 0:r.end,null!=l?l:d?360:0)}}(null===(o=e)||void 0===o?void 0:o.series);a=ms(n,i,s),r=a?gs(t.height,n):t.height/2,l=ps(n,i,s),d=i,h=n,c=i,u=s}return{axisSize:nt(t,a,i,s),centerX:t.width/2,centerY:r,totalAngle:l,drawingStartAngle:d,clockwise:h,startAngle:c,endAngle:u}}(a,n,g,v+u,o),b=hr({options:a,labels:m,pointOnColumn:o,isLabelOnVerticalAxis:o,intervalData:ui(o,{axis:a.verticalAxis,categories:l,layout:i}),verticalAxisLabelMargin:c,verticalAxisLabelFont:h,defaultAxisData:f});e.radialAxes={circularAxis:cr({labels:p,intervalData:ui(!0,{axis:a.circularAxis,categories:l,layout:i}),defaultAxisData:f,circularAxisLabelMargin:u,circularAxisLabelFont:d,outerRadius:b.outerRadius}),verticalAxis:b}}},observe:{updateRadialAxes(){this.dispatch("setRadialAxesData")}}};const mr=.2,gr=1;class vr extends Wt{constructor(){super(...arguments),this.models={area:[],line:[],dot:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.radar.data[t],n=this.responders.filter(({name:e})=>e===s)[e];if(!n)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([n],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.radar.data[t],n=[this.responders.filter(({name:e})=>e===s)[e]];n.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(n,"hover"),name:this.name}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="radar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n,o,a,r,l;const{layout:d,radialAxes:h,series:c,legend:u,options:p,theme:m,scale:g}=e;if(!c.radar)throw new Error(J(this.name));this.theme=m.series.radar,this.rect=d.plot,this.activeSeriesMap=ln(u),this.selectable=this.getSelectableOption(p);const v=e.categories,{axisSize:f,centerX:b,centerY:x}=h.verticalAxis,{limit:y,stepSize:S}=g.verticalAxis,w=kt(y,S),{min:O,max:M}=Kt(w),A={categories:v,degree:360/v.length,centerX:b,centerY:x,showArea:(s=null===(i=null===(t=p)||void 0===t?void 0:t.series)||void 0===i?void 0:i.showArea,null!=s&&s),ratio:f/(M-O)},k=null===(n=c.radar)||void 0===n?void 0:n.data,C=this.makeRadarPointsData(k,A),T=this.renderDotModels(C);this.models.area=(null===(a=null===(o=p)||void 0===o?void 0:o.series)||void 0===a?void 0:a.showArea)?this.renderAreaModels(C):[],this.models.line=this.renderLineModels(C),this.models.dot=(null===(l=null===(r=p)||void 0===r?void 0:r.series)||void 0===l?void 0:l.showDot)?T:[],this.drawModels||(this.drawModels={area:this.initDrawModels("area",b,x),line:this.initDrawModels("line",b,x),dot:this.models.dot.map(e=>Object.assign(Object.assign({},e),{x:b,y:x}))});const D=this.makeTooltipModel(T,v);this.responders=T.map((e,t)=>Object.assign(Object.assign({},e),{data:D[t],color:Fe(e.color,1)}))}initDrawModels(e,t,i){return this.models[e].map(e=>{var s;return Object.assign(Object.assign({},e),{distances:null===(s=e.distances)||void 0===s?void 0:s.map(()=>0),points:e.points.map(()=>({x:t,y:i}))})})}makeTooltipModel(e,t){return e.map(({name:e,color:i,value:s,index:n})=>({label:e,color:i,value:s,category:t[n]}))}getRespondersWithTheme(e,t){const{radius:i,borderWidth:s,borderColor:n,color:o}=this.theme[t].dot;return e.map(e=>{const t=null!=o?o:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,style:[{lineWidth:s,strokeStyle:null!=n?n:Fe(t,.5)}]})})}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeRadarPointsData(e,t){const{centerX:i,centerY:s,degree:n,ratio:o,showArea:a}=t;return e.map(({data:e,color:t,name:r})=>{const l=e.reduce((e,t,a)=>{if(x(t))return{distances:[...e.distances,0],linePoints:[...e.linePoints,null],areaPoints:[...e.areaPoints,{x:i,y:s}]};const r=t*o,l=it(i,s,r,et(n*a));return{distances:[...e.distances,r],linePoints:[...e.linePoints,l],areaPoints:[...e.areaPoints,l]}},{linePoints:[],distances:[],areaPoints:[]});return x(e[0])||x(e[e.length-1])||(l.linePoints.push(l.linePoints[0]),l.areaPoints.push(l.areaPoints[0])),Object.assign(Object.assign({name:r,seriesColor:t,data:e},l),this.getSeriesColor(a,t,r))})}renderAreaModels(e){return e.map(({distances:e,areaPoints:t,name:i,fillColor:s,seriesColor:n})=>({type:"areaPoints",name:i,distances:e,points:t,fillColor:s,color:Fe(n,0),lineWidth:0}))}renderLineModels(e){const{lineWidth:t,dashSegments:i}=this.theme;return e.map(({distances:e,linePoints:s,name:n,lineColor:o})=>({type:"linePoints",lineWidth:null!=t?t:Ns,name:n,distances:e,points:s,color:o,dashSegments:i}))}renderDotModels(e){const{radius:t,color:i}=this.theme.dot,s=[];return e.forEach(({linePoints:e,lineColor:n,name:o,data:a},r)=>e.slice(0,e.length-1).forEach((e,l)=>{var d;x(e)||s.push(Object.assign(Object.assign({type:"circle"},e),{radius:t,color:null!=i?i:n,style:[{strokeStyle:"rgba(0, 0, 0, 0)"}],name:o,seriesIndex:r,index:l,value:null===(d=a)||void 0===d?void 0:d[l]}))})),s}getSeriesColor(e,t,i){const s=this.activeSeriesMap[i],{select:n,areaOpacity:o}=this.theme,a=Object.values(this.activeSeriesMap).some(e=>!e),r=Fe(t,s?gr:mr);let l=0;if(e){const e=s?n.areaOpacity:n.restSeries.areaOpacity;l=a?e:o}return{lineColor:r,fillColor:Fe(r,l)}}}class fr extends Wt{constructor(){super(...arguments),this.models={plot:[],line:[]}}initialize(){this.type="plot",this.name="radialPlot"}render(e){var t,i,s;const{layout:n,radialAxes:o,options:a,series:r,theme:l}=e;this.rect=n.plot,this.circularAxisTheme=l.circularAxis;const d=!!r.radar,h=null!=(t=e.categories)?t:[],c=null!=(s=null===(i=a.plot)||void 0===i?void 0:i.type)?s:d?"spiderweb":"circle",u=this.makeRenderOptions(o,c,h);this.models={plot:this.renderPlot(u),line:r.radialBar?this.renderLine(u):[]}}makeRenderOptions(e,t,i=[]){const{centerX:s,centerY:n,radiusRanges:o,innerRadius:a,outerRadius:r}=e.verticalAxis,{degree:l,totalAngle:d,labels:h,tickInterval:c,drawingStartAngle:u,startAngle:p,endAngle:m,clockwise:g}=e.circularAxis,v=360!==d;return{type:t,categories:i,degree:l,centerX:s,centerY:n,initialRadius:a,radius:r,radiusRanges:o,lineCount:h.length,tickInterval:c,drawingStartAngle:u,usingArcPlot:v,startAngle:p,endAngle:m,clockwise:g}}renderPlot(e){const{type:t,usingArcPlot:i}=e;return i?this.makeArc(e):"spiderweb"===t?this.makeSpiderwebPlot(e):this.makeCirclePlot(e)}makeSpiderwebPlot(e){const{degree:t,centerX:i,centerY:s,categories:n,radiusRanges:o}=e,{strokeStyle:a,lineWidth:r}=this.circularAxisTheme;return o.map(e=>{const o=n.map((n,o)=>it(i,s,e,et(t*o)));return{type:"polygon",color:a,lineWidth:r,points:o}})}makeCirclePlot(e){const{centerX:t,centerY:i,radiusRanges:s}=e,{strokeStyle:n,lineWidth:o}=this.circularAxisTheme;return s.map(e=>({type:"circle",color:"rgba(0, 0, 0, 0)",style:[{strokeStyle:n,lineWidth:o}],radius:e,x:t,y:i}))}makeArc(e){const{centerX:t,centerY:i,radiusRanges:s,startAngle:n,endAngle:o,clockwise:a}=e,{strokeStyle:r,lineWidth:l}=this.circularAxisTheme;return s.map(e=>({type:"arc",borderWidth:l,borderColor:r,x:t,y:i,angle:{start:n,end:o},drawingStartAngle:-90,radius:e,clockwise:a}))}renderLine(e){const{centerX:t,centerY:i,initialRadius:s,radius:n,lineCount:o,degree:a,tickInterval:r,drawingStartAngle:l,clockwise:d}=e,{strokeStyle:h,lineWidth:c}=this.circularAxisTheme;return C(0,o).reduce((e,o,u)=>{const p=l+a*u*(d?1:-1),{x:m,y:g}=it(t,i,s,et(p)),{x:v,y:f}=it(t,i,n,et(p));return u%r==0?[...e,{type:"line",x:m,y:g,x2:v,y2:f,strokeStyle:h,lineWidth:c}]:e},[])}}class br extends Wt{constructor(){super(...arguments),this.models={dot:[],verticalAxisLabel:[],circularAxisLabel:[]}}initialize(){this.type="axis",this.name="radial"}render({layout:e,radialAxes:t,theme:i}){this.rect=e.plot,t&&(this.verticalAxisTheme=i.verticalAxis,this.circularAxisTheme=i.circularAxis,this.models.verticalAxisLabel=this.renderVerticalAxisLabel(t.verticalAxis),this.models.dot=this.renderDotModel(t.circularAxis),this.models.circularAxisLabel=this.renderCircularAxisLabel(t.circularAxis))}getBubbleShadowStyle(){const{visible:e,shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}=this.verticalAxisTheme.label.textBubble;return e&&t?[{shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}]:null}renderVerticalAxisLabel(e){const{radiusRanges:t,pointOnColumn:i,centerX:s,centerY:n,labels:o,tickDistance:a,labelInterval:r,maxLabelWidth:l,maxLabelHeight:d,labelMargin:h,labelAlign:c,outerRadius:u,startAngle:p}=e,m=i?a/2:0,g=Te(this.verticalAxisTheme.label),{visible:v,backgroundColor:f,borderRadius:b,borderColor:x,borderWidth:y,paddingX:S,paddingY:w}=this.verticalAxisTheme.label.textBubble,O=v?S:0,M=l+2*O-h,A=d+2*(v?w:0),k=this.verticalAxisTheme.label.color;return t.reduce((e,t,a)=>{const{x:l,y:d}=it(s,n,t-m,et(p)),v=function(e,t,i,s,n){return!(!t&&0===e)&&(!(e%i)&&(t&&s<=n||!t&&s<n))}(a,i,r,t,u);let S=l+h,w=l+h+O;return"center"===c?(S=l-h-M/2,w=l-h):T(["right","end"],c)&&(S=l-h-M,w=l-h-O),v?[...e,{type:"bubbleLabel",rotationPosition:{x:l,y:d},radian:et(p,0),bubble:{x:S,y:d-A/2,width:M,height:A,align:c,radius:b,fill:f,lineWidth:y,strokeStyle:x,style:this.getBubbleShadowStyle()},label:{text:o[a],x:w,y:d,style:[{font:g,fillStyle:k,textAlign:c,textBaseline:"middle"}]}}]:e},[])}renderDotModel(e){const{degree:t,centerX:i,centerY:s,labels:n,labelInterval:o,outerRadius:a,drawingStartAngle:r,clockwise:l}=e,{dotColor:d}=this.circularAxisTheme;return n.reduce((e,n,h)=>{const c=r+t*h*(l?1:-1),{x:u,y:p}=it(i,s,a,et(c));return h%o==0?[...e,{type:"rect",color:d,width:4,height:4,x:u-2,y:p-2}]:e},[])}renderCircularAxisLabel(e){const{centerX:t,centerY:i,labels:s,labelInterval:n,totalAngle:o,drawingStartAngle:a,labelMargin:r,clockwise:l,outerRadius:d}=e,h=d+r,c=this.circularAxisTheme.label,u=Te(c),p=e.degree*(l?1:-1);return s.reduce((e,s,r)=>{const l=a+p*r,d=ot({totalAngle:o,degree:{start:l,end:a+p*(r+1)},drawingStartAngle:0},"outer",!1);return r%n==0?[...e,Object.assign({type:"label",style:[{textAlign:d,font:u,fillStyle:c.color}],text:s},it(t,i,h,et(l)))]:e},[])}}class xr extends Bn{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radar:i.series},categories:i.categories,modules:[En,oo,pr]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.setOptions=e=>{this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Vo),this.componentManager.add(fr),this.componentManager.add(br),this.componentManager.add(vr),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,h,s,u,l,o,c])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radar:i},categories:t})}}function yr({height:e,width:t}){return e<t}function Sr(e,t){const{width:i,height:s}=t,n=function(e,t,i){return t*i/At(e)}(Et(e,"data"),i,s);return e.map(e=>({id:e.id,weight:e.data*n})).sort((e,t)=>t.weight-e.weight)}function wr(e,t,i,s){const n=e*e,o=s*s;return Math.max(o*i/n,n/(o*t))}function Or(e,t,i){if(!t){t=At(Et(i,"weight"))}return t/e}function Mr(e,t,i,s){t.reduce((e,t)=>{const n=t.weight/i;return s(n,e,t.id),e+n},e)}function Ar(e,t,i){e[t]=i}function kr(e,t,i,s,n){const o=Or(s,n,t);Mr(i.y,t,o,(t,s,n)=>{Ar(e,n,{x:i.x,y:s,width:o,height:t})}),i.x+=o,i.width-=o}function Cr(e,t,i,s,n){const o=Or(s,n,t);Mr(i.x,t,o,(t,s,n)=>{Ar(e,n,{x:s,y:i.y,width:t,height:o})}),i.y+=o,i.height-=o}function Tr(e,t){const i=e,s=Sr(t,i);let n,o,a=[];const r={};return s.forEach(e=>{const t=Et(a,"weight"),s=At(t);a.length&&function(e,t,i,s){const n=Math.min(...t),o=Math.max(...t),a=wr(e,n,o,i);return wr(e+s,Math.min(n,s),Math.max(o,s),i)>=a}(s,t,n,e.weight)&&(o(r,a,i,n,s),a=[]),a.length||(n=function(e){return yr(e)?e.height:e.width}(i),o=function(e){return yr(e)?kr:Cr}(i)),a.push(e)}),a.length&&o(r,a,i,n),r}class Dr extends Wt{constructor(){super(...arguments),this.models={series:[],layer:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({seriesIndex:e})=>{if(!S(e))return;const t=this.responders.find(({indexes:t})=>Y(t)===e);if(!t)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:[t],name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e})=>{if(!S(e))return;const t=this.responders.find(({indexes:t})=>Y(t)===e);t&&this.emitMouseEvent([t])}}initialize(){this.type="series",this.name="treemap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}getAllChildSeries(e,t){const i=[];return e.forEach(s=>{if(s.parentId===t&&(i.push(s),s.hasChild)){const t=this.getAllChildSeries(e,s.id);i.push(...t)}}),i}render(e){var t,i,s,n,o;const{layout:a,treemapSeries:r,colorValueScale:l,options:d,theme:h,treemapZoomId:c}=e;if(!r)throw new Error(J(this.name));const u=c.cur,p=this.getAllChildSeries(r,u);if(this.theme=h.series.treemap,this.rect=a.plot,this.selectable=this.getSelectableOption(d),this.models=this.renderTreemapSeries(p,d,l,u),this.zoomable=null!=(i=null===(t=d.series)||void 0===t?void 0:t.zoomable)&&i,No(d,this.name).visible){const e=null!=(o=null===(n=null===(s=d.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.useTreemapLeaf)&&o,t=this.makeDataLabel(e,u);this.renderDataLabels(t)}this.responders=this.makeTreemapSeriesResponder(u)}makeTreemapSeriesResponder(e){const t=this.makeTooltipData();let{series:i}=this.models;return this.zoomable&&(i=i.filter(({parentId:t})=>t===e)),i.map((e,i)=>Object.assign(Object.assign({},e),{data:t[i],thickness:Xs,style:["shadow"]}))}makeTooltipData(){return this.models.series.map(({label:e,data:t,color:i})=>({label:e,color:i,value:t}))}makeBoundMap(e,t,i,s={}){const n=e.filter(e=>e.parentId===t);return s=Object.assign(Object.assign({},s),Tr(Object.assign({},i),n)),n.forEach(t=>{s=this.makeBoundMap(e,t.id,s[t.id],s)}),s}makeDataLabel(e,t){const i=e?this.models.series.filter(({hasChild:e})=>!e):this.models.series.filter(({parentId:e})=>e===t),s=this.theme.dataLabels;return i.map(e=>Object.assign(Object.assign({},e),{type:"treemapSeriesName",value:e.label,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},s),{color:s.useSeriesColor?e.color:s.color})}))}getColor(e,t){const{indexes:i}=e;return t[I(i)]}getOpacity(e){const{indexes:t,depth:i}=e,s=Y(t);return 1===t.length?0:Number((.1*i+.05*s).toFixed(2))}renderTreemapSeries(e,t,i,s){var n,o,a;let r=[];const l=this.makeBoundMap(e,s,Object.assign(Object.assign({},this.rect),{x:0,y:0})),{colors:d,startColor:h,endColor:c,borderWidth:u,borderColor:p}=this.theme;let m,g;const v=null!=(o=null===(n=t.series)||void 0===n?void 0:n.useColorValue)&&o;v&&h&&c&&(m=$e(h),g=Oa(m,$e(c)));const f=Object.keys(l).map(t=>{const s=e.find(e=>e.id===t);let n;return v&&(n=Ma(i.limit,s.colorValue)),Object.assign(Object.assign(Object.assign({},s),l[t]),{type:"rect",colorRatio:n,color:v?Aa(n,g,m):this.getColor(s,d),opacity:v?0:this.getOpacity(s),thickness:u,borderColor:p})});return(null===(a=t.series)||void 0===a?void 0:a.useColorValue)||(r=f.map(e=>Object.assign(Object.assign({},e),{color:Fe("#000000",e.opacity)}))),{series:f,layer:r}}getRespondersWithTheme(e,t){return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]})))}onClick({responders:e}){if(e.length)if(this.zoomable){const{id:t,hasChild:i}=e[0];i?(this.emitMouseEvent([]),this.store.dispatch("setTreemapZoomId",t),this.eventBus.emit("resetSelectedSeries")):this.selectable&&this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name})}else if(this.selectable){const t=jo(e);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name})}}onMousemove({responders:e}){const t=jo(e);this.activatedResponders=t,this.emitMouseEvent(t)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}class jr extends Wt{initialize(){this.type="backButton",this.name="backButton"}onClick({responders:e}){e.length&&(this.store.dispatch("zoomBack"),this.eventBus.emit("resetSelectedSeries"))}render({options:e,layout:t},i){is(e)&&(this.rect=t.resetButton,this.isShow=i.isTreemapSeriesZooming,this.models=this.isShow?[{type:"backButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:24,height:24}]:[])}}class Rr extends Bn{constructor(e){super({el:e.el,options:e.options,series:{treemap:e.data.series},modules:[ya,Sa]}),this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(wa),this.componentManager.add(Dr),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(jr),this.componentManager.add(na),this.painter.addGroups([n,h,s,u,a,r,p])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addTreemapSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{treemap:e.series}})}}function Br(e,t){return null!=t?t:e}class Pr extends Wt{constructor(){super(...arguments),this.models={rect:[],line:[],circle:[]},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"select");this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"hover");this.eventBus.emit("renderHoveredSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}}initialize(){this.type="series",this.name="boxPlot",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d}=e;if(!o.boxPlot)throw new Error(J(this.name));(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=l.series.eventDetectType),this.theme=d.series.boxPlot,this.rect=s.plot,this.activeSeriesMap=ln(r),this.selectable=this.getSelectableOption(l);const h=e.categories,{tickDistance:c}=n.xAxis,{min:u,max:p}=a.yAxis.limit,m=o.boxPlot.data,g=m.length,v=Object.assign({ratio:this.rect.height/(p-u),tickDistance:c},this.getBarWidths(c,g)),f=this.makeBoxPlots(m,v),b=this.renderSeriesModels(f);this.models=b,this.drawModels||(this.drawModels={rect:b.rect.map(e=>Object.assign(Object.assign({},e),{y:e.y+e.height,height:0})),line:b.line,circle:b.circle});const x=this.makeTooltipModel(m,h);this.tooltipRectMap=this.makeTooltipRectMap(f,x),this.responders="grouped"===this.eventDetectType?this.makeGroupedResponderModel(f):this.makeDefaultResponderModel(f,x)}makeTooltipRectMap(e,t){const i={};return e.forEach((e,s)=>{if(!x(e)){const n=`${e.name}-${e.index}`;i[n]||(i[n]=[]),i[n].push(Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[s]}))}}),i}makeGroupedResponderModel(e){const t=[];return e.forEach(e=>{const{type:i,index:s,name:n}=e,o=`${n}-${s}`;if("boxPlot"===i&&!t[o]){const{boxPlotDetection:i}=e;t.push(Object.assign(Object.assign({type:"rect",name:o},i),{y:0,height:this.rect.height}))}}),t}makeDefaultResponderModel(e,t){return e.map((e,i)=>Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[i],color:Fe(e.color,1)}))}makeHoveredModel(e){const t="boxPlot"===e.type&&e.rect?{x:e.rect.x,y:e.rect.y}:{x:e.x,y:e.y},i=Object.assign({},e);return"boxPlot"===e.type&&(["lowerWhisker","upperWhisker","maximum","minimum","median"].forEach(t=>{e[t]&&(e[t].detectionSize=3)}),e.color=Fe(i.color,1)),Object.assign(Object.assign({},i),t)}getResponderModelFromMap(e){if(!e.length)return[];const t=e[0].name;return this.tooltipRectMap[t]}onMousemove({responders:e}){if("grouped"===this.eventDetectType){const t=this.getResponderModelFromMap(e);this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}else this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e;this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?this.getRespondersWithTheme(this.getResponderModelFromMap(e),"select"):this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}renderSeriesModels(e){return e.reduce((e,t)=>{const{type:i,name:s}=t;return"boxPlot"===i?(e.rect.push(Object.assign({name:s},t.rect)),["maximum","minimum","median","upperWhisker","lowerWhisker"].forEach(i=>{e.line.push(Object.assign({name:s},t[i]))})):e.circle.push(Object.assign({},t)),e},{rect:[],line:[],circle:[]})}makeBoxPlots(e,t){const{ratio:i,barWidth:s}=t,n=[],o=e.length,{dot:a}=this.theme;return e.forEach(({outliers:e,data:r,name:l,color:d},h)=>{const c=this.getSeriesColor(l,d);(null!=r?r:[]).forEach((e,i)=>{if(!x(e)){const a=this.getStartX(h,i,t,o),r=this.getRect(e,a,c,t);n.push(Object.assign(Object.assign({type:"boxPlot",color:c,name:l,rect:r,median:this.getMedian(e,a,c,t),minimum:this.getMinimum(e,a,c,t),maximum:this.getMaximum(e,a,c,t)},this.getWhisker(e,a,c,t,r)),{index:i,boxPlotDetection:{x:a,width:s}}))}});const{color:u,radius:p,borderColor:m,borderWidth:g,useSeriesColor:v}=a;(null!=e?e:[]).forEach(e=>{const[a,r]=e,d=this.getStartX(h,a,t,o);n.push({type:"circle",name:l,x:d+s/2,y:this.getYPos(r,i),radius:p,style:[{strokeStyle:null!=m?m:c,lineWidth:g}],color:v?c:u,index:a})})}),n}makeTooltipModel(e,t){const i=[];return e.forEach(({outliers:e,data:s,name:n,color:o})=>{(null!=s?s:[]).forEach((e,s)=>{if(!x(e)){const a=[...e].reverse();i.push({label:n,color:o,value:["Maximum","Upper Quartile","Median","Lower Quartile","Minimum"].reduce((e,t,i)=>{const s=a[i];return x(s)?e:[...e,{title:t,value:s}]},[]),category:t[s],templateType:"boxPlot"})}}),(null!=e?e:[]).forEach(e=>{if(!x(e)){const[s,a]=e;i.push({label:n,color:o,value:[{title:"Outlier",value:a}],category:t[s],templateType:"boxPlot"})}})}),i}getStartX(e,t,i,s){const{tickDistance:n,barWidth:o}=i;return t*n+(e+1)*function(e,t,i){return(e-t*i)/(i+1)}(n,o,s)+o*e}getYPos(e,t,i){return S(i)?Tt(this.rect.height-e*t,i):this.rect.height-e*t}getBarWidths(e,t){const{barWidth:i,barWidthRatios:s}=this.theme,{barRatio:n,minMaxBarRatio:o}=s,a=Math.max((e-Be(e)*(t-1+2))/t,5),r=i?X(e/t,i):a;return{barWidth:r*n,minMaxBarWidth:r*o}}getRespondersWithTheme(e,t){const{color:i,rect:s,dot:n,line:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}=this.theme[t],{whisker:h,median:c,maximum:u,minimum:p}=o,{color:m,radius:g,borderColor:v,borderWidth:f,useSeriesColor:b}=n;return e.map(e=>{const{type:t,data:n}=e;let o,x=e.color;if("circle"===t)x=n.color,o=Object.assign(Object.assign({},e),{radius:g,color:b?x:m,style:[{strokeStyle:Br(x,v),lineWidth:f}]});else{const{rect:t,upperWhisker:n,lowerWhisker:m,median:g,maximum:v,minimum:f}=e;o=Object.assign(Object.assign({},e),{rect:Object.assign(Object.assign({},t),{color:null!=i?i:Fe(x,1),thickness:s.borderWidth,borderColor:s.borderColor,style:[{shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}]}),upperWhisker:Object.assign(Object.assign({},n),{strokeStyle:Br(x,h.color),lineWidth:h.lineWidth}),lowerWhisker:Object.assign(Object.assign({},m),{strokeStyle:Br(x,h.color),lineWidth:h.lineWidth}),median:Object.assign(Object.assign({},g),{strokeStyle:Br(x,c.color),lineWidth:c.lineWidth}),maximum:Object.assign(Object.assign({},v),{strokeStyle:Br(x,u.color),lineWidth:u.lineWidth}),minimum:Object.assign(Object.assign({},f),{strokeStyle:Br(x,p.color),lineWidth:p.lineWidth})})}return o})}getRect(e,t,i,{barWidth:s,ratio:n}){const{rect:o}=this.theme,[,a,,r]=e;return{type:"rect",x:t,y:this.getYPos(r,n),width:s,height:(r-a)*n,thickness:o.borderWidth,borderColor:o.borderColor,color:i}}getWhisker(e,t,i,{barWidth:s,ratio:n},o){const[a,,,,r]=e,{lineWidth:l,color:d}=this.theme.line.whisker,h=Tt(t+s/2,l);return{upperWhisker:{type:"line",x:h,y:this.getYPos(r,n,l),x2:h,y2:o.y,strokeStyle:null!=d?d:i,lineWidth:l},lowerWhisker:{type:"line",x:h,y:this.getYPos(a,n,l),x2:h,y2:Tt(o.y+o.height,l),strokeStyle:null!=d?d:i,lineWidth:l}}}getMedian(e,t,i,{barWidth:s,ratio:n}){const o=e[2],{lineWidth:a,color:r}=this.theme.line.median;return{type:"line",x:Tt(t,a),y:this.getYPos(o,n,a),x2:Tt(t+s,a),y2:this.getYPos(o,n,a),strokeStyle:null!=r?r:i,lineWidth:a}}getMinimum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[0],{lineWidth:r,color:l}=this.theme.line.minimum;return{type:"line",x:Tt(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Tt(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getMaximum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[4],{lineWidth:r,color:l}=this.theme.line.maximum;return{type:"line",x:Tt(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Tt(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some(e=>!e),a=n?i.areaOpacity:i.restSeries.areaOpacity;return Fe(t,o?a:s)}}function Lr(e,t){const{rect:i,upperWhisker:s,lowerWhisker:n,median:o,minimum:a,maximum:r}=t;a&&ut(e,Object.assign({type:"line"},a)),n&&ut(e,Object.assign({type:"line"},n)),i&&pt(e,Object.assign({type:"rect"},i)),s&&ut(e,Object.assign({type:"line"},s)),r&&ut(e,Object.assign({type:"line"},r)),o&&ut(e,Object.assign({type:"line"},o))}class Er extends Bn{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{boxPlot:i},categories:s,modules:[En,oo,Ci,ho]}),this.addData=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})},this.addOutlier=(e,t)=>{this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addOutlier",{seriesIndex:e,outliers:t})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Ao),this.componentManager.add(Vo),this.componentManager.add(Pr),this.componentManager.add(It,{name:"yAxis"}),this.componentManager.add(It,{name:"xAxis"}),this.componentManager.add(qo,{name:"xAxis"}),this.componentManager.add(qo,{name:"yAxis"}),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,o,v,h,s,u])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{boxPlot:i},categories:t})}}class Wr extends Wt{constructor(){super(...arguments),this.models={},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{var t;const{index:i,seriesIndex:s}=e;if(!(S(i)&&("grouped"===this.eventDetectType||S(s))))return;const n="grouped"===this.eventDetectType?[...this.getGroupedSector([this.responders[i]],"select"),...this.getSectorModelsFromResponders([this.responders[i]])]:null!=(t=this.getResponderModelsWithTheme([this.tooltipSectorMap[i][s]],"select"))?t:[];if(!n.length)throw new Error(q);this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!on(e,this.eventDetectType,"radialBar"))return;const s="grouped"===this.eventDetectType?this.getGroupedSector([this.responders[t]],"hover"):this.getResponderModelsWithTheme([this.tooltipSectorMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipSectorMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;const{startAngle:t,totalAngle:i}=this.circularAxis;let s;Object.keys(this.models).forEach(n=>{const o=this.models[n].findIndex(({clockwise:n,degree:{start:o,end:a}})=>(s=n?t+i*e:t-i*e,st(n,o,a,s)));this.syncEndAngle(o<0?this.models[n].length:o,n),-1!==o&&(this.drawModels[n][o].degree.end=s)})}syncEndAngle(e,t){if(!(e<1))for(let i=0;i<e;i+=1){const e=this.models[t][i].degree.end;this.drawModels[t][i].degree.end!==e&&(this.drawModels[t][i].degree.end=e)}}initialize(){this.type="series",this.name="radialBar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,series:n,legend:o,options:a,theme:r,stackSeries:l,scale:d,radialAxes:h}=e,c=null!=(t=e.categories)?t:[];if(!n.radialBar||!l.radialBar)throw new Error(J(this.name));this.theme=r.series.radialBar,this.rect=s.plot,this.activeSeriesMap=ln(o),this.selectable=this.getSelectableOption(a),this.setEventDetectType(a);const u=c.reduce((e,t)=>(e[t]||(e[t]=[]),e),{}),p=n.radialBar.data;this.circularAxis=h.circularAxis;const m=this.makeRenderOptions(h.verticalAxis,d.circularAxis,null===(i=a)||void 0===i?void 0:i.series),{categoryMap:g,seriesModels:v}=this.makeSeriesModelData(p,l.radialBar.stackData,m,u),f=this.makeTooltipData(v,c);if(this.models=g,this.drawModels||this.initDrawModels(g),No(a,this.name).visible){const e=v.reduce((e,t)=>[...e,Object.assign(Object.assign({},t),{type:"sector",theme:this.theme.dataLabels})],[]);this.renderDataLabels(e)}this.tooltipSectorMap=this.makeTooltipSectorMap(v,f),this.responders=this.makeResponders(h.verticalAxis.radiusRanges,v,m,c,f)}initDrawModels(e){this.drawModels={},Object.keys(e).forEach(t=>{this.drawModels[t]=e[t].map(e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})}))})}makeResponders(e,t,i,s,n){return"grouped"===this.eventDetectType?function(e,t,i){const{centerX:s,centerY:n,angleRange:{start:o,end:a},clockwise:r}=t;return at(e,0).map((e,t)=>({type:"sector",x:s,y:n,degree:{start:o,end:a},radius:e,name:i[t],clockwise:r,index:t}))}(e,i,s):t.map((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign({},n[t])}))}makeTooltipSectorMap(e,t){return e.reduce((e,i,s)=>{const n=i.index;return e[n]||(e[n]=[]),e[n].push(Object.assign(Object.assign({},i),{data:Object.assign({},t[s])})),e},{})}setEventDetectType(e){var t,i;(null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=e.series.eventDetectType)}getBarWidth(e,t){const{barWidth:i}=this.theme;return i?Math.min(e,X(t,i)):e-10}makeRenderOptions({centerX:e,centerY:t,radiusRanges:i,tickDistance:s,axisSize:n,startAngle:o,endAngle:a},r,l){var d,h;const{limit:{max:c},stepSize:u}=r,p=null==(h=null===(d=l)||void 0===d?void 0:d.clockwise)||h,m=ps(p,o,a),g=c+(m<360?0:u);return{clockwise:p,centerX:e,centerY:t,radiusRanges:at(i,(s-this.getBarWidth(s,n))/2),angleRange:{start:o,end:a},totalAngle:m,scaleMaxLimitValue:g,startAngle:o}}makeSeriesModelData(e,t,i,s){const{clockwise:n,centerX:o,centerY:a,radiusRanges:r,totalAngle:l,scaleMaxLimitValue:d,startAngle:h}=i,c=h,{lineWidth:u,strokeStyle:p}=this.theme,m=[],g=Object.keys(s),v=E(s);return t.forEach(({values:t},i)=>{const{inner:s,outer:h}=r[i];t.forEach((t,r)=>{if(!x(t)){const f=Math.max(t/d*l,1)*(n?1:-1),b=m[m.length-1],x=r&&b?b.degree.end:c,y=n?Math.min(x+f,360):Math.max(x+f,0),{name:S,color:w}=e[r],O={type:"sector",name:S,color:this.getSeriesColor(S,w),x:o,y:a,degree:{start:x,end:y},radius:{inner:s,outer:h},value:t,style:[{strokeStyle:p}],lineWidth:u,clockwise:n,totalAngle:l,seriesColor:w,seriesIndex:r,index:i,drawingStartAngle:-90};v[g[i]].push(O),m.push(O)}})}),{seriesModels:m,categoryMap:v}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Fe(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}makeTooltipData(e,t){const i=[];return e.forEach(({seriesColor:e,name:s,value:n,index:o})=>{x(n)||i.push({label:s,color:e,value:n,category:S(o)?t[o]:""})}),i}makeTooltipResponder(e){const t=Object.keys(this.models);return e.map(e=>Object.assign(Object.assign({},e),tt(Qe("center",this.models[t[e.index]].find(({name:t})=>t===e.name)))))}getSectorModelsFromResponders(e){var t;return e.length?null!=(t=this.tooltipSectorMap[e[0].index])?t:[]:[]}getGroupedSector(e,t){const i=this.getSectorModelsFromResponders(e),{color:s,opacity:n}=this.theme[t].groupedSector;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:Fe(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getSectorModelsFromResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedSector(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.name}),this.activatedResponders=this.makeTooltipResponder(e)),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedSector(e,"select"),...this.getSectorModelsFromResponders(e)]:this.getResponderModelsWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map(e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[D(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})})}}class zr extends Bn{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radialBar:i.series},categories:i.categories,modules:[io,En,oo,pr]}),this.hideSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})},this.showSeriesDataLabel=()=>{this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})},this.setOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)},this.updateOptions=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)},this.showTooltip=e=>{this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))},this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(sa),this.componentManager.add(Ko),this.componentManager.add(Vo),this.componentManager.add(fr),this.componentManager.add(Wr),this.componentManager.add(Qo),this.componentManager.add(ia),this.componentManager.add(Uo),this.componentManager.add(br),this.componentManager.add(Ii,{chartEl:this.el}),this.componentManager.add(wo,{chartEl:this.el}),this.componentManager.add(na),this.painter.addGroups([n,h,s,u,m,a,o])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radialBar:i},categories:t})}}i.d(t,"default",(function(){return Ir})),i.d(t,"LineChart",(function(){return ha})),i.d(t,"AreaChart",(function(){return Ba})),i.d(t,"BarChart",(function(){return Va})),i.d(t,"ColumnChart",(function(){return _a})),i.d(t,"PieChart",(function(){return ma})),i.d(t,"HeatmapChart",(function(){return Ta})),i.d(t,"BubbleChart",(function(){return er})),i.d(t,"ScatterChart",(function(){return tr})),i.d(t,"BulletChart",(function(){return or})),i.d(t,"RadarChart",(function(){return xr})),i.d(t,"TreemapChart",(function(){return Rr})),i.d(t,"NestedPieChart",(function(){return rr})),i.d(t,"LineAreaChart",(function(){return Ea})),i.d(t,"LineScatterChart",(function(){return La})),i.d(t,"ColumnLineChart",(function(){return qa})),i.d(t,"BoxPlotChart",(function(){return Er})),i.d(t,"RadialBarChart",(function(){return zr}));class Ir{}Ir.lineChart=e=>new ha(e),Ir.areaChart=e=>new Ba(e),Ir.barChart=e=>new Va(e),Ir.boxPlotChart=e=>new Er(e),Ir.columnChart=e=>new _a(e),Ir.pieChart=e=>new ma(e),Ir.heatmapChart=e=>new Ta(e),Ir.bubbleChart=e=>new er(e),Ir.scatterChart=e=>new tr(e),Ir.bulletChart=e=>new or(e),Ir.radarChart=e=>new xr(e),Ir.treemapChart=e=>new Rr(e),Ir.nestedPieChart=e=>new rr(e),Ir.lineAreaChart=e=>new Ea(e),Ir.lineScatterChart=e=>new La(e),Ir.columnLineChart=e=>new qa(e),Ir.radialBarChart=e=>new zr(e)}}]);