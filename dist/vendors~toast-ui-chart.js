(window.webpackJsonpEasylogicStudio=window.webpackJsonpEasylogicStudio||[]).push([[9],{140:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return sl})),i.d(t,"LineChart",(function(){return ka})),i.d(t,"AreaChart",(function(){return Ua})),i.d(t,"BarChart",(function(){return lr})),i.d(t,"ColumnChart",(function(){return dr})),i.d(t,"PieChart",(function(){return Ra})),i.d(t,"HeatmapChart",(function(){return Ga})),i.d(t,"BubbleChart",(function(){return vr})),i.d(t,"ScatterChart",(function(){return fr})),i.d(t,"BulletChart",(function(){return Sr})),i.d(t,"RadarChart",(function(){return jr})),i.d(t,"TreemapChart",(function(){return Fr})),i.d(t,"NestedPieChart",(function(){return Mr})),i.d(t,"LineAreaChart",(function(){return Za})),i.d(t,"LineScatterChart",(function(){return Ka})),i.d(t,"ColumnLineChart",(function(){return hr})),i.d(t,"BoxPlotChart",(function(){return _r})),i.d(t,"RadialBarChart",(function(){return qr})),i.d(t,"GaugeChart",(function(){return il}));var s={};i.r(s),i.d(s,"DEFAULT_LABEL_TEXT",(function(){return Ne})),i.d(s,"labelStyle",(function(){return Xe})),i.d(s,"strokeLabelStyle",(function(){return Fe})),i.d(s,"label",(function(){return Ge})),i.d(s,"bubbleLabel",(function(){return Ve}));var n={};i.r(n),i.d(n,"clipRectArea",(function(){return rt})),i.d(n,"pathRect",(function(){return lt})),i.d(n,"circle",(function(){return dt})),i.d(n,"line",(function(){return ct})),i.d(n,"rect",(function(){return ht})),i.d(n,"arc",(function(){return ut}));var o={};i.r(o),i.d(o,"TICK_SIZE",(function(){return pt})),i.d(o,"tick",(function(){return mt}));var a={};i.r(a),i.d(a,"dataLabel",(function(){return ss})),i.d(a,"drawBubbleLabel",(function(){return ns})),i.d(a,"getBubbleArrowPoints",(function(){return os}));var r={};i.r(r),i.d(r,"SPECTRUM_LEGEND_LABEL_HEIGHT",(function(){return as})),i.d(r,"spectrumLegendBar",(function(){return rs})),i.d(r,"spectrumLegendTooltip",(function(){return ls})),i.d(r,"spectrumLegend",(function(){return cs})),i.d(r,"spectrumTooltip",(function(){return hs}));var l={};i.r(l),i.d(l,"polygon",(function(){return Ys}));var d={};i.r(d),i.d(d,"scatterSeries",(function(){return Ns}));var c={};i.r(c),i.d(c,"LEGEND_ITEM_MARGIN_X",(function(){return Xs})),i.d(c,"LEGEND_MARGIN_X",(function(){return Fs})),i.d(c,"LEGEND_CHECKBOX_SIZE",(function(){return Gs})),i.d(c,"LEGEND_ICON_SIZE",(function(){return $s})),i.d(c,"getLegendItemHeight",(function(){return Vs})),i.d(c,"legend",(function(){return qs}));var h={};i.r(h),i.d(h,"linePoints",(function(){return Sa})),i.d(h,"areaPoints",(function(){return wa}));var u={};i.r(u),i.d(u,"exportMenuButton",(function(){return Ma}));var p={};i.r(p),i.d(p,"backButton",(function(){return Oa})),i.d(p,"resetButton",(function(){return Aa}));var m={};i.r(m),i.d(m,"sector",(function(){return Da}));var g={};i.r(g),i.d(g,"circleLegend",(function(){return gr}));var v={};i.r(v),i.d(v,"boxPlot",(function(){return Vr}));var f={};function b(e){return!x(e)&&!y(e)}function x(e){return void 0===e}function y(e){return null===e}function S(e){return"boolean"==typeof e}function w(e){return"number"==typeof e}function M(e){return"string"==typeof e}function O(e){return w(e)&&isFinite(e)&&Math.floor(e)===e}function A(e){return"object"==typeof e&&null!==e}function k(e){return"function"==typeof e}function C(e,t){for(const i in e)e.hasOwnProperty(i)&&t(e[i],i)}function T(e,t,i){x(t)&&(t=e||0,e=0),i=i||1;const s=[];if(t){const n=i<0?-1:1;for(t*=n;e*n<t;e+=i)s.push(e)}return s}function D(e,t,i){if("number"==typeof i&&e[i]!==t)return!1;for(const i of e)if(i===t)return!0;return!1}function R(e,...t){const i={};return Object.keys(e).forEach(s=>{D(t,s)&&(i[s]=e[s])}),i}function j(e,...t){const i={};return Object.keys(e).forEach(s=>{D(t,s)||(i[s]=e[s])}),i}function B(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1){if(x(e)||y(e))return null;e=e[t[s]]}return e}function L(e,t=0){let i;return function(...s){window.clearTimeout(i),i=window.setTimeout(()=>{e(...s)},t)}}function P(e,t){const i=Object.assign({},e);return Object.keys(t).forEach(e=>{A(i[e])?Array.isArray(t[e])?i[e]=E(t[e]):i.hasOwnProperty(e)?i[e]=P(i[e],t[e]):i[e]=W(t[e]):i[e]=t[e]}),i}function E(e){return e.map(e=>A(e)?Array.isArray(e)?E(e):W(e):e)}function W(e){const t={},i=Object.keys(e);return i.length?(i.forEach(i=>{A(e[i])?t[i]=Array.isArray(e[i])?E(e[i]):W(e[i]):t[i]=e[i]}),t):e}function z(e,t){return O(e)?Number(e)-Number(t):new Date(e).getTime()-new Date(t).getTime()}function I(e,t){return e-t}function Y(e){return e.length?e[0]:void 0}function H(e){return e.length?e[e.length-1]:void 0}function N(e=[]){return e.some(e=>Number(e)<0)}function X(e){return e.reduce((e,t)=>e+t,0)}function F(e){return e.every(e=>Number(e)<=0)}function G(e){var t;return null===(t=e)||void 0===t?void 0:t.find(e=>null!==e)}function $(e){return Number(e.substr(0,e.length-1))}function V(e,t){return w(t)?t:Number((e*$(t)/100).toFixed(2))}function _(e){return w(e)?e:0}function U(e){return"auto"===e}i.r(f),i.d(f,"clockHand",(function(){return tl}));const q="It works only when the selectable option is true.",K="The index value is invalid.",Z="Source object is observable already",J="circleLegend is only possible when bubble series is present",Q=e=>`There's no ${e} data!`,ee=e=>"Brush don't exist in painter: "+e,te="DashSegments option is available from IE11 and above.",ie="The seriesIndex value is invalid",se='To use auto layout, the width or height of the container must be specified as a value such as "%" or "vh", "vw".';let ne=null,oe=null;const ae=[];let re=!1;function le(e){const t=()=>{oe!==t&&(re||!y(oe)?(ae.includes(t)&&ae.splice(ae.indexOf(t),1),ae.push(t)):y(oe)&&(oe=t,e(),oe=null,de()))};return t.deps=[],ne=t,ne(),ne=null,()=>{t.deps.forEach(e=>{const i=e.findIndex(e=>e===t);e.splice(i,1)}),t.deps=[]}}function de(){if(ae.length){const e=ae.shift();e&&e()}}function ce(e){return"object"==typeof e&&e.__toastUIChartOb__}function he(e,t=e){if(ce(t))throw new Error(Z);ce(e)||Object.defineProperty(e,"__toastUIChartOb__",{enumerable:!1});for(const i in t){if(!t.hasOwnProperty(i))continue;const s=[];let n=t[i];const o=Object.getOwnPropertyDescriptor(t,i),a=o&&o.get,r=o&&o.set;Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return ne===ge?{target:e,key:i,value:n,obs:s}:(re||!ne||s.includes(ne)||(s.push(ne),ne.deps.push(s)),n)},set:function(t){const o=n;r?(r.call(e,t),n=a?a.call(e):e[i]):n=t,o!==n&&me(s)}}),"object"!=typeof e[i]||Array.isArray(e[i])||he(e[i])}return e}function ue(e,t){if(ce(t))throw new Error(Z);return he(e,t)}function pe(e,t){const i=ge(e,t);i&&me(i.obs)}function me(e){e.forEach(e=>e())}function ge(e,t){ne=ge;const i=e[t];return ne=null,"object"==typeof i&&i.hasOwnProperty("target")&&i.hasOwnProperty("obs")?i:null}function ve(e){return JSON.parse(JSON.stringify(e))}class fe{constructor(e){this.computed={},this.actions={},this.initStoreState=W(e),this.setRootState({})}setRootState(e){he(e),this.state=e}setComputed(e,t,i=this.computed){const s=e.split("."),n=s.splice(s.length-1,1)[0];!function(e,t,i){let s;const n={};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:()=>s}),ue(e,n),le(()=>{const n=s;s=i(),n!==s&&(e[t]=s)})}(function(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1)x(e[t[s]])&&(e[t[s]]={}),e=e[t[s]];return e}(i,s),n,t.bind(null,this.state,this.computed))}setWatch(e,t){return function(e,t,i){const s=t.split("."),n=s.splice(s.length-1,1)[0],o=B(e,s);if(!o)return null;const a=ge(o,n);if(!a)return null;const r=()=>{i(o[n])};return a.obs.push(r),()=>{const e=a.obs.findIndex(e=>e===r);e>-1&&a.obs.splice(e,1)}}(this,e,t)}setAction(e,t){this.actions[e]=t}dispatch(e,t,i){i?(re=!0,(()=>{this.actions[e].call(this,this,t)})(),re=!1,de()):this.actions[e].call(this,this,t)}observe(e){return le(e.bind(this,this.state,this.computed))}observable(e){return he(e)}notifyByPath(e){!function(e,t){const i=t.split("."),s=i.splice(i.length-1,1)[0],n=B(e,i);n&&pe(n,s)}(this,e)}notify(e,t){pe(e,t)}setModule(e,t){if(t||(e=(t=e).name),t.state){const e="function"==typeof t.state?t.state(this.initStoreState):t.state;be(this.state,e)}t.computed&&C(t.computed,(e,t)=>{this.setComputed(t,e)}),t.watch&&C(t.watch,(e,t)=>{this.setWatch(t,e)}),t.action&&C(t.action,(e,t)=>{this.setAction(t,e)}),t.observe&&C(t.observe,e=>{this.observe(e)})}setValue(e,t,i){be(e,{[t]:i})}}function be(e,t){const i={};for(const s in t)t.hasOwnProperty(s)&&(x(e[s])?i[s]=t[s]:"object"!=typeof t[s]||Array.isArray(t[s])?e[s]=t[s]:be(e[s],t[s]));Object.keys(i).length&&ue(e,i)}function xe(e,{width:t,height:i}){return{width:0===t?e.offsetWidth:t,height:0===i?e.offsetHeight:i}}var ye={name:"root",state:({options:e})=>{var t,i,s,n,o,a,r,l;return{chart:Object.assign(Object.assign({},e.chart),{width:_(null===(i=null===(t=e)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width),height:_(null===(n=null===(s=e)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height)}),usingContainerSize:{width:U(null===(a=null===(o=e)||void 0===o?void 0:o.chart)||void 0===a?void 0:a.width),height:U(null===(l=null===(r=e)||void 0===r?void 0:r.chart)||void 0===l?void 0:l.height)},container:{}}},action:{setChartSize({state:e},t){e.chart.width=t.width,e.chart.height=t.height,this.notify(e,"chart")},initChartSize({state:e},t){const{width:i,height:s}=e.chart;0!==i&&0!==s||(t.parentNode?this.dispatch("setChartSize",xe(t,{width:i,height:s})):setTimeout(()=>{this.dispatch("setChartSize",xe(t,{width:i,height:s}))},0))},setUsingContainerSize({state:e},{width:t,height:i}){e.usingContainerSize.width=t,e.usingContainerSize.height=i}}};const Se=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,we=/rgb\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)/,Me=/rgba\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}), ?(1|0?\.?\d+)\)/,Oe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ae(e,t){if(e.length>t)return e;let i=e;return T(0,t-1).forEach(e=>{i="0"+i}),i.slice(-1*t)}function ke(e){return Se.test(e)}function Ce(e){return Oe[e.toLowerCase()]||e}
// @license RGB <-> HSV conversion utilities based off of http://www.cs.rit.edu/~ncs/color/t_convert.html
function Te(e){const t=Ce(e);return!!ke(t)&&t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,s)=>"#"+t+t+i+i+s+s).substring(1).match(/.{2}/g).map(e=>parseInt(e,16))}function De(e,t){const i=Ce(e);if(ke(i)){const[e,s,n]=Te(i);return`rgba(${e}, ${s}, ${n}, ${t})`}if(we.test(e)){const i=we.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}if(Me.test(e)){const i=Me.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}return e}function Re(e){if(Me.test(e)){const t=Me.exec(e);return Number(t[4])}return 1}function je(e,t=1){return De(e,Re(e)*t)}function Be(e,t){return e.reduce((e,i)=>M(i)?Object.assign(Object.assign({},e),t[i]):Object.assign(Object.assign({},e),i),{})}function Le(e,t){return`translate(${e}px,${t}px)`}function Pe(e){const{fontFamily:t,fontSize:i,fontWeight:s}=e;return`${s} ${i}px ${t}`}function Ee(e){const{color:t,fontSize:i,fontFamily:s,fontWeight:n}=e;return`font-weight: ${n}; font-family: ${s}; font-size: ${i}px; color: ${t};`}function We(e){return Pe(R(e,"fontFamily","fontWeight","fontSize"))}function ze(e,t){e.setLineDash&&e.setLineDash(t)}function Ie(e){return Math.floor(.15*e)}function Ye(e,t){e.fillStyle=t,e.fill()}function He(e,t){const{lineWidth:i,strokeStyle:s}=t;s&&(e.strokeStyle=s),i&&(e.lineWidth=i),e.lineWidth&&Re(String(e.strokeStyle))&&e.stroke()}const Ne="normal 11px Arial",Xe={default:{font:Ne,fillStyle:"#333333",textAlign:"left",textBaseline:"middle"},title:{textBaseline:"top"},axisTitle:{textBaseline:"top"},rectLabel:{font:Ne,fillStyle:"rgba(0, 0, 0, 0.3)",textAlign:"center",textBaseline:"middle"}},Fe={none:{lineWidth:1,strokeStyle:"rgba(255, 255, 255, 0)"},stroke:{lineWidth:4,strokeStyle:"rgba(255, 255, 255, 0.5)"}};function Ge(e,t){var i,s,n,o,a,r,l,d;const{x:c,y:h,text:u,style:p,stroke:m,opacity:g,radian:v,rotationPosition:f}=t;if(p){const t=Be(p,Xe);Object.keys(t).forEach(i=>{e[i]="fillStyle"===i&&w(g)?je(t[i],g):t[i]})}if(e.save(),v&&(e.translate(null!=(s=null===(i=f)||void 0===i?void 0:i.x)?s:c,null!=(o=null===(n=f)||void 0===n?void 0:n.y)?o:h),e.rotate(v),e.translate(-(null!=(r=null===(a=f)||void 0===a?void 0:a.x)?r:c),-(null!=(d=null===(l=f)||void 0===l?void 0:l.y)?d:h))),m){const t=Be(m,Fe),i=Object.keys(t);i.forEach(i=>{e[i]="strokeStyle"===i&&w(g)?je(t[i],g):t[i]}),i.length&&e.strokeText(u,c,h)}e.fillText(u,c,h),e.restore()}const $e={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}};function Ve(e,t){var i,s,n,o;const{radian:a=0,rotationPosition:r,bubble:{x:l,y:d,width:c,height:h,radius:u=0,lineWidth:p=1,direction:m,points:g=[],fill:v="#fff",strokeStyle:f="rgba(0, 0, 0, 0)",style:b=null}}=t;if(c>0&&h>0&&function(e,t){const{x:i,y:s,width:n,height:o,style:a,radius:r=0,strokeStyle:l,fill:d,lineWidth:c=1,points:h=[],direction:u="",radian:p,rotationPosition:m}=t,g=i+n,v=s+o;e.beginPath(),e.save(),p&&m&&(e.translate(m.x,m.y),e.rotate(p),e.translate(-m.x,-m.y));e.moveTo(i+r,s),"top"===u&&_e(e,h);e.lineTo(g-r,s),e.quadraticCurveTo(g,s,g,s+r),"right"===u&&_e(e,h);e.lineTo(g,s+o-r),e.quadraticCurveTo(g,v,g-r,v),"bottom"===u&&_e(e,h);e.lineTo(i+r,v),e.quadraticCurveTo(i,v,i,v-r),"left"===u&&_e(e,h);if(e.lineTo(i,s+r),e.quadraticCurveTo(i,s,i+r,s),a){const t=Be(a,$e);Object.keys(t).forEach(i=>{e[i]=t[i]})}d&&Ye(e,d);l&&He(e,{strokeStyle:l,lineWidth:c});e.restore()}(e,{x:l,y:d,radius:u,width:c,height:h,style:b,fill:v,strokeStyle:f,lineWidth:p,direction:m,points:g,radian:a,rotationPosition:{x:(s=null===(i=r)||void 0===i?void 0:i.x,null!=s?s:l),y:(o=null===(n=r)||void 0===n?void 0:n.y,null!=o?o:d)}}),t.label.text){const{x:i,y:s,text:n,strokeStyle:o="rgba(0, 0, 0, 0)",style:l}=t.label;e.shadowColor="rgba(0, 0, 0, 0)",Ge(e,{type:"label",x:i,y:s,text:n,style:l,stroke:[{strokeStyle:o}],radian:a,rotationPosition:r})}}function _e(e,t){t.length&&(e.lineTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y))}const Ue=360,qe=-90;function Ke(e,t){return Object.assign({anchor:e},R(t,"x","y","radius","degree","drawingStartAngle"))}function Ze(e,t=qe){let i=0;return e%Ue==0?i=Math.PI/180*t:e>=0&&(i=Math.PI/180*(e+t)),i}function Je(e){const{anchor:t,x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},drawingStartAngle:l=qe}=e;return Qe(i,s,"outer"===t?o:(o+n)/2,Ze(a+(r-a)/2,l))}function Qe(e,t,i,s){return{x:Math.round(e+i*Math.cos(s)),y:Math.round(t+i*Math.sin(s))}}function et(e,t,i,s){return e?t<=s&&i>=s:t>=s&&i<=s}function tt({width:e,height:t},i=!1,s=0,n=0){let o;return o=i?Math.min(e/2,t)-n:e>t?t/2-n:e/2-s,Math.max(o,10)}function it(e,t,i=!0){const{totalAngle:s=Ue,degree:{start:n,end:o},drawingStartAngle:a=qe}=e;let r="center";if("outer"!==t)return r;const l=Ze(0,a),d=Ze(s/2,a),c=function(e,t,i,s){return Ze(s?(t+e)/2:e,i)}(n,o,a,i);return a>=qe&&a<90?l<c&&d>c?r="left":d<c&&(r="right"):l<c&&d>c?r="right":d<c&&(r="left"),r}function st(e,t){return e.reduce((i,s,n)=>(n&&i.push({inner:s+t,outer:e[n-1]-t}),n===e.length-1&&i.push({inner:t,outer:s-t}),i),[])}function nt(e){return e<0?Ue+e%Ue:e>Ue?e%Ue:e}const ot={default:{strokeStyle:"#ffffff",lineWidth:2},plot:{lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.05)"}},at={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6}};function rt(e,t){const{x:i,y:s,width:n,height:o}=t;e.beginPath(),e.rect(i,s,n,o),e.clip()}function lt(e,t){const{x:i,y:s,width:n,height:o,radius:a=0,stroke:r="black",fill:l="",lineWidth:d=1}=t;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+n-a,s),e.quadraticCurveTo(i+n,s,i+n,s+a),e.lineTo(i+n,s+o-a),e.quadraticCurveTo(i+n,s+o,i+n-a,s+o),e.lineTo(i+a,s+o),e.quadraticCurveTo(i,s+o,i,s+o-a),e.lineTo(i,s+a),e.quadraticCurveTo(i,s,i+a,s),e.closePath(),l&&Ye(e,l),He(e,{lineWidth:d,strokeStyle:r})}function dt(e,t){const{x:i,y:s,style:n,radius:o,color:a,angle:r={start:0,end:2*Math.PI},borderWidth:l,borderColor:d}=t;if(e.beginPath(),n){const t=Be(n,ot);Object.keys(t).forEach(i=>{e[i]=t[i]})}e.arc(i,s,o,r.start,r.end,!0),He(e,{lineWidth:l,strokeStyle:d}),Ye(e,a),e.closePath()}function ct(e,t){const{x:i,y:s,x2:n,y2:o,strokeStyle:a,lineWidth:r,dashSegments:l}=t;e.beginPath(),l&&ze(e,l),e.moveTo(i,s),e.lineTo(n,o),He(e,{strokeStyle:a,lineWidth:r}),e.closePath()}function ht(e,t){const{x:i,y:s,width:n,height:o,style:a,thickness:r=0,color:l,borderColor:d="#ffffff"}=t;if(e.beginPath(),a){const t=Be(a,at);Object.keys(t).forEach(i=>{e[i]=t[i]})}r&&(e.fillStyle=d,e.fillRect(i-r,s-r,n+2*r,o+2*r),e.shadowColor="rgba(0, 0, 0, 0)"),e.rect(i,s,n,o),Ye(e,l)}function ut(e,t){const{x:i,y:s,angle:{start:n,end:o},borderWidth:a,borderColor:r,drawingStartAngle:l,radius:d,clockwise:c=!0}=t;e.beginPath();const h=Ze(n,l),u=Ze(o,l);e.arc(i,s,d,h,u,!c),He(e,{lineWidth:a,strokeStyle:r}),e.closePath()}const pt=5;function mt(e,t){const{x:i,y:s,isYAxis:n,tickSize:o=pt,strokeStyle:a,lineWidth:r}=t,l={type:"line",x:i,y:s,x2:i,y2:s,strokeStyle:a,lineWidth:r};n?l.x2+=o:l.y2+=o,ct(e,l)}const gt=document.createElement("canvas").getContext("2d");function vt(e,t=Ne){return gt.font=t,Math.ceil(gt.measureText(e).width)}function ft(e,t=Ne){gt.font=t;const{actualBoundingBoxAscent:i,actualBoundingBoxDescent:s}=gt.measureText(e);return w(i)&&w(s)?Math.ceil(Math.abs(i)+Math.abs(s))+1:bt(t)}function bt(e=Ne){const t=e.match(/\d+(?=px)/);return parseInt(String(1.2*Number(t)),10)}function xt(e){return Ct(2*pt+e/2)}function yt(...e){const t=e.map(e=>function(e){var t,i;return null!=(i=null===(t=String(e).split(".")[1])||void 0===t?void 0:t.length)?i:0}(e)),i=Math.max(...t);return Math.pow(10,i)}function St(e,t){const i=yt(e,t);return(e*i+t*i)/i}function wt(e,t){const i=yt(e,t);return e*i*(t*i)/(i*i)}function Mt(e,t){const i=yt(e,t);return e*i/(t*i)}function Ot(e){const t=e.slice();return t.unshift(0),t.reduce((e,t)=>St(parseFloat(String(e)),parseFloat(String(t))))}function At(e,t,i){const s=yt(t);return T(Math.round(e.min*s),Math.round(e.max*s)+1,t*s).map(e=>String(i?new Date(e):e/s))}function kt(e,t,i=0,s=0){let n=[];return t>0&&(n=T(0,t).map(s=>(0===s?0:s/(t-1))*e+i)),s&&n.push(s),n}function Ct(e,t=1){const i=t/2;return t%2?(O(e)?e:Math.round(e-i))+i:Math.round(e)}function Tt(e,t,i){const{x:s,y:n}=e,{x:o,y:a}=t,{x:r,y:l}=i,d=jt(i,t),c=jt(t,e),h=.333*c/(c+d)||0,u=.333*d/(c+d)||0;return{prev:{x:o-h*(r-s),y:a-h*(l-n)},next:{x:o+u*(r-s),y:a+u*(l-n)}}}function Dt(e){for(let t=0,i=e.length,s=e[0];t<i;t+=1){const n=e[t];if(y(n)){s=e[t+1];continue}const o=e[Math.min(t+1,i-1)%i];s&&o&&(n.controlPoint=Tt(s,n,o)),s=n}}function Rt(e,{min:t,max:i}){return i===t?0:(e-t)/(i-t)}function jt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bt(e){return vt(e.reduce((e,t)=>e.length>t.length?e:t,""))}function Lt(e,t,i,s){const{pointOnColumn:n,tickDistance:o,labelRange:a}=e;let r;if(a){r=Rt(M(i)?Number(new Date(i)):Number(i),a)*t}else r=o*s+(n?o/2:0);return r}function Pt(e,t){return e.reduce((e,i)=>[...e,i[t]],[])}class Et{constructor({store:e,eventBus:t}){this.name="Component",this.type="component",this.rect={x:0,y:0,height:0,width:0},this.isShow=!0,this.store=e,this.eventBus=t}update(e){this.drawModels&&(Array.isArray(this.models)?this.updateModels(this.drawModels,this.models,e):Object.keys(this.models).forEach(t=>{const i=this.drawModels[t],s=this.models[t];this.updateModels(i,s,e)}))}initUpdate(e){this.update(e)}updateModels(e,t,i){e.forEach((e,s)=>{const n=t[s];Object.keys(e).forEach(t=>{var s;if(e&&n&&"_"!==t[0])if(w(e[t]))e[t]=e[t]+(n[t]-e[t])*i;else if("points"===t){const o=this.getCurrentModelToMatchTargetModel(e[t],e[t],n[t]).map((e,s)=>{const o=n[t][s];if(e&&o){const{x:t,y:s}=e,{x:n,y:a}=o;return Object.assign(Object.assign({},o),{x:t+(n-t)*i,y:s+(a-s)*i})}return o});(null===(s=this.store.state.options.series)||void 0===s?void 0:s.spline)&&Dt(o),e[t]=o}else e[t]=n[t]})})}sync(){this.drawModels&&(Array.isArray(this.models)?this.syncModels(this.drawModels,this.models):Object.keys(this.models).length?Object.keys(this.models).forEach(e=>{const t=this.drawModels[e],i=this.models[e];this.syncModels(t,i,e)}):this.drawModels=this.models)}getCurrentModelToMatchTargetModel(e,t,i){var s;if(!e||!t)return[...i];if(null===(s=G(i))||void 0===s?void 0:s.name){const s=[...new Set(e.map(({name:e})=>e))],n=[...new Set(i.map(({name:e})=>e))];if(!function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]!==t[i])return!1;return!0}(s,n))return this.getCurrentModelWithDifferentModel(e,t,i,s,n)}const n=t.length,o=i.length;return n<o?[...t,...i.slice(n,o)]:n>o?t.slice(0,o):e}getCurrentModelWithDifferentModel(e,t,i,s,n){const o=t.length,a=i.length;if(o>a){const t=e.filter(({name:e})=>D(n,e));return t.length!==i.length?i:t}if(o<a){const t=i.reduce((e,t,i)=>!D(s,t.name)?{models:[...e.models,t],modelIdx:[...e.modelIdx,i]}:e,{models:[],modelIdx:[]});if(e.length+t.models.length===a){const i=[...e];return t.models.forEach((e,s)=>{i.splice(t.modelIdx[s],0,e)}),i}return i}return e}syncModels(e,t,i){const s=i?this.drawModels[i]:this.drawModels,n=this.getCurrentModelToMatchTargetModel(s,e,t);i?this.drawModels[i]=n:this.drawModels=n}getSelectableOption(e){var t,i,s;return null!=(s=null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.selectable)&&s}renderDataLabels(e,t){setTimeout(()=>{this.eventBus.emit("renderDataLabels",{data:e,name:null!=t?t:this.name})},0)}draw(e){const t=this.drawModels?this.drawModels:this.models;Array.isArray(t)?e.paintForEach(t):t&&Object.keys(t).forEach(i=>{e.paintForEach(t[i])})}}var Wt;!function(e){e.X="xAxis",e.Y="yAxis",e.SECONDARY_Y="secondaryYAxis",e.CIRCULAR="circularAxis",e.VERTICAL="verticalAxis"}(Wt||(Wt={}));class zt extends Et{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]},this.axisSize=0}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=D([Wt.Y,Wt.SECONDARY_Y],e)}render({layout:e,axes:t,theme:i,scale:s}){var n;if(t.centerYAxis||!t[this.name])return;this.theme=Si(i,this.name),this.rect=e[this.name],this.axisSize=this.yAxisComponent?this.rect.height:this.rect.width;const{viewLabels:o}=t[this.name],{offsetKey:a,anchorKey:r}={offsetKey:(l=this.yAxisComponent)?"y":"x",anchorKey:l?"x":"y"};var l;const d=this.makeRenderOptions(t[this.name],null===(n=s)||void 0===n?void 0:n[this.name]);this.hasOnlyAxisLine()||(this.models.label=this.renderLabelModels(o,a,r,d),this.models.tick=this.renderTickModels(a,r,d)),this.models.axisLine=[this.renderAxisLineModel()],this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach(e=>{this.drawModels[e]=this.models[e].map(e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t})}))}renderAxisLineModel(){const e=Ct(0);let t;const{color:i,width:s}=this.theme;if(this.yAxisComponent){const n=this.getYAxisXPoint();t={type:"line",x:n,y:e,x2:n,y2:Ct(this.axisSize),strokeStyle:i,lineWidth:s}}else t={type:"line",x:e,y:e,x2:Ct(this.axisSize),y2:e,strokeStyle:i,lineWidth:s};return t}renderTickModels(e,t,i){const s=this.yAxisComponent?this.getYAxisXPoint():Ct(0),{tickInterval:n,relativePositions:o}=i,a=D([Wt.SECONDARY_Y,Wt.X],this.name)?pt:-pt;return o.reduce((i,o,r)=>r%n?i:[...i,{type:"tick",isYAxis:this.yAxisComponent,tickSize:a,[e]:Ct(o),[t]:s,strokeStyle:this.theme.color,lineWidth:this.theme.width}],[])}renderLabelModels(e,t,i,s){const{needRotateLabel:n,radian:o,offsetY:a}=s,r=this.theme.label,l=Pe(r),d=["default",{textAlign:this.getLabelTextAlign(n),font:l,fillStyle:r.color}],c=this.yAxisComponent?this.getYAxisAnchorPoint():a;return e.map(({text:e,offsetPos:s})=>({type:"label",text:e,style:d,radian:o,[t]:Ct(s),[i]:c}))}makeRenderOptions(e,t){var i,s,n,o;const{tickCount:a,tickInterval:r}=e,l=null!=(s=null===(i=t)||void 0===i?void 0:i.sizeRatio)?s:1,d=null!=(o=null===(n=t)||void 0===n?void 0:n.positionRatio)?o:0,c=kt(this.axisSize*l,a,this.axisSize*d);if(this.yAxisComponent)return{relativePositions:c,tickInterval:r};const{needRotateLabel:h,radian:u,offsetY:p}=e;return{relativePositions:c,tickInterval:r,needRotateLabel:h,radian:u,offsetY:p}}getYAxisAnchorPoint(){return this.isRightSide()?Ct(this.rect.width):Ct(0)}getLabelTextAlign(e){const t=this.isRightSide()?"right":"left",i=e?"left":"center";return this.yAxisComponent?t:i}isRightSide(){return this.name===Wt.SECONDARY_Y}getYAxisXPoint(){return this.isRightSide()?Ct(0):Ct(this.rect.width)}hasOnlyAxisLine(){return this.yAxisComponent&&!this.rect.width||this.name===Wt.X&&!this.rect.height}}const It=Math.PI/180,Yt=[0,25,45,65,85,90];function Ht(e,t){return Math.cos(e*It)*t}function Nt(e,t){return Math.sin(e*It)*t}function Xt(e,t,i){return 2*(Nt(e,t/2)+Nt(90-e,i/2))}const Ft=/[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*mm|[\\]*m|[\\]*ss|[\\]*s|[\\]*A/gi,Gt=["Invalid month","January","February","March","April","May","Jun","Jul","August","September","October","November","December"],$t=[0,31,28,31,30,31,30,31,31,30,31,30,31],Vt={M:e=>Number(e.month),MM:e=>{const t=e.month;return Number(t)<10?"0"+t:t},MMM:e=>Gt[Number(e.month)].substr(0,3),MMMM:e=>Gt[Number(e.month)],D:e=>Number(e.date),d:e=>Vt.D(e),DD:e=>{const t=e.date;return Number(t)<10?"0"+t:t},dd:e=>Vt.DD(e),YY:e=>Number(e.year)%100,yy:e=>Vt.YY(e),YYYY:e=>{let t="20";const i=e.year;return i>69&&i<100&&(t="19"),Number(i)<100?t+String(i):i},yyyy:e=>Vt.YYYY(e),A:e=>e.meridiem,a:e=>e.meridiem,hh:e=>{const t=e.hour;return Number(t)<10?"0"+t:t},HH:e=>Vt.hh(e),h:e=>String(Number(e.hour)),H:e=>Vt.h(e),m:e=>String(Number(e.minute)),mm:e=>{const t=e.minute;return Number(t)<10?"0"+t:t},s:e=>String(Number(e.second)),ss:e=>{const t=e.second;return Number(t)<10?"0"+t:t}};function _t(e,t,i){var s,n,o;const a=null!=(n=null===(s=i)||void 0===s?void 0:s.meridiemSet.AM)?n:"AM",r=(null===(o=i)||void 0===o?void 0:o.meridiemSet.PM)||"PM";let l;if(t instanceof Date)l={year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()};else{const{year:e,month:i,hour:s,minute:n,second:o}=t;l={year:e,month:i,date:t.date,hour:s,minute:n,second:o}}return function(e,t,i){const s=Number(e),n=Number(t),o=Number(i);if(!(s>-1&&s<100||s>1969&&s<2070)||!(n>0&&n<13))return!1;const a=function(e,t){return 2===e&&t%4==0&&(t%100!=0||t%400==0)}(n,s)?29:$t[n];return o>0&&o<=a}(l.year,l.month,l.date)?(l.meridiem="",/([^\\]|^)[aA]\b/.test(e)&&(l.hour>12&&(l.hour%=12),0===l.hour&&(l.hour=12),l.meridiem=l.hour>11?r:a),e.replace(Ft,e=>e.indexOf("\\")>-1?e.replace(/\\/,""):Vt[e](l)||"")):""}const Ut=.1,qt=1;function Kt(e,t,i){const s=i-t,n=Math.abs(s);return s>0&&n!==Ue&&!e||s<0&&n!==Ue&&e?Ue-n:n}function Zt(e,t,i){return Kt(e,t,i)<=180&&(function(e,t,i){return e&&(t>=qe&&i<=90||t>=90&&i<=180)}(e,t,i)||function(e,t,i){return!e&&(t>=-180&&i<=90||t<=90&&i>=qe)}(e,t,i))}function Jt(e,t){return t?e*qt:e*Ut}function Qt(e,t=""){return e.filter(({data:e})=>!y(e)).map(({data:e,name:i,color:s,rootParentName:n})=>({label:i,color:s,value:e,category:t,rootParentName:n,templateType:"pie"}))}function ei(e){var t;return!(!e.pie||!Array.isArray(null===(t=e.pie[0])||void 0===t?void 0:t.data))}function ti(e){return e.pie.map(({name:e})=>e)}function ii(e){const t=e.toFixed(2),i=parseFloat(t);return(t.length>5?parseFloat(t.substr(0,4)):String(i))+"%"}function si(e,t){var i,s,n;return!!t.pie&&"outer"===(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.anchor)}function ni(e,t){var i,s,n,o;return!!t.pie&&"outer"===(null===(o=null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.pieSeriesName)||void 0===o?void 0:o.anchor)}var oi;function ai(e=!0,t=!1){let i="center";return t&&(i=e?"right":"left"),i}function ri({labels:e,intervalData:t,circularAxisLabelMargin:i,circularAxisLabelFont:s,defaultAxisData:n,radiusData:o}){const{maxLabelWidth:a,maxLabelHeight:r}=ji(e,i,s),{totalAngle:l,clockwise:d,axisSize:c,centerX:h,centerY:u,startAngle:p,endAngle:m,drawingStartAngle:g}=n,{tickInterval:v,labelInterval:f}=t,{innerRadius:b,outerRadius:x}=o;return{axisSize:c,centerX:h,centerY:u,label:{labels:e,interval:f,margin:i,maxWidth:a,maxHeight:r},radius:{inner:b,outer:x},angle:{start:p,end:m,total:l,central:l/(e.length+(l<Ue?-1:0)),drawingStart:g},tickInterval:v,clockwise:d}}function li(e,t,i){var s,n,o;const a=null!=(o=null===(n=null===(s=e[i])||void 0===s?void 0:s.label)||void 0===n?void 0:n.formatter)?o:e=>e;return t.map((e,s)=>a(e,{index:s,labels:t,axisName:i}))}!function(e){e.CIRCULAR="circularAxis",e.VERTICAL="verticalAxis"}(oi||(oi={}));var di={name:"radialAxes",state:()=>({radialAxes:{}}),action:{setRadialAxesData({state:e}){var t,i;const{series:s,layout:n,scale:o}=e,a=e.categories,{plot:r}=n,l=hi({series:s,categories:a}),d=e.options,c=e.theme,h=Pe(c.circularAxis.label),u=Pe(c.verticalAxis.label),{verticalAxisLabelMargin:p,circularAxisLabelMargin:m}=function(e,t){var i,s,n,o,a,r,l,d;return{verticalAxisLabelMargin:(o=null===(n=null===(s=null===(i=t)||void 0===i?void 0:i.verticalAxis)||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin,null!=o?o:e?5:0),circularAxisLabelMargin:(d=null===(l=null===(r=null===(a=t)||void 0===a?void 0:a.circularAxis)||void 0===r?void 0:r.label)||void 0===l?void 0:l.margin,null!=d?d:25)}}(l,d),{radialAxisLabels:g,yAxisLabels:v}=function(e,t,i,s){const n=e?oi.CIRCULAR:oi.VERTICAL,{limit:o,stepSize:a}=s[n],r=li(t,At(o,a),n),l=li(t,i,e?oi.VERTICAL:oi.CIRCULAR);return{radialAxisLabels:e?r:l,yAxisLabels:e?l:r}}(l,d,a,o),{maxLabelWidth:f,maxLabelHeight:b}=ji(g,m,h),x=Pi(d,r,f,b+m,l),{axisSize:y}=x,S=l?function(e,t,i=1){var s,n,o,a;const r=V(e,null!==(n=null===(s=t)||void 0===s?void 0:s.inner)&&void 0!==n?n:0),l=V(e,null!==(a=null===(o=t)||void 0===o?void 0:o.outer)&&void 0!==a?a:e);return{radiusRanges:kt(l-r,i,r).splice(0===r?1:0,i).reverse(),innerRadius:r,outerRadius:l}}(y,null===(i=null===(t=d)||void 0===t?void 0:t.series)||void 0===i?void 0:i.radiusRange,v.length+1):{radiusRanges:kt(y,v.length),innerRadius:0,outerRadius:y},w=function({labels:e,pointOnColumn:t,intervalData:i,isLabelOnVerticalAxis:s,verticalAxisLabelMargin:n,verticalAxisLabelFont:o,defaultAxisData:a,radiusData:r}){const{clockwise:l,axisSize:d,centerX:c,centerY:h,startAngle:u,endAngle:p}=a,{radiusRanges:m,innerRadius:g,outerRadius:v}=r,{labelInterval:f}=i,{maxLabelWidth:b,maxLabelHeight:x}=ji(e,n,o);return{axisSize:d,centerX:c,centerY:h,label:{labels:e,interval:f,margin:n,maxWidth:b,maxHeight:x,align:ai(l,s)},radius:{inner:g,outer:v,ranges:m},angle:{start:u,end:p},tickDistance:(v-g)/e.length,pointOnColumn:t}}({labels:v,pointOnColumn:l,isLabelOnVerticalAxis:l,intervalData:Li(l,{axis:d.verticalAxis,categories:a,layout:n}),verticalAxisLabelMargin:p,verticalAxisLabelFont:u,defaultAxisData:x,radiusData:S});e.radialAxes={circularAxis:ri({labels:g,intervalData:Li(!0,{axis:d.circularAxis,categories:a,layout:n}),defaultAxisData:x,circularAxisLabelMargin:m,circularAxisLabelFont:h,radiusData:S}),verticalAxis:w}}},observe:{updateRadialAxes(){this.dispatch("setRadialAxesData")}}};function ci(e,t,i){var s;const n=90,o=121,a=5;if(null===(s=i)||void 0===s?void 0:s[0]){if(vt(i[0])<t/e-5)return 1}let r=[];if(function(e){const t=[];for(let i,s=2;s*s<=e;s+=1)e%s==0&&(i=e/s,t.push(s),i!==s&&t.push(i));return t.sort((e,t)=>e-t)}(e).forEach(i=>{const s=i/e*t;s>=n&&s<=o&&r.push({interval:i,blockCount:Math.floor(e/i),remainBlockCount:0})}),!r.length){const i=T(n,o,a);r=i.reduce((i,s)=>{const n=function(e,t,i){let s,n=Math.floor(t/i),o=null;const a=n?Math.floor(e/n):e;return a>1&&(s=e-a*n,s>=a&&(n+=Math.floor(s/a),s%=a),o={blockCount:n,remainBlockCount:s,interval:a}),o}(e,t,s);return n?[...i,n]:i},[])}let l=1;if(r.length){l=r.reduce((e,t)=>t.blockCount>e.blockCount?t:e,{blockCount:0,interval:1}).interval}return l}function hi({series:e,options:t,categories:i}){var s,n;return!!e.bar||!!e.radialBar||!!e.gauge&&Array.isArray(i)&&!i.length||!!e.bullet&&!(null===(n=null===(s=t)||void 0===s?void 0:s.series)||void 0===n?void 0:n.vertical)}function ui(e){return!!(e.column||e.bar||e.boxPlot||e.bullet)}function pi(e){return!!e.radar||!!e.radialBar||!!e.gauge}function mi(e,t){return pi(t)?function(e){return{valueAxisName:e?"circularAxis":"verticalAxis",labelAxisName:e?"verticalAxis":"circularAxis"}}(e):{valueAxisName:e?"xAxis":"yAxis",labelAxisName:e?"yAxis":"xAxis"}}function gi(e){return{valueSizeKey:e?"width":"height",labelSizeKey:e?"height":"width"}}function vi(e){const t=e.map(e=>Number(e));return{min:Math.min(...t),max:Math.max(...t)}}function fi(e){var t;return Array.isArray(null===(t=e)||void 0===t?void 0:t.yAxis)&&2===e.yAxis.length}function bi(e){var t;const i=fi(e);return{yAxis:i?e.yAxis[0]:null===(t=e)||void 0===t?void 0:t.yAxis,secondaryYAxis:i?e.yAxis[1]:null}}function xi(e,t,i){var s;const{secondaryYAxis:n}=bi(e);return(null===(s=n)||void 0===s?void 0:s.chartType)===t?"secondaryYAxis":i}function yi(e,t){if(D([Wt.X,Wt.CIRCULAR,Wt.VERTICAL],t))return[t];const i=e,{yAxis:s,secondaryYAxis:n}=bi(i);return n?[s.chartType,n.chartType].map((e,s)=>e?xi(i,e,t):["yAxis","secondaryYAxis"][s]):[t]}function Si(e,t){const{xAxis:i,yAxis:s,circularAxis:n}=e;let o;return o=t===Wt.X?i:Array.isArray(s)?t===Wt.Y?s[0]:s[1]:t===oi.CIRCULAR?n:s,o}function wi(e,t,i){let s=0;return Yt.every(n=>{const o=function(e,t,i){return 2*(Ht(e,t/2)+Ht(90-e,i/2))}(n,t,i);return s=n,o>e}),e<t?s:0}function Mi(e,t,i){var s,n;const o=e[i],a=t[i];return!(!o&&!a)&&(null===(s=o)||void 0===s?void 0:s.maxLabelWidth)!==(null===(n=a)||void 0===n?void 0:n.maxLabelWidth)}function Oi(e,t){return function(e,t){return Mi(e,t,"yAxis")||Mi(e,t,"secondaryYAxis")}(e,t)||function(e,t){const{maxHeight:i}=e.xAxis,{maxHeight:s}=t.xAxis;return i!==s}(e,t)}function Ai(e){var t,i,s,n;return null==(n=null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.rotatable)||n}function ki(e,t){var i,s,n,o;const{labels:a,pointOnColumn:r,labelDistance:l,tickDistance:d,labelInterval:c,tickInterval:h,tickCount:u,scale:p}=e;let m=t,g=0,v=0;if(p){const e=null!=(s=null===(i=p)||void 0===i?void 0:i.sizeRatio)?s:1,a=null!=(o=null===(n=p)||void 0===n?void 0:n.positionRatio)?o:0;m=t*e,g=t*a}else{const e=c===h?c:1;v=r?(null!=l?l:d*e)/2:0}const f=kt(m,u,g);return a.reduce((e,i,s)=>{const n=f[s]+v;return!(s%c)&&n<=t?[...e,{offsetPos:n,text:i}]:e},[])}function Ci(e){if(x(e))return e;const t={text:"",offsetX:0,offsetY:0};return M(e)?Object.assign(Object.assign({},t),{text:e}):Object.assign(Object.assign({},t),e)}function Ti(e,t){var i,s,n;return null!=(n=null===(s=null===(i=Object.assign(Object.assign({},bi(e)),{xAxis:e.xAxis})[t])||void 0===i?void 0:i.label)||void 0===s?void 0:s.formatter)?n:e=>e}function Di(e,t,i,s){var n,o;const a=function(e){if(e)return A(e)?e.format:"YY-MM-DD hh:mm:ss"}(null===(o=null===(n=t)||void 0===n?void 0:n[s])||void 0===o?void 0:o.date),r=i&&a?e.map(e=>_t(a,new Date(e))):e,l=Ti(t,s);return r.map((t,i)=>l(t,{index:i,labels:e,axisName:s}))}function Ri(e,t,i,s){const n=wi(i,e,t);return s&&0!==n?{needRotateLabel:n>0,radian:Ze(n,0),rotationHeight:Xt(n,e,t)}:{needRotateLabel:!1,radian:0,rotationHeight:t}}function ji(e,t,i=Ne){const s=e.reduce((e,t)=>e.length>t.length?e:t,"");return{maxLabelWidth:vt(s,i)+t,maxLabelHeight:ft(s,i)}}function Bi(e,t){var i,s,n,o;if("xAxis"===e)return 0;const a=bi(t);return Math.abs(null!=(o=null===(n=null===(s=null===(i=a)||void 0===i?void 0:i[e])||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin)?o:0)}function Li(e,t){var i,s,n,o,a,r;const{axis:l,categories:d,layout:c,isCoordinateTypeChart:h}=t,u=null===(s=null===(i=l)||void 0===i?void 0:i.tick)||void 0===s?void 0:s.interval,p=null===(o=null===(n=l)||void 0===n?void 0:n.label)||void 0===o?void 0:o.interval,m=w(u)||w(p),g=e&&!w(null===(r=null===(a=l)||void 0===a?void 0:a.scale)||void 0===r?void 0:r.stepSize)&&!t.shift&&!m&&!h,v=g?function(e,t){if(!e||!t)return 1;const{width:i}=t.xAxis;return ci(e.length,i,e)}(d,c):1;return{tickInterval:null!=u?u:v,labelInterval:null!=p?p:g?v:1}}function Pi(e,t,i=0,s=0,n=!1){var o;const a=t.width/2;if(n){const{startAngle:n,endAngle:r,clockwise:l}=function(e){var t,i,s,n,o,a,r,l;const d=null==(i=null===(t=e)||void 0===t?void 0:t.clockwise)||i;return{clockwise:d,startAngle:(o=null===(n=null===(s=e)||void 0===s?void 0:s.angleRange)||void 0===n?void 0:n.start,null!=o?o:d?0:Ue),endAngle:(l=null===(r=null===(a=e)||void 0===a?void 0:a.angleRange)||void 0===r?void 0:r.end,null!=l?l:d?Ue:0)}}(null===(o=e)||void 0===o?void 0:o.series),d=Zt(l,n,r);return{isSemiCircular:d,axisSize:tt(t,d,i,s),centerX:a,centerY:d?Jt(t.height,l):t.height/2,totalAngle:Kt(l,n,r),drawingStartAngle:n,clockwise:l,startAngle:n,endAngle:r}}return{isSemiCircular:!1,axisSize:tt(t,!1,i,s),centerX:a,centerY:t.height/2,totalAngle:Ue,drawingStartAngle:0,clockwise:!0,startAngle:0,endAngle:Ue}}function Ei(e,t){var i;return!!(null===(i=e[t])||void 0===i?void 0:i.date)}function Wi(e){return w(e)?e:Array.isArray(e)?e[1]:e.y}function zi(e){return Array.isArray(e)?e[0]:e.x}function Ii(e,t,i,s){if(w(e))return i-s;const n=zi(e);let o=t.findIndex(e=>e===String(n));return-1===o&&function(e,t){const i=H(t);return!!i&&(w(e)?e>=Number(i):new Date(e)>=new Date(i))}(n,t)&&(o=t.length),o}function Yi(e){return function(e){var t;if(!e.line)return!1;const i=G(null===(t=e.line[0])||void 0===t?void 0:t.data);return i&&(Array.isArray(i)||A(i))}(e)||!!e.scatter||!!e.bubble}function Hi(e){var t,i;const s=!!B(e,["series","diverging"]),n="center"===(null===(i=null===(t=e)||void 0===t?void 0:t.yAxis)||void 0===i?void 0:i.align);return s&&n}function Ni(e){const{axisSize:t,categories:i,series:s,options:n,theme:o,scale:a,initialAxisData:r,isCoordinateTypeChart:l,axisName:d}=e,c=function(e,t){var i;return!!ui(e)||!(!e.line&&!e.area)&&Boolean(null===(i=t.xAxis)||void 0===i?void 0:i.pointOnColumn)}(s,n),h=Ei(n,d),u=l?At(a.limit,a.stepSize,h):i,p=Di(u,n,h,d);let m;if(a){const e=(c?u:i).map(e=>Number(h?new Date(e):e));m={min:Math.min(...e),max:Math.max(...e)}}const g=i.length,v=g-(c?0:1),f=v?t/v:t,b=t/(p.length-(c?0:1));let x=p.length;c&&!l&&(x+=1);const y=ki(Object.assign({labels:p,pointOnColumn:c,tickDistance:f,tickCount:x,scale:a},r),t),S=Bi(d,n);return Object.assign(Object.assign({labels:p,viewLabels:y,pointOnColumn:c,labelDistance:b,tickDistance:f,tickCount:x,labelRange:m,rectResponderCount:g,isLabelAxis:!0},r),ji(p,S,Pe(o.label)))}function Xi(e){var t;const{scale:i,axisSize:s,series:n,options:o,centerYAxis:a,initialAxisData:r,theme:l,labelOnYAxis:d,axisName:c}=e,{limit:h,stepSize:u}=i,p=a?null===(t=a)||void 0===t?void 0:t.xAxisHalfSize:s,m=function(e,t){var i;return ui(e)&&!!(null===(i=t.series)||void 0===i?void 0:i.diverging)}(n,o),g=Ti(o,c),v=function(e,t,i,s){const{min:n,max:o}=e;if(!(n<=0&&o>=0)||s)return null;const a=(0-n)/(o-n)*t;return i?a:t-a}(h,s,hi({series:n,options:o}),m);let f=At(h,u);!a&&m&&(f=function(e){return F(e)?e.reverse().slice(1).concat(e):e.slice(1).reverse().concat(e)}(f));const b=f.map((e,t)=>g(e,{index:t,labels:f,axisName:c})),x=p/Math.max(f.length,1),y=f.length,S=ki(Object.assign({labels:d?b:[...b].reverse(),pointOnColumn:!1,tickDistance:x,tickCount:y},r),p),M=Bi(c,o),O=Object.assign(Object.assign({labels:b,viewLabels:S,pointOnColumn:!1,isLabelAxis:!1,tickCount:y,tickDistance:x},r),ji(b,M,Pe(l.label)));return w(v)&&(O.zeroPosition=v),O}function Fi(e,t){var i,s;const n=Li(e,t),o=Ci(null===(s=null===(i=t)||void 0===i?void 0:i.axis)||void 0===s?void 0:s.title);return o&&(n.title=o),n}function Gi({axisData:e,axisSize:t,centerYAxis:i,rotatable:s,labelMargin:n=0}){const{viewLabels:o,pointOnColumn:a,maxLabelWidth:r,maxLabelHeight:l}=e,d=xt(l)+n,c=Ri(r,l,(i?i.xAxisHalfSize:t)/(o.length-(a?0:1)),s),{needRotateLabel:h,rotationHeight:u}=c,p=(h?u:l)+d;return Object.assign(Object.assign(Object.assign({},e),c),{maxHeight:p,offsetY:d})}var $i={name:"axes",state:({series:e,options:t})=>{const{secondaryYAxis:i}=bi(t),s={xAxis:{},yAxis:{}};return e.bar&&Hi(t)&&(s.centerYAxis={}),i&&(s.secondaryYAxis={}),{axes:s}},action:{setAxesData({state:e,initStoreState:t}){var i,s;const{scale:n,options:o,series:a,layout:r,theme:l}=e,{xAxis:d,yAxis:c,plot:h}=r,u=Yi(t.series),p=hi({series:a,options:o}),{categories:m}=function(e,t){var i,s;return{categories:(i=e,null!=i?i:[]),rawCategories:(s=t,null!=s?s:[])}}(e.categories,e.rawCategories),{valueAxisName:g,valueAxisSize:v,labelAxisName:f,labelAxisSize:b}=function(e,t,i){const{valueAxisName:s,labelAxisName:n}=mi(e,i),{valueSizeKey:o,labelSizeKey:a}=gi(e);return{valueAxisName:s,valueAxisSize:t[o],labelAxisName:n,labelAxisSize:t[a]}}(p,h,a),x=e.axes.centerYAxis,y=function(e,t,i,s,n){var o,a,r;const{yAxis:l,secondaryYAxis:d}=bi(e),c=null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.shift;return{xAxis:Fi(!t,{categories:i,axis:null===(r=e)||void 0===r?void 0:r.xAxis,layout:s,shift:c,isCoordinateTypeChart:n}),yAxis:Fi(t,{axis:l}),secondaryYAxis:d?Fi(t,{axis:d}):null}}(o,p,m,r,u),S=Xi({scale:n[g],axisSize:v,options:o,series:a,theme:Si(l,g),centerYAxis:x?{xAxisHalfSize:(d.width-c.width)/2}:null,initialAxisData:y[g],labelOnYAxis:p,axisName:g}),w=Ni({scale:n[f],axisSize:b,categories:m,options:o,series:a,theme:Si(l,f),initialAxisData:y[f],isCoordinateTypeChart:u,labelOnYAxis:p,axisName:f});let M,O;if(e.axes.secondaryYAxis&&(M=function({state:e,labelOnYAxis:t,valueAxisSize:i,labelAxisSize:s,initialAxisData:n,isCoordinateTypeChart:o}){var a,r;const{scale:l,options:d,series:c,theme:h}=e,u=e.categories;return t?Ni({scale:l.secondaryYAxis,axisSize:s,categories:(r=null===(a=bi(d).secondaryYAxis)||void 0===a?void 0:a.categories,null!=r?r:u),options:d,series:c,theme:Si(h,Wt.SECONDARY_Y),initialAxisData:n,isCoordinateTypeChart:o,axisName:Wt.SECONDARY_Y}):Xi({scale:l.secondaryYAxis,axisSize:i,options:d,series:c,theme:Si(h,Wt.SECONDARY_Y),centerYAxis:null,initialAxisData:n,axisName:Wt.SECONDARY_Y})}({state:e,labelOnYAxis:p,valueAxisSize:v,labelAxisSize:b,labelAxisName:f,valueAxisName:g,initialAxisData:y.secondaryYAxis,isCoordinateTypeChart:u})),x){const e=(d.width-c.width)/2;O=P(S,{x:d.x+e,xAxisHalfSize:e,secondStartX:(d.width+c.width)/2,yAxisLabelAnchorPoint:c.width/2,yAxisHeight:c.height})}const A={xAxis:Gi({axisData:p?S:w,axisSize:p?v:b,centerYAxis:O,rotatable:Ai(o),labelMargin:null===(s=null===(i=o.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.margin}),yAxis:p?w:S,secondaryYAxis:M,centerYAxis:O};Oi(e.axes,A)&&this.notify(e,"layout"),e.axes=A}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}};const Vi={xls:"data:application/vnd.ms-excel;base64,",csv:"data:text/csv;charset=utf-8,%EF%BB%BF"};function _i(e,t,i,s){const n=function(e){return"jpeg"===e||"png"===e}(t)?function(e){const t=e.substr(0,e.indexOf(";base64,")).substr(e.indexOf(":")+1),i=atob(e.substr(e.indexOf(",")+1)),s=[];for(let e=0;e<i.length;e+=1024){const t=i.slice(e,e+1024),n=new Array(t.length);for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);s.push(new window.Uint8Array(n))}try{return new Blob(s,{type:t})}catch(e){return new Blob(s.map(e=>e.buffer),{type:t})}}(i):new Blob([i],{type:s});window.navigator.msSaveOrOpenBlob(n,`${e}.${t}`)}function Ui(e,t,i){if(i){const s=document.createElement("a");s.href=i,s.target="_blank",s.download=`${e}.${t}`,document.body.appendChild(s),s.click(),s.remove()}}function qi(...e){return((e,...t)=>e.reduce((e,i,s)=>e+t[s-1]+i))(...e).replace(/\n\s*/g,"")}function Ki(e,t){return e.reduce((e,i,s)=>{var n,o;return!s||e<(null===(o=null===(n=i)||void 0===n?void 0:n[t])||void 0===o?void 0:o.length)?i[t].length:e},0)}function Zi(e){const{series:t}=e,i=[["Label","Data"]];return t.treemap.data.forEach(e=>{!function e({label:t,data:i,children:s=[]},n){return i&&n.push([t,i]),s.forEach(t=>e(t,n)),n}(e,i)}),i}function Ji(e){const{series:t}=e,i=e.categories;return Object.keys(t).reduce((e,s)=>[...e,...t[s].map(({name:e,data:t})=>[e,...!w(t[0])&&D(["line","area","scatter"],s)?function(e,t,i){return t.map((t,s)=>{if("area"===e&&Array.isArray(i[s]))return i[s].join();const n=i.find(e=>t===String(zi(e)));return n?Wi(n):""})}(s,i,t):t.map(e=>Array.isArray(e)?e.join():e)])],t.gauge?[]:[["",...i]])}function Qi(e){let t;const{series:i}=e;return t=i.bullet?function({series:e}){const t=e.bullet.data,i=Ki(t,"markers"),s=T(0,Ki(t,"ranges")).map(e=>"Range "+(e+1)),n=T(0,i).map(e=>"Marker "+(e+1));return t.reduce((e,{data:t,markers:i,name:o,ranges:a})=>[...e,[o,null!=t?t:"",...s.map((e,t)=>{var i;const s=null===(i=a)||void 0===i?void 0:i[t];return s?`${s[0]} ~ ${s[1]}`:""}),...n.map((e,t)=>{var s,n;return null!=(n=null===(s=i)||void 0===s?void 0:s[t])?n:""})]],[["","Actual",...s,...n]])}(e):i.heatmap?function({categories:e,series:t}){const i=e.x;return t.heatmap.data.reduce((e,{data:t,yCategory:i})=>[...e,[i,...t.map(e=>y(e)?"":e)]],[["",...i]])}(e):i.bubble?function(e){const{series:t}=e;return t.bubble.data.reduce((e,{name:t,data:i})=>[...e,...i.map(e=>y(e)?[]:[t,e.label,String(e.x),e.y,e.r])],[["Name","Label","X","Y","Radius"]])}(e):i.boxPlot?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.boxPlot.data.reduce((e,{name:t,data:i,outliers:s})=>[...e,[t,...(null!=i?i:[]).map((e,t)=>{var i;const n=null===(i=(null!=s?s:[]).find(e=>e[0]===t))||void 0===i?void 0:i[1];return(n?[...e,n]:[...e]).join()})]],[["",...s]])}(e):i.pie?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.pie.data.reduce((e,{name:t,data:i})=>[...e,...Array.isArray(i)?(null!=i?i:[]).reduce((e,t)=>{var i;return[...e,[t.name,(i=t.data,null!=i?i:"")]]},[]):[[t,null!=i?i:""]]],s.length?[["",...s]]:[])}(e):i.treemap?Zi(e):Ji(e),t}function es(e,t,i,s){const n=function(){let e;const t=!x(document.createElement("a").download);return!x(window.Blob&&window.navigator.msSaveOrOpenBlob)?e=_i:t&&(e=Ui),e}();M(i)&&n&&n(e,t,i,s)}function ts(e,t,i){const s=Qi(i),n=Vi[t].replace(/(data:|;base64,|,%EF%BB%BF)/g,"");let o="";o="csv"===t?function(e,t={}){const{lineDelimiter:i="\n",itemDelimiter:s=","}=t,n=e.length-1;let o="";return e.forEach((e,t)=>{const a=e.length-1;e.forEach((e,t)=>{const i=w(e)?e:`"${e}"`;o+=i,t<a&&(o+=s)}),t<n&&(o+=i)}),o}(s):function(e){return qi`<html xmlns:o="urn:schemas-microsoft-com:office:office"
        xmlns:x="urn:schemas-microsoft-com:office:excel"
        xmlns="http://www.w3.org/TR/REC-html40">
        <head>
            <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>Ark1</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                        </x:ExcelWorkbook>
                </xml>
            <![endif]-->
            <meta name=ProgId content=Excel.Sheet>
            <meta charset=UTF-8>
        </head>
        <body>
            ${function(e){let t="<table>";return e.forEach((e,i)=>{const s=0===i?"th":"td";t+="<tr>",e.forEach((e,n)=>{t+=`<${s}${0!==i||0===n?' class="number"':""}>${e}</${s}>`}),t+="</tr>"}),t+="</table>",t}(e)}
        </body>
        </html>`}(s),function(){const e=!x(document.createElement("a").download);return!!x(window.Blob&&window.navigator.msSaveOrOpenBlob)&&e}()&&("csv"!==t&&(o=window.btoa(unescape(encodeURIComponent(o)))),o=Vi[t]+o),es(e,t,o,n)}class is extends Et{constructor(){super(...arguments),this.models={exportMenuButton:[]},this.opened=!1,this.chartWidth=0,this.toggleExportMenu=()=>{this.opened=!this.opened,this.models.exportMenuButton[0].opened=this.opened,this.eventBus.emit("needDraw"),this.opened?(this.applyPanelWrapperStyle(),this.chartEl.appendChild(this.exportMenuEl)):this.chartEl.removeChild(this.exportMenuEl)},this.getCanvasExportBtnRemoved=()=>{const e=this.chartEl.getElementsByTagName("canvas")[0],t=e.getContext("2d"),{x:i,y:s,height:n,width:o}=this.rect;return["#fff",this.chartBackgroundColor].forEach(e=>{t.fillStyle=e,t.fillRect(i,s,o,n)}),e},this.onClickExportButton=e=>{const{id:t}=e.target;if("png"===t||"jpeg"===t){const e=this.getCanvasExportBtnRemoved();es(this.fileName,t,e.toDataURL("image/"+t,1))}else ts(this.fileName,t,this.data);this.toggleExportMenu()}}applyExportButtonPanelStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu-title"),t=this.exportMenuEl.querySelector(".toastui-chart-export-menu-btn-wrapper");e.setAttribute("style",this.makePanelStyle("header")),t.setAttribute("style",this.makePanelStyle("body"))}makeExportMenuButton(){const e=document.createElement("div");return e.onclick=this.onClickExportButton,e.innerHTML='\n        <div class="toastui-chart-export-menu">\n          <p class="toastui-chart-export-menu-title">Export to</p>\n          <div class="toastui-chart-export-menu-btn-wrapper">\n            <button class="toastui-chart-export-menu-btn" id="xls">xls</button>\n            <button class="toastui-chart-export-menu-btn" id="csv">csv</button>\n            <button class="toastui-chart-export-menu-btn" id="png">png</button>\n            <button class="toastui-chart-export-menu-btn" id="jpeg">jpeg</button>\n          </div>\n        </div>\n      ',e}initialize({chartEl:e}){this.chartEl=e,this.type="exportMenu",this.name="exportMenu",this.exportMenuEl=this.makeExportMenuButton()}onClick({responders:e}){e.length&&this.toggleExportMenu()}getFileName(e){var t,i;return M(e)?e:null!=(i=null===(t=e)||void 0===t?void 0:t.text)?i:"toast-ui-chart"}render({options:e,layout:t,chart:i,series:s,rawCategories:n,theme:o}){var a,r;this.isShow=Ss(e),this.chartWidth=i.width,this.isShow&&(this.chartBackgroundColor=o.chart.backgroundColor,this.theme=o.exportMenu,this.data={series:s,categories:n},this.fileName=this.getFileName((null===(r=null===(a=e)||void 0===a?void 0:a.exportMenu)||void 0===r?void 0:r.filename)||i.title),this.applyExportButtonPanelStyle(),this.rect=t.exportMenu,this.models.exportMenuButton=[{type:"exportMenuButton",x:0,y:0,opened:this.opened,theme:this.theme.button}],this.responders=[{type:"rect",width:24,height:24,x:0,y:0}])}applyPanelWrapperStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu"),t=this.chartWidth-140-us.X,i=us.Y+24+5,{borderRadius:s,borderWidth:n,borderColor:o}=this.theme.panel,a=`\n      transform: ${Le(t,i)};\n      border: ${n}px solid ${o};\n      border-radius: ${s}px;`;e.setAttribute("style",a)}makePanelStyle(e){const t=this.theme.panel[e],i="header"===e?"top":"bottom",{borderRadius:s,borderWidth:n}=this.theme.panel,o=s-n+"px";return[""+Ee(t),`border-${i}-left-radius: ${o};`,`border-${i}-right-radius: ${o};`,`background-color: ${t.backgroundColor};`].join("")}}function ss(e,t){var i;const{x:s,y:n,text:o,textAlign:a,textBaseline:r,opacity:l,callout:d,theme:c,radian:h}=t,{color:u,textBubble:p}=c,m={textAlign:a,textBaseline:r,font:We(c),fillStyle:u},g=function(e){const{textStrokeColor:t}=e,i=R(e,"lineWidth","shadowColor","shadowBlur");t&&(i.strokeStyle=t);return i}(c);if(d){const{theme:{lineWidth:t,lineColor:i}}=d;ct(e,Object.assign(Object.assign({type:"line"},R(d,"x","y","x2","y2")),{strokeStyle:i,lineWidth:t}))}(null===(i=p)||void 0===i?void 0:i.visible)?ns(e,t):Ge(e,{type:"label",x:s,y:n,text:o,style:[m],stroke:[g],opacity:l,radian:h})}function ns(e,t){const{text:i,theme:s,radian:n=0}=t,{color:o,textStrokeColor:a}=s,r=We(s),l=function(e){const{text:t,theme:i,textAlign:s,textBaseline:n}=e,o=We(i),{arrow:a,paddingX:r,paddingY:l,borderRadius:d,borderColor:c,borderWidth:h,backgroundColor:u,shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}=i.textBubble,f=vt(t,o)+2*r,b=ft(t,o)+2*l;let{x:x,y:y}=e;"center"===s?x-=f/2:D(["right","end"],s)&&(x-=f);"middle"===n?y-=b/2:"bottom"===n&&(y-=b);const S={x:x,y:y,width:f,height:b};return Object.assign(Object.assign(Object.assign({},S),{radius:d,lineWidth:h,fill:u,strokeStyle:c,style:[{shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}]}),function(e,t,i,s){var n,o;if(!(null===(n=s)||void 0===n?void 0:n.visible))return null;const a=s.height,{width:r,height:l}=e,d=null!==(o=s.direction)&&void 0!==o?o:function(e,t){let i="top";"center"===e&&"top"===t?i="top":"center"===e&&"bottom"===t?i="bottom":"middle"===t&&"right"===e?i="right":"middle"===t&&"left"===e&&(i="left");return i}(t,i);let{x:c,y:h}=e,{x:u,y:p}=e;"top"===d?h+=a:"bottom"===d?(h-=a,p+=l):"right"===d?(c-=a,u+=r):"left"===d&&(c+=a);"center"===t?u=e.x+r/2:"middle"===i&&(p=e.y+l/2);return{direction:d,points:os(d,{x:u,y:p},s),x:c,y:h}}(S,s,n,a))}(t),{x:d,y:c,width:h,height:u}=l;Ve(e,{type:"bubbleLabel",radian:n,rotationPosition:{x:t.x,y:t.y},bubble:l,label:{x:d+h/2,y:c+u/2,text:i,style:[{font:r,fillStyle:o,textAlign:"center",textBaseline:"middle"}],strokeStyle:a}})}function os(e,{x:t,y:i},s){const n=s.width,o=s.height;let a=[];return"top"===e?a=[{x:t-n/2,y:i+o},{x:t,y:i},{x:t+n/2,y:i+o}]:"bottom"===e?a=[{x:t+n/2,y:i-o},{x:t,y:i},{x:t-n/2,y:i-o}]:"right"===e?a=[{x:t-o,y:i-n/2},{x:t,y:i},{x:t-o,y:i+n/2}]:"left"===e&&(a=[{x:t+o,y:i+n/2},{x:t,y:i},{x:t+o,y:i-n/2}]),a}const as=12,rs={HEIGHT:6,PADDING:5},ls={HEIGHT:28,POINT_WIDTH:8,POINT_HEIGHT:6,PADDING:6};function ds(e,t,i){const{HEIGHT:s}=rs;return{barWidth:i?e:s,barHeight:i?s:t-as}}function cs(e,t){const i=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e;let a,r;return"top"===t?(a=i,r=s):"bottom"===t?(a=i,r=s+ls.HEIGHT+rs.HEIGHT+rs.PADDING):"left"===t?(a=i+Bt(n),r=s):(a=i+o-Bt(n)-us.X,r=s),{x:a,y:r}}(t),s=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e,{PADDING:a}=rs;let r,l;return"top"===t?(r=i,l=s+as+a):"bottom"===t?(r=i,l=s+ls.HEIGHT):"left"===t?(r=i+Bt(n)+a,l=s+as/2):(r=i+o-(Bt(n)+us.X+2*a+rs.HEIGHT),l=s+as/2),{x:r,y:l}}(t);!function(e,t){const{labels:i,align:s,x:n,y:o,width:a,height:r,verticalAlign:l}=t,{barWidth:d,barHeight:c}=ds(a,r,l),h=i.length-1,u={left:{textAlign:"right",textBaseline:"top"},right:{textAlign:"left",textBaseline:"top"},top:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"}};i.forEach((t,i)=>{Ge(e,{type:"label",x:l?n+d/h*i:n,y:l?o:o+c/h*i,text:t,style:["default",u[s]]})})}(e,Object.assign(Object.assign({},t),i)),function(e,t){const{width:i,height:s,startColor:n,endColor:o,x:a,y:r,verticalAlign:l}=t,{barWidth:d,barHeight:c}=ds(i,s,l),h=l?e.createLinearGradient(a,r,a+d,r):e.createLinearGradient(a,r,a,r+c);h.addColorStop(0,n),h.addColorStop(1,o),e.fillStyle=h,e.fillRect(a,r,d,c)}(e,Object.assign(Object.assign({},t),s))}function hs(e,t){const{x:i,y:s}=function(e){const{align:t,colorRatio:i,width:s,height:n,x:o,y:a,labels:r,verticalAlign:l}=e,{barWidth:d,barHeight:c}=ds(s,n,l),{PADDING:h,HEIGHT:u}=rs;return"top"===t?{x:o+d*i,y:a+as+u+2*h}:"bottom"===t?{x:o+d*i,y:a+as+2*h}:"left"===t?{x:o+Bt(r)+u+2*h,y:a+c*i+h}:"right"===t?{x:o+s-(Bt(r)+us.X+3*h+u),y:a+c*i+h}:void 0}(t),{PADDING:n,POINT_HEIGHT:o,POINT_WIDTH:a}=ls,{align:r,text:l,color:d}=t,c=vt(l)+2*n,h=as+2*n,u=r;let p=i,m=s;"top"===r?m+=o:"right"===r?(p-=c/2+o,m-=h/2):"left"===r?(p+=c/2+o,m-=h/2):"bottom"===r&&(m-=h+o);Ve(e,{type:"bubbleLabel",bubble:{x:p-c/2,y:m,width:c,height:h,points:os(r,{x:i,y:s},{visible:!0,width:a,height:o}),direction:u,fill:d},label:{text:l,x:p,y:m+h/2,style:[{font:"normal 11px Arial",fillStyle:"#333333",textAlign:"center",textBaseline:"middle"}]}})}const us={X:10,Y:15};function ps(e){return"top"===e||"bottom"===e}function ms(e,t,i){var s,n,o,a;return{height:(n=null===(s=e)||void 0===s?void 0:s.height,null!=n?n:i),width:(a=null===(o=e)||void 0===o?void 0:o.width,null!=a?a:t)}}function gs(e){const{yAxisTitle:t,isRightSide:i,visibleSecondaryYAxis:s}=e,n=vs(e);return i&&s?Math.max(t.x+t.width-n,0):t.x}function vs({maxLabelWidth:e,size:t,isRightSide:i}){var s,n,o;return null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s[i?"secondaryYAxis":"yAxis"])||void 0===n?void 0:n.width)?o:e}function fs(e){var t,i;const{size:s,isRightSide:n=!1}=e,o=function(e){const{chartSize:t,legend:i,circleLegend:s,hasCenterYAxis:n,maxLabelWidth:o}=e,{width:a}=t,{align:r}=i;let l=vs(e),d=gs(e);return n&&(l=o+2*(pt+us.X),d=(a-i.width-l+2*us.X)/2),i.visible&&"left"===r&&(d=gs(e)),s.visible&&"left"===r&&(d=Math.max(s.width+us.X,d)),d}(e),a=function({yAxisTitle:e}){return e.y+e.height}(e),r=function(e){const{hasCenterYAxis:t,hasXYAxis:i,maxLabelWidth:s,visibleSecondaryYAxis:n=!1,isRightSide:o=!1}=e;let a=vs(e);return t&&!o?a=s+2*(pt+us.X):(!i||o&&!n)&&(a=0),a}(e),l=function({chartSize:e,legend:t,yAxisTitle:i,hasXYAxis:s,size:n,xAxisTitleHeight:o}){var a,r,l,d;const{height:c}=e,{align:h,height:u}=t,p=function(e){var t;return(null===(t=e.xAxis)||void 0===t?void 0:t.height)&&!e.yAxis?e.xAxis.height:20}(n),m=i.y+i.height;let g=c-m-p-o;if(s||(g=c-m),t.visible){const e=Math.max(m,u);"top"===h?g=c-e-(s?20+o:0):"bottom"===h&&(g=c-m-20-o-u)}return!(null===(r=null===(a=n)||void 0===a?void 0:a.yAxis)||void 0===r?void 0:r.height)&&(null===(d=null===(l=n)||void 0===l?void 0:l.plot)||void 0===d?void 0:d.height)&&(g=n.plot.height),g}(e);return Object.assign({x:o,y:a},ms(n?null===(t=s)||void 0===t?void 0:t.secondaryYAxis:null===(i=s)||void 0===i?void 0:i.yAxis,r,l))}function bs(e){var t;const{hasXYAxis:i,hasCenterYAxis:s,yAxis:n,size:o,xAxisData:a}=e,r=s?2*us.X:n.x+n.width,l=n.y+n.height,d=function({chartSize:e,yAxis:t,hasCenterYAxis:i,legend:s,circleLegend:n,secondaryYAxis:o,xAxisData:a}){var r;const{width:l}=e,{align:d,width:c}=s,h=ps(d);let u;return h?(u=l-(t.x+t.width+us.X),n.visible&&(u-=n.width)):u=l-(t.width+Math.max(c,n.visible?n.width:0)),i&&(u=l-(h?0:c)-2*us.X),o.width&&(u-=o.width),(null===(r=a)||void 0===r?void 0:r.maxLabelWidth)&&(u-=.5*a.maxLabelWidth),u}(e),c=function(e,t=!1){var i,s;return t?null!=(s=null===(i=e)||void 0===i?void 0:i.maxHeight)?s:20:0}(a,i);return Object.assign({x:r,y:l},ms(null===(t=o)||void 0===t?void 0:t.xAxis,d,c))}function xs({chartSize:e,visible:t,title:i,legend:{align:s,width:n,height:o,visible:a,useSpectrumLegend:r},hasCenterYAxis:l,visibleSecondaryYAxis:d,isRightSide:c=!1,yAxisTitleHeight:h}){const u=t?h+5:0,p=ps(s),m=(e.width-(p?2*us.X:n))/(d?2:1),g={x:c?i.x+m:i.x,y:i.y+i.height};return a&&("left"===s?g.x+=n:"top"===s&&(g.y+=function(e,t){return e?as+2*rs.PADDING+ls.POINT_HEIGHT+ls.HEIGHT+us.Y:t+us.Y}(r,o))),l&&(g.x=(m+2*us.X)/2),Object.assign({height:u,width:m},g)}function ys(e){var t;return!!(null===(t=e.series)||void 0===t?void 0:t.zoomable)}function Ss(e){var t;const i=null===(t=e.exportMenu)||void 0===t?void 0:t.visible;return!!x(i)||i}function ws(e){return e?e+us.X:40}function Ms(e){return!e||x(e.width)&&x(e.height)?null:R(e,"width","height")}function Os(e,t,i){const s=e[i],n=t[i];if(w(s)&&w(n))return Math.max(s,n)}function As(e,t=0){return(Array.isArray(e)?Math.max(e[0].title.fontSize,e[1].title.fontSize):e.title.fontSize)+t}var ks={name:"layout",state:()=>({layout:{}}),action:{setLayout({state:e}){var t,i,s,n,o,a,r,l,d,c,h,u,p,m,g,v,f;const{legend:b,theme:x,circleLegend:y,series:S,options:w,chart:M,axes:O,radialAxes:A}=e,{width:k,height:C}=M,T={height:C-2*us.Y,width:k-2*us.X},D=!!S.bar&&Hi(w),R=function(e){return!(e.pie||e.radar||e.treemap||e.radialBar||e.gauge)}(S),j=function(e){const t=Ms(e.xAxis),i=bi(e),s=Ms(i.yAxis),n=Ms(i.secondaryYAxis),o=Ms(e.plot);return o&&(t&&(t.width=o.width=Os(t,o,"width")),s&&(s.height=o.height=Os(s,o,"height")),n&&(n.height=o.height=Os(n,o,"height"))),{xAxis:t,yAxis:s,plot:o,secondaryYAxis:n}}(w),{yAxis:B,secondaryYAxis:L}=function(e,t){return t?bi(e):{yAxis:null,secondaryYAxis:null}}(w,R),P=!!L,E=x.title.fontSize,W=null!=(n=As(x.yAxis,null===(s=null===(i=null===(t=O)||void 0===t?void 0:t.yAxis)||void 0===i?void 0:i.title)||void 0===s?void 0:s.offsetY))?n:0,z=null!=(l=As(x.xAxis,null===(r=null===(a=null===(o=O)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.title)||void 0===r?void 0:r.offsetY))?l:0,I=function(e,t){return{x:t?us.X+e.width-24:us.X+e.width,y:us.Y,height:t?29:0,width:t?24:0}}(T,Ss(w)),Y=function(e,t){return{x:t?e.x-24-us.X:0,y:t?e.y:0,height:t?29:0,width:t?24:0}}(I,ys(w)),H=function(e,t,i,s){const n={x:us.X,y:us.Y},o=i?e.width-t.width:0,a=i?Math.max(s+5,t.height):t.height;return Object.assign({width:o,height:a},n)}(T,I.height?I:Y,!!(null===(d=w.chart)||void 0===d?void 0:d.title),E),N=!!(null===(c=B)||void 0===c?void 0:c.title)||!!(null===(h=L)||void 0===h?void 0:h.title),X=xs({chartSize:T,visible:N,title:H,legend:b,hasCenterYAxis:D,visibleSecondaryYAxis:P,yAxisTitleHeight:W}),F=fs({chartSize:T,legend:b,circleLegend:y,yAxisTitle:X,hasCenterYAxis:D,hasXYAxis:R,maxLabelWidth:ws(null===(u=O)||void 0===u?void 0:u.yAxis.maxLabelWidth),size:j,xAxisTitleHeight:z}),G=xs({chartSize:T,visible:N,title:H,legend:b,hasCenterYAxis:D,isRightSide:!0,visibleSecondaryYAxis:P,yAxisTitleHeight:W}),$=fs({chartSize:T,legend:b,circleLegend:y,yAxisTitle:G,hasCenterYAxis:D,hasXYAxis:R,maxLabelWidth:ws(null===(m=null===(p=O)||void 0===p?void 0:p.secondaryYAxis)||void 0===m?void 0:m.maxLabelWidth),size:j,isRightSide:!0,visibleSecondaryYAxis:P,xAxisTitleHeight:z}),V=bs({chartSize:T,yAxis:F,secondaryYAxis:$,legend:b,circleLegend:y,hasCenterYAxis:D,hasXYAxis:R,size:j,xAxisData:null===(g=O)||void 0===g?void 0:g.xAxis}),_=function(e,t,i){const s={x:t.x,y:t.y+t.height},n=e?i:0,o=e?t.width:0;return Object.assign({height:n,width:o},s)}(!!(null===(v=w.xAxis)||void 0===v?void 0:v.title),V,z),U=function(e){const{legend:t,xAxis:i,yAxis:s,chartSize:n,title:o,hasXYAxis:a,secondaryYAxis:r,xAxisTitleHeight:l}=e;if(!t.visible)return{x:0,y:0,width:0,height:0};const{align:d,width:c,height:h}=t,{width:u}=n,p=ps(d);let m=i.x+i.width+r.width+us.X,g=Math.max(s.y,24);return p?(m=(u-c)/2,g="top"===d?o.y+o.height:s.y+s.height+(a?i.height+l:us.Y)):"left"===d&&(m=us.X),{width:c,height:h,x:m,y:g}}({chartSize:T,xAxis:V,yAxis:F,secondaryYAxis:$,title:H,legend:b,hasXYAxis:R,xAxisTitleHeight:z});!function({width:e,height:t},i,s){if(e<0||t<0)return;const{title:n,yAxisTitle:o,yAxis:a,xAxis:r,xAxisTitle:l,legend:d,secondaryYAxis:c}=i,{align:h}=s,u=ps(h),p=u?d.height:0,m=r.height+l.height+a.height+o.height+n.height+p-t;m>0&&(a.height-=m,r.y-=m,l.y-=m,u&&(d.y-=m)),c.x=r.x+r.width,c.height=a.height}(T,{title:H,yAxisTitle:X,yAxis:F,xAxis:V,xAxisTitle:_,legend:U,secondaryYAxis:$},b);const q=function(e,t,i,s){return{width:s,height:t.height,x:"left"===i?us.X:e.x+e.width+us.X,y:t.y}}(V,F,b.align,y.width),K=function(e,t,i){return Object.assign({x:e.x,y:t.y},ms(i,e.width,t.height))}(V,F,j.plot),Z=function(e,t,i){var s,n;if(!i)return Object.assign({},e);const{x:o,y:a}=e,{centerX:r,centerY:l,axisSize:d,title:c,radius:{outer:h}}=i,u=null!=(n=null===(s=c)||void 0===s?void 0:s.offsetY)?n:0;return{x:r+o-d/2,y:l+a-h/2,width:d,height:t.title.fontSize+u}}(K,x.circularAxis,null===(f=A)||void 0===f?void 0:f.circularAxis);be(e.layout,{chart:{x:0,y:0,width:k,height:C},title:H,plot:K,legend:U,circleLegend:q,xAxis:V,xAxisTitle:_,yAxis:F,yAxisTitle:X,exportMenu:I,resetButton:Y,secondaryYAxisTitle:G,secondaryYAxis:$,circularAxisTitle:Z})}},observe:{updateLayoutObserve(){this.dispatch("setLayout")}}};function Cs(e){return Array.isArray(e)&&2===e.length}function Ts(e){return Array.isArray(e)&&Cs(G(e))}function Ds(e,t){return t?e.slice(t[0],t[1]+1):e}function Rs(e,t){if(t)return t;const i=new Set;return Object.keys(e).forEach(t=>{var s;"pie"!==t&&"gauge"!==t&&(s=e[t].data,null!=s?s:e[t]).forEach(({data:e,name:s,visible:n})=>{Array.isArray(e)?e.forEach(e=>{if(!y(e)){const t=zi(e);i.add(w(t)?t:t.toString())}}):("bullet"===t&&x(n)||n)&&i.add(s)})}),Array.from(i).sort(z).map(e=>String(e))}var js={name:"category",state:({categories:e,series:t})=>({categories:Rs(t,e)}),action:{setCategory({state:e,computed:t}){const{viewRange:i}=t;let s=e.rawCategories;i&&(s=Array.isArray(s)?Ds(s,i):Object.assign(Object.assign({},s),{x:Ds(s.x,i)})),e.categories=s,this.notify(e,"categories")},initCategory({initStoreState:e,state:t}){const{zoomRange:i}=t;let s=Rs(e.series);i&&Array.isArray(s)&&(s=Ds(s,i)),t.categories=s,this.notify(t,"categories")},removeCategoryByName({state:e},t){const i=e.categories.findIndex(e=>e===t);e.categories.splice(i,1),this.notify(e,"axes")}},observe:{updateCategory(){this.dispatch("setCategory")}}};function Bs(e,t){let i;return i=t?Array.isArray(t)?t.length:t.x.length:Object.keys(Rs(e,t)).length,[0,i-1]}function Ls(e,t,i){var s;if((e.line||e.area)&&(null===(s=t.series)||void 0===s?void 0:s.zoomable))return Bs(e,i)}function Ps(e,t,i){var s;if((e.line||e.area||e.column||e.heatmap)&&(null===(s=t.series)||void 0===s?void 0:s.shift))return Bs(e,i)}function Es(e,t,i,s){if(!s)return e;let[n,o]=s;return"area"!==i&&!w(G(e))?[n,o]=function(e,t,i){const[s,n]=i;let o,a;return T(s,n+1).forEach(i=>{const s=e.findIndex(e=>zi(e).toString()===t[i]);-1!==s&&(x(o)&&(o=s),x(o)||(a=Math.max(s,null!=a?a:0)))}),[o,a]}(e,t,s):(n=n>1?n-1:n,o=o<t.length-1?o+1:o),e.slice(n,o+1)}function Ws(e,t){return Yi(e)&&(x(t)||"line"===t||"scatter"===t)}function zs(e){const t=ei(e),i=[];return t?e.pie.forEach(({data:e})=>{e.forEach(e=>{S(e.visible)&&!e.visible&&i.push(e.name)})}):Object.keys(e).forEach(t=>{e[t].forEach(({name:e,visible:t})=>{S(t)&&!t&&i.push(e)})}),i}var Is={name:"seriesData",state:({series:e,categories:t,options:i})=>({rawCategories:Rs(e,t),series:Object.assign({},e),zoomRange:Ls(e,i,t),shiftRange:Ps(e,i,t),disabledSeries:zs(e)}),action:{setSeriesData({state:e,initStoreState:t}){const i=W(t.series),{disabledSeries:s,theme:n,zoomRange:o,rawCategories:a}=e,r={};Object.keys(i).forEach(e=>{var t,l,d;const{colors:c,iconTypes:h}=n.series[e];let u=i[e].map((t,i)=>Object.assign(Object.assign({},t),{rawData:t.data,data:Es(t.data,a,e,o),color:c?c[i%c.length]:""}));"scatter"===e&&(u=u.map((e,t)=>Object.assign(Object.assign({},e),{iconType:h?h[t]:"circle"})));const p=u.length,m=null!=(d=null===(l=null===(t=u[0])||void 0===t?void 0:t.data)||void 0===l?void 0:l.length)?d:0,g=u.filter(({name:e})=>!s.includes(e));r[e]={seriesCount:p,seriesGroupCount:m,data:g,colors:c}}),be(e.series,r)},disableSeries({state:e},t){e.disabledSeries.push(t),this.notify(e,"disabledSeries"),e.series.bullet&&this.dispatch("removeCategoryByName",t)},enableSeries({state:e},t){const i=e.disabledSeries.findIndex(e=>e===t);e.disabledSeries.splice(i,1),this.notify(e,"disabledSeries"),e.series.bullet&&(e.categories=e.series.bullet.data.map(({name:e})=>e),this.notify(e,"axes"))},zoom({state:e},t){const i=e.rawCategories;e.zoomRange=t.map(e=>i.findIndex(t=>t===e)),this.notify(e,"zoomRange")},resetZoom({state:e,initStoreState:t}){const{series:i,options:s}=t,n=e.rawCategories;e.zoomRange=Ls(i,s,n),this.notify(e,"zoomRange")},addData({state:e,initStoreState:t},{data:i,category:s,chartType:n}){const{series:o}=t,a=Ws(e.series,n);let{categories:r}=t;if(r=o.heatmap?r.x:r,s&&Array.isArray(r)){if(!r.some(e=>e===s)&&(r.push(s),Array.isArray(e.shiftRange))){const[t,i]=e.shiftRange;e.shiftRange=[t+1,i+1]}}if(n)o[n].forEach((e,t)=>{e.data.push(i[t])});else{const[e]=Object.keys(t.series);o[e].forEach((e,t)=>{e.data.push(i[t])})}this.notify(e,"series"),this.notify(e,"rawCategories"),Array.isArray(e.zoomRange)&&this.dispatch("resetZoom"),a&&this.dispatch("initCategory")},addSeries({state:e,initStoreState:t},{data:i,chartType:s,category:n}){const{series:o,categories:a}=t,r=Ws(e.series,s),l=s||Object.keys(o)[0];(function(e,t,i){return e[t].some(({label:e})=>e===i.name)})(o,l,i)||(o[l].push(i),Array.isArray(a)&&n&&a.push(n)),this.dispatch("initThemeState"),this.dispatch("initLegendState"),this.notify(e,"series"),(r||"bullet"===l)&&this.dispatch("initCategory")},addHeatmapSeries({state:e,initStoreState:t},{data:i,category:s}){const{series:n,categories:o}=t,a=function(e,t){return D(e.y,t)}(o,s);a||n.heatmap.push({data:i,yCategory:s}),!a&&s&&(o.y.push(s),this.notify(e,"rawCategories")),this.notify(e,"series"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addTreemapSeries({state:e,initStoreState:t},{data:i}){const{series:s}=t;(function(e,t){return e.treemap.some(({label:e})=>e===t.label)})(s,i)||s.treemap.push(i),this.notify(e,"series"),this.notify(e,"treemapSeries"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},setData({state:e,initStoreState:t},{series:i,categories:s}){t.series=i;ei(i)||(e.rawCategories=Rs(i,s)),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addOutlier({state:e,initStoreState:t},{seriesIndex:i,outliers:s}){var n;const{series:o}=t,a=o.boxPlot[i];if(!a)throw new Error(ie);a.outliers=[...(n=a.outliers,null!=n?n:[]),...s],this.notify(e,"series")}},observe:{updateSeriesData(){this.dispatch("setSeriesData")}},computed:{isLineTypeSeriesZooming:({zoomRange:e,rawCategories:t})=>function(e,t){return!(!t||0===t[0]&&t[1]===e.length-1)}(t,e),viewRange:({zoomRange:e,shiftRange:t})=>e||t}};function Ys(e,t){const{color:i,points:s,lineWidth:n,fillColor:o,dashSegments:a=[]}=t;s.length&&(e.beginPath(),a&&ze(e,a),s.forEach(({x:t,y:i},s)=>{0!==s?e.lineTo(t,i):e.moveTo(t,i)}),e.lineTo(s[0].x,s[0].y),o&&Ye(e,o),He(e,{lineWidth:n,strokeStyle:i}),e.closePath())}function Hs(e){switch(e){case"triangle":return 3;case"diamond":return 4;case"pentagon":return 5;case"hexagon":return 6}}function Ns(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,fillColor:a,iconType:r,size:l}=t,d={x:i,y:s,fillColor:a,borderColor:n,borderWidth:o,size:l};switch(e.beginPath(),r){case"rect":lt(e,{type:"pathRect",x:i-l/2,y:s-l/2,width:l,height:l,stroke:n,lineWidth:o,fill:a});break;case"triangle":case"pentagon":case"diamond":case"hexagon":!function(e,t){const{numberOfSides:i,size:s,x:n,y:o,borderColor:a,borderWidth:r,fillColor:l}=t,d=s/2,c=i%2?Math.PI/180*(10+(i-3)/2)*i:0,h=2*Math.PI/i;e.beginPath();for(let t=0;t<=i;t+=1){const i=t*h+c;e.lineTo(n+d*Math.cos(i),o+d*Math.sin(i))}e.strokeStyle=a,e.lineWidth=r,Ye(e,l),e.stroke(),e.closePath()}(e,Object.assign({type:"regularPolygon",numberOfSides:Hs(r)},d));break;case"star":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t;e.lineWidth=o,e.strokeStyle=n,e.fillStyle=r,e.save(),e.beginPath(),e.translate(i,s),e.moveTo(0,-a);for(let t=0;t<5;t+=1)e.rotate(Math.PI/5),e.lineTo(0,-a/2),e.rotate(Math.PI/5),e.lineTo(0,-a);e.fill(),e.stroke(),e.restore(),e.closePath()}(e,Object.assign(Object.assign({type:"star"},d),{size:l/2}));break;case"cross":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t,l=a/4,d=a/2,c=[-d,-d,-l,-l,l,l,d,d,l,l,-l,-l],h=[];for(let e=0,t=c.length;e<t;e+=1){const i=9;h.push(c[(i+e)%t])}Ys(e,{type:"polygon",lineWidth:o,color:n,points:c.map((e,t)=>({x:i+e,y:s+h[t]})),fillColor:r})}(e,Object.assign({type:"cross"},d));break;default:dt(e,{type:"circle",x:i,y:s,radius:l/2,style:[{strokeStyle:n,lineWidth:o}],color:a})}e.stroke(),e.closePath()}const Xs=40,Fs=5,Gs=12,$s=12;function Vs(e){return e+us.Y}function _s(e,t,i,s){const{active:n,checked:o}=s,a=n?"#bbb":De("#bbbbbb",.3);ht(e,{type:"rect",x:t,y:i,width:Gs,height:Gs,color:"#fff",borderColor:a,thickness:1}),o&&function(e,t,i,s){const n=s?"#555555":De("#555555",.3);ct(e,{type:"line",x:t+2,y:i+5,x2:t+5,y2:i+8,strokeStyle:n,lineWidth:2}),ct(e,{type:"line",x:t+5,y:i+9,x2:t+10,y2:i+3,strokeStyle:n,lineWidth:2})}(e,t,i,n)}function Us(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s,l=t+(r?Gs+Fs:0),d=o?a:De(a,.3);"rect"===n?ht(e,{type:"rect",x:l,y:i+(Gs-10)/2,width:10,height:10,color:d}):"line"===n?function(e,t,i,s){const n=[2,2,6,6,10,10],o=[8,0,0,8,8,0];n.forEach((a,r)=>{5!==r&&ct(e,{type:"line",x:t+a,y:i+o[r],x2:t+n[r+1],y2:i+o[r+1],lineWidth:2,strokeStyle:s})})}(e,l,i+2,d):"circle"===n&&dt(e,{type:"circle",x:l+6,y:i+6,radius:6,color:d,style:["default"]})}function qs(e,t){const{data:i,showCheckbox:s,align:n,fontSize:o,fontFamily:a,fontWeight:r}=t,l=Pe({fontSize:o,fontFamily:a,fontWeight:r}),d=t.color;i.forEach(t=>{const{x:i,y:o,checked:a,active:r,color:c,iconType:h,useScatterChartIcon:u,viewLabel:p}=t,m=o-1+(ft(p,l)-11)/4,g={iconType:h,checked:a,active:r,color:c,showCheckbox:s,align:n,font:l,fontColor:d};s&&_s(e,i,m,g),u&&"line"!==h?function(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s;Ns(e,{type:"scatterSeries",iconType:n,x:t+(r?Gs+Fs:0)+6,y:i+6,borderColor:o?a:De(a,.3),size:12,fillColor:"rgba(255, 255, 255, 0)",borderWidth:1.5})}(e,i,m,g):Us(e,i,m,g),function(e,t,i,s,n){const{active:o,showCheckbox:a,font:r,fontColor:l}=n,d=o?l:De(l,.3);Ge(e,{type:"label",x:t+$s+Fs+(a?Gs+Fs:0),y:i,text:s,style:["default",{font:r,textBaseline:"top",fillStyle:d}]})}(e,i,o,p,g)})}const Ks=2,Zs=3,Js=4,Qs=.3,en=.05,tn=4,sn={shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6},nn=4,on=2,an={whisker:{lineWidth:1},maximum:{lineWidth:1},minimum:{lineWidth:1},median:{lineWidth:1,color:"#ffffff"}},rn=[.5,.3,.1];function ln(e="Arial"){return{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1}}const dn={width:8,height:6},cn={colors:["#00a9ff","#ffb840","#ff5a46","#00bd9f","#785fff","#f28b8c","#989486","#516f7d","#28e6eb","#28695f","#96c85a","#45ba3f","#295ba0","#2a4175","#289399","#66c8d3","#617178","#8a9a9a","#bebebe","#374b5a","#64eba0","#ffe155","#ff9141","#af4beb","#ff73fa","#ff55b2","#2869f5","#3296ff","#8cc3ff","#2828b9","#fa8787","#e13782","#7d5aaa","#643c91","#d25f5f","#fabe6e","#c3a9eb","#b9c8f5","#73a0cd","#0f5a8c"],startColor:"#ffe98a",endColor:"#d74177",lineWidth:2,dashSegments:[],borderWidth:0,borderColor:"#ffffff",select:{dot:{radius:3,borderWidth:5},areaOpacity:.3,restSeries:{areaOpacity:.06}},hover:{dot:{radius:3,borderWidth:5}},dot:{radius:3},areaOpacity:.3};function hn(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:700,color:"#bbbbbb"}}function un(e,t="Arial"){var i,s;const n=hn(t),o=function(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:"normal",color:"#333333"}}(t),a=!!(null===(i=e)||void 0===i?void 0:i.radar),r=!!(null===(s=e)||void 0===s?void 0:s.gauge);return{chart:{fontFamily:t,backgroundColor:"#ffffff"},noData:{fontSize:18,fontFamily:t,fontWeight:"normal",color:"#333333"},title:{fontSize:18,fontFamily:t,fontWeight:100,color:"#333333"},yAxis:{title:Object.assign({},n),label:Object.assign({},o),width:1,color:"#333333"},xAxis:{title:Object.assign({},n),label:Object.assign({},o),width:1,color:"#333333"},verticalAxis:{label:Object.assign(Object.assign({},o),{textBubble:{visible:a,backgroundColor:a?"#f3f3f3":"rgba(0, 0, 0, 0)",borderRadius:7,paddingX:7,paddingY:2,borderColor:"rgba(0, 0, 0, 0)",borderWidth:1}})},circularAxis:{title:Object.assign({},n),label:Object.assign({},o),lineWidth:1,strokeStyle:r?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.05)",dotColor:"rgba(0, 0, 0, 0.5)",tick:{lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.5)"}},legend:{label:{color:"#333333",fontSize:11,fontWeight:"normal",fontFamily:t}},tooltip:{background:"rgba(85, 85, 85, 0.95)",borderColor:"rgba(255, 255, 255, 0)",borderWidth:0,borderRadius:3,borderStyle:"solid",body:{fontSize:12,fontFamily:t+", sans-serif",fontWeight:"normal",color:"#ffffff"},header:{fontSize:13,fontFamily:t+", sans-serif",fontWeight:"bold",color:"#ffffff"}},plot:{lineColor:"rgba(0, 0, 0, 0.05)",backgroundColor:"rgba(255, 255, 255, 0)"},exportMenu:{button:Object.assign(Object.assign({},pn(5,"#f4f4f4")),{backgroundColor:"#f4f4f4",xIcon:{color:"#555555",lineWidth:2},dotIcon:{color:"#555555",width:2,height:2,gap:2}}),panel:Object.assign(Object.assign({},pn(0,"#bab9ba")),{header:Object.assign(Object.assign({},o),{backgroundColor:"#f4f4f4"}),body:Object.assign(Object.assign({},o),{backgroundColor:"#ffffff"})})}}}function pn(e,t,i=1){return{borderWidth:i,borderRadius:e,borderColor:t}}function mn(e=!1,t=7,i=5,s=1,n="#ffffff"){return{visible:e,paddingX:i,paddingY:s,borderRadius:t,backgroundColor:n,shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}}function gn(e){const t=ln(e);return{lineWidth:cn.lineWidth,dashSegments:cn.dashSegments,select:{dot:cn.select.dot},hover:{dot:cn.hover.dot},dot:cn.dot,dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},mn()),{arrow:Object.assign({visible:!1,direction:"bottom"},dn)})})}}function vn(e){const t=ln(e);return{startColor:cn.startColor,endColor:cn.endColor,borderWidth:0,borderColor:"#ffffff",hover:{borderWidth:tn,borderColor:"#ffffff"},select:{borderWidth:tn,borderColor:"#ffffff"},dataLabels:Object.assign(Object.assign({},t),{color:"#ffffff",textBubble:Object.assign({},mn(!1,1,5,1,"rgba(255, 255, 255, 0.5)"))})}}function fn(e){const t=ln(e);return{colorByPoint:!1,areaOpacity:1,hover:Object.assign(Object.assign({},sn),{borderWidth:tn,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},sn),{borderWidth:tn,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),connector:{color:"rgba(51, 85, 139, 0.3)",lineWidth:1,dashSegments:[]},dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},mn(!1,1,4,3)),{arrow:Object.assign({visible:!1},dn)}),stackTotal:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},mn(!0,1,4,3)),{arrow:Object.assign({visible:!0},dn)})})})}}const bn={line:e=>Object.assign({},gn(e)),area:e=>{const t=gn(e);return Object.assign(Object.assign({},t),{select:Object.assign(Object.assign({},t.select),{areaOpacity:.3,restSeries:cn.select.restSeries}),areaOpacity:.3})},treemap:e=>vn(e),heatmap:e=>vn(e),scatter:()=>({size:12,borderWidth:1.5,fillColor:"rgba(255, 255, 255, 0)",select:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12},hover:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12}}),bubble:()=>({borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",select:{},hover:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:2,shadowOffsetY:2,lineWidth:2}}),radar:()=>({areaOpacity:Qs,hover:{dot:{radius:Js,borderWidth:Js+1}},select:{dot:{radius:Js,borderWidth:Js+1},restSeries:{areaOpacity:en},areaOpacity:Qs},dot:{radius:Zs}}),bar:e=>Object.assign({},fn(e)),column:e=>Object.assign({},fn(e)),bullet:e=>{const t=ln(e);return{areaOpacity:1,barWidthRatios:{rangeRatio:1,bulletRatio:.5,markerRatio:.8},markerLineWidth:1,borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",hover:Object.assign(Object.assign({},sn),{borderWidth:tn,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},sn),{borderWidth:tn,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},mn()),{arrow:Object.assign({visible:!1},dn)}),marker:Object.assign(Object.assign({},t),{fontSize:9,useSeriesColor:!0,textBubble:Object.assign(Object.assign({},mn(!0)),{backgroundColor:"rgba(255, 255, 255, 0.8)",shadowColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,arrow:Object.assign({visible:!1},dn)})})})}},boxPlot:()=>({areaOpacity:1,barWidthRatios:{barRatio:1,minMaxBarRatio:.5},markerLineWidth:1,dot:{color:"#ffffff",radius:nn,borderWidth:on,useSeriesColor:!1},rect:{borderWidth:0},line:Object.assign({},an),hover:Object.assign(Object.assign({},sn),{rect:{borderWidth:tn,borderColor:"#ffffff"},dot:{radius:nn,borderWidth:0,useSeriesColor:!0},line:Object.assign({},an)}),select:Object.assign(Object.assign({},sn),{rect:{borderWidth:tn,borderColor:"#ffffff"},dot:{radius:nn,borderWidth:0,useSeriesColor:!0},line:Object.assign({},an),restSeries:{areaOpacity:.2},areaOpacity:1})}),pie:(e,{hasOuterAnchor:t=!1,hasOuterAnchorPieSeriesName:i=!1},s=!1)=>{const n=ln(e);return{areaOpacity:1,strokeStyle:s?"#ffffff":"rgba(255, 255, 255, 0)",lineWidth:s?1:0,hover:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},select:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1},dataLabels:{fontFamily:e,fontSize:16,fontWeight:600,color:t?"#333333":"#ffffff",useSeriesColor:t,textBubble:Object.assign({},mn(!1,0)),callout:{lineWidth:1,useSeriesColor:!0,lineColor:"#e9e9e9"},pieSeriesName:Object.assign(Object.assign({},n),{useSeriesColor:i,color:i?"#333333":"#ffffff",textBubble:Object.assign({},mn(!1,0))})}}},radialBar:e=>({areaOpacity:1,strokeStyle:"rgba(255, 255, 255, 0)",lineWidth:0,hover:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,groupedSector:{color:"#000000",opacity:.05}},select:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1,groupedSector:{color:"#000000",opacity:.2}},dataLabels:{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1,textBubble:Object.assign({},mn(!1,0))}}),gauge:e=>({areaOpacity:1,hover:{clockHand:{baseLine:5},pin:{radius:5,borderWidth:5},solid:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}},select:{clockHand:{baseLine:5},pin:{radius:6,borderWidth:4},solid:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1},areaOpacity:1,restSeries:{areaOpacity:.3}},clockHand:{baseLine:4},pin:{radius:5,borderWidth:5},solid:{lineWidth:0,backgroundSolid:{color:"rgba(0, 0, 0, 0.1)"}},dataLabels:{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1,textBubble:Object.assign(Object.assign({},mn(!0,4,4,3)),{shadowColor:"rgba(0, 0, 0, 0)",shadowOffsetY:0,shadowBlur:0,borderColor:"#ccc",borderWidth:1})}})};function xn(e,t,i,s=!1){return"pie"===t?bn[t](e,i,s):D(["bubble","radar","boxPlot"],t)?bn[t]():bn[t](e)}function yn(e,t,i){const{index:s,seriesIndex:n,chartType:o}=e;return w(s)&&("grouped"===t||w(n))&&(x(o)||o===i)}function Sn(e,t){const{index:i,seriesIndex:s,chartType:n}=e;return w(i)&&w(s)&&(x(n)||n===t)}function wn(e){return Object.keys(e).reduce((t,i)=>!e[i].data.length&&t,!0)}function Mn(e){return e.data.reduce((e,{active:t,label:i})=>Object.assign(Object.assign({},e),{[i]:t}),{})}function On(e,t){var i,s,n;return!(t.gauge||t.treemap&&!(null===(i=e.series)||void 0===i?void 0:i.useColorValue))&&(!!x(null===(s=e.legend)||void 0===s?void 0:s.visible)||!!(null===(n=e.legend)||void 0===n?void 0:n.visible))}function An(e){var t,i;return!!x(null===(t=e.legend)||void 0===t?void 0:t.showCheckbox)||!!(null===(i=e.legend)||void 0===i?void 0:i.showCheckbox)}function kn(e){let t="spectrum";return!function(e){return D(["bubble","scatter"],e)}(e)?!function(e){return D(["bar","column","area","pie","boxPlot","bullet","radialBar"],e)}(e)?function(e){return D(["line","radar"],e)}(e)&&(t="line"):t="rect":t="circle",t}function Cn(e){var t,i;return null!=(i=null===(t=e.legend)||void 0===t?void 0:t.align)?i:"right"}function Tn(e){if(!e.visible)return{legendWidth:0,legendHeight:0,rowCount:0,columnCount:0};const{chart:t,verticalAlign:i,legendWidths:s}=e,{legendWidth:n,isOverflow:o}=function(e){var t,i;const{options:s,visible:n}=e,o=null===(t=s)||void 0===t?void 0:t.legend;if(!n)return{legendWidth:0,isOverflow:!1};if(null===(i=o)||void 0===i?void 0:i.width)return{legendWidth:o.width,isOverflow:!1};return function(e){const{initialWidth:t,legendWidths:i,checkbox:s,verticalAlign:n}=e;let o,a=!1;if(n){const{width:t}=Dn(e),s=X(i)+Xs*(i.length-1);a=s>t,o=s}else{const e=Math.max(...i);o=(s?Gs+Fs:0)+$s+Fs+Math.max(e,t)}return{legendWidth:o,isOverflow:a}}(e)}(e),{legendHeight:a,isOverflow:r}=function(e){const{verticalAlign:t,itemHeight:i,legendWidths:s}=e,{height:n}=Dn(e);let o,a=!1;if(t)o=n;else{const e=s.length*i;a=n<e,o=a?n:e}return{legendHeight:o,isOverflow:a}}(e),l=i?s.length:1,d=i?Math.ceil(n/t.width):s.length;return o?function(e,t){const{legendWidths:i,itemHeight:s}=e;let n=0,o=0;const{rowCount:a}=i.reduce((e,i)=>{const s=Xs+i;return e.totalWidth+i>t?(e.totalWidth=s,e.rowCount+=1,e.columnCount=1,n=Math.max(n,e.columnCount)):(e.totalWidth+=s,e.columnCount+=1),o=Math.max(o,e.totalWidth),e},{totalWidth:0,rowCount:1,columnCount:0});return{legendHeight:s*a,rowCount:a,columnCount:n,legendWidth:o}}(e,n/d):r?function(e,t){const{legendWidths:i,itemHeight:s}=e,n=i.length*s,o=Math.ceil(n/t),a=i.length/o;let r=0;return T(0,o).forEach(e=>{r+=Math.max(...i.slice(e*a,(e+1)*a))}),r+=Xs*(o-1),{legendWidth:r,legendHeight:a*s+us.Y,columnCount:o,rowCount:a}}(e,a):{legendWidth:n,legendHeight:a,columnCount:l,rowCount:d}}function Dn(e){const{verticalAlign:t,chart:i,itemHeight:s,initialWidth:n,circleLegendVisible:o}=e,a=100+(o?150:0);return t?{width:i.width-2*us.X,height:s}:{width:n,height:i.height-a}}function Rn(e){var t,i;const{legendOptions:s,font:n,checkboxVisible:o}=e,a=null===(i=null===(t=s)||void 0===t?void 0:t.item)||void 0===i?void 0:i.width;if(x(a))return;const r=o?Gs+Fs:0,l=$s+Fs,d=vt("...",n),c=vt("W",n),h=Math.floor((a-d-r-l)/c);return h>0?h:0}function jn(e,t,i){var s,n;const{checkboxVisible:o,useSpectrumLegend:a,font:r,legendOptions:l}=e;let d=t;const c=null===(n=null===(s=l)||void 0===s?void 0:s.item)||void 0===n?void 0:n.width,h=function(e,t,i,s){return(i?0:(t?Gs+Fs:0)+$s+Fs)+vt(e,s)}(d,o,a,r);return w(c)&&w(i)&&c<h&&(d=t.slice(0,i)+"..."),{viewLabel:d,width:null!=c?c:h}}function Bn(e,t){const i=Object.values(t).reduce((e,t)=>t&&t.colors?[...e,...t.colors]:e,[]);return e.map((e,t)=>Object.assign(Object.assign({},e),{color:i[t]}))}function Ln(e,t){var i,s,n,o,a,r,l,d,c;const h=null!=(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.useColorValue)?n:!!t.heatmap,u=!!(null===(o=t)||void 0===o?void 0:o.scatter),p={checkboxVisible:!h&&An(e),font:Pe(P(un(t,null===(l=null===(r=null===(a=e)||void 0===a?void 0:a.theme)||void 0===r?void 0:r.chart)||void 0===l?void 0:l.fontFamily).legend.label,Object.assign({},null===(c=null===(d=e.theme)||void 0===d?void 0:d.legend)||void 0===c?void 0:c.label))),useSpectrumLegend:h,legendOptions:e.legend},m=ei(t)?function(e,t){const i=[],s=Rn(t);return e.pie.forEach(({data:e})=>{e.forEach(({name:e,parentName:n,visible:o})=>{if(!n){const{width:n,viewLabel:a}=jn(t,e,s);i.push({label:e,type:"pie",checked:null==o||o,viewLabel:a,width:n})}})}),i}(t,p):function(e,t){const i=Rn(t);return Object.keys(e).flatMap(s=>e[s].map(({name:e,colorValue:n,visible:o})=>{const a=n||e,{width:r,viewLabel:l}=jn(t,a,i);return{label:a,type:s,checked:null==o||o,viewLabel:l,width:r}}))}(t,p);return{useSpectrumLegend:h,useScatterChartIcon:u,data:m.map(({label:e,type:t,checked:i,width:s,viewLabel:n})=>({label:e,active:!0,checked:i,width:s,iconType:kn(t),chartType:t,rowIndex:0,columnIndex:0,viewLabel:n}))}}var Pn={name:"legend",state:({options:e,series:t})=>({legend:Ln(e,t),circleLegend:{}}),action:{initLegendState({state:e,initStoreState:t}){be(e.legend,Ln(t.options,t.series))},setLegendLayout({state:e}){e.legend.useSpectrumLegend?this.dispatch("setSpectrumLegendLayout"):this.dispatch("setNormalLegendLayout")},setSpectrumLegendLayout({state:e}){const{legend:{data:t},series:i,options:s,chart:n,theme:o}=e,a=Cn(s),r=On(s,i),l=ps(a),d=t.map(({width:e})=>e),c=(Vs(o.legend.label.fontSize),function(e,t,i){if(i){const i=X(e);return Math.max(t/4,i)}const s=2*(ls.PADDING+rs.PADDING+us.X)+ls.POINT_HEIGHT+rs.HEIGHT;return Math.max(...e)+s}(d,n.width,l)),h=function(e,t,i){return i?as+2*rs.PADDING+ls.POINT_HEIGHT+ls.HEIGHT+us.Y:3*t/4}(0,n.height,l);be(e.legend,{visible:r,align:a,width:c,height:h})},setNormalLegendLayout({state:e,initStoreState:t}){const{legend:{data:i},series:s,options:n,chart:o,theme:a}=e,r=Cn(n),l=On(n,s),d=An(n),c=Math.min(o.width/5,100),h=ps(r),u=ei(t.series),p=!!s.scatter,m=!!s.bubble,g=!!m&&function(e){var t,i,s;return null==(s=null===(i=null===(t=e)||void 0===t?void 0:t.circleLegend)||void 0===i?void 0:i.visible)||s}(n),v=i.map(({width:e})=>e),f=Vs(a.legend.label.fontSize),{legendWidth:b,legendHeight:x,rowCount:y,columnCount:S}=Tn({initialWidth:c,legendWidths:v,options:n,verticalAlign:h,visible:l,checkbox:d,chart:o,itemHeight:f,circleLegendVisible:g});!function(e,t,i,s,n){let o=0,a=0;e.forEach(e=>{e.rowIndex=a,e.columnIndex=o,[a,o]=function(e){const{verticalAlign:t,columnCount:i,rowCount:s,legendCount:n}=e;let{rowIndex:o,columnIndex:a}=e;if(t){n/s-1>a?a+=1:(o+=1,a=0)}else{n/i-1>o?o+=1:(a+=1,o=0)}return[o,a]}({rowCount:t,columnCount:i,verticalAlign:n,legendCount:s,rowIndex:a,columnIndex:o})})}(i,y,S,v.length,h),be(e.legend,{visible:l,align:r,showCheckbox:d,width:b,height:x}),m&&g&&this.dispatch("updateCircleLegendLayout",{legendWidth:b}),u||wn(s)||this.dispatch("updateLegendColor"),p&&this.dispatch("updateLegendIcon")},updateCircleLegendLayout({state:e},{legendWidth:t}){const i=0===t?150:Math.min(t,150),s=Math.max((i-Fs)/2,0);be(e.circleLegend,{visible:!0,width:i,radius:s})},setLegendActiveState({state:e},{name:t,active:i}){const{data:s}=e.legend;s.find(({label:e})=>e===t).active=i,this.notify(e,"legend")},setAllLegendActiveState({state:e},t){e.legend.data.forEach(e=>{e.active=t}),this.notify(e,"legend")},setLegendCheckedState({state:e},{name:t,checked:i}){e.legend.data.find(({label:e})=>e===t).checked=i,this.notify(e,"legend")},updateLegendColor({state:e}){const{legend:t,series:i}=e,s=Bn(t.data,i);be(e.legend,{data:s})},updateLegendIcon({state:e}){const{legend:t,series:i}=e,s=t.data.reduce((e,t)=>{var s;if("scatter"===t.chartType&&(null===(s=i.scatter)||void 0===s?void 0:s.data)){const s=i.scatter.data.find(({name:e})=>e===t.label),n=s?s.iconType:t.iconType;return[...e,Object.assign(Object.assign({},t),{iconType:n})]}return[...e,t]},[]);be(e.legend,{data:s})},updateNestedPieChartLegend({state:e}){const{legend:t,nestedPieSeries:i}=e;be(e.legend,{data:Bn(t.data,i)})}},observe:{updateLegendLayout(){this.dispatch("setLegendLayout")}}};function En(e,t,i){var s,n;const{width:o,height:a}=e;return{width:o?t.width:null===(s=i)||void 0===s?void 0:s.width,height:a?t.height:null===(n=i)||void 0===n?void 0:n.height}}var Wn={name:"options",state:({options:e})=>({originalOptions:W(e),options:e}),action:{setOptions({state:e}){const{width:t,height:i}=e.chart;t<0||i<0||(e.options=function(e,t){var i;const s=null===(i=t.responsive)||void 0===i?void 0:i.rules;return Array.isArray(s)?s.reduce((t,i)=>i.condition(e)?P(t,i.options):t,t):t}({width:t,height:i},e.originalOptions))},initOptions({initStoreState:e,state:t},{options:i,containerSize:s}){e.options=i,t.originalOptions=W(i);const{usingContainerSize:n,originalOptions:o}=t,a=En(n,s,{width:o.chart.width,height:o.chart.height});this.dispatch("setChartSize",a)},updateOptions({state:e,initStoreState:t},{options:i,containerSize:s}){var n,o;t.options=P(t.options,i),e.originalOptions=P(e.originalOptions,i);const{usingContainerSize:a,originalOptions:r}=e,l=En(a,s,{width:null===(n=r.chart)||void 0===n?void 0:n.width,height:null===(o=r.chart)||void 0===o?void 0:o.height});this.dispatch("setChartSize",l),this.dispatch("initThemeState")}},observe:{updateOptions(){this.dispatch("setOptions")}}};function zn(e,t,i,s){var n;const o=function(e){var t,i,s;const n=Object.assign({},e.theme);if(!Array.isArray(n.yAxis))return n;const o=hn(null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.theme)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.fontFamily),a=n.yAxis.map(e=>P({title:Object.assign({},o)},Object.assign({},e)));return Object.assign(Object.assign({},n),{yAxis:a})}(e);if(!(null===(n=o)||void 0===n?void 0:n.series))return Object.assign({},o);const a=Object.assign(Object.assign({},o),{series:{}}),r=Object.keys(t),l=r.length>1;if(s){const e=ti(t);a.series={pie:e.reduce((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:P(null===(s=o.series)||void 0===s?void 0:s[t],j(i,"colors"))})},{})}}else a.series=l?Object.assign({},r.reduce((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:P(null===(s=o.series)||void 0===s?void 0:s[t],j(i,"colors"))})},{})):{[r[0]]:o.series};return a}function In(e,t,i){var s,n,o,a,r,l,d,c,h;return{hasOuterAnchor:!!t.pie&&"outer"===(null===(a=null===(o=null===(n=null===(s=e)||void 0===s?void 0:s.series)||void 0===n?void 0:n[i])||void 0===o?void 0:o.dataLabels)||void 0===a?void 0:a.anchor),hasOuterAnchorPieSeriesName:!!t.pie&&"outer"===(null===(h=null===(c=null===(d=null===(l=null===(r=e)||void 0===r?void 0:r.series)||void 0===l?void 0:l[i])||void 0===d?void 0:d.dataLabels)||void 0===c?void 0:c.pieSeriesName)||void 0===h?void 0:h.anchor)}}function Yn(e,t){var i,s,n;const o=ei(t),a=function(e,t,i){var s,n;const o=null===(s=e)||void 0===s?void 0:s.theme;return(null===(n=o)||void 0===n?void 0:n.series)?(i?ti(t):Object.keys(t)).reduce((e,t)=>(delete e[t],e),Object.assign({},o.series)):{}}(e,t,o);let r={hasOuterAnchor:si(e,t),hasOuterAnchorPieSeriesName:ni(e,t)};if(o){r=ti(t).reduce((i,s)=>Object.assign(Object.assign({},i),{[s]:In(e,t,s)}),{})}const l=null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.theme)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.fontFamily,d=P(function(e,t,i="Arial",s=!1){const n=Object.keys(e).reduce((e,s)=>Object.assign(Object.assign({},e),{series:Object.assign(Object.assign({},e.series),{[s]:xn(i,s,t)})}),un(e,i));if(s){const o=ti(e);n.series.pie=o.reduce((e,n)=>Object.assign(Object.assign({},e),{[n]:xn(i,"pie",t[n],s)}),{})}return n}(t,r,l,o),zn(e,t,a,o));return t.heatmap||function(e,t,i,s){var n,o;let a=0;const r=[...(o=null===(n=i)||void 0===n?void 0:n.colors,null!=o?o:[]),...cn.colors];(s?ti(t):Object.keys(t)).forEach((i,n)=>{var o;const l=s?t.pie[n].data.length:t[i].length,d=s?e.series.pie:e.series;(null===(o=d[i])||void 0===o?void 0:o.colors)||(d[i]=Object.assign(Object.assign({},d[i]),{colors:r.slice(a,a+l)}),a+=l)})}(d,t,a,o),function(e){["vertical","horizontal"].reduce((e,t)=>(e[t]||(e[t]={lineColor:e.lineColor}),e),e.plot)}(d),d}var Hn={name:"theme",state:({options:e,series:t})=>({theme:Yn(e,t)}),action:{initThemeState({state:e,initStoreState:t}){e.theme=Yn(e.options,t.series)}},observe:{updateTheme(){this.dispatch("initThemeState")}}};class Nn{constructor(){this.handlers=[]}on(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)}emit(e,...t){this.handlers[e]&&this.handlers[e].forEach(e=>e(...t))}}class Xn{constructor({store:e,eventBus:t}){this.components=[],this.store=e,this.eventBus=t}add(e,t){const i=new e({store:this.store,eventBus:this.eventBus});i.initialize&&i.initialize(t);let s=(...e)=>{i.render(e[0],e[1]),i.sync(),this.eventBus.emit("needLoop")};this.store.observe((...e)=>{s(...e)}),s=L(s),this.components.push(i)}remove(e){this.components=this.components.filter(t=>!(t instanceof e))}clear(){this.components=[],this.eventBus.emit("needDraw")}invoke(e,t){this.components.forEach(i=>{const s=i[e];s&&s.call(i,t)})}forEach(e){this.components.forEach(e)}}class Fn{constructor(e){this.width=0,this.height=0,this.brushes={},this.chart=e}showUnsupportedCanvasFeatureError(){this.ctx.setLineDash||console.warn(te)}setup(){const{height:e,width:t}=this.chart.store.state.chart;if(!this.canvas){const e=document.createElement("canvas");this.canvas=e,e.style.backgroundColor="#fff",this.chart.el.appendChild(e),e.addEventListener("click",this.chart),e.addEventListener("mousemove",this.chart),e.addEventListener("mousedown",this.chart),e.addEventListener("mouseup",this.chart);const t=e.getContext("2d");t&&(this.ctx=t)}this.setSize(t,e),this.showUnsupportedCanvasFeatureError()}setSize(e,t){this.canvas.style.width=e+"px",this.canvas.style.height=t+"px";let i=1;"deviceXDPI"in window.screen?i=window.screen.deviceXDPI/window.screen.logicalXDPI:window.hasOwnProperty("devicePixelRatio")&&(i=window.devicePixelRatio),this.width=e*i||0,this.height=t*i||0,this.scaleCanvasRatio(i)}scaleCanvasRatio(e){this.canvas.width=this.width,this.canvas.height=this.height,this.ctx.scale(e,e)}add(e,t){this.brushes[e]=t}addGroups(e){e.forEach(e=>{Object.keys(e).forEach(t=>{this.add(t,e[t])})})}paint(e,t){if(!this.brushes[e])throw new Error(ee(e));this.brushes[e](this.ctx,t)}paintForEach(e){e.forEach(e=>this.paint(e.type,e))}beforeFrame(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height)}beforeDraw(e,t){this.ctx.save(),this.ctx.translate(e,t)}afterDraw(){this.ctx.restore()}}class Gn{constructor(){this.anims=[],this.state="IDLE",this.requestId=null,this.firstRendering=!0}add({chart:e,duration:t,requester:i,onCompleted:s=(()=>{}),onFrame:n=(t=>{this.firstRendering||e.update(t),this.firstRendering&&(e.initUpdate(t),1===t&&(this.firstRendering=!1))})}){this.anims.length&&this.reset(),"IDLE"===this.state&&(this.anims.push({chart:e,requester:i,duration:t,onFrame:n,onCompleted:s,start:null,current:null,completed:!1}),this.start())}reset(){this.anims.forEach(e=>{e.current=1,e.onFrame(e.current),e.completed=!0}),this.anims=[],this.cancelAnimFrame(),this.state="IDLE",this.requestId=null}start(){this.anims.length&&(this.state="RUNNING",this.runFrame())}runFrame(){this.requestId=window.requestAnimationFrame(e=>{this.runAnims(e)})}runAnims(e){this.next(e),this.anims.length?this.runFrame():(this.state="IDLE",this.requestId=null)}next(e){this.anims.forEach(t=>{y(t.start)&&(t.start=e),Object.defineProperty(t.chart,"___animId___",{value:e,enumerable:!1,writable:!1,configurable:!0}),t.current=t.duration?Math.min((e-t.start)/t.duration,1):1,t.onFrame(t.current),t.completed=1===t.current}),this.anims.forEach(t=>{t.chart.___animId___===e&&(t.chart.draw(),delete t.chart.___animId___),t.completed&&(this.cancelAnimFrame(),t.onCompleted(),t.chart.eventBus.emit("animationCompleted",t.requester))}),this.anims=this.anims.filter(e=>!e.completed)}cancelAnimFrame(){this.requestId&&window.cancelAnimationFrame(this.requestId)}}const $n={circle:(e,t,i)=>{const{x:s,y:n}=e,{x:o,y:a,radius:r,detectionSize:l}=t,{x:d,y:c}=i,h=x(l)?10:l;return Math.pow(s-(o+d),2)+Math.pow(n-(a+c),2)<Math.pow(r+h,2)},rect:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,width:r,height:l}=t,{x:d,y:c}=i;return s>=o+d&&s<=o+d+r&&n>=a+c&&n<=a+c+l},sector:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,radius:{outer:r,inner:l},degree:{start:d,end:c},drawingStartAngle:h,clockwise:u}=t,{x:p,y:m}=i,g=s-(o+p),v=n-(a+m),f=Math.pow(g,2)+Math.pow(v,2)<Math.pow(r,2),b=Math.pow(g,2)+Math.pow(v,2)>Math.pow(l,2),x=f&&b,y=function(e,t=qe){return(180*e/Math.PI-t+Ue)%Ue}(Math.atan2(v,g),h);return x&&et(u,d,c,y)},line:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a}=i,{x:r,y:l,x2:d,y2:c,detectionSize:h=3}=t,u=c-l,p=d-r;let m=!1;if(0===u){const e=Math.min(r,d),t=Math.max(r,d);m=s-o>=e&&s-o<=t&&n>=l+a-h&&n<=l+a+h}else if(0===p){const e=Math.min(l,c),t=Math.max(l,c);m=n-a>=e&&n-a<=t&&s>=r+o-h&&s<=r+o+h}else{m=u/p*(s-(r+o))===n-(l+a)}return m},boxPlot:(e,t,i={x:0,y:0,width:0,height:0})=>["rect","median","minimum","maximum","upperWhisker","lowerWhisker"].some(s=>!!t[s]&&("rect"===s?$n.rect(e,t[s],i):$n.line(e,t[s],i))),clockHand:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a}=i,{x:r,y:l,x2:d,y2:c,detectionSize:h=5}=t,u=c-l,p=d-r;let m=!1;if(0===u){const e=Math.min(r,d),t=Math.max(r,d);m=s-o>=e&&s-o<=t&&n>=l+a-h&&n<=l+a+h}else if(0===p){const e=Math.min(l,c),t=Math.max(l,c);m=n-a>=e&&n-a<=t&&s>=r+o-h&&s<=r+o+h}else{const e=u/p;m=function({slope:e,yIntercept:t,mouseX:i,mouseY:s,modelXPositions:n,compX:o,compY:a,detectionSize:r=0}){const[l,d]=n,c=e*(i-o)+t;return(l>d&&i>=o+d&&i<=o+l||l<d&&i<=o+d&&i>=o+l)&&(c-r+a<=s&&s<=c+r+a)}({slope:e,yIntercept:l-e*r,mouseX:s,mouseY:n,modelXPositions:[r,d],compX:o,compY:a,detectionSize:h})}return m}};function Vn(){const e=location.hostname,t=`TOAST UI chart for ${e}: Statistics`,i=window.localStorage.getItem(t);i&&!function(e){return(new Date).getTime()-e>6048e5}(Number(i))||(window.localStorage.setItem(t,String((new Date).getTime())),setTimeout(()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||function(e,t){const i=Object.keys(t).map((e,i)=>`${i?"&":""}${e}=${t[e]}`).join(""),s=document.createElement("img");s.src=`${e}?${i}`,s.style.display="none",document.body.appendChild(s),document.body.removeChild(s)}("https://www.google-analytics.com/collect",{v:1,t:"event",tid:"UA-129983528-2",cid:e,dp:e,dh:"chart",el:"chart",ec:"use"})},1e3))}class _n{constructor(e){var t,i,s,n;this.___animId___=null,this.painter=new Fn(this),this.eventBus=new Nn,this.enteredComponents=[],this.animationControlFlag={resizing:!1,updating:!1},this.resizeObserver=null,this.debounceResizeEvent=L(()=>{const{offsetWidth:e,offsetHeight:t}=this.containerEl;this.resizeChartSize(e,t)},100),this.getCheckedLegend=()=>{const{data:e}=this.store.state.legend;return e.filter(e=>e.checked).map(e=>R(e,"chartType","label","checked"))},this.getOptions=()=>ve(this.store.initStoreState.options),this.on=(e,t)=>{this.eventBus.on(e,t)},this.destroy=()=>{this.componentManager.clear(),this.clearResizeEvent(),this.containerEl.innerHTML=""},this.selectSeries=e=>{if(!this.isSelectableSeries())throw new Error(q);this.eventBus.emit("selectSeries",Object.assign(Object.assign({},e),{state:this.store.state}))},this.unselectSeries=()=>{if(!this.isSelectableSeries())throw new Error(q);this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("resetSelectedSeries")},this.resize=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",{chart:Object.assign({},e)})},this.resetSeries=()=>{this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("resetSelectedSeries")},this.setResizeEventListeners=(e,t)=>{var i,s,n,o;const{usingContainerSize:a}=this.store.state,{width:r,height:l}=a,d=null===(s=null===(i=t)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.width,c=null===(o=null===(n=t)||void 0===n?void 0:n.chart)||void 0===o?void 0:o.height,h=U(d),u=U(c);this.store.dispatch("setUsingContainerSize",function(e,t,i,s){const{width:n,height:o}=t,a=U(i),r=U(s);return"updateOptions"===e?{width:x(i)||n===a?n:a,height:x(s)||o===r?o:r}:{width:a,height:r}}(e,a,d,c)),(r||l)&&w(d)&&w(c)?this.clearResizeEvent():r||l||!h&&!u||this.setResizeEvent()};const{el:o,options:a,series:r,categories:l,modules:d}=e;this.modules=null!=d?d:[],(x(a.usageStatistics)||a.usageStatistics)&&Vn(),this.containerEl=o,this.el=this.createChartWrapper(),this.containerEl.appendChild(this.el),this.animator=new Gn,this.store=new fe({series:r,categories:l,options:a}),this.componentManager=new Xn({store:this.store,eventBus:this.eventBus}),this.eventBus.on("needLoop",L(()=>{var e,t;let i=this.getAnimationDuration(null===(e=a.chart)||void 0===e?void 0:e.animation);this.animationControlFlag.resizing&&(i=x(a.responsive)?this.getAnimationDuration():this.getAnimationDuration(null===(t=a.responsive)||void 0===t?void 0:t.animation),this.animationControlFlag.resizing=!1),this.eventBus.emit("loopStart"),this.animator.add({onCompleted:()=>{this.eventBus.emit("loopComplete")},chart:this,duration:i,requester:this})},10)),this.eventBus.on("needSubLoop",e=>{this.animator.add(Object.assign(Object.assign({},e),{chart:this}))}),this.eventBus.on("needDraw",L(()=>{this.draw()},10)),this.initialize(),this.store.observe(()=>{this.painter.setup()}),(U(null===(i=null===(t=a)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width)||U(null===(n=null===(s=a)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height))&&this.setResizeEvent()}getAnimationDuration(e){const{firstRendering:t}=this.animator,{resizing:i,updating:s}=this.animationControlFlag;let n;return!t&&!i||x(e)?n=500:S(e)?n=e?500:0:w(e.duration)&&(n=e.duration),s&&(n=0),this.animationControlFlag.updating=!1,n}createChartWrapper(){const e=document.createElement("div");return e.classList.add("toastui-chart-wrapper"),e}resizeChartSize(e,t){this.animationControlFlag.resizing=!0;const{usingContainerSize:{width:i,height:s},chart:{width:n,height:o}}=this.store.state;!i&&!s||!e&&!t||e===n&&t===o?this.animationControlFlag.resizing=!1:(this.resetSeries(),this.store.dispatch("setChartSize",{width:i?e:n,height:s?t:o}),this.draw())}setResizeEvent(){const{usingContainerSize:e}=this.store.state;if(e.height&&!this.containerEl.style.height.length||e.width&&!this.containerEl.style.width.length)throw new Error(se);"undefined"==typeof ResizeObserver?window.addEventListener("resize",this.debounceResizeEvent):(this.resizeObserver=new ResizeObserver(e=>{e.forEach(()=>{this.debounceResizeEvent()})}),this.resizeObserver.observe(this.containerEl))}clearResizeEvent(){this.resizeObserver?(this.resizeObserver.unobserve(this.containerEl),this.resizeObserver.disconnect(),this.resizeObserver=null):window.removeEventListener("resize",this.debounceResizeEvent)}handleEvent(e){const{clientX:t,clientY:i,type:s}=e,n="on"+(s[0].toUpperCase()+s.substring(1)),o=this.painter.ctx.canvas,a=o.getBoundingClientRect(),r=a.width/o.offsetWidth,l=a.height/o.offsetHeight,d={x:(t-a.left)/r,y:(i-a.top)/l},c=[];"mousemove"===s&&(this.componentManager.forEach(e=>{const{x:t,y:i,height:s,width:n}=e.rect,o=this.enteredComponents.some(t=>t===e);d.x>=t&&d.x<=t+n&&d.y>=i&&d.y<=i+s?(c.push(e),!o&&e.onMouseenterComponent&&e.onMouseenterComponent()):o&&e.onMouseoutComponent&&e.onMouseoutComponent()}),this.enteredComponents=c);const h=[];this.componentManager.forEach(t=>{if(!t[n])return;if(!$n.rect(d,t.rect))return;const i=(t.responders||[]).filter(e=>$n[e.type](d,e,t.rect));i.length&&h.push({component:t,detected:i}),t[n]({mousePosition:d,responders:i},e)}),this.handleEventForAllResponders&&this.handleEventForAllResponders(e,h,n,d)}initStore(){[ye,Wn,Hn,Is,Pn,ks,js,...this.modules].forEach(e=>this.store.setModule(e))}initialize(){this.initStore(),this.store.dispatch("initChartSize",this.containerEl)}draw(){this.painter.beforeFrame(),this.componentManager.forEach(e=>{e.isShow&&(this.painter.beforeDraw(e.rect.x,e.rect.y),e.beforeDraw&&e.beforeDraw(this.painter),e.draw(this.painter),this.painter.afterDraw())})}update(e){this.componentManager.invoke("update",e)}initUpdate(e){this.componentManager.invoke("initUpdate",e)}isSelectableSeries(){var e;return null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.selectable}setTooltipOffset(e){const{x:t,y:i}=e;this.store.dispatch("updateOptions",{options:{tooltip:{offsetX:t,offsetY:i}}})}dispatchOptionsEvent(e,t){this.setResizeEventListeners(e,t);const{offsetWidth:i,offsetHeight:s}=this.containerEl;this.store.dispatch(e,{options:t,containerSize:{width:i,height:s}})}}function Un(e,t=!1){const i={min:Math.min(...e),max:Math.max(...e)};if(1===e.length){const[s]=e;t?(i.min=s,i.max=s):s>0?i.min=0:i.max=0===s?10:0}else 0===i.min&&0===i.max?i.max=10:i.min===i.max&&(i.min-=i.min/10,i.max+=i.max/10);return i}function qn(e,t,i){var s,n,o,a;const r={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER};return{min:Math.min(t[i].min,(n=null===(s=e[i])||void 0===s?void 0:s.min,null!=n?n:r.min)),max:Math.max(t[i].max,(a=null===(o=e[i])||void 0===o?void 0:o.max,null!=a?a:r.max))}}var Kn={name:"dataRange",state:()=>({dataRange:{}}),action:{setDataRange({state:e,initStoreState:t}){const{series:i,disabledSeries:s,stackSeries:n,categories:o,options:a}=e,r={},l=hi({series:i,options:a,categories:o}),{labelAxisName:d,valueAxisName:c}=mi(l,i);Object.keys(i).forEach(e=>{var l,h;r[e]={};let u=i[e].data.flatMap(({data:e,name:t})=>s.includes(t)?[]:e);const p=G(u);if(Yi(t.series)){const t=!!(null===(l=a.xAxis)||void 0===l?void 0:l.date),{yAxisValues:i,xAxisValues:s}=function(e,t,i){const s=e.filter(e=>!y(e)).map(e=>Wi(e));return{xAxisValues:t.map(e=>Number(i?new Date(e):e)),yAxisValues:s}}(u,o,t);u=i,r[e][d]=Un([...s],!0)}else i[e].data.length?Cs(p)?u=u.reduce((e,t)=>y(t)?e:Array.isArray(t)?[...e,...t]:[...t],[]):n&&(null===(h=n[e])||void 0===h?void 0:h.stack)?u=n[e].dataRangeValues:D(["bar","column","radar"],e)?u.push(0):"boxPlot"===e?u=function(e,t){return e[t].data.flatMap(({data:e,outliers:t=[]})=>[...(null!=e?e:[]).flatMap(e=>e),...(null!=t?t:[]).flatMap(e=>e)])}(i,e):"bullet"===e&&(u=function(e,t){return e[t].data.flatMap(({data:e,markers:t,ranges:i})=>[e,...(null!=t?t:[]).flatMap(e=>e),...(null!=i?i:[]).flatMap(e=>e)])}(i,e)):u=[];!function({options:e,seriesName:t,values:i,valueAxisName:s,seriesDataRange:n}){var o;let a;if(D([Wt.X,Wt.CIRCULAR,Wt.VERTICAL],s))a=[s];else{const i=e,{secondaryYAxis:n}=bi(i);a=fi(i)&&(null===(o=n)||void 0===o?void 0:o.chartType)?[n.chartType===t?"secondaryYAxis":"yAxis"]:yi(i,s)}a.forEach(e=>{n[t][e]=Un([...new Set(i)])})}({options:a,seriesName:e,values:u,valueAxisName:c,seriesDataRange:r})});const h=function(e){return Object.values(e).reduce((e,t)=>(t.xAxis&&(e.xAxis=qn(e,t,"xAxis")),t.yAxis&&(e.yAxis=qn(e,t,"yAxis")),t.secondaryYAxis&&(e.secondaryYAxis=qn(e,t,"secondaryYAxis")),t.circularAxis&&(e.circularAxis=qn(e,t,"circularAxis")),t.verticalAxis&&(e.verticalAxis=qn(e,t,"verticalAxis")),e),{})}(r);be(e.dataRange,h)}},observe:{updateDataRange(){this.dispatch("setDataRange")}}};const Zn=[1,2,5,10];function Jn(e){const t=0===e?1:Math.log(Math.abs(e))/Math.LN10;return Math.pow(10,Math.floor(t))}function Qn(e){const t=Jn(e);return function(e){let t=0;for(let i=0,s=Zn.length;i<s;i+=1){t=Zn[i];if(e<=(t+(Zn[i+1]||t))/2)break}return t}(e/t)*t}function eo(e,t){const i=1/Math.min(Jn(e),Jn(t));return Math.ceil(e*i/(t*i))}function to(e){return w(e)}function io(e,t){const i=to(t.stepSize)?e.stepSize:Qn(e.stepSize),s=function(e,t){let{min:i,max:s}=e;const n=Math.min(Jn(s),Jn(t)),o=n>1?1:1/n,a=t*o;return s=Math.ceil(s*o/a)*a/o,i=i>t?Math.floor(i*o/a)*a/o:i<0?-Math.ceil(Math.abs(i)*o/a)*a/o:0,{min:i,max:s}}(e.limit,i),n=eo(Math.abs(s.max-s.min),i);return{limit:{min:s.min,max:s.max},stepSize:i,stepCount:n}}function so(e,t){var i,s,n,o,a,r;return{max:(s=null===(i=t)||void 0===i?void 0:i.max,null!=s?s:e.max),min:(o=null===(n=t)||void 0===n?void 0:n.min,null!=o?o:e.min),stepSize:(r=null===(a=t)||void 0===a?void 0:a.stepSize,null!=r?r:"auto")}}function no(e){const{dataRange:t,scaleOption:i,offsetSize:s,minStepSize:n,useSpectrumLegend:o}=e,a=so(t,i),r=io(function(e,t,i=1){const{min:s,max:n}=e,o=Math.abs(n-s),a=o/t;let r=Math.ceil(t/88),l=a*(t/r);return to(e.stepSize)?(l=e.stepSize,r=o/l):w(i)&&l<i&&(l=i,r=o/l),{limit:{min:s,max:n},stepSize:l,stepCount:r}}(a,s,n),a),l=o?null:function(e,{min:t,max:i},s){var n,o;const a=e.limit,r=w(null===(n=s)||void 0===n?void 0:n.min),l=w(null===(o=s)||void 0===o?void 0:o.max),d=!r&&a.min===t&&0!==a.min,c=!l&&a.max===i&&0!==a.max;return d||c?{min:d,max:c}:null}(r,a,i);if(l){const{stepSize:e,limit:t}=r;r.limit=function({min:e,max:t},i,s){return{min:s.min?e-i:e,max:s.max?t+i:t}}(t,e,l)}return r}const oo={year:31536e6,month:26784e5,week:6048e5,date:864e5,hour:36e5,minute:6e4,second:1e3};function ao(e){const{dataRange:t,rawCategoriesSize:i,scaleOption:s}=e,n=function(e,t,i){var s,n;const o=function({max:e,min:t},i){const s=e-t,n=ro.length-1;let o;s?ro.every((e,t)=>{const a=oo[e],r=Math.floor(s/a);let l;return r&&(l=t<n&&r<2&&r<i?t+1:t,o=ro[l]),!b(l)}):o="second";return o}(e,t),a=null!==(n=null===(s=i)||void 0===s?void 0:s.stepSize)&&void 0!==n?n:oo[o],r=so(e,i),l=Mt(Number(new Date(r.min)),a),d=Mt(Number(new Date(r.max)),a);return{divisionNumber:a,minDate:l,limit:{min:0,max:d-l}}}(t,i,s),{minDate:o,divisionNumber:a,limit:r}=n;return function(e,t,i){const{limit:s,stepSize:n}=e,{min:o,max:a}=s;return Object.assign(Object.assign({},e),{stepSize:wt(n,i),limit:{min:wt(St(o,t),i),max:wt(St(a,t),i)}})}(no(Object.assign(Object.assign({},j(e,"scaleOption")),{dataRange:r,minStepSize:1})),o,a)}const ro=["year","month","week","date","hour","minute","second"];function lo(e){var t;return!("percent"!==(null===(t=e)||void 0===t?void 0:t.type))}function co(e){return!Array.isArray(e)}function ho(e){return B(e,["series","stack"])||B(e,["series","column","stack"])||B(e,["series","area","stack"])}function uo(e){const t=e.length,i=e.map(({rawData:e})=>e.length),s=Math.max(...i),n=[];for(let i=0;i<s;i+=1){const s=[];for(let n=0;n<t;n+=1)s.push(e[n].rawData[i]);n[i]={values:s,sum:X(s),total:{positive:X(s.filter(e=>e>=0)),negative:X(s.filter(e=>e<0))}}}return n}function po(e){if(!e)return;const t={type:"normal",connector:!1};return function(e){return A(e)}(e)?Object.assign(Object.assign({},t),e):t}function mo(e){const t=e.map(({total:e})=>e.positive);return[...e.map(({total:e})=>e.negative),...t]}function go(e){if(!co(e))return e;let t=[];return co(e)&&Object.keys(e).forEach(i=>{t=[...t,...e[i]]}),t}function vo(e,t,i){const{hasPositive:s,hasNegative:n}=function(e){return{hasNegative:e.map(({total:e})=>e.negative).some(e=>e<0),hasPositive:e.map(({total:e})=>e.positive).some(e=>e>=0)}}(e);if("percent"===t){if(i)return"divergingPercentStack";if(n&&s)return"dualPercentStack";if(!n&&s)return"percentStack";if(n&&!s)return"minusPercentStack"}}function fo(e,t){const i={};return Object.keys(e).forEach(e=>{const s=e,n=ho(t);n?(i[s]||(i[s]={}),i[s].stack=po(n)):"radialBar"===e&&(i[e]={stack:!0})}),i}var bo={name:"stackSeriesData",state:({series:e,options:t})=>({stackSeries:fo(e,t)}),action:{setStackSeriesData({state:e}){const{series:t,stackSeries:i,options:s}=e,n=ho(s),o={};Object.keys(t).forEach(a=>{var r,l;const d=t[a],{data:c,seriesCount:h,seriesGroupCount:u}=d,p="radialBar"===a;n?(i[a]||(i[a]={}),i[a].stack=po(n)):p||(i[a]=null,delete i[a]);const{stack:m}=i[a]||{},g=!!(null===(r=s.series)||void 0===r?void 0:r.diverging);if(m){const t=c.some(e=>e.hasOwnProperty("stackGroup"))?function(e){const t={};return[...new Set(e.map(({stackGroup:e})=>e))].forEach(i=>{const s=e.filter(({stackGroup:e})=>i===e);t[i]=uo(s)}),t}(c):uo(c),i=null!=(l=m.type)?l:"normal",s=function(e){let t=[];if(Array.isArray(e))t=[0,...mo(e)];else for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t=[0,...t,...mo(e[i])]);return t}(t);o[a]={data:c,seriesCount:h,seriesGroupCount:u,stackData:t,dataRangeValues:s,scaleType:vo(go(t),i,g)},e.stackSeries[a].stackData=t}be(e.stackSeries,o)})}},observe:{updateStackSeriesData(){this.dispatch("setStackSeriesData")}}};function xo(e,t,i,s){var n,o;const{dataRange:a,layout:r,series:l,options:d}=e,c=e.categories,h=e.rawCategories,{labelSizeKey:u}=gi(t),p=b(null===(n=d.xAxis)||void 0===n?void 0:n.date),m={dataRange:a[s],offsetSize:Math.max(r.plot[u],1),scaleOption:i[s],rawCategoriesSize:h.length};let g;return a[s]&&(g=p?ao(m):no(m)),l.line&&c&&!(null===(o=d.xAxis)||void 0===o?void 0:o.pointOnColumn)&&(g=function(e,t,i){const s=Ei(t,Wt.X),n=i.map(e=>Number(s?new Date(e):e)),{limit:o,stepSize:a}=e,r=Math.min(...n),l=Math.max(...n),d=Object.assign({},o),c=l-r;let h=0,u=1;return c&&(o.min<r&&(d.min+=a,h=(d.min-r)/c,u-=h),o.max>l&&(d.max-=a,u-=(l-d.max)/c)),{limit:d,stepCount:eo(Math.abs(d.max-d.min),a),stepSize:a,positionRatio:h,sizeRatio:u}}(g,d,c)),g}function yo(e,t,i,s,n){const{dataRange:o,layout:a,series:r,stackSeries:l}=e,{valueSizeKey:d}=gi(t);let c;if(function(e){return!!e&&Object.keys(e).some(t=>lo(e[t].stack))}(l))Object.keys(r).forEach(e=>{var t;t=l[e].scaleType,c="minusPercentStack"===t?{limit:{min:-100,max:0},stepSize:25,stepCount:5}:"dualPercentStack"===t||"divergingPercentStack"===t?{limit:{min:-100,max:100},stepSize:25,stepCount:9}:{limit:{min:0,max:100},stepSize:25,stepCount:5}});else if(n){const e={dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]};c=no(e)}else c=no({dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]});return c}var So={name:"scale",state:()=>({scale:{}}),action:{setScale({state:e,initStoreState:t}){const{series:i,options:s,categories:n}=e,o=hi({series:i,options:s,categories:n}),{labelAxisName:a,valueAxisName:r}=mi(o,i),l=function(e,t,i){var s,n,o,a,r,l;const d={};if(pi(t))d[i]=null===(n=null===(s=e)||void 0===s?void 0:s[i])||void 0===n?void 0:n.scale;else{const{yAxis:t,secondaryYAxis:i}=bi(e);d.xAxis=null===(a=null===(o=e)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.scale,d.yAxis=null===(r=t)||void 0===r?void 0:r.scale,i&&(d.secondaryYAxis=null===(l=i)||void 0===l?void 0:l.scale)}return d}(s,i,r),d=Yi(t.series),c={};yi(s,r).forEach(t=>{c[t]=yo(e,o,l,t,d)}),d&&(c[a]=xo(e,o,l,a)),e.scale=c}},observe:{updateScale(){this.dispatch("setScale")}}};function wo(e,t){return e.some(({id:e})=>!x(e)&&!x(t.id)&&e===t.id)}function Mo(e,t,i=!1){return i?Number(new Date(e)):M(e)?function(e,t){return t.findIndex(t=>t===String(e))}(e,t):e}function Oo(e,t,i=[]){return i.flatMap(({range:i,mergeOverlappingRanges:s=!1,color:n,opacity:o})=>{const a=je(n,o),r=(Cs(i[0])?i:[i]).map(i=>({range:i.map(i=>Mo(i,e,t)),color:a}));return s?function(e){return{range:e.reduce((e,{range:t})=>{const[i,s]=e,[n,o]=t;return[Math.min(i,n),Math.max(s,o)]},[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER]),color:e[0].color}}(r):r})}var Ao={name:"plot",state:({options:e})=>{var t,i,s;return{plot:{visible:(s=null===(i=null===(t=e)||void 0===t?void 0:t.plot)||void 0===i?void 0:i.visible,null==s||s),lines:[],bands:[]}}},action:{setPlot({state:e}){var t,i,s,n,o,a,r,l;const{series:d,options:c}=e;if(!d.area&&!d.line)return;const h=e.rawCategories,u=c,p=function(e,t,i=[]){return i.map(({value:i,color:s,opacity:n})=>({value:Mo(i,e,t),color:je(s,n)}))}(h,!!(null===(i=null===(t=c)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.date),null===(n=null===(s=u)||void 0===s?void 0:s.plot)||void 0===n?void 0:n.lines),m=Oo(h,!!(null===(a=null===(o=c)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.date),null===(l=null===(r=u)||void 0===r?void 0:r.plot)||void 0===l?void 0:l.bands);be(e.plot,{lines:p,bands:m})},addPlotLine({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines)?n:[];wo(o,t)||this.dispatch("updateOptions",{options:{plot:{lines:[...o,t]}}})},addPlotBand({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[];wo(o,t)||this.dispatch("updateOptions",{options:{plot:{bands:[...o,t]}}})},removePlotLine({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines,null!=n?n:[]).filter(({id:e})=>e!==t);this.dispatch("updateOptions",{options:{plot:{lines:o}}})},removePlotBand({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands,null!=n?n:[]).filter(({id:e})=>e!==t);this.dispatch("updateOptions",{options:{plot:{bands:o}}})}},observe:{updatePlot(){this.dispatch("setPlot")}}};function ko(e,t){return`<span class="toastui-chart-series-name">\n    <i class="toastui-chart-icon" style="background: ${t}"></i>\n    <span class="toastui-chart-name">${e}</span>\n  </span>`}function Co(e,t){return`<div class="toastui-chart-tooltip-series">\n    <span class="toastui-chart-series-name">${e}</span>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}const To={default:function(e,{header:t,body:i},s){const{borderColor:n,borderWidth:o,background:a,borderRadius:r,borderStyle:l}=s;return`<div class="toastui-chart-tooltip" style="${`border: ${o}px ${l} ${n};border-radius: ${r}px;background: ${a};`}">${t}${i}</div>`},defaultHeader:function({category:e},t){return e?`<div class="toastui-chart-tooltip-category" style="${Ee(t.header)}">\n        ${e}\n      </div>`:""},defaultBody:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n      ${e.map(({label:e,color:t,formattedValue:i})=>`<div class="toastui-chart-tooltip-series">\n                ${ko(e,t)}\n                <span class="toastui-chart-series-value">${i}</span>\n              </div>`).join("")}\n    </div>`},boxPlot:function({data:e},t){const i=e.reduce((e,t,i)=>i?(e.category===t.category&&e.label===t.label&&(e.value=[...e.value,...t.value]),e):t,{});return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n      ${[i].map(({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">\n              ${ko(e,t)}\n            </div>\n            <div>\n          ${i.map(({title:e,formattedValue:t})=>Co(e,t)).join("")}\n            </div>`).join("")}\n    </div>`},bullet:function({data:e},t){return e.length>1?function(e,t){const i=e.map(({value:e})=>e[0]),[s,n,o]=["Actual","Range","Marker"].map(e=>function(e,t){return e.filter(({title:e})=>e===t).sort((e,t)=>Cs(e.value)&&Cs(t.value)?e.value[0]-t.value[0]:w(e.value)&&w(t.value)?e.value-t.value:0).map(({formattedValue:e,color:t})=>function(e,t){return`<div class="toastui-chart-tooltip-series">\n    <i class="toastui-chart-icon" style="background: ${e}"></i>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}(t,e)).join("")}(i,e));return`<div class="toastui-chart-tooltip-category" style="${Ee(t.header)}">\n      ${e[0].label}\n    </div>\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n      ${s?'<div class="toastui-chart-tooltip-title">Actual</div>':""} ${s}\n      ${n?'<div class="toastui-chart-tooltip-title">Ranges</div>':""} ${n}\n      ${o?'<div class="toastui-chart-tooltip-title">Markers</div>':""} ${o}\n    </div>`}(e,t):function(e,t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n      ${e.map(({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">${ko(e,t)}</div>\n            ${i.map(({title:e,formattedValue:t})=>Co(e,t)).join("")}`).join("")}\n    </div>`}(e,t)},pie:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n      ${e.map(({label:e,color:t,formattedValue:i,percentValue:s})=>`<div class="toastui-chart-tooltip-series">\n          ${ko(e,t)}\n          <span class="toastui-chart-series-value">${ii(s)}&nbsp;&nbsp;(${i})</span>\n        </div>`).join("")}\n    </div>`},heatmap:function({data:e},t){return""+e.map(({label:e,color:i,formattedValue:s})=>`<div class="toastui-chart-tooltip-category" style="${Ee(t.header)}">\n          ${e}\n        </div>\n        <div class="toastui-chart-tooltip-series-wrapper" style="${Ee(t.body)}">\n          <div class="toastui-chart-tooltip-series">\n            ${ko(s,i)}\n          </div>\n        </div>`).join("")}};function Do(e,t){return e.querySelectorAll(t)}const Ro=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),jo=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),Bo=["script","iframe","textarea","form","button","select","input","meta","style","link","title","embed","object"],Lo=/href|src|background/gi,Po=/((java|vb|live)script|x):/gi,Eo=/^on\S+/;function Wo(e){const t=document.createElement("div");return M(e)?(e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e):t.appendChild(e),function(e){Do(e,Bo.join(",")).forEach(e=>{!function(e){e.parentNode&&e.parentNode.removeChild(e)}(e)})}(t),function(e){Do(e,"*").forEach(e=>{const{attributes:t}=e;!function(e,t){t.forEach(({name:t})=>{Eo.test(t)&&(e[t]=null),e.getAttribute(t)&&e.removeAttribute(t)})}(e,function(e){let t=[];try{t=Array.prototype.slice.call(e)}catch(i){!function(e,t,i=null){for(let s=0,n=e.length;s<n&&!1!==t.call(i,e[s],s,e);s+=1);}(e,(function(e){t.push(e)}))}return t}(t).filter(e=>{const{name:t,value:i}=e,s=t.match(Ro),n=t.match(jo),o=s&&(a=i,t.match(Lo)&&a.match(Po));var a;return!s&&!n||o}))})}(t),t.innerHTML}class zo extends Et{constructor(){super(...arguments),this.tooltipInfoModels={},this.onSeriesPointHovered=({models:e,name:t})=>{var i;this.tooltipInfoModels[t]=(null===(i=e)||void 0===i?void 0:i.length)?[...e]:[];!!this.getTooltipInfoModels().length?this.renderTooltip():this.removeTooltip()}}isTooltipContainerOverflow(e,t){const{width:i,height:s}=this.tooltipContainerEl.getBoundingClientRect(),{x:n,y:o,width:a,height:r}=this.rect;return{overflowX:e>n+a||e+i>n+a,overflowY:t>o+r||t+s>o+r}}getPositionInRect(e){const{target:t}=e,i=this.rect.x+e.x,s=this.rect.y+e.y;let n=i+t.radius+t.width+this.offsetX,o=s+this.offsetY;const{overflowX:a,overflowY:r}=this.isTooltipContainerOverflow(n,o),{width:l,height:d}=this.tooltipContainerEl.getBoundingClientRect();return a&&(n=i-(l+t.radius+this.offsetX)>0?i-(l+t.radius+this.offsetX):i+this.offsetX),r&&(o=s+t.height-(d+this.offsetY)>0?s+t.height-(d+this.offsetY):o),{x:n,y:o}}setTooltipPosition(e){const{x:t,y:i}=this.getPositionInRect(e);this.tooltipContainerEl.style.transform=Le(t,i)}getTooltipInfoModels(){return Object.values(this.tooltipInfoModels).flatMap(e=>e)}renderTooltip(){const e=this.getTooltipInfoModels().reduce((e,t)=>{const{data:i,x:s,y:n,radius:o,width:a,height:r}=t;return e.x=e.x?(e.x+s)/2:s,e.y=e.y?(e.y+n)/2:n,w(o)&&(e.target.radius=o),a&&(e.target.width=a),r&&(e.target.height=r),e.data.push(Object.assign(Object.assign({},i),{value:Array.isArray(i.value)?i.value.map(e=>Object.assign(Object.assign({},e),{formattedValue:this.getFormattedValue(e.value,i)})):i.value,formattedValue:this.getFormattedValue(i.value,i)})),!e.category&&i.category&&(e.category=i.category),i.templateType&&(e.templateType=i.templateType),e},{type:"tooltip",x:0,y:0,data:[],target:{radius:0,width:0,height:0}});var t;this.tooltipContainerEl.innerHTML=Wo(this.templateFunc(e,{header:To.defaultHeader(e,this.theme),body:(t=e.templateType,To[t||"defaultBody"])(e,this.theme)},this.theme)),this.setTooltipPosition(e)}initialize({chartEl:e}){this.type="tooltip",this.name="tooltip",this.chartEl=e,this.tooltipContainerEl=document.createElement("div"),this.tooltipContainerEl.classList.add("toastui-chart-tooltip-container");const{width:t,height:i,top:s,left:n}=this.chartEl.getBoundingClientRect();this.tooltipContainerEl.style.transform=Le(n+t/2,s+i/2),this.chartEl.appendChild(this.tooltipContainerEl),this.eventBus.on("seriesPointHovered",this.onSeriesPointHovered)}removeTooltip(){this.tooltipContainerEl.innerHTML=""}setTooltipTransition(e){var t;const i=null===(t=e.tooltip)||void 0===t?void 0:t.transition;S(i)&&i?this.tooltipContainerEl.style.transition="transform 0.2s ease":M(i)&&(this.tooltipContainerEl.style.transition=i)}render({layout:e,options:t,theme:i}){var s,n,o,a,r,l,d,c,h,u,p;this.setTooltipTransition(t),this.rect=e.plot,this.theme=i.tooltip,this.templateFunc=null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s.tooltip)||void 0===n?void 0:n.template)?o:To.default,this.offsetX=null!=(l=null===(r=null===(a=t)||void 0===a?void 0:a.tooltip)||void 0===r?void 0:r.offsetX)?l:10,this.offsetY=null!=(h=null===(c=null===(d=t)||void 0===d?void 0:d.tooltip)||void 0===c?void 0:c.offsetY)?h:0,this.formatter=null===(p=null===(u=t)||void 0===u?void 0:u.tooltip)||void 0===p?void 0:p.formatter}getFormattedValue(e,t){return this.formatter?this.formatter(e,t):function(e){let t="";return t=Cs(e)?`${e[0]} ~ ${e[1]}`:A(e)&&!Array.isArray(e)?`(${e.x}, ${e.y})`+(function(e){return e.hasOwnProperty("r")}(e)?", r: "+e.r:""):String(e),t}(e)}}function Io({axisData:e,offsetSize:t,value:i,startIndex:s=0}){const n=Lt(e,t,i,function(e,t=0){return~~e?e-t:e}(i,s));return n>0?Math.min(t,n):0}function Yo(e,t){return e?t.xAxis:t.yAxis}class Ho extends Et{constructor(){super(...arguments),this.models={plot:[],line:[],band:[]},this.startIndex=0}initialize(){this.type="plot"}getPlotAxisSize(e){return{offsetSize:e?this.rect.width:this.rect.height,anchorSize:e?this.rect.height:this.rect.width}}renderLines(e,t,i=[]){return i.map(({value:i,color:s})=>{const{offsetSize:n}=this.getPlotAxisSize(!0),o=Io({axisData:Yo(!0,e),offsetSize:n,value:i,categories:t,startIndex:this.startIndex});return this.makeLineModel(!0,o,{color:s})})}renderBands(e,t,i=[]){const{offsetSize:s,anchorSize:n}=this.getPlotAxisSize(!0);return i.map(({range:i,color:o})=>{const[a,r]=i.map(i=>Io({axisData:Yo(!0,e),offsetSize:s,value:i,categories:t,startIndex:this.startIndex}));return{type:"rect",x:Ct(a),y:Ct(0),width:r-a,height:n,color:o}})}renderPlotLineModels(e,t,i={}){var s,n,o;const{size:a,startPosition:r,axes:l}=i,{lineColor:d,lineWidth:c,dashSegments:h}=this.theme[t?"vertical":"horizontal"],u=(null===(o=t?null===(s=l)||void 0===s?void 0:s.xAxis:null===(n=l)||void 0===n?void 0:n.yAxis)||void 0===o?void 0:o.tickInterval)||1;return e.filter((e,t)=>!(t%u)).map(e=>this.makeLineModel(t,e,{color:d,lineWidth:c,dashSegments:h},null!=a?a:this.rect.width,null!=r?r:0))}renderPlotsForCenterYAxis(e){const{xAxisHalfSize:t,secondStartX:i,yAxisHeight:s}=e.centerYAxis,n=e.xAxis.tickCount,o=[...this.renderPlotLineModels(kt(t,n),!0),...this.renderPlotLineModels(kt(t,n,i),!0)],a=kt(s,e.yAxis.tickCount);return[...o,...[...this.renderPlotLineModels(a,!1,{size:t}),...this.renderPlotLineModels(a,!1,{size:t,startPosition:i})]]}renderPlots(e){return e.centerYAxis?this.renderPlotsForCenterYAxis(e):[...this.renderPlotLineModels(this.getTickPixelPositions(!1,e),!1,{axes:e}),...this.renderPlotLineModels(this.getTickPixelPositions(!0,e),!0,{axes:e})]}getTickPixelPositions(e,t){const{offsetSize:i}=this.getPlotAxisSize(e);return kt(i,Yo(e,t).tickCount)}renderPlotBackgroundRect(){return Object.assign(Object.assign({type:"rect",x:0,y:0},R(this.rect,"width","height")),{color:this.theme.backgroundColor})}render(e){var t,i,s;const{layout:n,axes:o,plot:a,zoomRange:r,theme:l}=e;if(!a)return;this.rect=n.plot,this.startIndex=null!=(i=null===(t=r)||void 0===t?void 0:t[0])?i:0,this.theme=l.plot;const d=null!=(s=e.categories)?s:[],{lines:c,bands:h,visible:u}=a;this.models.line=this.renderLines(o,d,c),this.models.band=this.renderBands(o,d,h),u&&(this.models.plot=[this.renderPlotBackgroundRect(),...this.renderPlots(o)])}makeLineModel(e,t,{color:i,dashSegments:s=[],lineWidth:n=1},o,a=0){const r=Ct(e?t:a),l=Ct(e?0:t);return{type:"line",x:r,y:l,x2:r+(e?0:null!=o?o:this.rect.width),y2:l+(e?this.rect.height:0),strokeStyle:i,lineWidth:n,dashSegments:s}}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.05)",e.ctx.lineWidth=1}}function No({models:e,comparisonModel:t,name:i,eventDetectType:s}){switch(i){case"heatmap":return _o(e,t);case"bullet":return"grouped"===s?qo(e,t):_o(e,t);case"radar":case"bubble":case"scatter":case"area":case"line":return function(e,t){var i;let s=!1;e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce((e,i,s)=>e&&i.seriesIndex===t[s].seriesIndex&&i.index===t[s].index,!0));return s}(e,t);case"pie":return Uo(e,t);case"column":case"bar":return"grouped"===s?qo(e,t):Uo(e,t);case"boxPlot":return"grouped"===s?Uo(e,t):function(e,t){var i,s,n,o,a;let r=!1;if(e.length&&(null===(i=t)||void 0===i?void 0:i.length)){const{type:i,data:l}=e[0];r=i===t[0].type&&(null===(s=l)||void 0===s?void 0:s.label)===(null===(n=t[0].data)||void 0===n?void 0:n.label)&&(null===(o=l)||void 0===o?void 0:o.category)===(null===(a=t[0].data)||void 0===a?void 0:a.category)}return r}(e,t);case"treemap":return o=t,(n=e).length&&(null===(a=o)||void 0===a?void 0:a.length)&&n[0].label===o[0].label;case"gauge":return _o(e,t);default:return!1}var n,o,a}function Xo(e,t,i){let s=1/0,n=[];return e.forEach(e=>{const{x:o,y:a,radius:r}=e,l=jt({x:o+i.x,y:a+i.y},t);s>l?(s=l,n=[e]):s===l&&(n.length&&n[0].radius>r?n=[e]:n.push(e))}),n}function Fo(e,t,i,s=!0){const{pointOnColumn:n,tickDistance:o,rectResponderCount:a}=t,{width:r,height:l}=e,d=n?[]:[0,a-1],c=o/2;return T(0,a).map(e=>{const t=d.includes(e)?c:o;let a=0;return 0!==e&&(a+=n?o*e:c+o*(e-1)),{type:"rect",y:s?0:a,height:s?l:t,x:s?a:0,width:s?t:r,index:e,label:i[e]}})}function Go(e,t){const{width:i,height:s}=t;let n=0;return e.sort((e,t)=>e.x-t.x).reduce((t,o,a)=>{const{x:r,label:l}=o,d=e[a+1],c=d?(d.x+r)/2:i,h={type:"rect",x:n,y:0,width:c-n,height:s,label:l,index:a};return n=c,[...t,h]},[])}function $o(e,t){const i=t.reduce((e,t)=>{const{index:i,seriesIndex:s}=t;return e[s]||(e[s]=[]),e[s][i]=t,e},[]);return e.reduce((e,t)=>{const{seriesIndex:s,index:n}=t,o=i[s][n],{category:a}=o;return a?(e[a]||(e[a]=[]),e[a].push(Object.assign(Object.assign({},t),{data:o})),e):e},{})}function Vo(e){return e.reduce((e,t)=>!e.length||t.depth>e[0].depth?[t]:e,[])}function _o(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].name===t[0].name}function Uo(e,t){var i;let s=!1;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce((e,i,s)=>{var n,o,a,r;return e&&(null===(n=i.data)||void 0===n?void 0:n.label)===(null===(o=t[s].data)||void 0===o?void 0:o.label)&&(null===(a=i.data)||void 0===a?void 0:a.category)===(null===(r=t[s].data)||void 0===r?void 0:r.category)},!0)),s}function qo(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].index===t[0].index}function Ko(e,t,i=!1){var s,n,o;const a=function(e,t,i=!1){return"stackTotal"!==t&&D(["center","start","end","auto","outer"],e.anchor)?e.anchor:function(e,t=!1){let i="auto";switch(e){case"point":i="center";break;case"rect":i=t?"center":"auto";break;case"sector":case"treemapSeriesName":i="center";break;case"stackTotal":i="auto"}return i}(t,i)}(e,t,i),{offsetX:r=0,offsetY:l=0}=e,d=k(e.formatter)?e.formatter:e=>String(e)||"",c={anchor:a,offsetX:r,offsetY:l,formatter:d};if(i){const t=e.stackTotal;c.stackTotal={visible:!S(null===(s=t)||void 0===s?void 0:s.visible)||t.visible,formatter:k(null===(n=t)||void 0===n?void 0:n.formatter)?t.formatter:d}}return"sector"===t&&(null===(o=e.pieSeriesName)||void 0===o?void 0:o.visible)&&(c.pieSeriesName=Object.assign({anchor:"center"},e.pieSeriesName)),c}function Zo(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=s+o/2;let l,d="center";if("right"===a)switch(t){case"start":d="left",l=i;break;case"end":d="right",l=i+n;break;case"center":d="center",l=i+n/2;break;default:d="left",l=i+n}else switch(t){case"start":d="right",l=i+n;break;case"end":d="left",l=i;break;case"center":d="center",l=i+n/2;break;default:d="right",l=i}return{x:l,y:r,textAlign:d,textBaseline:"middle"}}(e,i);let{x:d,y:c,textAlign:h}=l;if("auto"===i){const i=function(e,t,i){const{width:s,value:n,direction:o,plot:a,theme:r}=e,{formatter:l}=t,d=We(r),c=vt(M(n)?n:l(n),d);let{x:h,textAlign:u}=i;return("left"===o&&h-c<0||h+c>a.size)&&(h=e.x+s,u="right","left"===o&&s>=c&&(h=e.x,u="left")),{x:h,textAlign:u}}(e,t,{x:d,textAlign:h});d=i.x,h=i.textAlign}c+=n,"left"===o?d-=s:d+=s;return"right"===h?d-=10:"left"===h&&(d+=10),d-=a,c-=r,{x:d,y:c,textAlign:h,textBaseline:l.textBaseline}}function Jo(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=i+n/2;let l="middle",d=0;if("top"===a)switch(t){case"end":l="top",d=s;break;case"start":l="bottom",d=s+o;break;case"center":l="middle",d=s+o/2;break;default:l="bottom",d=s}else switch(t){case"end":l="bottom",d=s+o;break;case"start":l="top",d=s;break;case"center":l="middle",d=s+o/2;break;default:l="top",d=s+o}return{x:r,y:d,textAlign:"center",textBaseline:l}}(e,i);let{x:d,y:c,textBaseline:h}=l;if("auto"===i){const t=function(e,t,i){const{height:s,direction:n,plot:o,theme:a,value:r}=e,l=We(a),d=o.size,c=ft(""+r,l);let{y:h,textBaseline:u}=i;return(!("bottom"===n)&&h-c<0||h+c>d)&&(h=e.y,u="top",h+c>d&&(h=e.y,u="bottom"),"bottom"===n&&(h=e.y+s,u="bottom")),{y:h,textBaseline:u}}(e,0,l);c=t.y,h=t.textBaseline}d+=s,"top"===o?c+=n:"bottom"===o&&(c-=n);return"bottom"===h?c-=5:"top"===h&&(c+=5),d-=a,c-=r,{x:d,y:c,textAlign:l.textAlign,textBaseline:h}}function Qo(e,t){const{type:i,value:s,direction:n,name:o,theme:a}=e,r=function(e){return D(["left","right"],e)}(n)?Zo(e,t):Jo(e,t),l="stackTotal"===i?t.stackTotal.formatter:t.formatter;return Object.assign(Object.assign({type:i},r),{text:M(s)?s:l(s),name:o,seriesColor:e.color,theme:a})}function ea(e,t){const{formatter:i}=t,s=function(e,t){const{anchor:i}=t,{clockwise:s,degree:{start:n,end:o},radius:{inner:a,outer:r}}=e;let l=n,d=o,c="center",h=(n+o)/2;"start"===i?(c=s?"left":"right",d=l,h=n):"end"===i&&(c=s?"right":"left",l=d,h=o);const{x:u,y:p}=Je(Ke(i,Object.assign(Object.assign({},e),{degree:{start:l,end:d},radius:{inner:a,outer:r}})));return{x:u,y:p,textAlign:c,textBaseline:"middle",radian:Ze(h,0)}}(e,t),{value:n,name:o,theme:a}=e,r=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,theme:r})}function ta(e,t){const{formatter:i}=t,s=function(e,t){const i=t.anchor,s=Je(Ke(i,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:"outer"===i?e.radius.outer+30:e.radius.outer})}))),n=it(e,i);return Object.assign(Object.assign({},s),{textAlign:n,textBaseline:sa(t)?"bottom":"middle"})}(e,t),{value:n,name:o,theme:a}=e,r=t.anchor,l=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,callout:na(t)?aa(e,r):null,theme:l})}function ia(e,t){var i,s,n,o,a;return(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s[t])||void 0===n?void 0:n.dataLabels)||(null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.dataLabels)||{}}function sa(e){var t;return e.anchor===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function na(e){var t;return"outer"===e.anchor||"outer"!==(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function oa(e){var t;return"outer"!==e.anchor||"outer"===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function aa(e,t){if("outer"!==t)return null;const{x:i,y:s}=Je(Ke("outer",Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:e.radius.outer+20})}))),{x:n,y:o}=Je(Ke("outer",Object.assign({},e))),{callout:a}=e.theme;return{x:i,y:s,x2:n,y2:o,theme:Object.assign(Object.assign({},a),{lineColor:a.useSeriesColor?e.color:a.lineColor})}}class ra extends Et{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.yAxisName="yAxis",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!Sn(e,"line"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(K);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(K);const o=this.getResponderSeriesWithTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{var t;const{index:i,seriesIndex:s}=e;if(!yn(e,this.eventDetectType,"line"))return;const n=this.getResponderCategoryByIndex(i);if(!n)return;const o="grouped"===this.eventDetectType?this.tooltipCircleMap[n]:[this.tooltipCircleMap[n][s]];(null===(t=o)||void 0===t?void 0:t.length)&&(this.onMousemoveNearType(o),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="line",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.rect[0].width=this.models.rect[0].width*e}setEventDetectType(e,t){var i,s;(e.area||e.column)&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),e.scatter&&(this.eventDetectType="near")}render(e,t){var i,s,n,o,a,r;const{viewRange:l}=t,{layout:d,series:c,scale:h,axes:u,legend:p,theme:m}=e;if(!c.line)throw new Error(Q(this.name));const g=null!=(i=e.categories)?i:[],v=null!=(s=e.rawCategories)?s:[],f=Object.assign({},e.options);(null===(n=f)||void 0===n?void 0:n.series)&&"line"in f.series&&(f.series=Object.assign(Object.assign({},f.series),f.series.line)),this.setEventDetectType(c,f);const b=u.xAxis,x=null!=(o=f.series)?o:{},y=c.line.data;this.theme=m.series.line,this.rect=d.plot,this.activeSeriesMap=Mn(p),this.startIndex=null!=(r=null===(a=l)||void 0===a?void 0:a[0])?r:0,this.selectable=this.getSelectableOption(f),this.yAxisName=xi(f,this.name,"yAxis");const S=this.renderLinePointsModel(y,h,b,x,g),{dotSeriesModel:w,responderModel:M}=this.renderCircleModel(S,x),O=this.makeTooltipData(y,g);this.tooltipCircleMap=$o(M,O),this.models={rect:[this.renderClipRectAreaModel()],series:S,dot:w},this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),ia(f,this.name).visible&&this.renderDataLabels(this.getDataLabels(S));const A=Yi(c);this.responders=this.getResponders({labelAxisData:b,responderModel:M,tooltipDataArr:O,categories:g,rawCategories:v,coordinateType:A})}getResponders({labelAxisData:e,responderModel:t,tooltipDataArr:i,categories:s,rawCategories:n,coordinateType:o}){if("near"===this.eventDetectType)return this.makeNearTypeResponderModel(t,i,n);if("point"===this.eventDetectType)return this.makeNearTypeResponderModel(t,i,n,0);if(o){return Go(this.getRectResponderInfoForCoordinateType(t,n),this.rect)}return Fo(this.rect,e,s)}makeNearTypeResponderModel(e,t,i,s){return e.map((e,n)=>Object.assign(Object.assign({},e),{data:t[n],detectionSize:s,label:i[e.index]}))}makeTooltipData(e,t){return e.flatMap(({rawData:e,name:i,color:s},n)=>e.map((e,o)=>y(e)?{}:{label:i,color:s,value:Wi(e),category:t[Ii(e,t,o,this.startIndex)],seriesIndex:n,index:o}))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}renderLinePointsModel(e,t,i,s,n){const{spline:o}=s,a=t[this.yAxisName].limit,{lineWidth:r,dashSegments:l}=this.theme;return e.map(({rawData:e,name:t,color:s},d)=>{const c=[],h=this.activeSeriesMap[t];return e.forEach((e,t)=>{if(y(e))return c.push(null);const s=Wi(e),o=(1-Rt(s,a))*this.rect.height,r=Lt(i,this.rect.width,zi(e),Ii(e,n,t,this.startIndex));c.push({x:r,y:o,value:s})}),o&&Dt(c),{type:"linePoints",points:c,seriesIndex:d,name:t,color:De(s,h?1:.3),lineWidth:r,dashSegments:l}})}getRectResponderInfoForCoordinateType(e,t){const i={};return e.filter(({x:e})=>e>=0&&e<=this.rect.width).reduce((e,s)=>{const{index:n,x:o}=s;if(!i[o]){const s=t[n];i[o]=!0,e.push({x:o,label:s})}return e},[])}renderCircleModel(e,t){const i=[],s=[],n=!!t.showDot,{hover:o,dot:a}=this.theme,r=o.dot;return e.forEach(({color:e,name:t,points:o},l)=>{const d=this.activeSeriesMap[t];o.forEach((o,c)=>{var h,u;if(y(o))return;const{x:p,y:m}=o,g={type:"circle",x:p,y:m,seriesIndex:l,name:t,index:c};n&&i.push(Object.assign(Object.assign({},g),{radius:a.radius,color:De(e,d?1:.3),style:[{lineWidth:a.borderWidth,strokeStyle:(h=a.borderColor,null!=h?h:e)}]})),s.push(Object.assign(Object.assign({},g),{radius:r.radius,color:(u=r.color,null!=u?u:De(e,1)),style:["default"]}))})}),{dotSeriesModel:i,responderModel:s}}getCircleModelsFromRectResponders(e,t){var i,s;if(!e.length||!e[0].label)return[];const n=null!=(s=this.tooltipCircleMap[null===(i=e[0])||void 0===i?void 0:i.label])?s:[];return"grouped"===this.eventDetectType?n:Xo(n,t,this.rect)}onMousemoveNearType(e){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderSeriesWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.onMousemoveNearType(t)}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):D(["near","point"],this.eventDetectType)?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap(({points:e,name:i,color:s})=>e.map(e=>y(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?s:t.color})})))}getResponderSeriesWithTheme(e,t){const{radius:i,color:s,borderWidth:n,borderColor:o}=this.theme[t].dot;return e.map(e=>{const t=null!=s?s:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,style:[{lineWidth:n,strokeStyle:null!=o?o:De(t,.5)}]})})}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getResponderSeriesWithTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap(e=>e).find(t=>t.index===e))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class la extends Et{constructor(){super(...arguments),this.activatedResponders=[],this.seriesColorMap={},this.seriesIconTypeMap={},this.onClickCheckbox=e=>{const{label:t,checked:i}=e[0];this.store.dispatch("setAllLegendActiveState",!0),this.store.dispatch("setLegendCheckedState",{name:t,checked:!i}),i?this.store.dispatch("disableSeries",t):this.store.dispatch("enableSeries",t),this.eventBus.emit("needDraw")},this.onClickLabel=e=>{const{label:t}=e[0];this.eventBus.emit("resetSelectedSeries"),this.activatedResponders.length&&this.activatedResponders[0].label===t?(this.store.dispatch("setAllLegendActiveState",!0),this.activatedResponders=[]):(this.store.dispatch("setAllLegendActiveState",!1),this.store.dispatch("setLegendActiveState",{name:t,active:!0}),this.activatedResponders=e),this.eventBus.emit("needDraw")}}onClick({responders:e}){var t;if(e.length){const{data:i}=e[0];"checkbox"===(null===(t=i)||void 0===t?void 0:t.name)?this.eventBus.emit("clickLegendCheckbox",ve(e)):this.eventBus.emit("clickLegendLabel",ve(e))}}initialize(){this.type="legend",this.name="legend",this.eventBus.on("clickLegendCheckbox",this.onClickCheckbox),this.eventBus.on("clickLegendLabel",this.onClickLabel)}initColorAndIconTypeMap(e){this.seriesColorMap={},this.seriesIconTypeMap={},e.forEach(({label:e,color:t,iconType:i})=>{this.seriesColorMap[e]=t,this.seriesIconTypeMap[e]=i})}getXPositionWhenVerticalAlign(e){const{offset:t,rowWidths:i}=e.reduce((e,t)=>{const{rowIndex:i,columnIndex:s,width:n}=t;return x(e.rowWidths[i])&&(e.rowWidths[i]=0,e.offset[i]=[0]),e.rowWidths[i]+=n+(s?Xs:0),e.offset[i][s+1]=e.offset[i][s]+Xs+n,e},{offset:[],rowWidths:[]}),{width:s}=this.rect;return i.forEach((e,i)=>{const n=(s-e)/2;t[i]=t[i].map(e=>e+n)}),t}getXPositionWhenHorizontalAlign(e){const t=e.reduce((e,t)=>{const{columnIndex:i,width:s}=t;return x(e[i])&&(e[i]=0),e[i]=Math.max(e[i],s),e},[]);return e.reduce((e,i)=>{const{rowIndex:s,columnIndex:n}=i;return x(e[s])&&(e[s]=[0]),e[s][n+1]=e[s][n]+Xs+t[n],e},[])}renderLegendModel(e){const{data:t,showCheckbox:i,align:s,useScatterChartIcon:n}=e,o=ps(s),a=Vs(this.theme.label.fontSize),r=o?this.getXPositionWhenVerticalAlign(t):this.getXPositionWhenHorizontalAlign(t);return[Object.assign({type:"legend",align:s,showCheckbox:i,data:t.map(e=>{var t;const{label:i,iconType:s,rowIndex:o,columnIndex:l}=e;return Object.assign(Object.assign({},e),{iconType:(t=this.seriesIconTypeMap[i],null!=t?t:s),color:this.seriesColorMap[i],x:r[o][l],y:us.Y+a*o,useScatterChartIcon:n})})},this.theme.label)]}makeCheckboxResponder(e,t){return t?e.map(e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x,y:e.y,width:Gs,height:Gs,data:{name:"checkbox"}})):[]}makeLabelResponder(e,t){const i=Pe(this.theme.label);return e.map(e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x+(t?Gs+Fs:0)+$s+Fs,y:e.y,width:vt(e.label,i),data:{name:"label"},height:Gs}))}render({layout:e,legend:t,theme:i}){if(this.isShow=t.visible&&!!t.data.length,!this.isShow)return;const{showCheckbox:s,data:n}=t;this.rect=e.legend,this.theme=i.legend,this.initColorAndIconTypeMap(n),this.models=this.renderLegendModel(t);const{data:o}=this.models[0],a=this.makeCheckboxResponder(o,s),r=this.makeLabelResponder(o,s);this.responders=[...a,...r]}}function da(e,t,i,s){var n;const{type:o}=e,a=[];if("point"===o)a.push(function(e,t,i){const{width:s,height:n}=i,{anchor:o,offsetX:a=0,offsetY:r=0,formatter:l}=t,{name:d,theme:c}=e;let h="middle";"end"===o?h="bottom":"start"===o&&(h="top");const u=e.x+a,p=e.y+r;return{type:"point",x:u<0||u>s?e.x:u,y:p<0||p>n?e.y:p,text:l(e.value,e.data),textAlign:"center",textBaseline:h,name:d,theme:c}}(e,t,i));else if("sector"===o){if("radialBar"===s)a.push(ea(e,t));else if(a.push(ta(e,t)),null===(n=t.pieSeriesName)||void 0===n?void 0:n.visible){const i=function(e,t){var i;const s=null===(i=t.pieSeriesName)||void 0===i?void 0:i.anchor,n="outer"===s,o=Je(Ke(s,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:n?e.radius.outer+30:e.radius.outer})}))),a=it(e,s),r=e.theme.pieSeriesName,l=Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.color:r.color});return Object.assign(Object.assign({type:"pieSeriesName"},o),{text:e.name,callout:oa(t)?aa(e,s):null,textAlign:a,textBaseline:sa(t)?"top":"middle",theme:l})}(e,t);a.push(i)}}else"line"===o?a.push(function(e,t){const{value:i,textAlign:s,textBaseline:n}=e,{formatter:o}=t;return Object.assign(Object.assign({},e),{x:e.x,y:(e.y+e.y2)/2,textAlign:null!=s?s:"center",textBaseline:null!=n?n:"middle",text:M(i)?i:o(i)})}(e,t)):a.push(Qo(e,t));return a}class ca extends Et{constructor(){super(...arguments),this.dataLabelsMap={},this.renderSeriesDataLabels=e=>{this.appendDataLabels(e),this.models=this.renderLabelModel(),this.drawModels?this.sync():this.drawModels=this.getDrawModelsAppliedOpacity(0)}}initialize(){this.type="dataLabels",this.name="dataLabels",this.eventBus.on("renderDataLabels",this.renderSeriesDataLabels)}initUpdate(e){this.drawModels&&(this.drawModels=this.getDrawModelsAppliedOpacity(e))}render({layout:e,options:t,series:i,nestedPieSeries:s}){this.rect=e.plot,this.options=t,this.isShow=this.visibleDataLabels(i,s)}visibleDataLabels(e,t){var i,s;const n=!!(null===(s=null===(i=this.options.series)||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible),o=Object.keys(e).some(e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)}),a=!(!t||!Object.keys(t).some(e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)}));return n||o||a}appendDataLabels({name:e,data:t}){const i=ia(this.options,e),s=!!ho(this.options),n=[];t.forEach(t=>{var o;const{type:a,value:r}=t,l=Ko(i,a,s);"stackTotal"===a&&!(null===(o=l.stackTotal)||void 0===o?void 0:o.visible)||x(r)||n.splice(n.length,0,...da(t,l,this.rect,e))}),this.dataLabelsMap[e]={data:n,options:i}}getDrawModelsAppliedOpacity(e){return Object.keys(this.models).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:this.models[i].map(t=>Object.assign(Object.assign({},t),{opacity:e}))}),{series:[],total:[]})}renderLabelModel(){return Object.keys(this.dataLabelsMap).map(e=>{const{data:t}=this.dataLabelsMap[e];return this.makeLabelModel(t)}).reduce((e,t)=>({series:[...e.series,...t.series],total:[...e.total,...t.total]}),{series:[],total:[]})}makeLabelModel(e){return e.reduce((e,t)=>{var i;const{type:s,x:n,y:o,text:a,textAlign:r,textBaseline:l,name:d,callout:c,theme:h,radian:u}=t;if(!function(e,t){const{height:i,width:s}=e,{x:n,y:o}=t;return n>=0&&n<=s&&o>=0&&o<=i}(this.rect,{x:n,y:o}))return e;const p="stackTotal"===s?"total":"series";return Object.assign(Object.assign({},e),{[p]:[...(i=e[p],null!=i?i:[]),{type:"dataLabel",dataLabelType:s,text:a,x:n,y:o,textAlign:r,textBaseline:l,opacity:1,name:d,callout:c,theme:h,radian:u}]})},{series:[],total:[]})}}class ha extends Et{initialize({name:e}){this.type="axisTitle",this.name=e,this.isYAxis=D([Wt.Y,Wt.SECONDARY_Y],e),this.isCircularAxis=this.name===Wt.CIRCULAR}getTitlePosition(e,t){return this.isCircularAxis?[this.rect.width/2+e,this.rect.height/2+t]:this.isYAxis?[this.name===Wt.Y?e:this.rect.width+e,t]:[this.rect.width+e,t]}renderAxisTitle(e,t){const{text:i,offsetX:s,offsetY:n}=e,[o,a]=this.getTitlePosition(s,n),r=Pe(this.theme);return[{type:"label",text:i,x:o,y:a,style:["axisTitle",{textAlign:t,fillStyle:this.theme.color,font:r}]}]}getTextAlign(e=!1){return this.name===Wt.Y?e?"center":"left":this.isCircularAxis?"center":"right"}getCircularAxisTitleRect(e,t,i){const{x:s,y:n}=t,{centerX:o,centerY:a,axisSize:r,radius:{outer:l}}=i,{offsetY:d}=e;return{x:o+s-r/2,y:a+n-l/2,width:r,height:this.theme.fontSize+d}}render({axes:e,radialAxes:t,layout:i,theme:s}){var n,o,a;const r=this.isCircularAxis?null===(n=t[this.name])||void 0===n?void 0:n.title:null===(o=e[this.name])||void 0===o?void 0:o.title;this.isShow=!!r,this.isShow&&(this.theme=Si(s,this.name).title,this.rect=i[this.name+"Title"],this.models=this.renderAxisTitle(r,this.getTextAlign(!!(null===(a=e)||void 0===a?void 0:a.centerYAxis))))}}class ua extends Et{initialize(){this.type="title",this.name="title"}renderTitle(e){var t,i,s;let n="",o=0,a=0,r="left";M(e)?n=e:(n=e.text,r=null!=(t=e.align)?t:"left",o+=null!=(i=e.offsetX)?i:0,a+=null!=(s=e.offsetY)?s:0);const l=Pe(this.theme),d=vt(n,l);return"center"===r?o+=(this.rect.width-d)/2:"right"===r&&(o+=this.rect.width-d),[{type:"label",x:o,y:a,text:n,style:["title",{font:l,fillStyle:this.theme.color}]}]}render({options:e,layout:t,theme:i}){var s;this.isShow=!!(null===(s=e.chart)||void 0===s?void 0:s.title),this.isShow&&(this.theme=i.title,this.rect=t.title,this.models=this.renderTitle(e.chart.title))}}var pa=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i};const ma={line:"circle",area:"circle",boxPlot:"boxPlot"};class ga extends Et{constructor(){super(...arguments),this.models={guideLine:[]},this.isShow=!1,this.renderHoveredSeries=({models:e,name:t,eventDetectType:i})=>{var s,n;const o=this.getSeriesModels(t);this.models[t]=[...e],this.isShow=!!this.getSeriesModels().length;const a=!!(null===(s=o)||void 0===s?void 0:s.length)&&!!e.length&&No({models:e,comparisonModel:o,eventDetectType:i,name:t});(null===(n=o)||void 0===n?void 0:n.length)&&!e.length?this.eventBus.emit("unhoverSeries",ve(o)):e.length&&!a&&this.eventBus.emit("hoverSeries",ve(e)),this.modelForGuideLine=this.getModelForGuideLine(t),"grouped"===i&&this.renderGroupedModels(t)},this.resetHoveredSeries=()=>{this.models={guideLine:[]}}}getSeriesModels(e){var t;const i=this.models,{guideLine:s}=i,n=pa(i,["guideLine"]);return null===(t=e?n[e]:Object.values(n))||void 0===t?void 0:t.flatMap(e=>e)}hasGuideLine(){const[e]=this.getSeriesModels().filter(({type:e})=>"rect"===e);return!x(this.modelForGuideLine)&&x(e)}getModelForGuideLine(e){return this.getSeriesModels().filter(({type:t})=>t===ma[e])[0]}renderGroupedModels(e){D(Object.keys(ma),e)&&(this.isShow&&this.hasGuideLine()?this.models.guideLine=[this.renderGuideLineModel(this.modelForGuideLine)]:this.models.guideLine=[])}renderGuideLineModel(e){const t=Ct("boxPlot"===e.type&&e.boxPlotDetection?e.boxPlotDetection.x+e.boxPlotDetection.width/2:e.x);return{type:"line",x:t,y:0,x2:t,y2:this.rect.height,strokeStyle:"#ddd",lineWidth:1}}initialize(){this.type="hoveredSeries",this.name="hoveredSeries",this.eventBus.on("renderHoveredSeries",this.renderHoveredSeries),this.eventBus.on("resetHoveredSeries",this.resetHoveredSeries)}render({layout:e}){this.rect=e.plot}}class va extends Et{constructor(){super(...arguments),this.models={selectionArea:[]},this.dragStartPosition=null,this.dragStartPoint=null,this.isDragging=!1}initialize(){this.type="zoom"}render(e,t){var i,s;if(!e.zoomRange)return;this.resetSelectionArea();const{viewRange:n}=t,{layout:o,axes:a,series:r,scale:l}=e,d=e.categories;this.rect=o.plot,this.startIndex=null!=(s=null===(i=n)||void 0===i?void 0:i[0])?s:0;if(Yi(r)){const e=this.getRectResponderInfoForCoordinateType(r,l,a.xAxis,d);this.responders=this.makeRectResponderModelForCoordinateType(e,d)}else this.responders=this.makeRectResponderModel(d,a.xAxis)}getRectResponderInfoForCoordinateType(e,t,i,s){const n=[],o={};return Object.keys(e).forEach(t=>{e[t].data.forEach(({rawData:e})=>{e.forEach((e,t)=>{if(y(e))return;const a=Ii(e,s,t,this.startIndex),r=Lt(i,this.rect.width,zi(e),a),l=r>=0&&r<=this.rect.width;!o[r]&&l&&(o[r]=!0,n.push({x:r,label:s[a]}))})})}),n}resetSelectionArea(){this.dragStartPosition=null,this.dragStartPoint=null,this.models.selectionArea=[],this.isDragging=!1}onMousedown({responders:e,mousePosition:t}){e.length&&(this.dragStartPoint=e.find(e=>"selectionArea"===e.data.name),this.dragStartPosition=t)}onMouseup({responders:e}){if(this.isDragging&&this.dragStartPoint&&e.length){const t=[this.dragStartPoint,e[0]].sort((e,t)=>e.index-t.index).map(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.value});this.store.dispatch("zoom",t),this.eventBus.emit("zoom",ve(t)),this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("hideTooltip"),setTimeout(()=>{this.eventBus.emit("resetSelectedSeries")})}this.resetSelectionArea()}makeRectResponderModel(e,t){const i=e.length,{pointOnColumn:s,tickDistance:n}=t,{height:o}=this.rect,a=s?[]:[0,i-1],r=n/2;return T(0,i).map(t=>{const i=a.includes(t);let l=0;return 0!==t&&(l+=s?n*t:r+n*(t-1)),{type:"rect",x:l,y:0,height:o,width:i?r:n,index:t,data:{name:"selectionArea",value:e[t]}}})}makeRectResponderModelForCoordinateType(e,t){return Go(e,this.rect).map((e,i)=>Object.assign(Object.assign({},e),{data:{name:"selectionArea",value:t[i]}}))}onMousemove({responders:e,mousePosition:t}){if(e.length){if(this.dragStartPosition&&!this.isDragging){const{x:e}=t,{x:i}=this.dragStartPosition;this.isDragging=Math.abs(i-e)>15}if(this.isDragging){const t=this.dragStartPoint.index,i=e[0].index,[s,n]=[t,i].sort(I),o=this.responders.slice(s,n+1);this.models.selectionArea=[...o.map(e=>Object.assign(Object.assign({},e),{x:e.x,y:0,type:"rect",color:"rgba(0, 0, 0, 0.2)"}))],this.eventBus.emit("needDraw")}}}onMouseoutComponent(){this.resetSelectionArea()}}class fa extends Et{initialize(){this.type="resetButton",this.name="resetButton"}onClick({responders:e}){e.length&&(this.eventBus.emit("resetZoom"),this.store.dispatch("resetZoom"))}render({options:e,layout:t},i){ys(e)&&(this.rect=t.resetButton,this.isShow=i.isLineTypeSeriesZooming,this.models=this.isShow?[{type:"resetButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:24,height:24}]:[])}}class ba extends Et{constructor(){super(...arguments),this.models={},this.seriesModels={},this.activeSeriesNames={},this.isShow=!1,this.renderSelectedSeries=e=>{const{name:t,alias:i}=e,s=this.getSelectedSeriesModelsForRendering(e);this.models[i||t]=No(Object.assign(Object.assign({},e),{models:s,comparisonModel:this.models[i||t]}))?[]:s,this.seriesModels[i||t]=this.getSelectedSeriesModels(e),this.isShow=!!Object.values(this.models).flatMap(e=>e).length,this.eventBus.emit(this.isShow?"selectSeries":"unselectSeries",ve(this.seriesModels)),this.activeSeriesNames[t]=this.getSeriesNames(e.models,t),this.setActiveState()},this.resetSelectedSeries=()=>{this.models={},this.store.dispatch("setAllLegendActiveState",!0)}}getSeriesNames(e,t){const i=[];return D(["line","area","radar","bubble","scatter","bullet","boxPlot"],t)?e.forEach(e=>{const t=e.name;t&&i.push(t)}):D(["bar","column","radialBar"],t)?e.forEach(e=>{var t;const s=null===(t=e.data)||void 0===t?void 0:t.label;s&&i.push(s)}):"pie"===t&&Object.keys(this.models).flatMap(e=>this.models[e]).forEach(e=>{var t,s;const n=(null===(t=e.data)||void 0===t?void 0:t.rootParentName)||(null===(s=e.data)||void 0===s?void 0:s.label);n&&i.push(n)}),i}getSelectedSeriesModelsForRendering(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter(e=>!e.data)):n=t.filter(e=>!e.data),n}getSelectedSeriesModels(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter(e=>e.data)):n=t.filter(e=>e.data),n}setActiveState(){this.isShow?(this.store.dispatch("setAllLegendActiveState",!1),Object.values(this.activeSeriesNames).forEach(e=>{e.forEach(e=>{this.store.dispatch("setLegendActiveState",{name:e,active:!0})})})):this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("needDraw")}initialize(){this.type="selectedSeries",this.name="selectedSeries",this.eventBus.on("renderSelectedSeries",this.renderSelectedSeries),this.eventBus.on("resetSelectedSeries",this.resetSelectedSeries)}render({layout:e}){this.rect=e.plot}}class xa extends Et{initialize(){this.type="background",this.name="background"}render({layout:e,theme:t}){const{width:i,height:s}=e.chart;this.theme=t.chart,this.rect={x:0,y:0,width:i,height:s},this.models=[Object.assign(Object.assign({type:"rect"},this.rect),{color:this.theme.backgroundColor})]}}class ya extends Et{initialize(){this.type="noDataText",this.name="noDataText"}getCenterPosition(e,t){const i=vt(e,t),s=ft(e,t);return{x:(this.rect.width-i)/2,y:(this.rect.height-s)/2}}render({layout:e,series:t,options:i,theme:s}){var n,o,a;const r=null!=(a=null===(o=null===(n=i)||void 0===n?void 0:n.lang)||void 0===o?void 0:o.noData)?a:"No data to display",l=s.noData,d=Pe(l),c=l.color;this.isShow=wn(t),this.rect=e.plot,this.models=[Object.assign(Object.assign({type:"label"},this.getCenterPosition(r,d)),{text:r,style:[{font:d,fillStyle:c}]})]}}function Sa(e,t){const{color:i,lineWidth:s,points:n,dashSegments:o=[]}=t;e.lineCap="round",e.beginPath(),o&&ze(e,o);let a=!1;n.forEach((t,i)=>{var s,o;if(y(t))a=!1;else{if(!a)return e.moveTo(t.x,t.y),void(a=!0);if(t.controlPoint&&(null===(o=null===(s=n[i-1])||void 0===s?void 0:s.controlPoint)||void 0===o?void 0:o.next)){const{x:s,y:o}=n[i-1].controlPoint.next,{controlPoint:a,x:r,y:l}=t;e.bezierCurveTo(s,o,a.prev.x,a.prev.y,r,l)}else e.lineTo(t.x,t.y)}}),He(e,{lineWidth:s,strokeStyle:i}),e.closePath(),ze(e,[])}function wa(e,t){const{fillColor:i}=t;e.beginPath(),Sa(e,t),Ye(e,i),e.closePath()}function Ma(e,t){const{opened:i,x:s,y:n,theme:o}=t,{borderColor:a,backgroundColor:r,borderWidth:l,borderRadius:d,xIcon:c,dotIcon:h}=o,u=s+l,p=n+l,m=24-2*l;lt(e,{type:"pathRect",x:u,y:p,fill:r,stroke:a,width:m,height:m,radius:d,lineWidth:l}),i?function(e,t,i){const{x:s,y:n,theme:{color:o,lineWidth:a}}=t,r=i/3,l=s+r,d=n+r,c=s+2*r,h=n+2*r;[{x:l,y:d,x2:c,y2:h},{x:l,y:h,x2:c,y2:d}].forEach(t=>{ct(e,Object.assign(Object.assign({type:"line"},t),{strokeStyle:o,lineWidth:a}))})}(e,{x:u,y:p,theme:c},m):function(e,t,i){const{x:s,y:n,theme:{color:o,width:a,height:r,gap:l}}=t,d=(i-(3*r+2*l))/2,c=s+(i-a)/2;[{x:c,y:n+d},{x:c,y:n+d+r+l},{x:c,y:n+d+2*(r+l)}].forEach(t=>{ht(e,Object.assign(Object.assign({type:"rect"},t),{color:o,width:a,height:r}))})}(e,{x:u,y:p,theme:h},m)}function Oa(e,t){const{x:i,y:s}=t;lt(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:24,height:24,radius:5}),function(e,t){const{x:i,y:s}=t,n=i+12,o=s+12,a="#545454";ct(e,{type:"line",lineWidth:2,x:n-2,y:o+24/7,x2:n+2,y2:o+24/7,strokeStyle:a}),ct(e,{type:"line",lineWidth:2,x:n-2,y:o-24/7,x2:n+2,y2:o-24/7,strokeStyle:a}),dt(e,{type:"circle",x:n+2,y:o,radius:24/7,angle:{start:Math.PI/2,end:3*Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:a}]});const r=n-2,l=o-24/7;wa(e,{type:"areaPoints",points:[{x:r-3,y:l},{x:r,y:l-3},{x:r,y:l+3}],lineWidth:1,color:a,fillColor:a})}(e,{x:i,y:s})}function Aa(e,t){const{x:i,y:s}=t;lt(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:24,height:24,radius:5}),function(e,t){const{x:i,y:s}=t,n=i+12,o=s+12;dt(e,{type:"circle",x:n,y:o,radius:4.8,angle:{start:0,end:Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:"#545454"}]});const a=n+4.8;wa(e,{type:"areaPoints",points:[{x:a-3,y:o},{x:a+3,y:o},{x:a,y:o+3}],lineWidth:1,color:"#545454",fillColor:"#545454"})}(e,{x:i,y:s})}class ka extends _n{constructor(e){var t;super({el:e.el,options:e.options,series:{line:e.data.series},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(ra),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(ca),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(va),this.componentManager.add(fa),this.componentManager.add(ya),this.painter.addGroups([n,o,h,c,s,u,a,p])}addData(e,t){var i;(null===(i=this.store.state.options.series)||void 0===i?void 0:i.showDot)&&(this.animationControlFlag.updating=!0),this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{line:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Ca(e,t,i){var s,n;return[{hasOuterLabel:t.visible&&"outer"===t.anchor,labels:["00.00%"],theme:i},{hasOuterLabel:(null===(s=t.pieSeriesName)||void 0===s?void 0:s.visible)&&"outer"===(null===(n=t.pieSeriesName)||void 0===n?void 0:n.anchor),labels:e,theme:i.pieSeriesName}].reduce((e,t)=>{const{width:i,height:s}=e,{hasOuterLabel:n,labels:o,theme:a}=t;if(n){const{maxLabelWidth:e,maxLabelHeight:t}=ji(o,0,We(a));return{width:Math.max(e+30,i),height:Math.max(t+30,s)}}return e},{width:0,height:0})}class Ta extends Et{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.alias||this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.alias||this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,name:t})=>{if(!w(e)||!x(t)&&t!==this.alias)return;const i=this.responders[e];if(!i)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme([i],"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,name:t})=>{if(!w(e)||!x(t)&&t!==this.alias)return;const i=[this.responders[e]];i.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(i,"hover"),name:this.name,alias:this.alias}),this.activatedResponders=this.makeTooltipResponder(i),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;let t;const i=this.models.series.findIndex(({clockwise:i,degree:{start:s,end:n},totalAngle:o})=>(t=i?o*e:Ue-o*e,et(i,s,n,t)));this.syncEndAngle(i<0?this.models.series.length:i),~i&&(this.drawModels.series[i].degree.end=t)}syncEndAngle(e){if(!(e<1))for(let t=0;t<e;t+=1){const e=this.models.series[t].degree.end;this.drawModels.series[t].degree.end!==e&&(this.drawModels.series[t].degree.end=e)}}initialize(e){var t,i;this.type="series",this.name="pie",this.alias=null!=(i=null===(t=e)||void 0===t?void 0:t.alias)?i:"",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n;const{layout:o,series:a,legend:r,options:l,nestedPieSeries:d,theme:c}=e,h=null!=(t=e.categories)?t:[];if(!a.pie)throw new Error(Q(this.name));const u=c.series.pie;let p,m;this.theme=this.alias?u[this.alias]:u,this.rect=o.plot,this.activeSeriesMap=Mn(r),this.selectable=this.getSelectableOption(l);const g=ia(l,this.alias);if(d){const{data:e}=d[this.alias],t=Object.keys(d),s=t.findIndex(e=>e===this.alias),n=H(t),o=Ca(d[n].data.map(({name:e})=>e),ia(l,n),this.theme.dataLabels),a=this.getRenderOptionsMap(l,t,o);p=this.renderPieModel(e,a[this.alias],s),m=Qt(e,null===(i=h)||void 0===i?void 0:i[s])}else{const e=null===(s=a.pie)||void 0===s?void 0:s.data,{width:t,height:i}=Ca(e.map(({name:e})=>e),g,this.theme.dataLabels),o=this.makeRenderOptions(l,t,i);p=this.renderPieModel(e,o),m=Qt(e,null===(n=h)||void 0===n?void 0:n[0])}if(this.models.series=p,this.drawModels||(this.drawModels={series:this.models.series.map(e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})}))}),g.visible){const e=p.map(e=>Object.assign(Object.assign({},e),{value:""+ii(e.percentValue),theme:this.theme.dataLabels}));this.renderDataLabels(e,this.alias)}this.responders=p.map((e,t)=>Object.assign(Object.assign({},e),{type:"sector",radius:e.radius,seriesIndex:t,data:Object.assign(Object.assign({},m[t]),{percentValue:e.percentValue}),color:De(e.color,1)}))}getRadiusRangeMap(e,t){return t.reduce((t,i)=>{var s,n;const o=this.getOptions(e,i).series;return(null===(s=o)||void 0===s?void 0:s.radiusRange)&&(t[i]=null===(n=o)||void 0===n?void 0:n.radiusRange),t},{})}getRenderOptionsMap(e,t,i){const s=this.initRenderOptionsMap(e,t,i),n=this.getRadiusRangeMap(e,t);return t.forEach((e,i)=>{const o=Object.values(s).map(({radiusRange:e})=>e);s[e].radiusRange=function({alias:e,renderOptions:t,radiusRangeMap:i,pieIndex:s,radiusRanges:n,totalPieAliasCount:o}){var a,r,l,d,c;const h=Object.keys(i).length,{defaultRadius:u=0}=t;let{inner:p,outer:m}=t.radiusRange;if(!i[e])if(h)if(s&&n[s-1].outer&&(p=n[s-1].outer),null===(a=n[s+1])||void 0===a?void 0:a.inner)m=n[s+1].inner;else if(s===o-1)m=u;else{m=p+(u-(null!=(l=null===(r=n[s-1])||void 0===r?void 0:r.outer)?l:0)-(null!=(c=null===(d=n[s+1])||void 0===d?void 0:d.inner)?c:0))/(o-h)}else{const e=u/o;p=s*e,m=(s+1)*e}return{inner:p,outer:m}}({alias:e,renderOptions:s[e],radiusRangeMap:n,pieIndex:i,radiusRanges:o,totalPieAliasCount:t.length})}),s}initRenderOptionsMap(e,t,{width:i,height:s}){return t.reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:this.makeRenderOptions(this.getOptions(e,n),i,s)}),{})}getOptions(e,t){var i;const s=Object.assign({},e);return(null===(i=s)||void 0===i?void 0:i.series)&&t&&(s.series=Object.assign(Object.assign({},s.series),s.series[t])),s}makeRenderOptions(e,t=0,i=0){var s,n,o,a,r,l,d,c,h,u,p,m,g,v;const f=e.series,b=null==(n=null===(s=f)||void 0===s?void 0:s.clockwise)||n,x=null!=(r=null===(a=null===(o=f)||void 0===o?void 0:o.angleRange)||void 0===a?void 0:a.start)?r:0,y=null!=(c=null===(d=null===(l=f)||void 0===l?void 0:l.angleRange)||void 0===d?void 0:d.end)?c:Ue,S=Kt(b,x,y),w=Zt(b,x,y),{width:M,height:O}=this.rect,A=tt(this.rect,w,t,i),k=V(A,null!=(p=null===(u=null===(h=f)||void 0===h?void 0:h.radiusRange)||void 0===u?void 0:u.inner)?p:0),C=V(A,null!=(v=null===(g=null===(m=f)||void 0===m?void 0:m.radiusRange)||void 0===g?void 0:g.outer)?v:this.alias?0:A);return{clockwise:b,cx:M/2,cy:w?Jt(this.rect.height,b):O/2,drawingStartAngle:x-90,radiusRange:{inner:k,outer:C},angleRange:{start:x,end:y},totalAngle:S,defaultRadius:A}}renderPieModel(e,t,i){const s=[],n=e.reduce((e,{data:t})=>e+(null!=t?t:0),0),{clockwise:o,cx:a,cy:r,drawingStartAngle:l,radiusRange:{inner:d,outer:c},totalAngle:h}=t,u=o?0:Ue,{lineWidth:p,strokeStyle:m}=this.theme;return e.forEach((t,g)=>{const v=this.alias?this.getAliasSeriesColor(t,e,i):this.getSeriesColor(t),{data:f,name:b}=t;if(!y(f)){const e=Math.max(f/n*h,1)*(o?1:-1),t=f/n*100,i=s[s.length-1],x=g&&i?i.degree.end:u,y=o?Math.min(x+e,Ue):Math.max(x+e,0);s.push({type:"sector",name:b,color:v,x:a,y:r,degree:{start:x,end:y},radius:{inner:d,outer:c},value:f,style:[{strokeStyle:m}],lineWidth:p,clockwise:o,drawingStartAngle:l,totalAngle:h,percentValue:t})}}),s}makeTooltipResponder(e){return e.map(e=>Object.assign(Object.assign({},e),Je(Ke("center",this.models.series[e.seriesIndex]))))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.alias||this.name}),this.activatedResponders=this.makeTooltipResponder(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme(e,"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw"))}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map(e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[R(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})})}getOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,{areaOpacity:n,restSeries:{areaOpacity:o}}=i;return t?e?n:o:s}getIndexOfGroup(e,t,i){return e.filter(e=>t===e.parentName).findIndex(e=>i===e.name)}getSeriesColor(e){const{color:t,name:i}=e,s=this.activeSeriesMap[i];return De(t,this.getOpacity(s,this.hasActiveSeries()))}getAliasSeriesColor(e,t,i){const{color:s,name:n}=e,{select:{color:o}}=this.theme,{rootParentName:a,parentName:r}=e,l=this.getIndexOfGroup(t,r,n),d=this.getAliasSeriesOpacity(a,r,i,l,n);return De(this.activeSeriesMap[null!=a?a:n]&&null!=o?o:s,d)}getAliasSeriesOpacity(e,t,i,s,n){const o=this.activeSeriesMap[null!=e?e:n],a=this.getOpacity(o,this.hasActiveSeries());return i&&t?function(e,t,i,s=.85){const n=Number((e*Math.pow(s,t)).toFixed(2));return Number(Math.pow(n,i+1).toFixed(2))}(a,i,s):a}hasActiveSeries(){return Object.values(this.activeSeriesMap).some(e=>!e)}}function Da(e,t){const{degree:{start:i,end:s},color:n,style:o,lineWidth:a}=t;if(i===s)return;const r=Math.abs(i-s)===Ue;if(e.beginPath(),o){const t=Be(o,{});Object.keys(t).forEach(i=>{e[i]=t[i]})}r?function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},clockwise:a}=t;if(e.arc(i,s,o,0,2*Math.PI,!a),n){const{x:t,y:o}=Qe(i,s,n,0),r=n?t:i,l=n?o:s;e.moveTo(r,l),e.arc(i,s,n,0,2*Math.PI,a)}}(e,t):function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},clockwise:l,drawingStartAngle:d}=t;if(n<0||o<0)return;const c=Ze(a,d),h=Ze(r,d);n||e.moveTo(i,s);e.arc(i,s,o,c,h,!l),n&&e.arc(i,s,n,h,c,l)}(e,t),e.closePath(),Ye(e,n),a&&(e.lineWidth=a,e.stroke())}class Ra extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{pie:i.series},categories:i.categories})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(la),this.componentManager.add(Ta),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,m,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{pie:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function ja(e,t){var i,s,n,o,a,r,l,d,c,h;const{categories:u,axisSize:p,options:m,theme:g}=e,v=t===Wt.X,f=v?"x":"y",b=Ei(m,t),x=Di(u[f],m,b,t),y=x.length,S=y?p/y:p,w=p/y,M=y+1,O=null!=(n=null===(s=null===(i=m[t])||void 0===i?void 0:i.tick)||void 0===s?void 0:s.interval)?n:1,A=null!=(r=null===(a=null===(o=m[t])||void 0===o?void 0:o.label)||void 0===a?void 0:a.interval)?r:1,k=ki({labels:x,pointOnColumn:!0,tickDistance:S,tickCount:M,tickInterval:O,labelInterval:A},p),C=Bi(t,m),{maxLabelWidth:T,maxLabelHeight:D}=ji(x,C,Pe(g.label)),R={labels:x,viewLabels:k,pointOnColumn:!0,isLabelAxis:v,tickCount:M,tickDistance:S,labelDistance:w,tickInterval:O,labelInterval:A,title:Ci(null===(l=m.xAxis)||void 0===l?void 0:l.title),maxLabelWidth:T,maxLabelHeight:D};if(t===Wt.X){const e=null!=(h=null===(c=null===(d=m.xAxis)||void 0===d?void 0:d.label)||void 0===c?void 0:c.margin)?h:0,t=xt(D)+e,i=Ri(T,D,p/k.length,Ai(m)),{needRotateLabel:s,rotationHeight:n}=i,o=(s?n:D)+t;return Object.assign(Object.assign(Object.assign({},R),i),{maxHeight:o,offsetY:t})}return R}var Ba={name:"axes",state:()=>({axes:{xAxis:{},yAxis:{}}}),action:{setAxesData({state:e}){const{layout:t,theme:i}=e,{width:s,height:n}=t.plot,o=e.categories,a=e.options,r={xAxis:ja({axisSize:s,categories:o,options:a,theme:Si(i,Wt.X)},Wt.X),yAxis:ja({axisSize:n,categories:o,options:a,theme:Si(i,Wt.X)},Wt.Y)};Oi(e.axes,r)&&this.notify(e,"layout"),e.axes=r}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}};var La={name:"heatmapSeriesData",state:()=>({heatmapSeries:[]}),action:{setHeatmapSeriesData({state:e,computed:t}){var i,s,n;e.heatmapSeries=(i=e.series,s=e.categories,n=t.viewRange,i.heatmap?i.heatmap.data.map((e,t)=>{const{yCategory:i,data:o}=e;return Ds(o,n).map((e,n)=>({colorValue:e,category:{x:s.x[n],y:i},indexes:[n,t]}))}):[])}},observe:{updateTreemapSeriesData(){this.dispatch("setHeatmapSeriesData")}}};const Pa="__TOAST_UI_TREEMAP_ROOT";function Ea(e,t){var i;if(!e.treemap)return[];const s=e.treemap.data.filter(e=>!y(e.data)).map((e,t)=>function e(t,i,s,n){var o;const a=H(i),r=n?`${n}_${a}`:"__TOAST_UI_TREEMAP_"+a,{colorValue:l}=t,d=[{label:t.label,hasChild:!!t.children,id:r,indexes:i,parentId:n||Pa,depth:s,data:(o=t.data,null!=o?o:0),colorValue:l}];return t.children&&t.children.forEach((t,n)=>{y(t.data)||d.push(...e(t,[...i,n],s+1,r))}),d}(e,[t],0)).flatMap(e=>e).sort((e,t)=>t.depth-e.depth);return function(e){e.forEach(({parentId:t,data:i})=>{t!==Pa&&(e.find(({id:e})=>e===t).data+=i)})}(s),function(e){const t=e.filter(({parentId:e})=>e===Pa).reduce((e,{data:t})=>e+t,0);e.forEach(i=>{const s=i.parentId===Pa?t:e.find(({id:e})=>e===i.parentId).data;i.ratio=i.data/s})}(s),(null===(i=t.series)||void 0===i?void 0:i.useColorValue)&&function(e){e.forEach(t=>{const{id:i,colorValue:s}=t;if(x(s)){const s=e.filter(({parentId:e})=>e===i),n=s.reduce((e,t)=>e+(x(t.colorValue)?0:t.colorValue),0);t.colorValue=n/s.length}})}(s),s}var Wa={name:"treemapSeriesData",state:()=>({treemapSeries:[]}),action:{setTreemapSeriesData({state:e}){e.treemapSeries=Ea(e.series,e.options)}},observe:{updateTreemapSeriesData(){this.dispatch("setTreemapSeriesData")}}};var za={name:"colorValueScale",state:()=>({treemapZoomId:{prev:Pa,cur:Pa},colorValueScale:{}}),action:{setColorValueScale({state:e}){const{layout:t,treemapSeries:i,legend:s,heatmapSeries:n}=e;if(!s.useSpectrumLegend)return;const o=(null!=i?i:n.flatMap(e=>e)).reduce((e,{colorValue:t})=>t?[...e,t]:e,[]),a=Un([...new Set(o)]),r=ps(s.align)?t.plot.width/2:t.plot.height;be(e.colorValueScale,no({dataRange:a,offsetSize:r,useSpectrumLegend:!0,scaleOption:{}}))},setTreemapZoomId({state:e},t){e.treemapZoomId.prev=e.treemapZoomId.cur,e.treemapZoomId.cur=t},zoomBack({state:e}){var t,i;const{treemapSeries:s,treemapZoomId:n}=e,{prev:o}=n,a=s.find(({id:e})=>e===o);e.treemapZoomId.prev=null!=(i=null===(t=a)||void 0===t?void 0:t.parentId)?i:Pa,e.treemapZoomId.cur=o}},observe:{updateColorValueScale(){this.dispatch("setColorValueScale")}},computed:{isTreemapSeriesZooming:({treemapZoomId:e})=>e&&e.cur!==e.prev}};class Ia extends Et{constructor(){super(...arguments),this.labels=[],this.renderSpectrumTooltip=([e])=>{if(e){const{labels:t,align:i}=this,{colorValue:s,color:n}=e,{width:o,height:a}=this.rect;this.models.tooltip=[{type:"spectrumTooltip",width:o,height:a,x:0,y:0,labels:t,align:i,colorRatio:e.colorRatio,color:n,text:String(s),verticalAlign:ps(i)}]}else this.models.tooltip=[]}}initialize(){this.type="spectrumLegend",this.name="spectrumLegend"}makeLabels(e){const{stepCount:t,limit:i,stepSize:s}=e,n=i.min;return T(0,t+1).reduce((e,t)=>[...e,String(n+s*t)],[])}renderSpectrumLegendModel(e,t){const{labels:i,align:s}=this,{width:n,height:o}=this.rect;return[{type:"spectrumLegend",width:n,height:o,x:0,y:0,labels:i,align:s,startColor:e,endColor:t,verticalAlign:ps(this.align)}]}render({layout:e,legend:t,colorValueScale:i,theme:s}){var n,o;if(this.rect=e.legend,this.align=t.align,this.isShow=t.visible&&!!t.data.length,!this.isShow)return;this.labels=this.makeLabels(i);const{startColor:a,endColor:r}=(null===(n=s.series)||void 0===n?void 0:n.heatmap)||(null===(o=s.series)||void 0===o?void 0:o.treemap);this.models={legend:this.renderSpectrumLegendModel(a,r),tooltip:[]},this.eventBus.on("renderSpectrumTooltip",this.renderSpectrumTooltip)}}function Ya(e,t){return e.map((e,i)=>t[i]-e)}function Ha(e,t){if(x(t))return;const i=Math.abs(e.max-e.min);return i&&!y(t)?(t-e.min)/i:0}function Na(e,t,i){const s=function(e,t,i){const s="#"+Ae(e.toString(16),2)+Ae(t.toString(16),2)+Ae(i.toString(16),2);return!!ke(s)&&s}(...i.map((i,s)=>i+parseInt(String(t[s]*e),10)));return M(s)?s:""}class Xa extends Et{constructor(){super(...arguments),this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{var s;if(!w(e)||!w(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];if(!o)throw new Error(K);this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme([o],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{var s;if(!w(e)||!w(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];o&&this.emitMouseEvent([o])}}initialize(){this.type="series",this.name="heatmap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){const{layout:t,heatmapSeries:i,axes:s,theme:n,colorValueScale:o,options:a}=e;if(!i)throw new Error(Q(this.name));this.theme=n.series.heatmap,this.selectable=this.getSelectableOption(a),this.rect=t.plot;const r={height:s.yAxis.tickDistance,width:s.xAxis.tickDistance};this.models={series:this.renderHeatmapSeries(i,r,o)},ia(a,this.name).visible&&this.renderDataLabels(this.makeDataLabels()),this.responders=this.makeHeatmapSeriesResponder()}makeDataLabels(){const e=this.theme.dataLabels;return this.models.series.reduce((t,i)=>y(i.colorValue)?t:[...t,Object.assign(Object.assign({},i),{type:"treemapSeriesName",value:i.colorValue,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},e),{color:e.useSeriesColor?i.color:e.color})})],[])}makeHeatmapSeriesResponder(){return this.models.series.reduce((e,t)=>y(t.colorValue)?e:[...e,Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t),{label:t.name,value:t.colorValue,templateType:"heatmap"}),thickness:tn,style:["shadow"]})],[])}renderHeatmapSeries(e,t,i){const{startColor:s,endColor:n,borderColor:o,borderWidth:a}=this.theme,r=Te(s),l=Ya(r,Te(n)),{height:d,width:c}=t;return e.flatMap(e=>e.flatMap(e=>{const{indexes:t,colorValue:s,category:n}=e,h=`${n.x}, ${n.y}`,[u,p]=t,m=Ha(i.limit,s),g=y(s)?"rgba(0, 0, 0, 0)":Na(m,l,r);return{type:"rect",name:h,width:c-2*a,height:d-2*a,x:c*u+a,y:d*p+a,colorValue:s,colorRatio:m,color:g,thickness:a,borderColor:o}}))}getRespondersWithTheme(e,t){return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]})))}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.activatedResponders=e,this.emitMouseEvent(e)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}function Fa(e,t){return e.map((e,i)=>({data:e,yCategory:t.y[i]}))}class Ga extends _n{constructor(e){super({el:e.el,categories:e.data.categories,options:e.options,series:{heatmap:Fa(e.data.series,e.data.categories)},modules:[La,za,Ba]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ia),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(Xa),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,a,r])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addHeatmapSeries",Object.assign({data:e},t))}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{heatmap:Fa(i,t)},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}const $a=.06,Va=1;class _a extends Et{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.isStackChart=!1,this.isRangeChart=!1,this.isSplineChart=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!Sn(e,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(K);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(K);const o=this.getResponderSeriesWithTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!yn(e,this.eventDetectType,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)return;const n="grouped"===this.eventDetectType?this.tooltipCircleMap[s]:[this.tooltipCircleMap[s][i]];n.length&&(this.onMousemoveNearType(n),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="area",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels&&(this.drawModels.rect[0].width=this.models.rect[0].width*e)}getBaseYPosition(e){const t=e.min>=0?e.min:Math.min(e.max,0),i=this.rect.height/(e.max-e.min);return(e.max-t)*i}getStackValue(e,t,i){const{type:s}=e.stack,{values:n,sum:o}=e.stackData[i],a=X(n.slice(0,t+1));return"percent"===s?100*a/o:a}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),(e.line||this.isStackChart)&&(this.eventDetectType="grouped")}getAreaOptions(e){var t;const i=Object.assign({},e);return(null===(t=i.series)||void 0===t?void 0:t.area)&&(i.series=Object.assign(Object.assign({},i.series),i.series.area)),i}render(e,t){var i,s,n,o,a,r,l,d;const{viewRange:c}=t,{layout:h,series:u,scale:p,axes:m,legend:g,stackSeries:v,theme:f}=e;if(!u.area)throw new Error(Q(this.name));let b;const x=this.getAreaOptions(e.options),y=e.categories,S=null!=(i=e.rawCategories)?i:[];this.theme=f.series.area,this.rect=h.plot,this.activeSeriesMap=Mn(g),this.startIndex=null!=(n=null===(s=c)||void 0===s?void 0:s[0])?n:0,this.selectable=this.getSelectableOption(x),this.isSplineChart=null!=(a=null===(o=x.series)||void 0===o?void 0:o.spline)&&a;const{limit:w}=p[xi(x,this.name,"yAxis")],{tickDistance:M,pointOnColumn:O,tickCount:A}=m.xAxis,k=u.area.data;this.baseYPosition=this.getBaseYPosition(w),(null===(r=v)||void 0===r?void 0:r.area)?(this.isStackChart=!0,b=v.area):Ts(null===(l=G(k))||void 0===l?void 0:l.data)&&(this.isRangeChart=!0),this.setEventDetectType(u,x);const C={pointOnColumn:O,options:x.series||{},tickDistance:M,tickCount:A,areaStackSeries:b};this.linePointsModel=this.renderLinePointsModel(k,w,C);const T=this.renderAreaPointsModel(),D=!!(null===(d=x.series)||void 0===d?void 0:d.showDot),{dotSeriesModel:R,responderModel:j}=this.renderCircleModel(D),B=this.makeTooltipData(k,S);this.models=W({rect:[this.renderClipRectAreaModel()],series:[...this.linePointsModel,...T],dot:R}),this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),ia(x,this.name).visible&&this.renderDataLabels(this.getDataLabels(T)),this.tooltipCircleMap=$o(j,B),this.responders=this.getResponders(j,B,y,S,m.xAxis)}getResponders(e,t,i,s,n){return"near"===this.eventDetectType?this.makeNearTypeResponderModel(e,t,s):"point"===this.eventDetectType?this.makeNearTypeResponderModel(e,t,s,0):Fo(this.rect,n,i)}makeNearTypeResponderModel(e,t,i,s){const n=t.length;return e.map((e,o)=>Object.assign(Object.assign({},e),{data:t[o%n],detectionSize:s,label:i[e.index]}))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}makeTooltipData(e,t){return e.flatMap(({rawData:e,name:i,color:s},n)=>{const o=[];return e.forEach((e,a)=>{if(!y(e)){const r=this.isRangeChart?`${e[0]} ~ ${e[1]}`:e;o.push({label:i,color:s,value:r,category:t[a],seriesIndex:n,index:a})}}),o})}getLinePointModelValue(e,t){return this.isRangeChart?t?e[0]:e[1]:e}getLinePointModel(e,t,i,s){const{pointOnColumn:n,tickDistance:o,pairModel:a,areaStackSeries:r}=s,{rawData:l,name:d,color:c}=e,h=this.activeSeriesMap[d],u=[],p=De(c,h?Va:$a),{lineWidth:m,dashSegments:g}=this.theme;return l.forEach((e,s)=>{if(y(e))return void u.push(null);const l=this.getLinePointModelValue(e,a),d=Rt(this.isStackChart?this.getStackValue(r,t,s):l,i),c=o*(s-this.startIndex)+(n?o/2:0),h=(1-d)*this.rect.height;u.push({x:c,y:h,value:l})}),a&&u.reverse(),this.isSplineChart&&Dt(u),{type:"linePoints",lineWidth:m,dashSegments:g,color:p,points:u,seriesIndex:t,name:d}}renderLinePointsModel(e,t,i){const s=e.map((e,s)=>this.getLinePointModel(e,s,t,i));if(this.isRangeChart){const n=P(i,{pairModel:!0}),o=e.map((e,i)=>this.getLinePointModel(e,i,t,n));s.push(...o)}return s}getCombinedPoints(e,t){return[...e>=0?this.linePointsModel[e].points:[],...[...this.linePointsModel[t].points].reverse()]}renderRangeAreaSeries(e){const t=[];return e.forEach(e=>{let i=[];const{points:s}=e;s.slice(0,s.length/2+1).forEach((n,o)=>{const a=o===s.length/2-1,r=y(n);if(r||i.push(n),i.length&&(a||r)){const n=i.map((e,t)=>{const n=s.length/2+o-i.length+t+(!r&&a?1:0);return s[n]}).reverse();t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...i,...n]})),i=[]}})}),t}renderAreaSeries(e){const t=[],i=[];return e.forEach(e=>{let s=[];const n=[...i],{points:o}=e;o.forEach((a,r)=>{const l=r===o.length-1,d=y(a);if(y(a)||s.push(a),s.length&&(d||l)){const o=s.map((e,t)=>{const o=r-s.length+t+(!d&&l?1:0),a=x(n[o])?this.baseYPosition:n[o];return this.isStackChart&&(i[o]=e.y),{x:e.x,y:a}}).reverse();this.isStackChart&&this.isSplineChart&&Dt(o),t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...s,...o]})),s=[]}})}),t}getCombinedLinePointsModel(){if(!this.isRangeChart)return this.linePointsModel;const e=this.linePointsModel.length/2;return T(0,e).reduce((t,i)=>{const s=i,n=e+i,o=this.getCombinedPoints(s,n);return[...t,Object.assign(Object.assign({},this.linePointsModel[i]),{points:o})]},[])}getAreaOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return De(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}renderAreaPointsModel(){const e=this.getCombinedLinePointsModel();return this.isRangeChart?this.renderRangeAreaSeries(e):this.renderAreaSeries(e)}renderCircleModel(e){const t=[],i=[],{dot:s}=this.theme;return this.linePointsModel.forEach(({points:n,color:o,seriesIndex:a,name:r},l)=>{const d=this.isRangeChart&&l>=this.linePointsModel.length/2,c=this.activeSeriesMap[r];n.forEach((l,h)=>{var u;if(y(l))return;const p=Object.assign(Object.assign({type:"circle"},l),{seriesIndex:a,name:r,index:d?n.length-h-1:h});e&&t.push(Object.assign(Object.assign({},p),{radius:s.radius,color:De(o,c?1:.3),style:[{lineWidth:s.borderWidth,strokeStyle:(u=s.borderColor,null!=u?u:o)}]})),i.push(...this.getResponderSeriesWithTheme([p],"hover",o))})}),{dotSeriesModel:t,responderModel:i}}getPairCircleModel(e){const t=[];return e.forEach(e=>{const{seriesIndex:i,y:s,data:n}=e,{category:o}=n,a=this.tooltipCircleMap[o].find(e=>e.seriesIndex===i&&e.y!==s);t.push(a)}),t}getCircleModelsFromRectResponders(e,t){var i;if(!e.length||!e[0].label)return[];const s=null!=(i=this.tooltipCircleMap[e[0].label])?i:[];return"grouped"===this.eventDetectType?s:Xo(s,t,this.rect)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=this.isRangeChart?t.slice(0,t.length/2):t}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveNearType(e){let t=[];this.isRangeChart&&(t=this.getPairCircleModel(e));const i=[...e,...t];this.eventBus.emit("renderHoveredSeries",{models:i,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):["near","point"].includes(this.eventDetectType)?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap(({points:e,name:i,fillColor:s})=>e.map(e=>y(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?De(s,1):t.color})})))}getResponderSeriesWithTheme(e,t,i){const{radius:s,color:n,borderWidth:o,borderColor:a}=this.theme[t].dot;return e.map(e=>{var t;const r=null!=(t=null!=n?n:e.color)?t:i;return Object.assign(Object.assign({},e),{radius:s,color:r,style:[{lineWidth:o,strokeStyle:null!=a?a:De(r,.5)}]})})}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getResponderSeriesWithTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap(e=>e).find(t=>t.index===e))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class Ua extends _n{constructor(e){super({el:e.el,options:e.options,series:{area:e.data.series},categories:e.data.categories,modules:[bo,Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(_a),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(ca),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(va),this.componentManager.add(fa),this.componentManager.add(ya),this.painter.addGroups([n,o,h,c,s,u,a,p])}addData(e,t){this.resetSeries(),this.animationControlFlag.updating=!0,this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{area:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class qa extends Et{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.getModelsForSelectInfo=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!w(t)||!w(i)||!Sn(e,"scatter"))return;const{name:n}=s.series.scatter.data[i];return[this.responders.filter(({name:e})=>e===n)[t]]},this.selectSeries=e=>{const t=this.getModelsForSelectInfo(e);if(t){if(!t.length)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getResponderAppliedTheme(t,"select"),name:this.name}),this.eventBus.emit("needDraw")}},this.showTooltip=e=>{const t=this.getModelsForSelectInfo(e);t&&(this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name}),this.activatedResponders=t,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="scatter",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach((t,i)=>{t.size=this.models.series[i].size*e})}render(e){const{layout:t,series:i,scale:s,legend:n,options:o,theme:a}=e;if(!i.scatter)throw new Error(Q(this.name));const r=i.scatter.data;this.theme=a.series.scatter,this.rect=t.plot,this.activeSeriesMap=Mn(n),this.selectable=this.getSelectableOption(o);const l=this.renderScatterPointsModel(r,s.xAxis.limit,s[xi(o,this.name,"yAxis")].limit),d=this.makeTooltipModel(r);this.models.series=l,this.drawModels||(this.drawModels=W(this.models)),this.responders=l.map((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:this.theme.size/2,color:e.fillColor,style:[{strokeStyle:e.borderColor,lineWidth:e.borderWidth}],data:d[t]}))}renderScatterPointsModel(e,t,i){return e.flatMap(({data:e,name:s,color:n,iconType:o},a)=>{const r=[],l=De(n,this.activeSeriesMap[s]?1:.3);return e.forEach((e,n)=>{const d=zi(e),c=M(d)?Number(new Date(d)):Number(d),h=Wi(e),u=Rt(c,t),p=Rt(h,i),m=u*this.rect.width,g=(1-p)*this.rect.height;r.push(Object.assign({x:m,y:g,type:"scatterSeries",iconType:o,seriesIndex:a,name:s,borderColor:l,index:n},R(this.theme,"borderWidth","size","fillColor")))}),r})}makeTooltipModel(e){return[...e].flatMap(({data:e,name:t,color:i})=>{const s=[];return e.forEach(e=>{const n={x:zi(e),y:Wi(e)};s.push({label:t,color:i,value:n})}),s})}getClosestModel(e){if(!e.length)return[];const t=this.models.series.find(({index:t,seriesIndex:i})=>w(t)&&w(i)&&t===e[0].index&&i===e[0].seriesIndex);return t?[t]:[]}getResponderAppliedTheme(e,t){const{fillColor:i,size:s}=this.theme[t];return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{color:i,radius:s/2})))}onMousemove({responders:e,mousePosition:t}){const i=Xo(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"hover"),this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Xo(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"select"),this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class Ka extends _n{constructor(e){super({el:e.el,options:e.options,series:e.data.series,modules:[Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(ra),this.componentManager.add(qa),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(ca),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(va),this.componentManager.add(ya),this.painter.addGroups([n,o,h,c,s,u,a,p,d])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,chartType:t})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class Za extends _n{constructor(e){super({el:e.el,options:e.options,series:e.data.series,categories:e.data.categories,modules:[bo,Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(_a),this.componentManager.add(ra),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(ca),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(va),this.componentManager.add(fa),this.componentManager.add(ya),this.painter.addGroups([n,o,h,c,s,u,a,p])}addData(e,t,i){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Ja(e,t,i){return e<0?function(e,t,i){let s=e;return s>=i?0:(i<0&&(s=Math.min(e-i,0)),e<t&&(s-=e-t),s)}(e,t,i):function(e,t,i){let s=e;return t>0&&(s=Math.max(e-t,0)),e>i&&(s-=e-i),s}(e,t,i)}function Qa(e,t,i=!1){const s=e[t];return e.reduce((e,n,o)=>(i?o<=t:o<t)&&n*s>=0?e+n:e,0)}function er(e,t,i,s){const n=Qa(e,t,!1),o=Qa(e,t,!0);if(function(e,t,i,s){const n=e[t],o=Qa(e,t,!1),a=n>=0,r=n<0;return a&&o>=s||r&&o<=i||0===t&&a&&n<i||0===t&&r&&n>s}(e,t,i,s))return null;if(0===t)return Ja(e[t],i,s);if(n<i&&o>s)return s-i;let a=e[t];return o>s?a=s-n:o<i?a=i-n:n<i?a=o-i:n>s&&(a=o-s),a}var tr;!function(e){e[e.POSITIVE=0]="POSITIVE",e[e.NEGATIVE=1]="NEGATIVE",e[e.BOTH=2]="BOTH"}(tr||(tr={}));const ir="bar";function sr(e){return!!(e%2)}class nr extends Et{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.isBar=!0,this.valueAxis="xAxis",this.labelAxis="yAxis",this.anchorSizeKey="height",this.offsetSizeKey="width",this.basePosition=0,this.leftBasePosition=0,this.rightBasePosition=0,this.isRangeData=!1,this.offsetKey="x",this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!Sn(e,"column"))return;const s=this.tooltipRectMap[i][t];if(!s)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([s],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!yn(e,this.eventDetectType,"column"))return;const s="grouped"===this.eventDetectType?this.getGroupedRect([this.responders[t]],"hover"):this.getRespondersWithTheme([this.tooltipRectMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipRectMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize({name:e,stackChart:t}){this.initializeFields(e),t||(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}initializeFields(e){this.type="series",this.name=e,this.isBar=e===ir,this.offsetKey=this.isBar?"x":"y",this.valueAxis=this.isBar?"xAxis":"yAxis",this.labelAxis=this.isBar?"yAxis":"xAxis",this.anchorSizeKey=this.isBar?"height":"width",this.offsetSizeKey=this.isBar?"width":"height"}initUpdate(e){this.drawModels&&(this.isRangeData?this.initUpdateRangeData(e):(this.initUpdateClipRect(e),this.initUpdateConnector(e)))}initUpdateRangeData(e){const{series:t}=this.drawModels;this.drawModels.clipRect=this.models.clipRect;const i=this.models.series;t.forEach((t,s)=>{const n=i[s];0===e&&(t[this.offsetSizeKey]=0);const o=t[this.offsetSizeKey]+(n[this.offsetSizeKey]-t[this.offsetSizeKey])*e;t[this.offsetSizeKey]=o,this.isBar||(t[this.offsetKey]=n[this.offsetKey]+n[this.offsetSizeKey]-o)})}initUpdateClipRect(e){const{clipRect:t}=this.drawModels;if(!t)return;const i=t[0],s=this.offsetSizeKey,n=this.models.clipRect[0],o=i[s]+(n[s]-i[s])*e;i[s]=o,i[this.offsetKey]=Math.max(this.basePosition-o*this.basePosition/n[s],0)}initUpdateConnector(e){const{connector:t}=this.drawModels;if(!t)return;const i=this.models.connector;t.forEach((t,s)=>{const n=Re(i[s].strokeStyle)*e;t.strokeStyle=De(t.strokeStyle,n)})}setEventDetectType(e,t){var i,s;e.line&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getOptions(e){var t;const i=Object.assign({},e);return(null===(t=i)||void 0===t?void 0:t.series)&&i.series.column&&(i.series=Object.assign(Object.assign({},i.series),i.series.column)),i}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:c}=e;if(this.isShow=!(r&&r[this.name]),!this.isShow)return;const h=null!=(i=e.categories)?i:[],u=this.getOptions(e.options);this.setEventDetectType(o,u),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=Mn(l),this.selectable=this.getSelectableOption(u),this.valueAxis=xi(u,this.name,this.isBar?"xAxis":"yAxis");const p=o[this.name].data.map(e=>Object.assign(Object.assign({},e),{data:Ds(e.data,t.viewRange)}));a.centerYAxis&&(this.valueAxis="centerYAxis");const{tickDistance:m}=a[this.labelAxis],g=!!(null===(s=u.series)||void 0===s?void 0:s.diverging),{limit:v,stepSize:f}=this.getScaleData(c),b=At(v,f),{min:x,max:y}=vi(b);this.basePosition=this.getBasePosition(a[this.valueAxis]);let S=this.getOffsetSize();const{centerYAxis:w}=a;if(g){const[e,t]=this.getDivergingBasePosition(w);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,S=this.getOffsetSizeWithDiverging(w)}const M={min:x,max:y,tickDistance:m,diverging:g,ratio:this.getValueRatio(x,y,S),hasNegativeValue:N(b),seriesDirection:this.getSeriesDirection(b),defaultPadding:Ie(m)},O=this.renderSeriesModel(p,M),A=this.makeTooltipData(p,M,h),k=this.renderClipRectAreaModel();if(this.models={clipRect:[k],series:O},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(k)],series:E(O)}),ia(u,this.name).visible){const e=O.reduce((e,t)=>Cs(t.value)?[...e,...this.makeDataLabelRangeData(t)]:[...e,this.makeDataLabel(t,w)],[]);this.renderDataLabels(e)}this.tooltipRectMap=this.makeTooltipRectMap(O,A),this.responders=this.getBoxSeriesResponders(O,A,a,h)}getScaleData(e){return e["centerYAxis"===this.valueAxis?"xAxis":this.valueAxis]}getBoxSeriesResponders(e,t,i,s){const n=this.renderHoveredSeriesModel(e);return"grouped"===this.eventDetectType?Fo(this.rect,this.isBar?i.yAxis:i.xAxis,s,!this.isBar):n.map((e,i)=>Object.assign(Object.assign({},e),{data:t[i]}))}makeTooltipRectMap(e,t){return e.reduce((e,i,s)=>{const n=i.index,o=Object.assign(Object.assign({},i),{data:t[s]});return e[n]||(e[n]=[]),e[n].push(o),e},[])}renderClipRectAreaModel(){return{type:"clipRectArea",x:0,y:0,width:this.rect.width,height:this.rect.height}}initClipRect(e){return{type:"clipRectArea",width:this.isBar?0:e.width,height:this.isBar?e.height:0,x:this.isBar?0:e.x,y:this.isBar?e.y:0}}renderSeriesModel(e,t){const{tickDistance:i,diverging:s}=t,n=e.length,o=s&&2===e.length,a=this.getColumnWidth(t,n,o),r=[],l=(i-a*(o?1:n))/2;return e.forEach(({data:e,color:n,name:o},d)=>{const c=(s?0:d)*a+l,h=s&&sr(d);this.isRangeData=Ts(e),e.forEach((e,s)=>{const l=c+s*i,d=this.makeBarLength(e,t),u=this.getSeriesColor(o,n);if(w(d)){const i=this.getStartPosition(d,e,t,h);r.push(Object.assign(Object.assign({type:"rect",color:u,value:e},this.getAdjustedRect(l,i,d,a)),{name:o,index:s}))}})}),r}renderHoveredSeriesModel(e){return e.map(e=>this.makeHoveredSeriesModel(e))}makeHoveredSeriesModel(e){const{x:t,y:i,width:s,height:n,color:o,index:a}=e;return{type:"rect",color:De(o,1),x:t,y:i,width:s,height:n,index:a}}getRectModelsFromRectResponders(e){var t;return e.length?null!=(t=this.tooltipRectMap[e[0].index])?t:[]:[]}getGroupedRect(e,t){const i=this.getRectModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:De(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedRect(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeTooltipData(e,t,i){const s=[];return e.forEach(({data:e,name:n,color:o})=>{e.forEach((e,a)=>{if(!y(e)){w(this.makeBarLength(e,t))&&s.push({label:n,color:o,value:this.getTooltipValue(e),category:i.length?i[a]:""})}})}),s}getTooltipValue(e){return Cs(e)?`${e[0]} ~ ${e[1]}`:e}getBasePosition({labels:e,tickCount:t,zeroPosition:i}){const s=this.isBar?e:[...e].reverse(),n=kt(this.getOffsetSize(),t),o=this.getSeriesDirection(s);return i||this.getTickPositionIfNotZero(n,o)}getDivergingBasePosition(e){let t,i;if(e)t=e.xAxisHalfSize,i=e.secondStartX;else{t=i=this.getOffsetSize()/2}return[t,i]}getOffsetSize(){return this.rect[this.offsetSizeKey]}getValueRatio(e,t,i){return i/(t-e)}makeBarLength(e,t){if(y(e))return null;const{min:i,max:s,ratio:n}=t,o=function(e,t,i){if(Cs(e)){let[s,n]=e;return s<t&&(s=t),n>i&&(n=i),n-s}return Ja(e,t,i)}(e,i,s);return Math.max(this.getBarLength(o,n),2)}getBarLength(e,t){return e<0?Math.abs(e)*t:e*t}getStartPositionWithRangeValue(e,t,i){const{min:s,ratio:n}=i;let[o]=e;o<s&&(o=s);const a=(o-s)*n;return this.isBar?a:this.getOffsetSize()-a-t}getStartPosition(e,t,i,s){const{diverging:n,seriesDirection:o}=i;let a;return a=Cs(t)?this.getStartPositionWithRangeValue(t,e,i):n?s?this.getStartPosOnLeftBottomSide(e,n):this.getStartPosOnRightTopSide(e,n):o===tr.POSITIVE?this.getStartPosOnRightTopSide(e):o===tr.NEGATIVE||t<0?this.getStartPosOnLeftBottomSide(e):this.getStartPosOnRightTopSide(e),a}getStartPosOnRightTopSide(e,t=!1){let i;return i=t?this.isBar?this.rightBasePosition:this.rightBasePosition-e:this.isBar?this.basePosition:this.basePosition-e,i}getStartPosOnLeftBottomSide(e,t=!1){let i;return i=t?this.isBar?this.leftBasePosition-e:this.leftBasePosition:this.isBar?this.basePosition-e:this.basePosition,i}getAdjustedRect(e,t,i,s){return{x:this.isBar?t:e,y:this.isBar?e:t,width:this.isBar?i:s,height:this.isBar?s:i}}getColumnWidth(e,t,i=!1){const{tickDistance:s,defaultPadding:n}=e;t=i?1:t;const o=this.theme.barWidth;return o?V(s,o):(s-2*n)/t}getSeriesDirection(e){let t=tr.BOTH;return e.every(e=>Number(e)>=0)?t=tr.POSITIVE:F(e)&&(t=tr.NEGATIVE),t}getTickPositionIfNotZero(e,t){if(!e.length)return 0;const i=Number(Y(e)),s=Number(H(e));return t===tr.POSITIVE?this.isBar?i:s:t===tr.NEGATIVE?this.isBar?s:i:0}makeDataLabel(e,t){return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()},theme:j(this.theme.dataLabels,"stackTotal")})}makeDataLabelRangeData(e){return e.value.reduce((t,i,s)=>[...t,Object.assign(Object.assign({},e),{value:i,direction:this.getDataLabelRangeDataDirection(s%2==0),plot:{x:0,y:0,size:this.getOffsetSize()},theme:j(this.theme.dataLabels,"stackTotal")})],[])}getDataLabelRangeDataDirection(e){let t;return t=this.isBar?e?"left":"right":e?"bottom":"top",t}getDataLabelDirection(e,t){let i;if(this.isBar){const s=t?this.leftBasePosition:this.basePosition;i=e.x<s?"left":"right"}else i=e.y>=this.basePosition?"bottom":"top";return i}getOffsetSizeWithDiverging(e){return e?e.xAxisHalfSize:this.getOffsetSize()/2}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRectModelsFromRectResponders(e)]:this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n,shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}=this.theme[t];return e.map(e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.color,thickness:n,borderColor:s,style:[{shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}]}))}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return De(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}}class or extends nr{constructor(){super(...arguments),this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{stackSeries:s}=i,n=s[this.name],{name:o}=n.data[t],a=this.tooltipRectMap[e].find(({name:e})=>e===o);if(!a)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([a],"select"),name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}initialize({name:e,stackChart:t}){this.initializeFields(e),t&&(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:c}=e,{viewRange:h}=t;if(this.isShow=!!r[this.name],!this.isShow)return;const u=null!=(i=e.categories)?i:[],p=this.getOptions(e.options);this.setEventDetectType(o,p),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=Mn(l),this.selectable=this.getSelectableOption(p);const m=function(e,t){if(!t)return e;const i=Array.isArray(e.stackData)?Ds(e.stackData,t):Object.assign({},Object.keys(e.stackData).reduce((i,s)=>Object.assign(Object.assign({},i),{[s]:Ds(e.stackData[s],t)}),{})),s=e.data.map(e=>Object.assign(Object.assign({},e),{data:Ds(e.data,t)}));return Object.assign(Object.assign({},e),{data:s,stackData:i})}(r[this.name],h),{tickDistance:g}=a[this.labelAxis],v=!!(null===(s=p.series)||void 0===s?void 0:s.diverging),{limit:f,stepSize:b}=this.getScaleData(c),x=At(f,b),{min:y,max:S}=vi(x),{stack:w,scaleType:M}=m;this.basePosition=this.getBasePosition(a[this.valueAxis]);let O=this.getOffsetSize();const{centerYAxis:A}=a;if(v){const[e,t]=this.getDivergingBasePosition(A);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,O=this.getOffsetSizeWithDiverging(A)}const k={stack:w,scaleType:M,tickDistance:g,min:y,max:S,diverging:v,hasNegativeValue:N(x),seriesDirection:this.getSeriesDirection(x),defaultPadding:Ie(g),offsetSize:O,centerYAxis:A},{series:C,connector:T}=this.renderStackSeriesModel(m,k),D=this.renderClipRectAreaModel(),R=this.getTooltipData(m,u);if(this.models={clipRect:[D],series:C,connector:T},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(D)],series:E(C),connector:E(T)}),ia(p,this.name).visible){const e=this.getDataLabels(C,k),t=this.getTotalDataLabels(m,k);this.renderDataLabels([...e,...t])}this.tooltipRectMap=this.makeTooltipRectMap(C,R),this.responders=this.getBoxSeriesResponders(C,R,a,u)}renderStackSeriesModel(e,t){const{stackData:i}=e;return co(i)?this.makeStackGroupSeriesModel(e,t):this.makeStackSeriesModel(i,t,e.data)}makeStackSeriesModel(e,t,i,s=1,n=0){const o=[],a=this.getStackColumnWidth(t,s),{diverging:r}=t,l=r&&sr(n);return e.forEach(({values:e,total:r},d)=>{const c=this.getSeriesPosition(t,a,d,n,s),h=this.getStackValueRatio(r,t);e.forEach((s,n)=>{const{barLength:r,dataPosition:u}=this.getStackRectInfo(e,n,h,t,l),{name:p}=i[n],m=this.activeSeriesMap[p],g=De(i[n].color,m?1:.2);o.push(Object.assign(Object.assign({type:"rect",color:g,name:p,value:s},this.getAdjustedRect(c,u,null!=r?r:0,a)),{index:d}))})}),{series:o,connector:this.makeConnectorSeriesModel(e,t,s,n)}}makeStackGroupSeriesModel(e,t){const{stack:i}=t,s=e.stackData,n=e.data,o=Object.keys(s);let a=[],r=[];return o.forEach((e,l)=>{const d=n.filter(({stackGroup:t})=>t===e),{series:c,connector:h}=this.makeStackSeriesModel(s[e],t,d,o.length,l);a=[...a,...c],i.connector&&(r=[...r,...h])}),{series:a,connector:r}}makeConnectorSeriesModel(e,t,i=1,s=0){const{diverging:n,stack:{connector:o}}=t;if(!o)return[];const a=this.getStackColumnWidth(t,i),r=n&&sr(s),l=[];return e.forEach(({values:e,total:n},o)=>{const d=this.getSeriesPosition(t,a,o,s,i),c=[],h=this.getStackValueRatio(n,t);e.forEach((i,s)=>{const{barLength:n,dataPosition:o}=this.getStackRectInfo(e,s,h,t,r),{x:l,y:u}=this.getAdjustedRect(d,o,n,a),p=!r&&this.isBar?l+n:l,m=r&&!this.isBar?u+n:u;c.push({x:p,y:m})}),l.push(c)}),this.makeConnectorModel(l,o,a)}getTooltipData(e,t){const i=e.data,{stackData:s}=e,n=i.map(({color:e})=>e);return co(s)?this.makeGroupStackTooltipData(i,s,t):this.makeStackTooltipData(i,s,n,t)}makeGroupStackTooltipData(e,t,i){return Object.keys(t).flatMap(s=>{const n=e.filter(({stackGroup:e})=>e===s),o=n.map(({color:e})=>e);return this.makeStackTooltipData(n,t[s],o,i)})}makeStackTooltipData(e,t,i,s){const n=[];return t.forEach(({values:t},o)=>{t.forEach((t,a)=>{n.push({label:e[a].name,color:i[a],value:t,category:s.length?s[o]:""})})}),n}makeConnectorModel(e,t,i){if(!t||!e.length)return[];const{color:s,lineWidth:n,dashSegments:o}=this.theme.connector,a=[],r=e.length,l=e[0].length;for(let t=0;t<l;t+=1){const l=[];for(let i=0;i<r;i+=1)l.push(e[i][t]);l.forEach((e,t)=>{const{x:r,y:d}=e;if(t<l.length-1){const{x:e,y:c}=l[t+1];a.push({type:"line",x:this.isBar?r:r+i,y:this.isBar?d+i:d,x2:e,y2:c,dashSegments:o,strokeStyle:s,lineWidth:n})}})}return a}getStackValueRatio(e,t){const{stack:{type:i},scaleType:s,min:n,max:o,offsetSize:a}=t;return"percent"===i?a/function(e,t){const{positive:i,negative:s}=e;let n=i+Math.abs(s);return D(["dualPercentStack","divergingPercentStack"],t)&&(n*=2),n}(e,s):this.getValueRatio(n,o,a)}getStackBarLength(e,t,i,s){const n=function(e,t,i){const{stack:s,min:n,max:o}=i;return lo(s)?e[t]:er(e,t,n,o)}(e,t,s);return w(n)?this.getBarLength(n,i):null}getStackColumnWidth(e,t){const{tickDistance:i,diverging:s,defaultPadding:n}=e,o=s?1:t,a=this.theme.barWidth;return a?V(i,a):(i-2*n)/o}getSeriesPosition(e,t,i,s,n){const{tickDistance:o,diverging:a}=e;return i*o+(o-t*(a?1:n))/2+t*(a?0:s)}getStackStartPosition(e,t,i,s,n){const{stack:o,diverging:a,seriesDirection:r}=s;let l;return l=a?n?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPosOnRightTopSide(e,t,s,i):lo(o)?this.calcStartPositionWithPercent(e,t,i):r===tr.POSITIVE?this.calcStartPosOnRightTopSide(e,t,s,i):r===tr.NEGATIVE?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPositionWithStack(e,t,s,i),l}calcStartPosOnLeftBottomSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.leftBasePosition:this.basePosition,l=Qa(e,t,!1),d=Qa(e,t,!0),c=d<n,h=this.isBar?d:l,u=o<0?Math.min(h-o,0):h;let p;return p=this.isBar?c?0:r-Math.abs(u)*s:r+Math.abs(u)*s,p}calcStartPosOnRightTopSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.rightBasePosition:this.basePosition,l=Qa(e,t,!1),d=Qa(e,t,!0),c=d>o,h=this.isBar?l:d,u=(n>0?Math.max(h-n,0):h)*s;let p;return p=this.isBar?r+u:c?0:r-u,p}calcStartPositionWithStack(e,t,i,s){return e[t]<0?this.calcStartPosOnLeftBottomSide(e,t,i,s):this.calcStartPosOnRightTopSide(e,t,i,s)}calcStartPositionWithPercent(e,t,i){const s=this.basePosition,n=Qa(e,t,this.isBar?e[t]<0:e[t]>0);return this.isBar?n*i+s:s-n*i}getStackRectInfo(e,t,i,s,n){return{barLength:this.getStackBarLength(e,t,i,s),dataPosition:this.getStackStartPosition(e,t,i,s,n)}}getDataLabels(e,t){return e.map(e=>this.makeDataLabel(e,t.centerYAxis))}getTotalDataLabels(e,t){const{stackData:i,stack:s}=e;return lo(s)?[]:co(i)?this.makeGroupTotalDataLabels(e,t):this.makeTotalDataLabels(i,t)}makeGroupTotalDataLabels(e,t){let i=[];const s=e.stackData,n=Object.keys(s);return n.forEach((e,o)=>{const a=this.makeTotalDataLabels(s[e],t,n.length,o);i=[...i,...a]}),i}makeTotalDataLabels(e,t,i=1,s=0){const n=[],{min:o,max:a,seriesDirection:r,diverging:l,centerYAxis:d}=t,c=this.getStackColumnWidth(t,i);return e.forEach((e,h)=>{const{total:u}=e,p=this.getSeriesPosition(t,c,h,s,i),m=this.getStackValueRatio(u,t);(function(e){let t=["positive","negative"];return e===tr.POSITIVE?t=["positive"]:e===tr.NEGATIVE&&(t=["negative"]),t})(r).forEach(e=>{const i=u[e];if(!i)return;const r=this.makeBarLength(i,{min:o,max:a,ratio:m}),h=this.getStartPosition(r,i,t,l&&sr(s)),g=Object.assign({type:"stackTotal",value:i,name:"totalLabel-"+e,theme:this.theme.dataLabels.stackTotal},this.getAdjustedRect(p,h,r,c));n.push(this.makeTotalDataLabel(g,d))})}),n}makeTotalDataLabel(e,t){return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()}})}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...t,...this.getGroupedRect(e,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}}class ar extends Et{constructor(){super(...arguments),this.models=[]}initialize(){this.type="zeroAxis",this.name="zeroAxis"}render({layout:e,axes:t,series:i,options:s}){this.rect=e.plot;const n=hi({series:i,options:s}),o=n?"xAxis":"yAxis",{zeroPosition:a}=t[o];w(a)&&(this.models=this.renderZeroModel(a,n))}renderZeroModel(e,t){const i=Ct(0),s=Ct(e);let n;return n=t?{type:"line",x:s,y:i,x2:s,y2:Ct(this.rect.height),strokeStyle:"rgba(0, 0, 0, 0.5)"}:{type:"line",x:i,y:s,x2:Ct(this.rect.width),y2:s,strokeStyle:"rgba(0, 0, 0, 0.5)"},[n]}}class rr extends Et{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]}}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=e===Wt.Y}render({layout:e,axes:t,theme:i}){const{centerYAxis:s}=t;if(!s)return;this.theme=Si(i,this.name),this.rect=e[this.name],"yAxis"===this.name&&(this.rect=Object.assign(Object.assign({},this.rect),{x:s.x}));const{viewLabels:n,tickCount:o,tickInterval:a,needRotateLabel:r,radian:l,offsetY:d}=t[this.name],c={tickInterval:a,centerYAxis:s,needRotateLabel:r,radian:l,offsetY:d,relativePositions:kt(this.axisSize(s),o)},h=this.yAxisComponent?"y":"x",u=this.yAxisComponent?"x":"y";this.models.label=this.renderLabelModels(n,h,u,c),this.models.tick=this.renderTickModels(h,u,c),this.models.axisLine=this.renderAxisLineModel(s),this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach(e=>{this.drawModels[e]=this.models[e].map(e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t})}))}renderAxisLineModel({xAxisHalfSize:e,secondStartX:t}){const i=Ct(0),s=Ct(this.rect.width);let n;if(this.yAxisComponent){const e=Ct(this.rect.height);n=[{type:"line",x:s,y:i,x2:s,y2:e},{type:"line",x:i,y:i,x2:i,y2:e}]}else n=[{type:"line",x:i,y:i,x2:Ct(e),y2:i},{type:"line",x:Ct(t),y:i,x2:s,y2:i}];return n}renderTickModels(e,t,i){const s=this.yAxisComponent?Ct(this.rect.width):Ct(0),{tickInterval:n,centerYAxis:{secondStartX:o},relativePositions:a}=i;return a.reduce((i,a,r)=>{if(r%n)return i;const l={type:"tick",isYAxis:this.yAxisComponent,tickSize:this.yAxisComponent?-5:5,[e]:Ct(a),[t]:s},d=Object.assign({},l);return this.yAxisComponent?(d[t]=Ct(0),d.tickSize=5):d[e]=Ct(a+o),[...i,l,d]},[])}renderLabelModels(e,t,i,s){const{centerYAxis:{secondStartX:n,yAxisLabelAnchorPoint:o},offsetY:a,needRotateLabel:r,radian:l}=s,d=this.theme.label,c=Pe(d);let h,u,p;this.yAxisComponent?(h=Ct(o),u="center",p=e):(h=a,p=[...e].reverse(),u=r?"left":"center");const m=["default",{textAlign:u,font:c,fillStyle:d.color}];return p.reduce((s,{text:o,offsetPos:a},r)=>{const d={type:"label",text:o,style:m,[t]:Ct(a)+(this.yAxisComponent?0:n),[i]:h,radian:l},c=[d];if(!this.yAxisComponent){const i=Object.assign(Object.assign({},d),{text:e[r].text,[t]:Ct(d[t]-n)});c.push(i)}return[...s,...c]},[])}axisSize(e){let t;return t=this.yAxisComponent?this.rect.height:e.xAxisHalfSize,t}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.5)",e.ctx.lineWidth=1}}class lr extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{bar:i.series},categories:i.categories,modules:[bo,Kn,So,$i,Ao]})}initialize(){var e;super.initialize();const t=!!(null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.stack);this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(nr,{name:"bar",stackChart:t}),this.componentManager.add(or,{name:"bar",stackChart:t}),this.componentManager.add(ar),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(rr,{name:"yAxis"}),this.componentManager.add(rr,{name:"xAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,a])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{bar:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class dr extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{column:i.series},categories:i.categories,modules:[bo,Kn,So,$i,Ao]})}initialize(){var e;super.initialize();const t=!!(null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.stack);this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(or,{name:"column",stackChart:t}),this.componentManager.add(nr,{name:"column",stackChart:t}),this.componentManager.add(ar),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,a])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{column:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function cr(e,t){return e.find(({component:e})=>e.name===t&&"point"===e.eventDetectType)}class hr extends _n{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:i,categories:s,modules:[bo,Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(or,{name:"column"}),this.componentManager.add(nr,{name:"column"}),this.componentManager.add(ra),this.componentManager.add(ar),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"secondaryYAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(ha,{name:"secondaryYAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,a,h])}handleEventForAllResponders(e,t,i,s){if(b(cr(n=t,"column"))&&b(cr(n,"line"))){t.find(({component:e})=>"column"===e.name).component[i]({mousePosition:s,responders:[]},e)}var n}addData(e,t,i){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function ur(e){return e.reduce((e,t)=>{const i=t.data.filter(e=>!y(e));return Math.max(e,...i.map(({r:e})=>e))},0)}class pr extends Et{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.maxRadius=-1,this.maxValue=-1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{name:s}=i.series.bubble.data[e],n=this.responders.filter(({name:e})=>e===s)[t];if(!n)throw new Error(K);const o=this.getResponderAppliedTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!w(t)||!w(i))return;const{name:n}=s.series.bubble.data[i],o=[this.responders.filter(({name:e})=>e===n)[t]];o.length&&(this.eventBus.emit("renderHoveredSeries",{models:o,name:this.name}),this.activatedResponders=o,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="bubble",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach((t,i)=>{t.radius=this.models.series[i].radius*e})}render(e){const{layout:t,series:i,scale:s,axes:n,circleLegend:o,legend:a,options:r,theme:l}=e,{plot:d}=t;if(!i.bubble)throw new Error(Q(this.name));const{xAxis:c,yAxis:h}=n,u=i.bubble.data;this.theme=l.series.bubble,this.rect=d,this.activeSeriesMap=Mn(a),this.selectable=this.getSelectableOption(r);const p=this.rect.width/c.tickCount,m=this.rect.height/h.tickCount;this.maxRadius=o.radius?o.radius:Math.min(p,m),this.maxValue=ur(u);const g=this.renderBubblePointsModel(u,s),v=this.makeTooltipModel(u);this.models.series=g,this.drawModels||(this.drawModels=W(this.models)),this.responders=g.map((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:e.radius+1,color:De(e.color,.85),data:v[t],index:t}))}renderBubblePointsModel(e,t){const i=t.xAxis.limit,s=t.yAxis.limit,{borderWidth:n,borderColor:o}=this.theme;return e.flatMap(({data:e,name:t,color:a},r)=>{const l=[],d=De(a,this.activeSeriesMap[t]?.8:.1);return e.filter(e=>!y(e)).forEach(e=>{const a=zi(e),c=M(a)?Number(new Date(a)):Number(a),h=Wi(e),u=Rt(c,i),p=Rt(h,s),m=u*this.rect.width,g=(1-p)*this.rect.height,v=Math.max(.5,e.r/this.maxValue*this.maxRadius);l.push({x:m,y:g,type:"circle",radius:v,color:d,style:["default"],seriesIndex:r,name:t,borderWidth:n,borderColor:o})}),l})}makeTooltipModel(e){return[...e].flatMap(({data:e,name:t,color:i})=>{const s=[];return e.filter(e=>!y(e)).forEach(e=>{const{r:n,label:o}=e;s.push({label:`${t}/${o}`,color:i,value:{x:zi(e),y:Wi(e),r:n}})}),s})}getResponderAppliedTheme(e,t){return e.map(e=>P(e,this.theme[t]))}onMousemove({responders:e,mousePosition:t}){const i=Xo(e,t,this.rect),s=this.getResponderAppliedTheme(i,"hover");this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Xo(e,t,this.rect),s=this.getResponderAppliedTheme(i,"select");this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class mr extends Et{constructor(){super(...arguments),this.models={circleLegend:[]}}initialize(){this.type="circleLegend"}render({layout:e,series:t,circleLegend:i}){if(!t.bubble)throw new Error(J);if(this.isShow=i.visible,!this.isShow)return;const s=t.bubble.data;this.rect=e.circleLegend,this.renderCircleLegend(s,i)}renderCircleLegend(e,t){const i=ur(e),{radius:s}=t;this.models.circleLegend=[{type:"circleLegend",radius:s,value:i,x:s,y:this.rect.height-s}]}}function gr(e,t){const{x:i,y:s,radius:n,value:o}=t;[1,.5,.25].forEach((t,a)=>{const r=t*n,l=s+(a?(1-t)*n:0);dt(e,{type:"circle",x:i,y:l,radius:r,color:"#fff",seriesIndex:0,style:["default",{strokeStyle:"#888",lineWidth:1}]}),Ge(e,{type:"label",x:i,y:l-r,text:String(o*t),style:["default",{textAlign:"center",textBaseline:"bottom"}]})})}class vr extends _n{constructor(e){super({el:e.el,options:e.options,series:{bubble:e.data.series},modules:[Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(pr),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(mr),this.componentManager.add(ya),this.painter.addGroups([n,o,g,c,s,u])}addData(e){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bubble:e.series}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class fr extends _n{constructor(e){var t,i;super({el:e.el,options:e.options,series:{scatter:(i=e.data.series,i.map(e=>{const t={};return Object.assign(Object.assign({},e),{data:e.data.filter(e=>!y(e)).reduce((e,i)=>{const s=`${zi(i)}-${Wi(i)}`;return t[s]?e:(t[s]=!0,[...e,i])},[])})}))},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(qa),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,d])}addData(e){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{scatter:i},categories:t})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function br(e,t,i){return{width:e?t:i,height:e?i:t}}function xr(e,t,i){return e*t+(t-i)/2}class yr extends Et{constructor(){super(...arguments),this.models={range:[],bullet:[],marker:[]},this.activatedResponders=[],this.eventDetectType="point",this.vertical=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,state:t})=>{var i;if(!w(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter(({name:e})=>e===s);if(!n)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(n,"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,state:t})=>{var i;if(!w(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter(({name:e})=>e===s);n.length&&this.onMousemove({responders:n})}}initialize(){this.type="series",this.name="bullet",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d,categories:c}=e;if(!o.bullet)throw new Error(Q(this.name));this.setEventDetectType(o,l),this.theme=d.series.bullet,this.rect=s.plot,this.activeSeriesMap=Mn(r),this.selectable=this.getSelectableOption(l),this.vertical=!!(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.vertical);const h=hi({series:o,options:l}),{labelAxisName:u,valueAxisName:p}=mi(h,o),{valueSizeKey:m}=gi(h),{tickDistance:g}=n[u],{zeroPosition:v}=n[p],{min:f,max:b}=a[p].limit,x=o.bullet.data,y=Object.assign({ratio:this.rect[m]/(b-f),tickDistance:g,zeroPosition:v},this.getBulletBarWidths(g)),S=this.renderRanges(x,y),w=this.renderBullet(x,y),M=this.renderMarkers(x,y);this.models.range=S,this.models.bullet=w,this.models.marker=M,this.drawModels||(this.drawModels={range:S.map(e=>Object.assign({},e)),bullet:w.map(e=>Object.assign(Object.assign({},e),{height:this.vertical?0:e.height,width:this.vertical?e.width:0,y:this.vertical?e.y+e.height:e.y})),marker:M.map(e=>Object.assign({},e))});const O={range:S,bullet:w,marker:M},A=this.makeTooltipModel(O);this.tooltipRectMap=this.makeTooltipRectMap(O,A),this.responders=this.getBulletSeriesResponders(O,A,n,c),ia(l,this.name).visible&&this.renderDataLabels(this.getDataLabels([...S,...w,...M],this.vertical,this.rect[m]))}getDataLabels(e,t,i){const{dataLabels:s}=this.theme,n=j(s,"marker"),{useSeriesColor:o,color:a}=n,{marker:r}=s;return e.filter(e=>"line"===e.type||"range"!==e.modelType).map(e=>"line"===e.type?Object.assign(Object.assign({},e),{x:t?(e.x+e.x2)/2:e.x,theme:Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.strokeStyle:r.color})}):Object.assign(Object.assign({},e),{direction:t?"top":"right",plot:{x:0,y:0,size:i},theme:Object.assign(Object.assign({},n),{color:o?e.color:a})}))}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getBulletSeriesResponders(e,t,i,s){return"grouped"===this.eventDetectType?Fo(this.rect,this.vertical?i.xAxis:i.yAxis,s,this.vertical):function(e,t){const{range:i,marker:s,bullet:n}=e,{range:o,marker:a,bullet:r}=t;return[...i.map((e,t)=>Object.assign(Object.assign({},e),{data:o[t]})),...n.map((e,t)=>Object.assign(Object.assign({},e),{data:r[t]})),...s.map((e,t)=>Object.assign(Object.assign({},e),{detectionSize:5,data:a[t]}))]}(e,t)}makeTooltipRectMap(e,t){const i={};return Object.keys(e).forEach(s=>{e[s].forEach((e,n)=>{const o=e.name;i[o]||(i[o]=[]);const a=Object.assign(Object.assign({},e),{data:t[s][n]});i[o].push(a)})}),i}getBulletSeriesModelsFromRectResponders(e){var t;return e.length?null!=(t=this.tooltipRectMap[e[0].label])?t:[]:[]}getGroupedRect(e,t){const i=this.getBulletSeriesModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:De(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getBulletSeriesModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...this.getGroupedRect(e,"hover"),...this.getRespondersWithTheme(t,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e.length?[e[e.length-1]]:[]),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){const t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRespondersWithTheme(this.getBulletSeriesModelsFromRectResponders(e),"select")]:this.getRespondersWithTheme(e,"select");this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}filterBulletResponder(e){return e.filter(e=>{var t;return"bullet"===(null===(t=e)||void 0===t?void 0:t.modelType)})}renderRanges(e,{tickDistance:t,ratio:i,zeroPosition:s,rangeWidth:n}){const o=[];return e.forEach(({ranges:e,color:a,name:r},l)=>{(null!=e?e:[]).forEach((e,d)=>{if(!y(e)){const[c,h]=e,u=(h-c)*i,p=xr(l,t,n);o.push(Object.assign(Object.assign({type:"rect",name:r,color:this.getRangeColor(De(a,this.getSeriesOpacity(r)),d,r),x:this.vertical?p:c*i+s,y:this.vertical?s-h*i:p},br(this.vertical,n,u)),{modelType:"range",seriesColor:a,tooltipColor:this.getRangeColor(a,d,r,!0),value:e}))}})}),o}renderBullet(e,{tickDistance:t,ratio:i,zeroPosition:s,bulletWidth:n}){const{borderColor:o,borderWidth:a}=this.theme;return e.reduce((e,{data:r,color:l,name:d},c)=>{if(y(r))return[...e];const h=Math.max(r*i,2),u=xr(c,t,n),p=Object.assign({type:"rect",name:d,color:De(l,this.getSeriesOpacity(d)),x:this.vertical?u:s,y:this.vertical?s-h:u,thickness:a,borderColor:o,modelType:"bullet",seriesColor:l,tooltipColor:l,value:r},br(this.vertical,n,h));return[...e,p]},[])}renderMarkers(e,{tickDistance:t,ratio:i,zeroPosition:s,markerWidth:n}){const{markerLineWidth:o}=this.theme,a=[];return e.forEach(({markers:e,color:r,name:l},d)=>{const c=xr(d,t,n);(null!=e?e:[]).forEach(e=>{if(!y(e)){const t=e*i,d=this.vertical?c:t+s,h=this.vertical?s-t:c;a.push({type:"line",name:l,x:d,y:h,x2:this.vertical?d+n:d,y2:this.vertical?h:h+n,strokeStyle:De(r,this.getSeriesOpacity(l)),lineWidth:o,seriesColor:r,tooltipColor:r,value:e})}})}),a}makeTooltipModel(e){const{range:t,bullet:i,marker:s}=e;return{range:this.makeTooltipData(t,"Range"),bullet:this.makeTooltipData(i,"Actual"),marker:this.makeTooltipData(s,"Marker")}}makeTooltipData(e,t){return e.map(e=>{const{name:i,seriesColor:s,tooltipColor:n,value:o}=e;return{label:i,color:De(s,1),value:[{title:t,value:o,color:n}],templateType:"bullet"}})}getBulletBarWidths(e){const{barWidth:t,barWidthRatios:i}=this.theme,{rangeRatio:s,bulletRatio:n,markerRatio:o}=i,a=t?V(e,t):.6*e;return{rangeWidth:a*s,bulletWidth:a*n,markerWidth:a*o}}getRangeColor(e,t,i,s=!1){const{rangeColors:n}=this.theme,o=Array.isArray(n)&&n[t];return De(o?n[t]:e,(o?Re(n[t]):rn[t])*this.getSeriesOpacity(i,s))}getSeriesOpacity(e,t=!1){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some(e=>!e),a=t?s:i.restSeries.areaOpacity,r=n?i.areaOpacity:a;return o?r:s}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n}=this.theme[t];return this.filterBulletResponder(e).map(e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.tooltipColor,thickness:n,borderColor:s,style:[Object.assign({},R(this.theme[t],"shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY"))]}))}}class Sr extends _n{constructor({el:e,options:t,data:{series:i}}){super({el:e,options:t,series:{bullet:i},modules:[Kn,So,$i,Ao]}),this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add(yr),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,c,s,u,a])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bullet:e.series}})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}}var wr={name:"seriesData",state:()=>({nestedPieSeries:{}}),action:{setNestedPieSeriesData({state:e,initStoreState:t}){const{theme:i,disabledSeries:s}=e,n=t.series,o={},a={};n.pie.forEach(({name:e,data:t},r)=>{const{colors:l}=i.series.pie[e],d=[],c=t.map((e,t)=>{var i;const{parentName:s,name:o}=e,c=s&&r?a[s]:null===(i=l)||void 0===i?void 0:i[t];d.push(c),a[o]=c;const h=s&&r?function e(t,i,s){var n,o;const a=null===(n=t.pie)||void 0===n?void 0:n[i].data.find(({name:e})=>e===s);return(null===(o=a)||void 0===o?void 0:o.parentName)?e(t,i-1,a.parentName):s}(n,r-1,s):o;return Object.assign(Object.assign({},e),{data:e.data,rootParentName:h,color:c})});o[e]={data:c.filter(({rootParentName:e})=>!s.includes(e)),colors:d}}),e.nestedPieSeries=o,this.dispatch("updateNestedPieChartLegend")}},observe:{updateNestedPieSeriesData(){this.dispatch("setNestedPieSeriesData")}}};class Mr extends _n{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{pie:i},categories:s,modules:[wr]})}initialize(){var e;super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(la),(e=this.store.initStoreState.series.pie,null!=e?e:[]).forEach(({name:e})=>{this.componentManager.add(Ta,{alias:e})}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,m,a])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t)),this.componentManager.add(Ta,{alias:e.name})}setData(e){var t;this.componentManager.remove(Ta),this.resetSeries(),this.store.dispatch("setData",{series:{pie:e.series}}),(t=this.store.initStoreState.series.pie,null!=t?t:[]).forEach(({name:e})=>{this.componentManager.add(Ta,{alias:e})})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}const Or=.2,Ar=1;class kr extends Et{constructor(){super(...arguments),this.models={area:[],line:[],dot:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{name:s}=i.series.radar.data[t],n=this.responders.filter(({name:e})=>e===s)[e];if(!n)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([n],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{name:s}=i.series.radar.data[t],n=[this.responders.filter(({name:e})=>e===s)[e]];n.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(n,"hover"),name:this.name}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="radar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n,o,a,r,l;const{layout:d,radialAxes:c,series:h,legend:u,options:p,theme:m,scale:g}=e;if(!h.radar)throw new Error(Q(this.name));this.theme=m.series.radar,this.rect=d.plot,this.activeSeriesMap=Mn(u),this.selectable=this.getSelectableOption(p);const v=e.categories,{axisSize:f,centerX:b,centerY:x}=c.verticalAxis,{limit:y,stepSize:S}=g.verticalAxis,w=At(y,S),{min:M,max:O}=vi(w),A={categories:v,degree:Ue/v.length,centerX:b,centerY:x,showArea:(s=null===(i=null===(t=p)||void 0===t?void 0:t.series)||void 0===i?void 0:i.showArea,null!=s&&s),ratio:f/(O-M)},k=null===(n=h.radar)||void 0===n?void 0:n.data,C=this.makeRadarPointsData(k,A),T=this.renderDotModels(C);this.models.area=(null===(a=null===(o=p)||void 0===o?void 0:o.series)||void 0===a?void 0:a.showArea)?this.renderAreaModels(C):[],this.models.line=this.renderLineModels(C),this.models.dot=(null===(l=null===(r=p)||void 0===r?void 0:r.series)||void 0===l?void 0:l.showDot)?T:[],this.drawModels||(this.drawModels={area:this.initDrawModels("area",b,x),line:this.initDrawModels("line",b,x),dot:this.models.dot.map(e=>Object.assign(Object.assign({},e),{x:b,y:x}))});const D=this.makeTooltipModel(T,v);this.responders=T.map((e,t)=>Object.assign(Object.assign({},e),{data:D[t],color:De(e.color,1)}))}initDrawModels(e,t,i){return this.models[e].map(e=>{var s;return Object.assign(Object.assign({},e),{distances:null===(s=e.distances)||void 0===s?void 0:s.map(()=>0),points:e.points.map(()=>({x:t,y:i}))})})}makeTooltipModel(e,t){return e.map(({name:e,color:i,value:s,index:n})=>({label:e,color:i,value:s,category:t[n]}))}getRespondersWithTheme(e,t){const{radius:i,borderWidth:s,borderColor:n,color:o}=this.theme[t].dot;return e.map(e=>{const t=null!=o?o:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,borderColor:null!=n?n:De(t,.5),borderWidth:s})})}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeRadarPointsData(e,t){const{centerX:i,centerY:s,degree:n,ratio:o,showArea:a}=t;return e.map(({data:e,color:t,name:r})=>{const l=e.reduce((e,t,a)=>{if(y(t))return{distances:[...e.distances,0],linePoints:[...e.linePoints,null],areaPoints:[...e.areaPoints,{x:i,y:s}]};const r=t*o,l=Qe(i,s,r,Ze(n*a));return{distances:[...e.distances,r],linePoints:[...e.linePoints,l],areaPoints:[...e.areaPoints,l]}},{linePoints:[],distances:[],areaPoints:[]});return y(e[0])||y(e[e.length-1])||(l.linePoints.push(l.linePoints[0]),l.areaPoints.push(l.areaPoints[0])),Object.assign(Object.assign({name:r,seriesColor:t,data:e},l),this.getSeriesColor(a,t,r))})}renderAreaModels(e){return e.map(({distances:e,areaPoints:t,name:i,fillColor:s,seriesColor:n})=>({type:"areaPoints",name:i,distances:e,points:t,fillColor:s,color:De(n,0),lineWidth:0}))}renderLineModels(e){const{lineWidth:t,dashSegments:i}=this.theme;return e.map(({distances:e,linePoints:s,name:n,lineColor:o})=>({type:"linePoints",lineWidth:null!=t?t:Ks,name:n,distances:e,points:s,color:o,dashSegments:i}))}renderDotModels(e){const{radius:t,color:i}=this.theme.dot,s=[];return e.forEach(({linePoints:e,lineColor:n,name:o,data:a},r)=>e.slice(0,e.length-1).forEach((e,l)=>{var d;y(e)||s.push(Object.assign(Object.assign({type:"circle"},e),{radius:t,color:null!=i?i:n,style:[{strokeStyle:"rgba(0, 0, 0, 0)"}],name:o,seriesIndex:r,index:l,value:null===(d=a)||void 0===d?void 0:d[l]}))})),s}getSeriesColor(e,t,i){const s=this.activeSeriesMap[i],{select:n,areaOpacity:o}=this.theme,a=Object.values(this.activeSeriesMap).some(e=>!e),r=De(t,s?Ar:Or);let l=0;if(e){const e=s?n.areaOpacity:n.restSeries.areaOpacity;l=a?e:o}return{lineColor:r,fillColor:De(r,l)}}}function Cr(e,t){const{limit:{max:i},stepSize:s}=e;return i+(t<Ue?0:s)}function Tr(e,t){return e.findIndex(e=>e===t)}class Dr extends Et{constructor(){super(...arguments),this.models={plot:[],line:[],band:[]}}initialize(e){var t,i;this.type="plot",this.name=null!=(i=null===(t=e)||void 0===t?void 0:t.name)?i:"radialPlot"}render(e){var t,i,s,n,o,a;const{layout:r,radialAxes:l,options:d,series:c,theme:h,scale:u}=e;this.rect=r.plot,this.circularAxisTheme=h.circularAxis;const p=null!=(t=e.categories)?t:[];if("gauge"===this.name){const e=null!=(n=null===(s=null===(i=d)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[],t=!hi({series:c,categories:p}),o=this.makeRenderOptionsOnGauge(t,l.circularAxis,p,u);this.models.band=this.renderBands(e,o,p)}else{const e=!!c.radar,t=null!=(a=null===(o=d.plot)||void 0===o?void 0:o.type)?a:e?"spiderweb":"circle",i=this.makeRenderOptions(l,t,p);this.models.plot=this.renderPlot(i),this.models.line=c.radialBar?this.renderLine(i):[]}}makeRenderOptionsOnGauge(e,t,i,s){const{angle:{total:n,start:o},radius:{outer:a},clockwise:r,centerX:l,centerY:d}=t,{width:c,margin:h}=t.band;return{centerX:l,centerY:d,clockwise:r,totalAngle:n,scaleMaxLimitValue:e?i.length:Cr(s.circularAxis,n),startAngle:o,outerRadius:a,bandWidth:c,bandMargin:h,hasCategoryAxis:e}}makeRenderOptions(e,t,i=[]){const{centerX:s,centerY:n,radius:{ranges:o,inner:a,outer:r}}=e.verticalAxis,{angle:{central:l,total:d,start:c,end:h,drawingStart:u},label:{labels:p},tickInterval:m,clockwise:g}=e.circularAxis,v=d!==Ue;return{type:t,categories:i,centralAngle:l,centerX:s,centerY:n,initialRadius:a,radius:r,radiusRanges:o,lineCount:p.length,tickInterval:m,drawingStartAngle:u,usingArcPlot:v,startAngle:c,endAngle:h,clockwise:g}}renderPlot(e){const{type:t,usingArcPlot:i}=e;return i?this.makeArc(e):"spiderweb"===t?this.makeSpiderwebPlot(e):this.makeCirclePlot(e)}makeSpiderwebPlot(e){const{centralAngle:t,centerX:i,centerY:s,categories:n,radiusRanges:o}=e,{strokeStyle:a,lineWidth:r}=this.circularAxisTheme;return o.map(e=>{const o=n.map((n,o)=>Qe(i,s,e,Ze(t*o)));return{type:"polygon",color:a,lineWidth:r,points:o}})}makeCirclePlot(e){const{centerX:t,centerY:i,radiusRanges:s}=e,{strokeStyle:n,lineWidth:o}=this.circularAxisTheme;return s.map(e=>({type:"circle",color:"rgba(0, 0, 0, 0)",radius:e,x:t,y:i,borderColor:n,borderWidth:o}))}makeArc(e){const{centerX:t,centerY:i,radiusRanges:s,startAngle:n,endAngle:o,clockwise:a}=e,{strokeStyle:r,lineWidth:l}=this.circularAxisTheme;return s.map(e=>({type:"arc",borderWidth:l,borderColor:r,x:t,y:i,angle:{start:n,end:o},drawingStartAngle:qe,radius:e,clockwise:a}))}renderLine(e){const{centerX:t,centerY:i,initialRadius:s,radius:n,lineCount:o,centralAngle:a,tickInterval:r,drawingStartAngle:l,clockwise:d}=e,{strokeStyle:c,lineWidth:h}=this.circularAxisTheme;return T(0,o).reduce((e,o,u)=>{const p=l+a*u*(d?1:-1),{x:m,y:g}=Qe(t,i,s,Ze(p)),{x:v,y:f}=Qe(t,i,n,Ze(p));return u%r==0?[...e,{type:"line",x:m,y:g,x2:v,y2:f,strokeStyle:c,lineWidth:h}]:e},[])}renderBands(e,t,i){const s=[],{centerX:n,centerY:o,clockwise:a,totalAngle:r,scaleMaxLimitValue:l,startAngle:d,outerRadius:c,bandWidth:h,bandMargin:u,hasCategoryAxis:p}=t;return e.forEach(({range:e,color:t},m)=>{const g=nt((p?Tr(i,e[1].toString())-Tr(i,e[0].toString()):Number(e[1])-Number(e[0]))/l*r*(a?1:-1)),v=s[s.length-1],f=m&&v?v.degree.end:d,b=nt(f+g);s.push({type:"sector",color:t,x:n,y:o,clockwise:a,degree:{start:f,end:b},radius:{inner:c+u,outer:c+h}})}),s}}class Rr extends Et{constructor(){super(...arguments),this.models={verticalAxisLabel:[],circularAxisLabel:[],dot:[],line:[],tick:[]}}initialize(e){var t,i;this.type="axis",this.name=null!=(i=null===(t=e)||void 0===t?void 0:t.name)?i:"radial"}render({layout:e,radialAxes:t,theme:i,series:s}){if(this.isShow=!wn(s),this.rect=e.plot,!t)return;this.circularAxisTheme=i.circularAxis;const{circularAxis:n,verticalAxis:o}=t;o&&(this.verticalAxisTheme=i.verticalAxis,this.models.verticalAxisLabel=this.renderVerticalAxisLabel(o)),this.models.circularAxisLabel=this.renderCircularAxisLabel(n),"gauge"===this.name?(this.models.line=this.renderArcLine(n),this.models.tick=this.renderTick(n)):this.models.dot=this.renderDotModel(n)}getBubbleShadowStyle(){const{visible:e,shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}=this.verticalAxisTheme.label.textBubble;return e&&t?[{shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}]:null}renderVerticalAxisLabel(e){const{radius:{ranges:t,outer:i},label:{labels:s,interval:n,maxWidth:o,maxHeight:a,margin:r,align:l},angle:{start:d},pointOnColumn:c,centerX:h,centerY:u,tickDistance:p}=e,m=c?p/2:0,g=Pe(this.verticalAxisTheme.label),{visible:v,backgroundColor:f,borderRadius:b,borderColor:x,borderWidth:y,paddingX:S,paddingY:w}=this.verticalAxisTheme.label.textBubble,M=v?S:0,O=o+2*M-r,A=a+2*(v?w:0),k=this.verticalAxisTheme.label.color;return t.reduce((e,t,o)=>{const{x:a,y:p}=Qe(h,u,t-m,Ze(d)),v=function(e,t,i,s,n){return!(!t&&0===e)&&(!(e%i)&&(t&&s<=n||!t&&s<n))}(o,c,n,t,i);let S=a+r,w=a+r+M;return"center"===l?(S=a-r-O/2,w=a-r):D(["right","end"],l)&&(S=a-r-O,w=a-r-M),v?[...e,{type:"bubbleLabel",rotationPosition:{x:a,y:p},radian:Ze(d,0),bubble:{x:S,y:p-A/2,width:O,height:A,align:l,radius:b,fill:f,lineWidth:y,strokeStyle:x,style:this.getBubbleShadowStyle()},label:{text:s[o],x:w,y:p,style:[{font:g,fillStyle:k,textAlign:l,textBaseline:"middle"}]}}]:e},[])}renderDotModel(e){const{angle:{central:t,drawingStart:i},label:{labels:s,interval:n},radius:{outer:o},centerX:a,centerY:r,clockwise:l}=e,{dotColor:d}=this.circularAxisTheme;return s.reduce((e,s,c)=>{const h=i+t*c*(l?1:-1),{x:u,y:p}=Qe(a,r,o,Ze(nt(h)));return c%n==0?[...e,{type:"rect",color:d,width:4,height:4,x:u-2,y:p-2}]:e},[])}renderCircularAxisLabel(e){const{centerX:t,centerY:i,clockwise:s,label:{labels:n,interval:o,margin:a,maxHeight:r},angle:{drawingStart:l,central:d},radius:{outer:c}}=e,h=c+(a+r/2)*("gauge"===this.name?-1:1),u=this.circularAxisTheme.label,p=Pe(u),m=d*(s?1:-1);return n.reduce((e,s,n)=>{const a=nt(l+m*n);return n%o==0?[...e,Object.assign({type:"label",style:[{textAlign:"center",textBaseline:"middle",font:p,fillStyle:u.color}],text:s},Qe(t,i,h,Ze(a)))]:e},[])}renderTick(e){const{centerX:t,centerY:i,tickInterval:s,clockwise:n,angle:{central:o,drawingStart:a},label:{labels:r},radius:{outer:l}}=e,{strokeStyle:d,lineWidth:c}=this.circularAxisTheme.tick;return r.reduce((e,r,h)=>{const u=a+o*h*(n?1:-1),{x:p,y:m}=Qe(t,i,l-5,Ze(nt(u))),{x:g,y:v}=Qe(t,i,l+5,Ze(nt(u)));return h%s==0?[...e,{type:"line",lineWidth:c,strokeStyle:d,x:p,y:m,x2:g,y2:v}]:e},[])}renderArcLine(e){const{centerX:t,centerY:i,clockwise:s,angle:{start:n,end:o,total:a},radius:{outer:r}}=e,{strokeStyle:l,lineWidth:d}=this.circularAxisTheme;return a===Ue?[{type:"circle",x:t,y:i,radius:r,borderWidth:d,borderColor:l,color:"rgba(0, 0, 0, 0)"}]:[{type:"arc",borderWidth:d,borderColor:l,x:t,y:i,angle:{start:n,end:o},drawingStartAngle:qe,radius:r,clockwise:s}]}}class jr extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radar:i.series},categories:i.categories,modules:[Kn,So,di]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(la),this.componentManager.add(Dr),this.componentManager.add(Rr),this.componentManager.add(kr),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,l,o,h])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radar:i},categories:t})}setOptions(e){this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Br({height:e,width:t}){return e<t}function Lr(e,t){const{width:i,height:s}=t,n=function(e,t,i){return t*i/Ot(e)}(Pt(e,"data"),i,s);return e.map(e=>({id:e.id,weight:e.data*n})).sort((e,t)=>t.weight-e.weight)}function Pr(e,t,i,s){const n=e*e,o=s*s;return Math.max(o*i/n,n/(o*t))}function Er(e,t,i){if(!t){t=Ot(Pt(i,"weight"))}return t/e}function Wr(e,t,i,s){t.reduce((e,t)=>{const n=t.weight/i;return s(n,e,t.id),e+n},e)}function zr(e,t,i){e[t]=i}function Ir(e,t,i,s,n){const o=Er(s,n,t);Wr(i.y,t,o,(t,s,n)=>{zr(e,n,{x:i.x,y:s,width:o,height:t})}),i.x+=o,i.width-=o}function Yr(e,t,i,s,n){const o=Er(s,n,t);Wr(i.x,t,o,(t,s,n)=>{zr(e,n,{x:s,y:i.y,width:t,height:o})}),i.y+=o,i.height-=o}function Hr(e,t){const i=e,s=Lr(t,i);let n,o,a=[];const r={};return s.forEach(e=>{const t=Pt(a,"weight"),s=Ot(t);a.length&&function(e,t,i,s){const n=Math.min(...t),o=Math.max(...t),a=Pr(e,n,o,i);return Pr(e+s,Math.min(n,s),Math.max(o,s),i)>=a}(s,t,n,e.weight)&&(o(r,a,i,n,s),a=[]),a.length||(n=function(e){return Br(e)?e.height:e.width}(i),o=function(e){return Br(e)?Ir:Yr}(i)),a.push(e)}),a.length&&o(r,a,i,n),r}class Nr extends Et{constructor(){super(...arguments),this.models={series:[],layer:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({seriesIndex:e})=>{if(!w(e))return;const t=this.responders.find(({indexes:t})=>H(t)===e);if(!t)throw new Error(K);const i=this.getRespondersWithTheme([t],"select");this.eventBus.emit("renderSelectedSeries",{models:i,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e})=>{if(!w(e))return;const t=this.responders.find(({indexes:t})=>H(t)===e);t&&this.emitMouseEvent([t])}}initialize(){this.type="series",this.name="treemap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}getAllChildSeries(e,t){const i=[];return e.forEach(s=>{if(s.parentId===t&&(i.push(s),s.hasChild)){const t=this.getAllChildSeries(e,s.id);i.push(...t)}}),i}render(e){var t,i,s,n,o;const{layout:a,treemapSeries:r,colorValueScale:l,options:d,theme:c,treemapZoomId:h}=e;if(!r)throw new Error(Q(this.name));const u=h.cur,p=this.getAllChildSeries(r,u);if(this.theme=c.series.treemap,this.rect=a.plot,this.selectable=this.getSelectableOption(d),this.models=this.renderTreemapSeries(p,d,l,u),this.zoomable=null!=(i=null===(t=d.series)||void 0===t?void 0:t.zoomable)&&i,ia(d,this.name).visible){const e=null!=(o=null===(n=null===(s=d.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.useTreemapLeaf)&&o,t=this.makeDataLabel(e,u);this.renderDataLabels(t)}this.responders=this.makeTreemapSeriesResponder(u)}makeTreemapSeriesResponder(e){const t=this.makeTooltipData();let{series:i}=this.models;return this.zoomable&&(i=i.filter(({parentId:t})=>t===e)),i.map((e,i)=>Object.assign(Object.assign({},e),{data:t[i],thickness:tn,style:["shadow"]}))}makeTooltipData(){return this.models.series.map(({label:e,data:t,color:i})=>({label:e,color:i,value:t}))}makeBoundMap(e,t,i,s={}){const n=e.filter(e=>e.parentId===t);return s=Object.assign(Object.assign({},s),Hr(Object.assign({},i),n)),n.forEach(t=>{s=this.makeBoundMap(e,t.id,s[t.id],s)}),s}makeDataLabel(e,t){const i=e?this.models.series.filter(({hasChild:e})=>!e):this.models.series.filter(({parentId:e})=>e===t),s=this.theme.dataLabels;return i.map(e=>Object.assign(Object.assign({},e),{type:"treemapSeriesName",value:e.label,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},s),{color:s.useSeriesColor?e.color:s.color})}))}getColor(e,t){const{indexes:i}=e;return t[Y(i)]}getOpacity(e){const{indexes:t,depth:i}=e,s=H(t);return 1===t.length?0:Number((.1*i+.05*s).toFixed(2))}renderTreemapSeries(e,t,i,s){var n,o,a;let r=[];const l=this.makeBoundMap(e,s,Object.assign(Object.assign({},this.rect),{x:0,y:0})),{colors:d,startColor:c,endColor:h,borderWidth:u,borderColor:p}=this.theme;let m,g;const v=null!=(o=null===(n=t.series)||void 0===n?void 0:n.useColorValue)&&o;v&&c&&h&&(m=Te(c),g=Ya(m,Te(h)));const f=Object.keys(l).map(t=>{const s=e.find(e=>e.id===t);let n;return v&&(n=Ha(i.limit,s.colorValue)),Object.assign(Object.assign(Object.assign({},s),l[t]),{type:"rect",colorRatio:n,color:v?Na(n,g,m):this.getColor(s,d),opacity:v?0:this.getOpacity(s),thickness:u,borderColor:p})});return(null===(a=t.series)||void 0===a?void 0:a.useColorValue)||(r=f.map(e=>Object.assign(Object.assign({},e),{color:De("#000000",e.opacity)}))),{series:f,layer:r}}getRespondersWithTheme(e,t){return e.map(e=>P(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]})))}onClick({responders:e}){if(e.length)if(this.zoomable){const{id:t,hasChild:i}=e[0];i?(this.emitMouseEvent([]),this.store.dispatch("setTreemapZoomId",t),this.eventBus.emit("resetSelectedSeries")):this.selectable&&this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name})}else if(this.selectable){const t=Vo(e);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name})}}onMousemove({responders:e}){const t=Vo(e);this.activatedResponders=t,this.emitMouseEvent(t)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}class Xr extends Et{initialize(){this.type="backButton",this.name="backButton"}onClick({responders:e}){e.length&&(this.store.dispatch("zoomBack"),this.eventBus.emit("resetSelectedSeries"))}render({options:e,layout:t},i){ys(e)&&(this.rect=t.resetButton,this.isShow=i.isTreemapSeriesZooming,this.models=this.isShow?[{type:"backButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:24,height:24}]:[])}}class Fr extends _n{constructor(e){super({el:e.el,options:e.options,series:{treemap:e.data.series},modules:[Wa,za]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ia),this.componentManager.add(Nr),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(Xr),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,a,r,p])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addTreemapSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{treemap:e.series}})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Gr(e,t){return null!=t?t:e}class $r extends Et{constructor(){super(...arguments),this.models={rect:[],line:[],circle:[]},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"select");this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!w(e)||!w(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"hover");this.eventBus.emit("renderHoveredSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}}initialize(){this.type="series",this.name="boxPlot",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d}=e;if(!o.boxPlot)throw new Error(Q(this.name));(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=l.series.eventDetectType),this.theme=d.series.boxPlot,this.rect=s.plot,this.activeSeriesMap=Mn(r),this.selectable=this.getSelectableOption(l);const c=e.categories,{tickDistance:h}=n.xAxis,{min:u,max:p}=a.yAxis.limit,m=o.boxPlot.data,g=m.length,v=Object.assign({ratio:this.rect.height/(p-u),tickDistance:h},this.getBarWidths(h,g)),f=this.makeBoxPlots(m,v),b=this.renderSeriesModels(f);this.models=b,this.drawModels||(this.drawModels={rect:b.rect.map(e=>Object.assign(Object.assign({},e),{y:e.y+e.height,height:0})),line:b.line,circle:b.circle});const x=this.makeTooltipModel(m,c);this.tooltipRectMap=this.makeTooltipRectMap(f,x),this.responders="grouped"===this.eventDetectType?this.makeGroupedResponderModel(f):this.makeDefaultResponderModel(f,x)}makeTooltipRectMap(e,t){const i={};return e.forEach((e,s)=>{if(!y(e)){const n=`${e.name}-${e.index}`;i[n]||(i[n]=[]),i[n].push(Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[s]}))}}),i}makeGroupedResponderModel(e){const t=[];return e.forEach(e=>{const{type:i,index:s,name:n}=e,o=`${n}-${s}`;if("boxPlot"===i&&!t[o]){const{boxPlotDetection:i}=e;t.push(Object.assign(Object.assign({type:"rect",name:o},i),{y:0,height:this.rect.height}))}}),t}makeDefaultResponderModel(e,t){return e.map((e,i)=>Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[i],color:De(e.color,1)}))}makeHoveredModel(e){const t="boxPlot"===e.type&&e.rect?{x:e.rect.x,y:e.rect.y}:{x:e.x,y:e.y},i=Object.assign({},e);return"boxPlot"===e.type&&(["lowerWhisker","upperWhisker","maximum","minimum","median"].forEach(t=>{e[t]&&(e[t].detectionSize=3)}),e.color=De(i.color,1)),Object.assign(Object.assign({},i),t)}getResponderModelFromMap(e){if(!e.length)return[];const t=e[0].name;return this.tooltipRectMap[t]}onMousemove({responders:e}){if("grouped"===this.eventDetectType){const t=this.getResponderModelFromMap(e);this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}else this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e;this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?this.getRespondersWithTheme(this.getResponderModelFromMap(e),"select"):this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}renderSeriesModels(e){return e.reduce((e,t)=>{const{type:i,name:s}=t;return"boxPlot"===i?(e.rect.push(Object.assign({name:s},t.rect)),["maximum","minimum","median","upperWhisker","lowerWhisker"].forEach(i=>{e.line.push(Object.assign({name:s},t[i]))})):e.circle.push(Object.assign({},t)),e},{rect:[],line:[],circle:[]})}makeBoxPlots(e,t){const{ratio:i,barWidth:s}=t,n=[],o=e.length,{dot:a}=this.theme;return e.forEach(({outliers:e,data:r,name:l,color:d},c)=>{const h=this.getSeriesColor(l,d);(null!=r?r:[]).forEach((e,i)=>{if(!y(e)){const a=this.getStartX(c,i,t,o),r=this.getRect(e,a,h,t);n.push(Object.assign(Object.assign({type:"boxPlot",color:h,name:l,rect:r,median:this.getMedian(e,a,h,t),minimum:this.getMinimum(e,a,h,t),maximum:this.getMaximum(e,a,h,t)},this.getWhisker(e,a,h,t,r)),{index:i,boxPlotDetection:{x:a,width:s}}))}});const{color:u,radius:p,borderColor:m,borderWidth:g,useSeriesColor:v}=a;(null!=e?e:[]).forEach(e=>{const[a,r]=e,d=this.getStartX(c,a,t,o);n.push({type:"circle",name:l,x:d+s/2,y:this.getYPos(r,i),radius:p,style:[{strokeStyle:null!=m?m:h,lineWidth:g}],color:v?h:u,index:a})})}),n}makeTooltipModel(e,t){const i=[];return e.forEach(({outliers:e,data:s,name:n,color:o})=>{(null!=s?s:[]).forEach((e,s)=>{if(!y(e)){const a=[...e].reverse();i.push({label:n,color:o,value:["Maximum","Upper Quartile","Median","Lower Quartile","Minimum"].reduce((e,t,i)=>{const s=a[i];return y(s)?e:[...e,{title:t,value:s}]},[]),category:t[s],templateType:"boxPlot"})}}),(null!=e?e:[]).forEach(e=>{if(!y(e)){const[s,a]=e;i.push({label:n,color:o,value:[{title:"Outlier",value:a}],category:t[s],templateType:"boxPlot"})}})}),i}getStartX(e,t,i,s){const{tickDistance:n,barWidth:o}=i;return t*n+(e+1)*function(e,t,i){return(e-t*i)/(i+1)}(n,o,s)+o*e}getYPos(e,t,i){return w(i)?Ct(this.rect.height-e*t,i):this.rect.height-e*t}getBarWidths(e,t){const{barWidth:i,barWidthRatios:s}=this.theme,{barRatio:n,minMaxBarRatio:o}=s,a=Math.max((e-Ie(e)*(t-1+2))/t,5),r=i?V(e/t,i):a;return{barWidth:r*n,minMaxBarWidth:r*o}}getRespondersWithTheme(e,t){const{color:i,rect:s,dot:n,line:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}=this.theme[t],{whisker:c,median:h,maximum:u,minimum:p}=o,{color:m,radius:g,borderColor:v,borderWidth:f,useSeriesColor:b}=n;return e.map(e=>{const{type:t,data:n}=e;let o,x=e.color;if("circle"===t)x=n.color,o=Object.assign(Object.assign({},e),{radius:g,color:b?x:m,style:[{strokeStyle:Gr(x,v),lineWidth:f}]});else{const{rect:t,upperWhisker:n,lowerWhisker:m,median:g,maximum:v,minimum:f}=e;o=Object.assign(Object.assign({},e),{rect:Object.assign(Object.assign({},t),{color:null!=i?i:De(x,1),thickness:s.borderWidth,borderColor:s.borderColor,style:[{shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}]}),upperWhisker:Object.assign(Object.assign({},n),{strokeStyle:Gr(x,c.color),lineWidth:c.lineWidth}),lowerWhisker:Object.assign(Object.assign({},m),{strokeStyle:Gr(x,c.color),lineWidth:c.lineWidth}),median:Object.assign(Object.assign({},g),{strokeStyle:Gr(x,h.color),lineWidth:h.lineWidth}),maximum:Object.assign(Object.assign({},v),{strokeStyle:Gr(x,u.color),lineWidth:u.lineWidth}),minimum:Object.assign(Object.assign({},f),{strokeStyle:Gr(x,p.color),lineWidth:p.lineWidth})})}return o})}getRect(e,t,i,{barWidth:s,ratio:n}){const{rect:o}=this.theme,[,a,,r]=e;return{type:"rect",x:t,y:this.getYPos(r,n),width:s,height:(r-a)*n,thickness:o.borderWidth,borderColor:o.borderColor,color:i}}getWhisker(e,t,i,{barWidth:s,ratio:n},o){const[a,,,,r]=e,{lineWidth:l,color:d}=this.theme.line.whisker,c=Ct(t+s/2,l);return{upperWhisker:{type:"line",x:c,y:this.getYPos(r,n,l),x2:c,y2:o.y,strokeStyle:null!=d?d:i,lineWidth:l},lowerWhisker:{type:"line",x:c,y:this.getYPos(a,n,l),x2:c,y2:Ct(o.y+o.height,l),strokeStyle:null!=d?d:i,lineWidth:l}}}getMedian(e,t,i,{barWidth:s,ratio:n}){const o=e[2],{lineWidth:a,color:r}=this.theme.line.median;return{type:"line",x:Ct(t,a),y:this.getYPos(o,n,a),x2:Ct(t+s,a),y2:this.getYPos(o,n,a),strokeStyle:null!=r?r:i,lineWidth:a}}getMinimum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[0],{lineWidth:r,color:l}=this.theme.line.minimum;return{type:"line",x:Ct(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Ct(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getMaximum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[4],{lineWidth:r,color:l}=this.theme.line.maximum;return{type:"line",x:Ct(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Ct(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some(e=>!e),a=n?i.areaOpacity:i.restSeries.areaOpacity;return De(t,o?a:s)}}function Vr(e,t){const{rect:i,upperWhisker:s,lowerWhisker:n,median:o,minimum:a,maximum:r}=t;a&&ct(e,Object.assign({type:"line"},a)),n&&ct(e,Object.assign({type:"line"},n)),i&&ht(e,Object.assign({type:"rect"},i)),s&&ct(e,Object.assign({type:"line"},s)),r&&ct(e,Object.assign({type:"line"},r)),o&&ct(e,Object.assign({type:"line"},o))}class _r extends _n{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{boxPlot:i},categories:s,modules:[Kn,So,$i,Ao]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Ho),this.componentManager.add(la),this.componentManager.add($r),this.componentManager.add(zt,{name:"yAxis"}),this.componentManager.add(zt,{name:"xAxis"}),this.componentManager.add(ha,{name:"xAxis"}),this.componentManager.add(ha,{name:"yAxis"}),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,o,v,c,s,u])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addOutlier(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addOutlier",{seriesIndex:e,outliers:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{boxPlot:i},categories:t})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class Ur extends Et{constructor(){super(...arguments),this.models={},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{var t;const{index:i,seriesIndex:s}=e;if(!(w(i)&&("grouped"===this.eventDetectType||w(s))))return;const n="grouped"===this.eventDetectType?[...this.getGroupedSector([this.responders[i]],"select"),...this.getRadialBarSectorModelsFromResponders([this.responders[i]])]:null!=(t=this.getResponderModelsWithTheme([this.tooltipSectorMap[i][s]],"select"))?t:[];if(!n.length)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!yn(e,this.eventDetectType,"radialBar"))return;const s="grouped"===this.eventDetectType?this.getGroupedSector([this.responders[t]],"hover"):this.getResponderModelsWithTheme([this.tooltipSectorMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipSectorMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;const{angle:{start:t,total:i}}=this.circularAxis;let s;Object.keys(this.models).forEach(n=>{const o=this.models[n].findIndex(({clockwise:n,degree:{start:o,end:a}})=>(s=n?t+i*e:t-i*e,et(n,o,a,s)));this.syncEndAngle(o<0?this.models[n].length:o,n),-1!==o&&(this.drawModels[n][o].degree.end=s)})}syncEndAngle(e,t){if(!(e<1))for(let i=0;i<e;i+=1){const e=this.models[t][i].degree.end;this.drawModels[t][i].degree.end!==e&&(this.drawModels[t][i].degree.end=e)}}initialize(){this.type="series",this.name="radialBar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,series:n,legend:o,options:a,theme:r,stackSeries:l,scale:d,radialAxes:c}=e,h=null!=(t=e.categories)?t:[];if(!n.radialBar||!l.radialBar)throw new Error(Q(this.name));this.theme=r.series.radialBar,this.rect=s.plot,this.activeSeriesMap=Mn(o),this.selectable=this.getSelectableOption(a),this.setEventDetectType(a);const u=h.reduce((e,t)=>(e[t]||(e[t]=[]),e),{}),p=n.radialBar.data;this.circularAxis=c.circularAxis;const m=c.verticalAxis,g=this.makeRenderOptions(m,d.circularAxis,null===(i=a)||void 0===i?void 0:i.series),{categoryMap:v,seriesModels:f}=this.makeSeriesModelData(p,l.radialBar.stackData,g,u),b=this.makeTooltipData(f,h);if(this.models=v,this.drawModels||this.initDrawModels(v),ia(a,this.name).visible){const e=f.reduce((e,t)=>[...e,Object.assign(Object.assign({},t),{type:"sector",theme:this.theme.dataLabels})],[]);this.renderDataLabels(e)}this.tooltipSectorMap=this.makeTooltipSectorMap(f,b),this.responders=this.makeResponders(m.radius.ranges,f,g,h,b)}initDrawModels(e){this.drawModels={},Object.keys(e).forEach(t=>{this.drawModels[t]=e[t].map(e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})}))})}makeResponders(e,t,i,s,n){return"grouped"===this.eventDetectType?function(e,t,i){const{centerX:s,centerY:n,angleRange:{start:o,end:a},clockwise:r}=t;return st(e,0).map((e,t)=>({type:"sector",x:s,y:n,degree:{start:o,end:a},radius:e,name:i[t],clockwise:r,index:t}))}(e,i,s):t.map((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign({},n[t])}))}makeTooltipSectorMap(e,t){return e.reduce((e,i,s)=>{const n=i.index;return e[n]||(e[n]=[]),e[n].push(Object.assign(Object.assign({},i),{data:Object.assign({},t[s])})),e},{})}setEventDetectType(e){var t,i;(null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=e.series.eventDetectType)}getBarWidth(e,t){const{barWidth:i}=this.theme;return i?Math.min(e,V(t,i)):e-10}makeRenderOptions({axisSize:e,centerX:t,centerY:i,tickDistance:s,radius:{ranges:n},angle:{start:o,end:a}},r,l){var d,c;const{limit:{max:h},stepSize:u}=r,p=null==(c=null===(d=l)||void 0===d?void 0:d.clockwise)||c,m=Kt(p,o,a),g=this.getBarWidth(s,e),v=h+(m<Ue?0:u);return{clockwise:p,centerX:t,centerY:i,radiusRanges:st(n,(s-g)/2),angleRange:{start:o,end:a},totalAngle:m,scaleMaxLimitValue:v,startAngle:o}}makeSeriesModelData(e,t,i,s){const{clockwise:n,centerX:o,centerY:a,radiusRanges:r,totalAngle:l,scaleMaxLimitValue:d,startAngle:c}=i,h=c,{lineWidth:u,strokeStyle:p}=this.theme,m=[],g=Object.keys(s),v=W(s);return t.forEach(({values:t},i)=>{const{inner:s,outer:c}=r[i];t.forEach((t,r)=>{if(!y(t)){const f=Math.max(t/d*l,1)*(n?1:-1),b=m[m.length-1],x=r&&b?b.degree.end:h,y=n?Math.min(x+f,Ue):Math.max(x+f,0),{name:S,color:w}=e[r],M={type:"sector",name:S,color:this.getSeriesColor(S,w),x:o,y:a,degree:{start:x,end:y},radius:{inner:s,outer:c},value:t,style:[{strokeStyle:p}],lineWidth:u,clockwise:n,totalAngle:l,seriesColor:w,seriesIndex:r,index:i,drawingStartAngle:qe};v[g[i]].push(M),m.push(M)}})}),{seriesModels:m,categoryMap:v}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return De(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}makeTooltipData(e,t){const i=[];return e.forEach(({seriesColor:e,name:s,value:n,index:o})=>{y(n)||i.push({label:s,color:e,value:n,category:w(o)?t[o]:""})}),i}makeTooltipResponder(e){const t=Object.keys(this.models);return e.map(e=>Object.assign(Object.assign({},e),Je(Ke("center",this.models[t[e.index]].find(({name:t})=>t===e.name)))))}getRadialBarSectorModelsFromResponders(e){var t;return e.length?null!=(t=this.tooltipSectorMap[e[0].index])?t:[]:[]}getGroupedSector(e,t){const i=this.getRadialBarSectorModelsFromResponders(e),{color:s,opacity:n}=this.theme[t].groupedSector;return i.length?e.map(e=>Object.assign(Object.assign({},e),{color:De(s,n)})):[]}onMousemoveGroupedType(e){const t=this.getRadialBarSectorModelsFromResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedSector(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.name}),this.activatedResponders=this.makeTooltipResponder(e)),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedSector(e,"select"),...this.getRadialBarSectorModelsFromResponders(e)]:this.getResponderModelsWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map(e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[R(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})})}}class qr extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radialBar:i.series},categories:i.categories,modules:[bo,Kn,So,di]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(la),this.componentManager.add(Dr),this.componentManager.add(Ur),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(Rr),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,m,a,o])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radialBar:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Kr({labels:e,intervalData:t,circularAxisLabelMargin:i,circularAxisLabelFont:s,defaultAxisData:n,bandWidth:o,options:a,solidBarWidth:r}){var l,d,c,h;const{maxLabelWidth:u,maxLabelHeight:p}=ji(e,i,s),{totalAngle:m,axisSize:g,centerX:v,centerY:f,startAngle:b,endAngle:x,drawingStartAngle:y,clockwise:S}=n,{tickInterval:w,labelInterval:M}=t,O=g-o-10,k=function(e,t,i){const s=null!=i&&i,n=V(e,t),o={visible:!0,radiusRange:{inner:e-n,outer:e},barWidth:n,clockHand:!1};return s?A(s)?Object.assign(Object.assign({},o),s):o:Object.assign(Object.assign({},o),{visible:!1})}(O-i-p-(i-5),null!=r?r:.1*O,null===(d=null===(l=a)||void 0===l?void 0:l.series)||void 0===d?void 0:d.solid);return{axisSize:g,centerX:v,centerY:f,label:{labels:e,interval:M,margin:i,maxWidth:u,maxHeight:p},radius:{inner:0,outer:O},angle:{start:b,end:x,total:m,central:m/(e.length+(m<Ue?-1:0)),drawingStart:y},band:{width:o,margin:10},tickInterval:w,clockwise:S,maxClockHandSize:O-i-p-10+(k.visible?-k.barWidth-10:0),title:Ci(null===(h=null===(c=a)||void 0===c?void 0:c.circularAxis)||void 0===h?void 0:h.title),solidData:k}}function Zr(e,t,i){var s,n,o;const a=null!=(o=null===(n=null===(s=e[i])||void 0===s?void 0:s.label)||void 0===n?void 0:n.formatter)?o:e=>e;return t.map((e,s)=>a(e,{index:s,labels:t,axisName:i}))}var Jr={name:"gaugeAxes",state:()=>({radialAxes:{circularAxis:{}}}),action:{setCircularAxisData({state:e}){var t,i,s,n,o,a,r,l,d,c,h,u,p;const{series:m,layout:g,scale:v}=e,f=e.categories,{plot:b}=g,x=hi({series:m,categories:f}),y=e.options,S=e.theme,w=Pe(S.circularAxis.label),M=function(e){var t,i,s,n;return null!=(n=null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.circularAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.margin)?n:15}(y),O=function(e,t,i,s){const n=e?oi.CIRCULAR:oi.VERTICAL,{limit:o,stepSize:a}=s[n],r=Zr(t,At(o,a),n),l=Zr(t,i,e?oi.VERTICAL:oi.CIRCULAR);return e?r:l}(x,y,f,v),{maxLabelWidth:A,maxLabelHeight:k}=ji(O,M,w),C=Pi(y,b,A,k,x),T=bt(Pe(S.series.gauge.dataLabels)),D=null!=(n=null===(s=null===(i=null===(t=y)||void 0===t?void 0:t.series)||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.offsetY)?n:30;if(C.isSemiCircular){C.centerY=C.centerY-(D>0?D+T:0);const e=C.centerY-C.axisSize;C.axisSize+=e<0?e:0}const R=(null===(r=null===(a=null===(o=y)||void 0===o?void 0:o.plot)||void 0===a?void 0:a.bands)||void 0===r?void 0:r.length)?C.axisSize/2-10:0,j=null!=(c=null===(d=null===(l=S.plot)||void 0===l?void 0:l.bands)||void 0===d?void 0:d.barWidth)?c:R,B=Kr({labels:O,intervalData:Li(!0,{axis:y.circularAxis,categories:f,layout:g}),defaultAxisData:C,circularAxisLabelMargin:M,circularAxisLabelFont:w,bandWidth:j,options:y,solidBarWidth:null===(u=null===(h=S.series.gauge)||void 0===h?void 0:h.solid)||void 0===u?void 0:u.barWidth});(function(e,t){var i,s,n,o;const a=null===(s=null===(i=e)||void 0===i?void 0:i.label)||void 0===s?void 0:s.maxWidth,r=null===(o=null===(n=e)||void 0===n?void 0:n.label)||void 0===o?void 0:o.maxHeight,l=t.label.maxWidth;return r!==t.label.maxHeight||a!==l})(null===(p=e.radialAxes)||void 0===p?void 0:p.circularAxis,B)&&this.notify(e,"layout"),e.radialAxes={circularAxis:B}},addGaugePlotBand({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[];wo(o,t)||this.dispatch("updateOptions",{options:{plot:{bands:[...o,t]}}})},removeGaugePlotBand({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands,null!=n?n:[]).filter(({id:e})=>e!==t);this.dispatch("updateOptions",{options:{plot:{bands:o}}})}},observe:{updateRadialAxes(){this.dispatch("setCircularAxisData")}}};class Qr extends Et{constructor(){super(...arguments),this.models={clockHand:[],solid:[],backgroundSolid:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{var t;const{index:i}=e;if(!w(i))return;const s=null!=(t=this.tooltipMap.clockHand[i])?t:this.tooltipMap.solid[i];if(!s)return;const n=this.getResponderModelsWithTheme(this.getResponderModels([s]),"select");if(!n.length)throw new Error(K);this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t}=e,i=this.getResponderModelsWithTheme([this.tooltipMap.clockHand[t]],"hover");i.length&&(this.eventBus.emit("renderHoveredSeries",{models:i,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="gauge",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){if(!this.drawModels)return;const{angle:{start:t,total:i},clockwise:s}=this.circularAxis,n=s?t+i*e:t-i*e;this.models.clockHand.forEach((e,t)=>{const{x:i,y:o,animationDegree:a,handSize:r}=e;if(s&&a<n||!s&&a>n)return void this.syncEndAngle(t);const{x:l,y:d}=Qe(i,o,r,Ze(nt(n)));this.drawModels.clockHand[t].x2=l,this.drawModels.clockHand[t].y2=d}),this.models.solid.forEach(()=>{const e=this.models.solid.findIndex(({animationDegree:e})=>{const{start:t,end:i}=e;return et(s,t,i,n)});this.syncSectorEndAngle(e<0?this.models.solid.length:e),-1!==e&&(this.drawModels.solid[e].degree.end=nt(n))})}updateModels(e,t,i){const{angle:{total:s}}=this.circularAxis;Object.keys(e).forEach(n=>{e&&t&&"_"!==n[0]&&(w(e[n])?e[n]=e[n]+(t[n]-e[n])*i:"degree"===n?s<Ue&&e.degree.end<90?e[n].end=Ue+e[n].end-(Ue-t[n].end+e[n].end)*i:e[n].end=e[n].end+(t[n].end-e[n].end)*i:e[n]=t[n])})}update(e){this.models.clockHand.forEach((t,i)=>{this.updateModels(this.drawModels.clockHand[i],t,e)}),this.models.solid.forEach((t,i)=>{this.updateModels(this.drawModels.solid[i],t,e)})}syncEndAngle(e){const t=this.models.clockHand[e],i=this.drawModels.clockHand[e];t.x2===i.x2&&t.y2===i.y2||(i.x2=t.x2,i.y2=t.y2)}syncSectorEndAngle(e){if(e)for(let t=0;t<e;t+=1){const e=this.models.solid[t].degree.end;this.drawModels.solid[t].degree.end!==e&&(this.drawModels.solid[t].degree.end=e)}}render(e){var t,i;const{layout:s,series:n,legend:o,options:a,theme:r,scale:l,radialAxes:d}=e,c=null!=(t=e.categories)?t:[];if(!n.gauge)throw new Error(Q(this.name));this.theme=r.series.gauge,this.rect=s.plot,this.circularAxis=d.circularAxis,this.activeSeriesMap=Mn(o),this.selectable=this.getSelectableOption(a);const h=n.gauge.data,u=!hi({series:n,categories:c}),p=this.makeRenderOptions(u,c,l,null===(i=a)||void 0===i?void 0:i.series),m=this.renderClockHands(h,p);this.models.clockHand=p.useClockHand?m:[];const g=this.renderSolidModels(h,m,p),v=this.makeTooltipData(m);if(this.drawModels||this.initDrawModels(),ia(a,this.name).visible){const{value:e,name:t,x:i,y:s,seriesData:n}=m[0];this.renderDataLabels([{type:"point",theme:this.theme.dataLabels,value:e,name:t,x:i,y:s+30,data:n}])}this.tooltipMap=this.makeTooltipMap(v,p),this.responders=this.getResponders(m,g,v,p.useClockHand)}renderSolidModels(e,t,i){let s=[];return this.models.clockHand=i.useClockHand?t:[],i.solidData.visible&&(s=this.renderSectors(e,i),this.models.backgroundSolid=this.renderBackgroundSolid(i),this.models.solid=s),s}initDrawModels(){const{angle:{start:e}}=this.circularAxis;this.drawModels={clockHand:this.models.clockHand.map(t=>{const{x:i,y:s}=Qe(t.x,t.y,t.handSize,Ze(e));return Object.assign(Object.assign({},t),{x2:i,y2:s,testDegree:0})}),backgroundSolid:this.models.backgroundSolid,solid:this.models.solid.map(e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})}))}}getResponders(e,t,i,s=!0){const n=s?e.map((e,t)=>Object.assign(Object.assign({},e),{detectionSize:e.baseLine+3,data:Object.assign({},i[t])})):[];return t.length?[...t.map((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign({},i[t])})),...n]:n}getHandSize(e,t=0){const i=this.circularAxis.maxClockHandSize;return e?Array.isArray(e)?V(i,e[t]):V(i,e):i}renderClockHands(e,t){const{centerX:i,centerY:s,totalAngle:n,clockwise:o,scaleMaxLimitValue:a,categories:r,drawingStartAngle:l}=t,d=[],{size:c,baseLine:h,color:u}=this.theme.clockHand,{radius:p,color:m,borderWidth:g,borderColor:v}=this.theme.pin;return e.forEach(({name:e,data:t,color:f},b)=>{const x=this.getSeriesColor(e,f);t.forEach((f,y)=>{const S=M(f)?r.findIndex(e=>e===f):f,w=l+S/a*n*(o?1:-1),O=nt(w),A=this.getHandSize(c,y),{x:k,y:C}=Qe(i,s,A,Ze(O));d.push({type:"clockHand",color:null!=u?u:x,name:e,value:f,x:i,y:s,x2:k,y2:C,pin:{radius:p,color:null!=m?m:x,style:[{strokeStyle:null!=v?v:De(x,.1),lineWidth:g?g+p:0}]},degree:O,animationDegree:w,baseLine:h,handSize:A,seriesData:t,index:y,seriesIndex:b})})}),d}renderBackgroundSolid(e){const{centerX:t,centerY:i,startAngle:s,totalAngle:n,clockwise:o,solidData:a}=e,{color:r}=this.theme.solid.backgroundSolid;return[{type:"sector",color:r,x:t,y:i,clockwise:o,degree:{start:s,end:s+n},radius:a.radiusRange}]}renderSectors(e,t){const i=[],{centerX:s,centerY:n,clockwise:o,totalAngle:a,scaleMaxLimitValue:r,startAngle:l,categories:d,solidData:c}=t,{radiusRange:h}=c,{lineWidth:u,strokeStyle:p}=this.theme.solid;return e.forEach(({name:e,data:t,color:c},m)=>{const g=this.getSeriesColor(e,c),v=t[0],f=(M(v)?d.findIndex(e=>e===v):v)/r*a*(o?1:-1),b=nt(f),x=l,y=x+f,S=l,w=S+b;i.push({type:"sector",color:g,x:s,y:n,clockwise:o,degree:{start:x,end:y},radius:h,animationDegree:{start:S,end:w},drawingStartAngle:qe,style:[{strokeStyle:p}],lineWidth:u,index:m})}),i}makeTooltipMap(e,t){const{clockHand:i,solid:s}=this.models,{useClockHand:n}=t;return e.reduce((e,t,o)=>(n&&e.clockHand.push(Object.assign(Object.assign({},i[o]),{detectionSize:i[o].baseLine+3,data:t})),s[o]&&e.solid.push(Object.assign(Object.assign({},s[o]),{data:t})),e),{solid:[],clockHand:[]})}makeRenderOptions(e,t,i,s){var n,o;const{centerX:a,centerY:r,solidData:l,angle:{start:d,end:c,drawingStart:h},radius:{outer:u}}=this.circularAxis,p=this.circularAxis.solidData,m=null==(o=null===(n=s)||void 0===n?void 0:n.clockwise)||o,g=Kt(m,d,c);return{clockwise:m,centerX:a,centerY:r,angleRange:{start:d,end:c},totalAngle:g,scaleMaxLimitValue:e?t.length:Cr(i.circularAxis,g),startAngle:d,categories:t,drawingStartAngle:h,outerRadius:u,useClockHand:!p.visible||p.clockHand,solidData:l}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return De(t,Object.values(this.activeSeriesMap).some(e=>!e)?n?i.areaOpacity:i.restSeries.areaOpacity:s)}makeTooltipData(e){return e.reduce((e,{color:t,name:i,value:s,index:n,seriesIndex:o})=>y(s)?e:[...e,{label:i,color:t,value:s,index:n,seriesIndex:o}],[])}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(this.getResponderModels(e),"hover"),name:this.name}),this.activatedResponders=e.map(e=>Object.assign({},e)),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getResponderModels(e){const{clockHand:t,solid:i}=this.tooltipMap;return e.reduce((e,s)=>{const n=s.index;return[...e,...t[n]?[t[n]]:[],...i[n]?[i[n]]:[]]},[])}onClick({responders:e}){if(this.selectable){const t=this.getResponderModelsWithTheme(this.getResponderModels(e),"select");this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name}),this.eventBus.emit("needDraw")}}getResponderModelsWithSolidTheme(e,t){var i;const s=this.theme[t].solid,n=s.lineWidth,o=this.theme.solid===n?0:.5*n;return Object.assign(Object.assign({},e),{color:(i=s.color,null!=i?i:e.color),lineWidth:n,style:[R(s,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-o,0),outer:e.radius.outer+o}})}getResponderWithClockHandTheme(e,t){const{clockHand:i,pin:s}=this.theme[t],{size:n,baseLine:o,color:a}=i,{radius:r,color:l,borderWidth:d,borderColor:c}=s,h=null!=r?r:e.pin.radius,u=[{strokeStyle:null!=c?c:De(e.pin.style[0].strokeStyle,.3),lineWidth:d?d+h:0}];return Object.assign(Object.assign({},e),{color:null!=a?a:e.color,pin:{radius:h,color:null!=l?l:e.pin.color,style:u},baseLine:null!=o?o:e.baseLine,handSize:n?this.getHandSize(n,e.index):e.handSize})}getResponderModelsWithTheme(e,t){return e.map(e=>{var i;return"sector"===(null===(i=e)||void 0===i?void 0:i.type)?this.getResponderModelsWithSolidTheme(e,t):this.getResponderWithClockHandTheme(e,t)})}}function el(e){const{x:t,y:i,x2:s,y2:n,degree:o,baseLine:a}=e,r=a/2;let l,d;return t===s?(l={x:t-r,y:i},d={x:t+r,y:i}):i===n?(l={x:t,y:i-r},d={x:t,y:i+r}):(l=Qe(t,i,r,Ze(nt(o+90))),d=Qe(t,i,r,Ze(nt(o-90)))),[l,{x:s,y:n},d]}function tl(e,t){const{color:i,x:s,y:n,pin:{color:o,radius:a,style:r}}=t;dt(e,{type:"circle",x:s,y:n,radius:a,color:o,style:r}),Ys(e,{type:"polygon",color:i,lineWidth:1,fillColor:i,points:el(t)})}class il extends _n{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{gauge:i.series},categories:i.categories,modules:[Kn,So,Jr]})}initialize(){super.initialize(),this.componentManager.add(xa),this.componentManager.add(ua),this.componentManager.add(Dr,{name:"gauge"}),this.componentManager.add(Rr,{name:"gauge"}),this.componentManager.add(ha,{name:"circularAxis"}),this.componentManager.add(Qr),this.componentManager.add(ga),this.componentManager.add(ba),this.componentManager.add(ca),this.componentManager.add(is,{chartEl:this.el}),this.componentManager.add(zo,{chartEl:this.el}),this.componentManager.add(ya),this.painter.addGroups([n,c,s,u,m,a,o,f])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}addData(e,t){this.resetSeries(),this.animationControlFlag.updating=!0,this.store.dispatch("addData",{data:e,category:t})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{gauge:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}addPlotBand(e){this.store.dispatch("addGaugePlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removeGaugePlotBand",{id:e})}}class sl{}sl.lineChart=e=>new ka(e),sl.areaChart=e=>new Ua(e),sl.barChart=e=>new lr(e),sl.boxPlotChart=e=>new _r(e),sl.columnChart=e=>new dr(e),sl.pieChart=e=>new Ra(e),sl.heatmapChart=e=>new Ga(e),sl.bubbleChart=e=>new vr(e),sl.scatterChart=e=>new fr(e),sl.bulletChart=e=>new Sr(e),sl.radarChart=e=>new jr(e),sl.treemapChart=e=>new Fr(e),sl.nestedPieChart=e=>new Mr(e),sl.lineAreaChart=e=>new Za(e),sl.lineScatterChart=e=>new Ka(e),sl.columnLineChart=e=>new hr(e),sl.radialBarChart=e=>new qr(e),sl.gaugeChart=e=>new il(e)}}]);